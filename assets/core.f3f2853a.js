(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1285:function(e,t,r){"use strict";var n=r(0),s=r.n(n),a=r(37);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c={MORBID:0,MAJOR:1,MEDIUM:2,MINOR:3,IGNORE:void 0};class l{constructor(e){this.icon="",this.content="",this.why="",this.severity=c.MEDIUM,Object.keys(e||{}).forEach(t=>{this[t]=e[t]})}}class u extends l{constructor(e){super(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({tiers:{},value:0,matcher:a.i},e))}get severity(){return this.matcher(this.tiers,this.value)}set severity(e){}}var d=r(2),h=r(8),m=r(25),p=r(1275),g=r(212),b=(r(128),r(1301)),f=r.n(b),y=r(28);function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const E={[c.MORBID]:{content:s.a.createElement(h.Trans,{id:"core.suggestions.severity.morbid"}),color:"black",icon:"times"},[c.MAJOR]:{content:s.a.createElement(h.Trans,{id:"core.suggestions.severity.major"}),color:"red",icon:"arrow up"},[c.MEDIUM]:{content:s.a.createElement(h.Trans,{id:"core.suggestions.severity.medium"}),color:"orange"},[c.MINOR]:{content:s.a.createElement(h.Trans,{id:"core.suggestions.severity.minor"}),color:"blue",icon:"arrow down"}};let _=class extends s.a.Component{constructor(){super(...arguments),this.onToggleShowMinor=(e,t)=>{const{settingsStore:r}=this.context;r.setShowMinorSuggestions(t.checked)}}render(){const e=this.context.settingsStore.showMinorSuggestions,t=this.props.suggestions.filter(t=>e||t.severity!==c.MINOR),r=this.props.suggestions.some(e=>e.severity===c.MINOR);return s.a.createElement(s.a.Fragment,null,r&&s.a.createElement(p.a,{toggle:!0,label:s.a.createElement("label",null,s.a.createElement(h.Trans,{id:"core.suggestion.show-minor"})),defaultChecked:e,onChange:this.onToggleShowMinor,className:f.a.checkbox}),s.a.createElement("div",{className:f.a.items},t.map((e,t)=>s.a.createElement("div",{key:t,className:f.a.item},s.a.createElement("img",{src:e.icon,alt:""}),s.a.createElement("div",null,e.content,s.a.createElement("div",{className:f.a.extra},s.a.createElement(g.a,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({horizontal:!0},E[e.severity])),e.why)))),0===t.length&&s.a.createElement("div",{className:f.a.item},s.a.createElement("div",null,s.a.createElement("strong",null,s.a.createElement(h.Trans,{id:"core.suggestion.nothing"})),s.a.createElement("br",null),r&&s.a.createElement(h.Trans,{id:"core.suggestion.nothing-but-minor"})))))}};_.contextType=y.a,_=Object(d.b)([m.b],_);var w=_,j=r(23),C=r(217);class k extends j.c{constructor(){super(...arguments),this._suggestions=[]}add(e){e instanceof l?this._suggestions.push(e):console.error("TODO: Proper error message for passing a non-suggestion to the suggestion add handler")}output(){if(0===this._suggestions.length)return!1;const e=this._suggestions.filter(e=>e.severity!==c.IGNORE).sort((e,t)=>e.severity-t.severity);return s.a.createElement(w,{suggestions:e})}}k.handle="suggestions",k.displayOrder=C.a.SUGGESTIONS,k.displayMode=j.a.FULL,k.title={id:"core.suggestions.title",defaults:"Suggestions"},r.d(t,"d",(function(){return k})),r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return c})),r.d(t,"c",(function(){return u}))},1286:function(e,t,r){"use strict";var n=r(0),s=r.n(n),a=r(1295),o=r(37),i=r(23);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u={SUCCESS:2,WARN:1,FAIL:void 0},d=95;class h{constructor(e){this.name="",this.description=null,this.requirements=[],this.target=d,this.displayOrder=i.b.DEFAULT,Object.keys(e||{}).forEach(t=>{this[t]=e[t]})}get tier(){return Object(o.i)({[this.target]:u.SUCCESS},this.percent)}get percent(){const e=this.requirements.map(e=>e.percent);return e.length?a.a.mean(e):0}}class m extends h{constructor(e){super(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({tiers:{},matcher:o.i},e))}get tier(){return this.matcher(this.tiers,this.percent)}}var p=r(93),g=r(1274),b=r(1474),f=r(1306),y=r.n(f);const O={[u.SUCCESS]:{text:"text-success",color:"green",icon:"checkmark",autoExpand:!1},[u.WARN]:{text:"text-warning",color:"yellow",icon:"warning sign",autoExpand:!0},[u.FAIL]:{text:"text-error",color:"red",icon:"remove",autoExpand:!0}};class v extends n.Component{render(){const{rules:e}=this.props;if(!e.length)return!1;const t=[],r=e.map((e,r)=>{const n=O[e.tier];let a=e.percent;return a=Math.min(a,100),n.autoExpand&&t.push(r),{key:r,title:{className:y.a.title,content:s.a.createElement(s.a.Fragment,null,s.a.createElement(p.a,{name:n.icon,className:n.text}),e.name,s.a.createElement("div",{className:y.a.percent+" "+n.text},a.toFixed(1),"%",s.a.createElement(g.a,{percent:a,className:y.a.progress,size:"small",color:n.color})))},content:{content:s.a.createElement(s.a.Fragment,null,e.description&&s.a.createElement("div",{className:y.a.description},s.a.createElement(p.a,{name:"info",size:"large"}),s.a.createElement("p",null,e.description)),s.a.createElement("ul",null,e.requirements.map((e,t)=>s.a.createElement("li",{key:t},e.name,": ",e.content))))}}});return s.a.createElement(b.a,{exclusive:!1,panels:r,defaultActiveIndex:t,styled:!0,fluid:!0})}}var E=v,_=r(217);class w extends i.c{constructor(){super(...arguments),this._rules=[]}add(e){e instanceof h?this._rules.push(e):console.error("TODO: This error message")}output(){const e=[...this._rules];return e.sort((e,t)=>e.displayOrder-t.displayOrder),s.a.createElement(E,{rules:e})}}w.handle="checklist",w.title={id:"core.checklist.title",defaults:"Checklist"},w.displayOrder=_.a.CHECKLIST,w.displayMode=i.a.FULL;class j{constructor(e){this.name="",this._percent=null,this.value=null,this.target=100,this.overrideDisplay=null,Object.keys(e||{}).forEach(t=>{this[t]=e[t]})}get content(){return null!==this.overrideDisplay?this.overrideDisplay:null!==this._percent||null===this.value?"".concat(this.percent.toFixed(2),"%"):"".concat(this.value.toFixed(0),"/").concat(this.target.toFixed(0))}get percent(){return null===this._percent?null===this.value?0:100*(("function"==typeof this.value?this.value():this.value)||0)/this.target:("function"==typeof this._percent?this._percent():this._percent)||0}set percent(e){this._percent=e}}r.d(t,"e",(function(){return w})),r.d(t,"b",(function(){return h})),r.d(t,"d",(function(){return m})),r.d(t,"c",(function(){return u})),r.d(t,"a",(function(){return j}))},1287:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(4),s=r.n(n),a=r(17),o=r(55),i=r(14),c=r(0),l=r.n(c),u=r(1300),d=r.n(u);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class p extends c.Component{render(){const{events:e}=this.props;return l.a.createElement("div",{className:d.a.container},e.map((e,t)=>{const r=Object(o.a)(i.b,"id",e.ability.guid);if(!r||r.autoAttack)return;if(!r.icon)return console.error(e,"event ability has no icon"),!1;const n=[d.a.link,{[d.a.ogcd]:!r.onGcd}],c=r.onGcd?d.a.gcdSize:d.a.ogcdSize,u=r.id>=i.a?a.b:a.a;return l.a.createElement("div",{key:t,className:s()(...n)},l.a.createElement(u,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({showName:!1,iconSize:c},r)))}))}}},1289:function(e,t,r){"use strict";var n=r(372),s=r(373);class a extends s.a{constructor(e,t){super(e),this.info=null,this.info=t}get name(){return this.info.name}get type(){return this.info.type}get guid(){return this.info.guid}get id(){return this.info.id}}r.d(t,"a",(function(){return o}));class o extends n.a{constructor(){super(...arguments),this._players={}}getEntities(){return this._players}getEntity(e){let t=this._players[e];if(!t){const r=this.parser.report.friendlies.find(t=>t.id===e);if(!r)return null;this._players[e]=t=new a(this.parser,r)}return t}get selected(){return this.getEntity(this.parser.player.id)}}o.handle="combatants"},1290:function(e,t,r){"use strict";r.d(t,"a",(function(){return f}));var n=r(218),s=r.n(n),a=r(49),o=r.n(a),i=r(15),c=r.n(i),l=r(367),u=r.n(l),d=r(23),h=r(80),m=r(0),p=r.n(m);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class f extends d.c{constructor(){super(...arguments),this._cooldownGroups={},this._currentAction=null,this._cooldowns={},this._groups={},this._cooldownGroups=u()(this.data.actions,"cooldownGroup"),this._buildGroups(this.constructor.cooldownOrder),this.addHook("begincast",{by:"player"},this._onBeginCast),this.addHook("cast",{by:"player"},this._onCast),this.addHook("complete",this._onComplete)}_buildGroups(e){if(!e)return;return e.map((t,r)=>{const n=-(e.length-r);if("number"==typeof t){const e=this.data.getAction(t);return this._buildGroup({id:t,content:e&&e.name,order:n}),t}const s=this._buildGroup({id:t.name,content:t.name,order:n});return t.merge?t.actions.forEach(e=>{this._groups[e]=s}):s.nestedGroups=this._buildGroups(t.actions),t.name})}_buildGroup(e){const t=new h.c(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({showNested:!1},e));return this.timeline.addGroup(t),this._groups[e.id]=t,t}_onBeginCast(e){const t=this.data.getAction(e.ability.guid);t&&null!=t.cooldown&&(this._currentAction=t,this.startCooldown(t.id),c()(t.cooldownGroup)||this.startCooldownGroup(t.id,t.cooldownGroup))}_onCast(e){const t=this.data.getAction(e.ability.guid);if(!t||null==t.cooldown)return;const r=this._currentAction&&this._currentAction.id===t.id;this._currentAction=null,r||(this.startCooldown(t.id),c()(t.cooldownGroup)||this.startCooldownGroup(t.id,t.cooldownGroup))}_onComplete(){Object.keys(this._cooldowns).forEach(e=>{this._addToTimeline(parseInt(e,10))})}_addToTimeline(e){const t=this._cooldowns[e];if(!t)return!1;t.current&&(t.history.push(t.current),t.current=null);const r=this.data.getAction(e);return!(!r||r.onGcd)&&(this._groups[e]||this._buildGroup({id:e,content:r.name,order:e}),t.history.forEach(t=>{t.shared||this._groups[e].addItem(new h.b({type:"background",start:t.timestamp-this.parser.fight.start_time,length:t.length,content:p.a.createElement("img",{src:r.icon,alt:r.name})}))}),!0)}getCooldown(e){return this._cooldowns[e]||{current:null,history:[]}}startCooldownGroup(e,t){o()(this._cooldownGroups,t,[]).map(e=>e.id).filter(t=>t!==e).forEach(e=>this.startCooldown(e,!0))}startCooldown(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=this.data.getAction(e);if(!r)return;const n=this.getCooldown(e);if(n.current){const t=this.parser.currentTimestamp-this.parser.fight.start_time;n.current.timestamp<this.parser.fight.start_time&&n.current.length>t?this.resetCooldown(e):n.history.push(n.current)}n.current={timestamp:this.parser.currentTimestamp,length:1e3*r.cooldown,shared:t,invulnTime:0},this._cooldowns[e]=n}reduceCooldown(e,t){const r=this.getCooldown(e),n=this.parser.currentTimestamp;r.current&&r.current.timestamp+r.current.length<n&&(r.history.push(r.current),r.current=null),null!==r.current&&(r.current.length-=1e3*t,r.current.timestamp+r.current.length<n&&this.resetCooldown(e))}setInvulnTime(e){const t=this.getCooldown(e);let r=this.parser.fight.start_time,n={},s=!0;for(const e of t.history)s&&(r=e.timestamp+e.length,s=!1,n=e),n.invulnTime=this.downtime.getDowntime(r,e.timestamp),r=e.timestamp+e.length,n=e}resetCooldown(e){const t=this.getCooldown(e);null!==t.current&&(t.current.length=this.parser.currentTimestamp-t.current.timestamp,t.history.push(t.current),t.current=null)}getCooldownRemaining(e){const t=this.getCooldown(e).current;return t?t.length-(this.parser.currentTimestamp-t.timestamp):0}getTimeOnCooldown(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=this.getCooldown(e),s=this.parser.currentTimestamp;return t?this.setInvulnTime(e):n.history.map(e=>{e.invulnTime=0}),n.history.reduce((e,t)=>e+this.getAdjustedTimeOnCooldown(t,s,r),n.current?this.getAdjustedTimeOnCooldown(n.current,s,r):0)}getAdjustedTimeOnCooldown(e,t,r){const n=t-e.timestamp,a=e.length+e.invulnTime+r;return s()(n,0,a)}get used(){return Object.keys(this._cooldowns)}}f.handle="cooldowns",f.dependencies=["data","downtime","timeline"],f.cooldownOrder=[]},1293:function(e,t,r){"use strict";r.d(t,"a",(function(){return _}));var n=r(368),s=r.n(n),a=r(365),o=r.n(a),i=r(2),c=r(8),l=r(1288),u=r(23),d=r(217),h=r(1285),m=r(80),p=r(0),g=r.n(p),b=r(366);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const O=2.5,v=15e3,E={uncomboed:g.a.createElement(c.Trans,{id:"core.combos.issuetypenames.uncomboed"}),combobreak:g.a.createElement(c.Trans,{id:"core.combos.issuetypenames.combobreak"}),failedcombo:g.a.createElement(c.Trans,{id:"core.combos.issuetypenames.failed"})};class _ extends u.c{constructor(){super(...arguments),this.lastGcdTime=this.parser.fight.start_time,this.currentComboChain=[],this.issues=[]}init(){this.addHook("aoedamage",{by:"player"},this.onCast),this.addHook("complete",this.onComplete)}get lastComboEvent(){return o()(this.currentComboChain)||null}get lastAction(){const e=this.lastComboEvent;return e?e.ability.guid:null}get comboBreakers(){return this.issues.filter(e=>"combobreak"===e.type).map(e=>e.event)}get uncomboedGcds(){return this.issues.filter(e=>"uncomboed"===e.type).map(e=>e.event)}fabricateComboEvent(e){const t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{type:"combo"});delete t.timestamp,this.parser.fabricateEvent(t)}recordBrokenCombo(e,t){this.isAllowableComboBreak(e,t)||this.issues.push({type:"combobreak",event:e,context:t}),this.currentComboChain=[]}recordUncomboedGcd(e){this.issues.push({type:"uncomboed",event:e,context:[]}),this.currentComboChain=[]}recordFailedCombo(e,t){this.issues.push({type:"failedcombo",event:e,context:t}),this.currentComboChain=[]}checkCombo(e,t){if(null==this.lastAction){if(e.start)return this.fabricateComboEvent(t),!0;if(e.from)return this.recordUncomboedGcd(t),!1}if(e.start)return this.recordBrokenCombo(t,this.currentComboChain),!0;if(e.from){if((Array.isArray(e.from)?e.from:[e.from]).includes(this.lastAction))return this.fabricateComboEvent(t),!e.end}return this.recordBrokenCombo(t,this.currentComboChain),!1}onCast(e){const t=this.data.getAction(e.ability.guid);if(t){if(t.onGcd&&(t.combo||t.breaksCombo)&&(e.timestamp-this.lastGcdTime>v&&(this.currentComboChain=[]),this.lastGcdTime=e.timestamp),t.combo){if(!e.successfulHit)return void this.recordFailedCombo(e,this.currentComboChain);this.checkCombo(t.combo,e)?this.currentComboChain.push(e):this.currentComboChain=[]}t.breaksCombo&&null!==this.lastAction&&this.recordBrokenCombo(e,this.currentComboChain)}}onComplete(){this.addJobSpecificSuggestions(this.comboBreakers,this.uncomboedGcds)||this.suggestions.add(new h.c({icon:this.constructor.suggestionIcon,content:g.a.createElement(c.Trans,{id:"core.combos.content",components:[g.a.createElement("p",null),g.a.createElement("p",null)]}),tiers:{1:h.a.MINOR,2:h.a.MEDIUM,4:h.a.MAJOR},value:this.issues.length,why:g.a.createElement(c.Trans,{id:"core.combos.why",values:{0:this.issues.length}})}))}addJobSpecificSuggestions(e,t){return!1}isAllowableComboBreak(e,t){return!1}output(){if(this.issues.length<=0)return!1;const e=this.parser.fight.start_time,t=this.issues.sort((e,t)=>e.event.timestamp-t.event.timestamp).map(t=>{var r,n;const a=[...t.context||[],t.event],i=s()(a),c=o()(a),l=this.data.getAction(i.ability.guid),u=this.data.getAction(c.ability.guid);return{start:i.timestamp-e+(null!==(r=null==l?void 0:l.cooldown)&&void 0!==r?r:O),end:c.timestamp-e+(null!==(n=null==u?void 0:u.cooldown)&&void 0!==n?n:O),rotation:a,notesMap:{reason:g.a.createElement("span",{style:{whiteSpace:"nowrap"}},E[t.type])}}});return g.a.createElement(l.a,{notes:[{header:g.a.createElement(c.Trans,{id:"core.combos.rotationtable.header.reason"}),accessor:"reason"}],data:t,onGoto:this.timeline.show})}}_.handle="combos",_.title={id:"core.combos.title",defaults:"Combo Issues"},_.displayOrder=d.a.COMBOS,_.suggestionIcon="https://xivapi.com/i/000000/000405.png",Object(i.b)([u.d,Object(i.d)("design:type",b.a)],_.prototype,"data",void 0),Object(i.b)([u.d,Object(i.d)("design:type",h.d)],_.prototype,"suggestions",void 0),Object(i.b)([u.d,Object(i.d)("design:type",m.d)],_.prototype,"timeline",void 0)},1295:function(e,t,r){"use strict";var n=r(1473),s=r(1452),a=r(1477),o=r(1472);t.a=Object(n.a)({meanDependencies:s.a,modeDependencies:a.a,stdDependencies:o.a})},1300:function(e,t,r){e.exports={gcdSize:"40px",ogcdSize:"30px",container:"Rotation-module_container__32KS2",link:"Rotation-module_link__2T3fu",ogcd:"Rotation-module_ogcd__3oBO8"}},1301:function(e,t,r){e.exports={gutter:"20px",checkbox:"Suggestions-module_checkbox__1Z22N",items:"Suggestions-module_items__3sCkP",item:"Suggestions-module_item__1yy1-",extra:"Suggestions-module_extra__3WN2d"}},1306:function(e,t,r){e.exports={lg:"(min-width: 992px)",title:"Checklist-module_title__2ro7x",percent:"Checklist-module_percent__EKBdj",progress:"Checklist-module_progress__28lgp",description:"Checklist-module_description__3Bf5O"}},1307:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(23),s=r(80),a=r(0),o=r.n(a);const i=2e3;class c extends n.c{constructor(){super(...arguments),this._statuses={},this._groups={},this._statusToActionMap={},this._actionToMergeNameMap={};const e={by:[this.parser.player.id,...this.parser.player.pets.map(e=>e.id)]};this.addHook("complete",this._onComplete),this.addHook(["applybuff","applydebuff"],e,this._onApply),this.addHook(["refreshdebuff","refreshbuff"],e,this._onRefresh),this.addHook(["removebuff","removedebuff"],e,this._onRemove),this.cooldowns.constructor.cooldownOrder.forEach(e=>{e&&"object"==typeof e&&e.merge&&e.actions.forEach(t=>{this._actionToMergeNameMap[t]=e.name})}),Object.values(this.data.actions).forEach(e=>{e.statusesApplied&&e.statusesApplied.forEach(t=>{const r=this.data.statuses[t];this._statusToActionMap[r.id]=e})})}_onApply(e){this._isStatusAppliedToPet(e)||this._addStatus(e)}_onRefresh(e){this._isStatusAppliedToPet(e)||(this._endPrevStatus(e),this._addStatus(e))}_onRemove(e){this._isStatusAppliedToPet(e)||this._endPrevStatus(e)}_endPrevStatus(e){const t=this.data.getStatus(e.ability.guid);if(!t)return;const r=this._statuses[t.id];if(r){const t=r.usages[r.usages.length-1];t.end||(t.end=e.timestamp-this.parser.fight.start_time)}}_addStatus(e){const t=this.data.getStatus(e.ability.guid);if(!t)return;let r=this._statuses[t.id];r||(r=this._statuses[t.id]={status:t,usages:[]}),r.usages.some(t=>{return Math.abs(e.timestamp-this.parser.fight.start_time-t.start)<=i})||r.usages.push({start:e.timestamp-this.parser.fight.start_time})}_onComplete(){Object.values(this._statuses).forEach(e=>{const t=this._createGroupForStatus(e.status);t&&e.usages.forEach(r=>{t.addItem(new s.b({type:"background",start:r.start,end:r.end||r.start+1e3*e.status.duration,content:o.a.createElement("img",{src:e.status.icon,alt:e.status.name})}))})})}_createGroupForStatus(e){const t="status-"+(this.constructor.statusesStackMapping[e.id]||e.id);if(this._groups[t])return this._groups[t];const r=this._statusToActionMap[e.id];if(!r)return;const n=new s.c({id:t,content:e.name,showNested:!1});return this._groups[t]=n,this.timeline.attachToGroup(r.onGcd?this.gcd.gcdGroupId:this._actionToMergeNameMap[r.id]||r.id,n),n}_isStatusAppliedToPet(e){return this.parser.report.friendlyPets.some(t=>t.id===e.targetID)}}c.handle="statuses",c.dependencies=["data","timeline","cooldowns","gcd"],c.statusesStackMapping={}},1312:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(23);class s extends n.c{_internalDowntime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentTimestamp;const r=[...this.unableToAct.getDowntimes(e,t),...this.invuln.getInvulns("all",e,t,"untargetable")].sort((e,t)=>e.start-t.start);if(!r.length)return[];const n=[r.shift()];return r.forEach(e=>{const t=n[n.length-1];e.start<=t.end?e.end>t.end&&(t.end=e.end):n.push(e)}),n}isDowntime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parser.currentTimestamp;return this._internalDowntime(e,e).length>0}getDowntime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentTimestamp;return this._internalDowntime(e,t).reduce((r,n)=>r+Math.min(n.end,t)-Math.max(n.start,e),0)}getDowntimes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentTimestamp,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return this._internalDowntime(e,t).reduce((n,s)=>(Math.min(s.end,t)-Math.max(s.start,e)>Math.min(r,0)&&n.push(Math.min(s.end,t)-Math.max(s.start,e)),n),[])}getDowntimeWindows(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentTimestamp,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return this._internalDowntime(e,t).reduce((n,s)=>(Math.min(s.end,t)-Math.max(s.start,e)>Math.min(r,0)&&n.push({start:Math.max(s.start,e),end:Math.min(s.end,t)}),n),[])}}s.handle="downtime",s.dependencies=["invuln","unableToAct"]},1426:function(e,t,r){e.exports={meta:"About-module_meta__bVZ7F",contributor:"About-module_contributor__2ELgI"}},1429:function(e,t,r){e.exports={change:"ChangeLog-module_change__4IR3G",date:"ChangeLog-module_date__3MEFU",message:"ChangeLog-module_message__3Ns1X",contributors:"ChangeLog-module_contributors__1tGd5"}},1457:function(e,t,r){"use strict";r.r(t);var n=r(8),s=r(0),a=r.n(s),o=r(1281),i=r(93),c=r(1476),l=r(5),u=r.n(l),d=(r(96),r(4)),h=r.n(d),m=(r(9),r(22)),p=r(151),g=r(152),b=r(7);function f(e){var t=e.children,r=e.className,n=e.compact,s=e.content,o=e.horizontal,i=e.piled,c=e.raised,l=e.size,d=e.stacked,y=h()("ui",l,Object(m.a)(n,"compact"),Object(m.a)(o,"horizontal"),Object(m.a)(i,"piled"),Object(m.a)(c,"raised"),Object(m.a)(d,"stacked"),"segments",r),O=Object(p.a)(f,e),v=Object(g.a)(f,e);return a.a.createElement(v,u()({},O,{className:y}),b.a.isNil(t)?s:t)}f.handledProps=["as","children","className","compact","content","horizontal","piled","raised","size","stacked"],f.propTypes={};var y=f;function O(e){var t=e.children,r=e.className,n=e.content,s=h()("inline",r),o=Object(p.a)(O,e),i=Object(g.a)(O,e);return a.a.createElement(i,u()({},o,{className:s}),b.a.isNil(t)?n:t)}O.handledProps=["as","children","className","content"],O.propTypes={};var v=O;function E(e){var t=e.attached,r=e.basic,n=e.children,s=e.circular,o=e.className,i=e.clearing,c=e.color,l=e.compact,d=e.content,f=e.disabled,y=e.floated,O=e.inverted,v=e.loading,_=e.placeholder,w=e.padded,j=e.piled,C=e.raised,k=e.secondary,T=e.size,P=e.stacked,D=e.tertiary,x=e.textAlign,S=e.vertical,A=h()("ui",c,T,Object(m.a)(r,"basic"),Object(m.a)(s,"circular"),Object(m.a)(i,"clearing"),Object(m.a)(l,"compact"),Object(m.a)(f,"disabled"),Object(m.a)(O,"inverted"),Object(m.a)(v,"loading"),Object(m.a)(_,"placeholder"),Object(m.a)(j,"piled"),Object(m.a)(C,"raised"),Object(m.a)(k,"secondary"),Object(m.a)(P,"stacked"),Object(m.a)(D,"tertiary"),Object(m.a)(S,"vertical"),Object(m.b)(t,"attached"),Object(m.b)(w,"padded"),Object(m.d)(x),Object(m.e)(y,"floated"),"segment",o),M=Object(p.a)(E,e),N=Object(g.a)(E,e);return a.a.createElement(N,u()({},M,{className:A}),b.a.isNil(n)?d:n)}E.handledProps=["as","attached","basic","children","circular","className","clearing","color","compact","content","disabled","floated","inverted","loading","padded","piled","placeholder","raised","secondary","size","stacked","tertiary","textAlign","vertical"],E.Group=y,E.Inline=v,E.propTypes={};var _=E,w=r(124),j=r.n(w),C=r(212);class k extends s.PureComponent{render(){const{contributor:e,detail:t}=this.props,r="string"==typeof e?e:e.name,n={};if(e.jobs&&e.jobs.length){const t=e.jobs[0];n.backgroundColor=t.colour,j()(t.colour).isDark()&&(n.color="white")}return a.a.createElement(C.a,{image:!0,style:n},e.avatar&&a.a.createElement("img",{src:e.avatar,alt:r}),r,t&&a.a.createElement(C.a.Detail,null,t))}}var T=r(51),P=r(26),D=r(23),x=r(217),S=r(1426),A=r.n(S);class M extends D.c{constructor(){super(...arguments),this.Description=null,this.contributors=[],this.supportedPatches=null;["Description","contributors","supportedPatches"].forEach(e=>{this[e]=this.parser.meta[e]})}set supportedPatch(e){this.supportedPatches.from=e}output(){if(!this.supportedPatches)return a.a.createElement(o.a,{warning:!0,icon:!0},a.a.createElement(i.a,{name:"warning sign"}),a.a.createElement(o.a.Content,null,a.a.createElement(o.a.Header,null,a.a.createElement(n.Trans,{id:"core.about.unsupported.title"})),a.a.createElement(n.Trans,{id:"core.about.unsupported.description"})));const{from:e,to:t=e}=this.supportedPatches,r=Object(P.g)(Object(P.f)(this.parser.report.lang),e,t,this.parser.parseDate);return a.a.createElement(c.a,null,a.a.createElement(c.a.Column,{mobile:16,computer:10},a.a.createElement(this.Description,null),!r&&a.a.createElement(o.a,{error:!0,icon:!0},a.a.createElement(i.a,{name:"times circle outline"}),a.a.createElement(o.a.Content,null,a.a.createElement(o.a.Header,null,a.a.createElement(n.Trans,{id:"core.about.patch-unsupported.title"})),a.a.createElement(n.Trans,{id:"core.about.patch-unsupported.description",values:{0:this.parser.patch.key}})))),a.a.createElement(c.a.Column,{mobile:16,computer:6},a.a.createElement(_,{as:"dl",className:A.a.meta},a.a.createElement("dt",null,a.a.createElement(n.Trans,{id:"core.about.supported-patches"})),a.a.createElement("dd",null,e,e!==t&&"â€“".concat(t)),this.contributors.length>0&&a.a.createElement(a.a.Fragment,null,a.a.createElement("dt",null,a.a.createElement(n.Trans,{id:"core.about.contributors"})),a.a.createElement("dd",null,this.contributors.map(e=>{const{user:t,role:r}=e;return a.a.createElement("div",{key:"string"==typeof t?t:t.name,className:A.a.contributor},a.a.createElement(k,{contributor:t,detail:r&&a.a.createElement(T.a,{message:r.text})}))}))))))}}M.handle="about",M.displayOrder=x.a.ABOUT,M.displayMode=D.a.FULL,M.title={id:"core.about.title",defaults:"About"};var N=r(633),I=r(1286);class G extends D.c{constructor(){super(...arguments),this.addHook("complete",this._onComplete)}_onComplete(){if(!this.gcd.gcds.length)return;const e=this.parser.fightDuration-this.downtime.getDowntime();this.checklist.add(new I.b({name:a.a.createElement(n.Trans,{id:"core.always-cast.title"}),description:a.a.createElement(n.Trans,{id:"core.always-cast.description"}),requirements:[new I.a({name:a.a.createElement(n.Trans,{id:"core.always-cast.gcd-uptime"}),percent:this.gcd.getUptime()/e*100})]}))}}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}G.handle="abc",G.dependencies=["checklist","downtime","gcd"];const F=Symbol("aoe"),L=20,B=200,U=["refreshbuff","applybuff"];class z extends D.c{constructor(){super(...arguments),this.addHook(F,this._onAoe)}normalise(e){U.push(this.fflogsEvents.damageEventName,this.fflogsEvents.healEventName);const t={};function r(e){if(!e.ability)return{};t[e.sourceID]||(t[e.sourceID]={});const r=t[e.sourceID],n=e.ability.guid;return r[n]=r[n]||{events:{},insertAfter:0,timestamp:null}}const n=[];function s(e){for(const t in e.events)0!==e.events[t].length&&(e.timestamp=e.timestamp||e.events[t][0].timestamp,e.timestamp=e.timestamp<e.events[t][0].timestamp?e.timestamp:e.events[t][0].timestamp);n.push(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{type:F}))}for(let t=0;t<e.length;t++){const n=e[t];if(!U.includes(n.type))continue;const a=r(n);let o=null;if(Object.keys(a.events).length)for(const e in a.events){const t=a.events[e][a.events[e].length-1];o<t.timestamp&&(o=t.timestamp)}const i="refreshbuff"===n.type||"applybuff"===n.type?B:L;o&&n.timestamp-o>i&&(s(a),a.events={},a.timestamp=null),a.events[n.type]||(a.events[n.type]=[]),n.i=t,a.events[n.type].push(n),a.insertAfter=t}for(const e in t)for(const r in t[e]){const n=t[e][r];let a=!1;for(const e in n.events)0!==n.events[e].length&&(a=!0);a&&s(n)}let a=0;return n.sort((e,t)=>e.insertAfter-t.insertAfter).forEach(t=>{e.splice(t.insertAfter+1+a,0,t),a++}),e}_onAoe(e){if(Object.keys(e.events).length)for(const t in e.events){let r=e.events[t];"damage"===t&&(r=r.filter(this.isValidHit.bind(this))),r=r.reduce((e,t)=>{const r="".concat(t.targetID,"-").concat(t.targetInstance);return e[r]?(e[r].times++,e[r].amount+=t.amount,e[r].successfulHit=e[r].successfulHit||t.successfulHit):e[r]={id:t.targetID,instance:t.targetInstance,times:1,amount:t.amount,successfulHit:t.successfulHit},e},{});const n={type:"aoe"+t.replace("calculated",""),timestamp:e.events[t][0].timestamp,ability:e.events[t][0].ability,hits:Object.values(r),sourceID:e.events[t][0].sourceID,amount:Object.values(r).reduce((e,t)=>e+t.amount,0),successfulHit:Object.values(r).reduce((e,t)=>e||t.successfulHit,!1)};e.events[t][0].hasOwnProperty("sourceResources")&&(n.sourceResources=e.events[t][0].sourceResources),this.parser.fabricateEvent(n)}}isValidHit(e){const t=!!this.enemies.getEntity(e.targetID),r=0===e.amount&&!e.overkill;return t&&!r}}z.handle="aoe",z.dependencies=["precastAction","precastStatus","enemies","fflogsEvents"];var J=r(2),K=r(70),W=r(56),q=r(1470),V=r(366);const Z=["begincast","cast","damage","calculateddamage","heal","calculatedheal","applybuff","applydebuff","refreshbuff","refreshdebuff","removebuff","removedebuff","applybuffstack","applydebuffstack","removebuffstack","removedebuffstack"];class X extends D.c{constructor(){super(...arguments),this.triggers=new Map}init(){this.addHook(Z,{by:"player",abilityId:this.data.actions.UNKNOWN.id},()=>{this.trigger(this,"unknown action",a.a.createElement(n.Trans,{id:"core.broken-log.trigger.unknown-action"}))})}trigger(e,t,r){const n=e.constructor,{handle:s}=n,a="".concat(s,".").concat(t);if(!this.triggers.has(a)&&!Object(P.e)(this.parser.report).branch){const e=this.parser.player.type;K.c(t=>{t.setTags({job:e,module:s}),t.setExtras({report:this.parser.report.code,fight:this.parser.fight.id,player:this.parser.player.id}),K.b("".concat(e,".").concat(a))})}this.triggers.set(a,{module:n,reason:r})}output(){return 0!==this.triggers.size&&a.a.createElement(W.d,null,a.a.createElement(W.c,{error:!0,icon:"times circle outline"},a.a.createElement(n.Trans,{id:"core.broken-log.broken-log.title",render:a.a.createElement(W.c.Header,null)}),a.a.createElement(n.Trans,{id:"core.broken-log.broken-log.description"})),a.a.createElement(q.a,{basic:"very",compact:"very"},a.a.createElement(q.a.Header,null,a.a.createElement(q.a.Row,null,a.a.createElement(n.Trans,{id:"core.broken-log.list.module",render:a.a.createElement(q.a.HeaderCell,null)}),a.a.createElement(n.Trans,{id:"core.broken-log.list.reason",render:a.a.createElement(q.a.HeaderCell,null)}))),a.a.createElement(q.a.Body,null,Array.from(this.triggers.values()).map(e=>{let{module:t,reason:r}=e;return a.a.createElement(q.a.Row,null,a.a.createElement(q.a.Cell,null,a.a.createElement(T.a,{message:t.title,id:t.i18n_id})),a.a.createElement(q.a.Cell,null,r))}))))}}X.handle="brokenLog",X.title={id:"core.broken-log.title",defaults:"Broken Log"},X.displayOrder=x.a.BROKEN_LOG,X.displayMode=D.a.RAW,Object(J.b)([D.d,Object(J.d)("design:type",V.a)],X.prototype,"data",void 0);var Q=r(1474),Y=r(1429),$=r.n(Y);class ee extends a.a.PureComponent{constructor(){super(...arguments),this.state={activeIndexes:new Set},this.handleClick=(e,t)=>{const{index:r}=t,{activeIndexes:n}=this.state,s=new Set(n);s.has(r)?s.delete(r):s.add(r),this.setState({activeIndexes:s})}}render(){const{activeIndexes:e}=this.state;return a.a.createElement(Q.a,{fluid:!0,styled:!0},this.props.changelog.map((t,r)=>{const n=t.date.toLocaleDateString(),s=e.has(r);return a.a.createElement(a.a.Fragment,{key:r},a.a.createElement(Q.a.Title,{index:r,active:s,onClick:this.handleClick,className:$.a.change},a.a.createElement("strong",{className:$.a.date},n),!s&&a.a.createElement("span",{className:$.a.message},a.a.createElement(t.Changes,null)),t.contributors&&t.contributors.length>0&&a.a.createElement("div",{className:$.a.contributors},t.contributors.map(e=>a.a.createElement(k,{key:e.name,contributor:e})))),a.a.createElement(Q.a.Content,{active:s},a.a.createElement(t.Changes,null)))}))}}class te extends D.c{output(){const{changelog:e}=this.parser.meta;return 0!==e.length&&(e.sort((e,t)=>t.date-e.date),a.a.createElement(ee,{changelog:e}))}}te.handle="changelog",te.displayOrder=x.a.CHANGELOG,te.displayMode=D.a.FULL,te.title={id:"core.changelog.title",defaults:"Changelog"};var re=r(380),ne=r(1289),se=r(1293),ae=r(1290),oe=r(80),ie=r(1285);const ce=["WEAKNESS","BRINK_OF_DEATH"];class le extends D.c{constructor(){super(...arguments),this._count=0,this._deadTime=0,this._timestamp=null;const e=ce.map(e=>this.data.statuses[e]);this.addHook("death",{to:"player"},this._onDeath),this.addHook("applydebuff",{to:"player",abilityId:e},this._onRaise),this.addHook("complete",this._onComplete);const t=e=>this._timestamp&&this._onRaise(e);this.addHook("begincast",{by:"player"},t),this.addHook("cast",{by:"player"},t)}_onDeath(e){this.shouldCountDeath(e)&&(this._count++,this._timestamp=e.timestamp)}_onRaise(e){this.addDeathToTimeline(e.timestamp),this.parser.fabricateEvent({type:"raise",targetID:e.targetID})}_onComplete(){!this.parser.fight.kill&&this._timestamp&&(this._count=Math.max(this._count-1,0)),this._timestamp&&this.addDeathToTimeline(this.parser.fight.end_time),this._count&&this.suggestions.add(new ie.b({icon:this.data.actions.RAISE.icon,content:a.a.createElement(n.Trans,{id:"core.deaths.content",components:[a.a.createElement("em",null)]}),severity:ie.a.MORBID,why:a.a.createElement(n.Trans,{id:"core.deaths.why",values:{0:this._count}})}))}shouldCountDeath(){return!0}addDeathToTimeline(e){const t=this.parser.fight.start_time;this.timeline.addItem(new oe.b({type:"background",style:"background-color: #ce909085;",start:this._timestamp-t,end:e-t})),this._deadTime+=e-this._timestamp,this._timestamp=null}get deadTime(){return this._deadTime}}le.handle="death",le.dependencies=["data","suggestions","timeline"];var ue=r(1312),de=r(376),he=r(381),me=r(1304),pe=r(29);const ge=["damage","heal","calculateddamage","calculatedheal"],be=[pe.b.MISS,pe.b.IMMUNE];class fe extends D.c{normalise(e){for(let t=0;t<e.length;t++){const r=e[t];ge.includes(r.type)&&(r.criticalHit=r.hitType===pe.b.CRITICAL,r.directHit=!0===r.multistrike,r.successfulHit=!be.includes(r.hitType))}return e}}fe.handle="hitType";var ye=r(371),Oe=r(379),ve=r(382),Ee=r(632),_e=r(374),we=r(370),je=r(1307),Ce=r(383),ke=r(1294);t.default=[M,N.a,G,z,X,te,re.a,I.e,ne.a,se.a,ae.a,V.a,le,ue.a,de.a,he.a,me.a,fe,ye.a,Oe.a,ve.a,Ee.a,_e.a,we.c,je.a,ie.d,oe.d,Ce.a,ke.a]}}]);
//# sourceMappingURL=core.f3f2853a.js.map
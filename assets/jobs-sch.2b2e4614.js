(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{1290:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(8),s=n(1289),i=n(0),r=n.n(i),o=n(1472),c=n(1243),l=n(37);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends r.a.Component{render(){const{targets:e,notes:t,data:n,onGoto:s,headerTitle:i}=this.props;return r.a.createElement(o.a,{compact:!0,unstackable:!0,celled:!0},r.a.createElement(o.a.Header,null,r.a.createElement(o.a.Row,null,r.a.createElement(o.a.HeaderCell,{collapsing:!0},r.a.createElement("strong",null,r.a.createElement(a.Trans,{id:"core.ui.rotation-table.header.time"}))),(e||[]).map((e,t)=>r.a.createElement(o.a.HeaderCell,{key:"target_header_".concat(t),textAlign:"center",collapsing:!0},r.a.createElement("strong",null,e.header))),r.a.createElement(o.a.HeaderCell,null,r.a.createElement("strong",null,i||r.a.createElement(a.Trans,{id:"core.ui.rotation-table.header.rotation"}))),(t||[]).map((e,t)=>r.a.createElement(o.a.HeaderCell,{key:"note_header_".concat(t),textAlign:"center",collapsing:!0},r.a.createElement("strong",null,e.header))))),r.a.createElement(o.a.Body,null,n.map(n=>r.a.createElement(p.Row,u({key:n.start,onGoto:s,targets:e||[],notes:t||[]},n)))))}}p.targetAccessorResolver=(e,t)=>"string"==typeof t.accessor&&null!=e.targetsData?e.targetsData[t.accessor]:"function"==typeof t.accessor?t.accessor(e):{actual:0,expected:0},p.notesAccessorResolver=(e,t)=>"string"==typeof t.accessor&&null!=e.notesMap?e.notesMap[t.accessor]:"function"==typeof t.accessor?t.accessor(e):null,p.TargetCell=e=>{let{actual:t,expected:n}=e;return r.a.createElement(o.a.Cell,{textAlign:"center",positive:void 0!==n&&t>=n,negative:void 0!==n&&t<n},t,"/",void 0===n?"-":n)},p.Row=e=>{let{onGoto:t,targets:n,notes:a,notesMap:i,start:d,end:h,targetsData:m,rotation:g}=e;return r.a.createElement(o.a.Row,null,r.a.createElement(o.a.Cell,{textAlign:"center"},r.a.createElement("span",{style:{marginRight:5}},Object(l.d)(d/1e3)),"function"==typeof t&&r.a.createElement(c.a,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:()=>t(d,h)})),n.map(e=>p.targetAccessorResolver({start:d,end:h,targetsData:m,rotation:g},e)).map((e,t)=>r.a.createElement(p.TargetCell,u({key:"target_".concat(t)},e))),r.a.createElement(o.a.Cell,null,r.a.createElement(s.a,{events:g})),a.map(e=>p.notesAccessorResolver({start:d,end:h,targetsData:m,notesMap:i,rotation:g},e)).map((e,t)=>r.a.createElement(o.a.Cell,{key:"notes_".concat(t),textAlign:"center"},e)))}},1293:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(126),s=n.n(a),i=n(0),r=n.n(i),o=n(371);const c={aspectRatio:3,scales:{xAxes:[{type:"time",time:{displayFormats:{minute:"m:ss",second:"m:ss",millisecond:"m:ss.SS"},tooltipFormat:"mm:ss.SSS"}}]}};class l extends i.PureComponent{render(){const e=s()({},c,this.props.options||{});return r.a.createElement(o.a,{data:this.props.data,options:e,width:e.aspectRatio,height:1})}}},1296:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(8),s=n(0),i=n.n(s),r=n(1476),o=n(1289),c=n(52),l=n(23),d=n(1287),u=n(37);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=2,g={0:2,1:1,2.5:0},f={1:d.a.MEDIUM,5:d.a.MAJOR};class b extends l.c{constructor(){super(...arguments),this._weaves=[],this._ongoingCastEvent=null,this._leadingGcdEvent=null,this._trailingGcdEvent=null,this._badWeaves=[],this.addHook("begincast",{by:"player"},this._onBeginCast),this.addHook("cast",{by:"player"},this._onCast),this.addHook("complete",this._onComplete)}_onBeginCast(e){this._ongoingCastEvent=e}_onCast(e){const t=this.data.getAction(e.ability.guid);t&&!t.autoAttack&&(this.isOgcd(t)?this._weaves.push(e):(this._ongoingCastEvent&&this._ongoingCastEvent.ability.guid===t.id?this._trailingGcdEvent=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{timestamp:this._ongoingCastEvent.timestamp}):this._trailingGcdEvent=e,this._ongoingCastEvent=null,this._saveIfBad(),this._leadingGcdEvent=this._trailingGcdEvent,this._weaves=[]))}_onComplete(){this._leadingGcdEvent&&this._saveIfBad();const e=this._badWeaves;this.suggestions.add(new d.c({icon:"https://xivapi.com/i/001000/001785.png",content:i.a.createElement(a.Trans,{id:"core.weaving.content",components:[i.a.createElement("a",{href:"javascript:void(0);",onClick:()=>this.parser.scrollTo(this.constructor.handle)}),i.a.createElement(c.a,{message:this.constructor.title})]}),why:i.a.createElement(a.Trans,{id:"core.weaving.why",values:{0:e.length}}),tiers:f,value:e.length}))}_saveIfBad(){const e=this._leadingGcdEvent||{timestamp:this.parser.fight.start_time},t=this._trailingGcdEvent.timestamp-e.timestamp-this.invuln.getUntargetableUptime("all",e.timestamp,this._trailingGcdEvent.timestamp),n={leadingGcdEvent:e,trailingGcdEvent:this._trailingGcdEvent,gcdTimeDiff:t,weaves:this._weaves};0!==n.weaves.length&&this.isBadWeave(n)&&this._badWeaves.push(n)}isOgcd(e){return!e.onGcd&&!e.autoAttack}isBadWeave(e,t){const n=e.weaves.filter(e=>!this.invuln.isUntargetable("all",e.timestamp)).length;if(!t)if(e.leadingGcdEvent.ability){const n=this.castTime.forEvent(e.leadingGcdEvent),a=Object(u.i)(g,n);t=void 0!==a?a:m}else t=m;const a=this.speedmod.get(this.parser.timestamp),s=this.gcd.getEstimate()*a;return e.gcdTimeDiff>s&&n>t}output(){const e=this._badWeaves;if(0===e.length)return!1;const t=e.map(e=>({key:e.leadingGcdEvent.timestamp,title:{content:i.a.createElement(i.a.Fragment,null,i.a.createElement("strong",null,this.parser.formatTimestamp(e.leadingGcdEvent.timestamp))," - ",i.a.createElement(a.Trans,{id:"core.weaving.panel-count",values:{0:e.weaves.length}})," (",this.parser.formatDuration(e.gcdTimeDiff)," ",i.a.createElement(a.Trans,{id:"core.weaving.between-gcds"}),")")},content:{content:i.a.createElement(o.a,{events:[...e.leadingGcdEvent.ability?[e.leadingGcdEvent]:[],...e.weaves]})}}));return i.a.createElement(r.a,{exclusive:!1,panels:t,styled:!0,fluid:!0})}}b.handle="weaving",b.dependencies=["castTime","data","gcd","invuln","speedmod","suggestions"],b.title={id:"core.weaving.title",defaults:"Weaving Issues"}},1304:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var a=n(8),s=n(1297),i=n(0),r=n.n(i),o=n(23),c=n(63),l=n(369);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p=1500,m=2500,g=2500,f=100,b=!1;class E extends o.c{constructor(){super(...arguments),this._castingEvent=null,this._estimatedBaseGcd=null,this._estimateGcdCount=-1,this._lastGcd={isInstant:!1,event:null},this.gcds=[],this.gcdGroupId="gcd",this.addHook("complete",this._onComplete)}normalise(e){for(let t=0;t<e.length;t++){const n=e[t];if(!this.parser.byPlayer(n)||!n.ability)continue;const a=this.data.getAction(n.ability.guid);if(a&&a.onGcd)switch(n.type){case"begincast":this._castingEvent=n;break;case"cast":const e=null!==this._castingEvent&&this._castingEvent.ability.guid===a.id,t=e?this._castingEvent:n;this.saveGcd(u({},this._lastGcd),t.timestamp),this._lastGcd.isInstant=!e,this._lastGcd.event=t,this._castingEvent=null}}return e.length&&this.saveGcd(u({},this._lastGcd),e[e.length-1].timestamp),this._debugLogSavedGcds(),e}_debugLogSavedGcds(){b&&this.gcds.forEach(e=>{const t=this.parser.formatTimestamp(e.timestamp),n=this.data.getAction(e.actionId),a=e.isInstant?" Instant":"",s=e.casterTaxed?" CasterTaxed":"";console.log("".concat(t," ").concat(n.name,"[").concat(e.length,"|").concat(e.normalizedLength,"] Speedmod[").concat(e.speedMod,"]").concat(a).concat(s))})}_onComplete(){const e=this.parser.fight.start_time;this.timeline.addGroup(new c.a({id:this.gcdGroupId,content:"GCD",order:-99})),this.gcds.forEach(t=>{const n=this.data.getAction(t.actionId);n&&this.timeline.addItem(new c.b({type:"background",start:t.timestamp-e,length:this._getGcdLength(t),title:n.name,group:this.gcdGroupId,content:r.a.createElement("img",{src:n.icon,alt:n.name,title:n.name})}))});const t=this.getEstimate(!1);this.statistics.add(new l.b({title:r.a.createElement(a.Trans,{id:"core.gcd.estimated-gcd"}),icon:this.data.actions.ATTACK.icon,value:this.parser.formatDuration(t),info:r.a.createElement(a.Trans,{id:"core.gcd.no-statistics",components:[r.a.createElement("em",null),r.a.createElement("em",null)]})}))}saveGcd(e,t){if(!e.event)return;const n=this.data.getAction(e.event.ability.guid);if(!n||!n.id)return;let a=this.speedmod.get(e.event.timestamp),s=n.castTime;a<=.5&&(a/=.5,s*=.5);let i=!1,r=10*Math.round((t-e.event.timestamp)/10);!e.isInstant&&s>=n.cooldown&&(r-=f,i=!0);const o=null!=n.gcdRecast?n.gcdRecast:n.cooldown,c=e.isInstant||s<o?o:s,l=Math.round(r*(g/1e3/c)*(1/a));this.gcds.push({timestamp:e.event.timestamp,length:r,normalizedLength:l,speedMod:a,castTime:s,cooldown:o,casterTaxed:i,actionId:n.id,isInstant:e.isInstant})}getEstimate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.gcds.length;if(null===this._estimatedBaseGcd||t!==this._estimateGcdCount){const e=this.gcds.map(e=>e.normalizedLength);this._estimatedBaseGcd=e.length?s.a.mean(s.a.mode(e)):m,this._estimateGcdCount=t}return e&&(this._estimatedBaseGcd=Math.max(p,Math.min(m,this._estimatedBaseGcd))),this._estimatedBaseGcd}getUptime(){return this.gcds.reduce((e,t)=>{const n=this._getGcdLength(t);return e+n-this.downtime.getDowntime(t.timestamp,t.timestamp+n)},0)}_getGcdLength(e){let t=e.isInstant||e.castTime<=e.cooldown?e.cooldown:Math.max(e.castTime,e.cooldown);if(t*=1e3,t>p){const n=this.getEstimate()/m;t=Math.max(p,t*n*e.speedMod)}return Math.round(t+(e.casterTaxed?f:0))}}E.handle="gcd",E.dependencies=["precastAction","castTime","data","downtime","speedmod","statistics","timeline"],E.title={id:"core.gcd.title",defaults:"Global Cooldown"}},1305:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(366),s=n.n(a),i=n(2),r=n(8),o=n(17),c=n(1290),l=n(23),d=n(1304),u=n(1287),h=n(63),p=n(0),m=n.n(p),g=n(367);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class y{constructor(e,t){this.rotation=[],this.data=e,this.start=t}get gcds(){return this.rotation.map(e=>this.data.getAction(e.ability.guid)).filter(e=>e&&e.onGcd).length}getActionCountByIds(e){return this.rotation.filter(t=>e.includes(t.ability.guid)).length}}class O extends l.c{constructor(){super(...arguments),this.buffWindows=[]}get activeBuffWindow(){const e=s()(this.buffWindows);if(e&&null==e.end)return e}init(){this.addHook("cast",{by:"player"},this.onCast),this.addHook("applybuff",{by:"player"},this.onApplyBuff),this.addHook("removebuff",{by:"player"},this.onRemoveBuff),this.addHook("complete",this.onComplete)}onCast(e){const t=this.data.getAction(e.ability.guid);t&&!t.autoAttack&&this.activeBuffWindow&&this.considerAction(t)&&this.activeBuffWindow.rotation.push(e)}considerAction(e){return!0}onApplyBuff(e){this.buffStatus&&e.ability.guid===this.buffStatus.id&&this.startNewBuffWindow(e.timestamp)}startNewBuffWindow(e){this.buffWindows.push(new y(this.data,e))}onRemoveBuff(e){this.buffStatus&&e.ability.guid===this.buffStatus.id&&this.activeBuffWindow&&(this.activeBuffWindow.end=e.timestamp)}getBaselineExpectedGCDs(e){return this.expectedGCDs?this.expectedGCDs.expectedPerWindow:0}changeExpectedGCDsClassLogic(e){return 0}reduceExpectedGCDsEndOfFight(e){if(this.buffStatus.duration){const t=1e3*this.buffStatus.duration,n=this.parser.fight.end_time-e.start;if(t>=n){const e=this.globalCooldown.getEstimate();return Math.ceil((t-n)/e)}}return 0}getBaselineExpectedTrackedAction(e,t){return t.expectedPerWindow||0}changeExpectedTrackedActionClassLogic(e,t){return 0}getBuffWindowExpectedGCDs(e){return this.getBaselineExpectedGCDs(e)+this.changeExpectedGCDsClassLogic(e)-this.reduceExpectedGCDsEndOfFight(e)}getBuffWindowRequiredGCDsUsed(e){if(!this.requiredGCDs)return 0;const t=this.requiredGCDs.actions.map(e=>e.id);return e.getActionCountByIds(t)}getBuffWindowExpectedTrackedActions(e,t){return this.getBaselineExpectedTrackedAction(e,t)+this.changeExpectedTrackedActionClassLogic(e,t)}getBuffWindowNotes(e){}onComplete(){if(this.expectedGCDs){const e=this.buffWindows.reduce((e,t)=>{const n=this.getBuffWindowExpectedGCDs(t);return e+Math.max(0,n-t.gcds)},0);this.suggestions.add(new u.c({icon:this.buffAction.icon,content:this.expectedGCDs.suggestionContent,tiers:this.expectedGCDs.severityTiers,value:e,why:m.a.createElement(r.Trans,{id:"core.buffwindow.suggestions.missedgcd.why",values:{0:this.buffAction.name,missedGCDs:e}})}))}if(this.requiredGCDs){const e=this.buffWindows.reduce((e,t)=>e+Math.max(0,t.gcds-this.getBuffWindowRequiredGCDsUsed(t)),0);this.suggestions.add(new u.c({icon:this.requiredGCDs.icon,content:this.requiredGCDs.suggestionContent,tiers:this.requiredGCDs.severityTiers,value:e,why:m.a.createElement(r.Trans,{id:"core.buffwindow.suggestions.badgcd.why",values:{0:this.buffAction.name,invalidGCDs:e}})}))}if(this.trackedActions){const e=this.trackedActions.actions.reduce((e,t)=>e+this.buffWindows.reduce((e,n)=>e+Math.max(0,t.expectedPerWindow-n.getActionCountByIds([t.action.id])),0),0);this.suggestions.add(new u.c({icon:this.trackedActions.icon,content:this.trackedActions.suggestionContent,tiers:this.trackedActions.severityTiers,value:e,why:m.a.createElement(r.Trans,{id:"core.buffwindow.suggestions.trackedaction.why",values:{0:this.buffAction.name,missedActions:e}})}))}if(this.trackedBadActions){const e=this.trackedBadActions.actions.reduce((e,t)=>e+this.buffWindows.reduce((e,n)=>e+Math.max(0,n.getActionCountByIds([t.action.id])-t.expectedPerWindow),0),0);this.suggestions.add(new u.c({icon:this.trackedBadActions.icon,content:this.trackedBadActions.suggestionContent,tiers:this.trackedBadActions.severityTiers,value:e,why:m.a.createElement(r.Trans,{id:"core.buffwindow.suggestions.trackedbadaction.why",values:{0:this.buffAction.name,badActions:e}})}))}}output(){const e=[],t=[];this.expectedGCDs&&e.push({header:m.a.createElement(r.Trans,{id:"core.buffwindow.table.header.gcds"}),accessor:"missedgcd"}),this.requiredGCDs&&e.push({header:m.a.createElement("img",{src:this.requiredGCDs.icon,alt:"",style:{height:"20px"}}),accessor:"badgcd"}),this.trackedActions&&this.trackedActions.actions.forEach(t=>{e.push({header:m.a.createElement(o.a,b({showName:!1},t.action)),accessor:t.action.name})}),this.rotationTableNotesColumnHeader&&t.push({header:this.rotationTableNotesColumnHeader,accessor:"notes"});const n=this.buffWindows.map(e=>{const t=e.start-this.parser.fight.start_time,n=(null!=e.end?e.end:e.start)-this.parser.fight.start_time,a={},s={};return this.expectedGCDs&&(a.missedgcd={actual:e.gcds,expected:this.getBuffWindowExpectedGCDs(e)}),this.requiredGCDs&&(a.badgcd={actual:this.getBuffWindowRequiredGCDsUsed(e),expected:this.getBuffWindowExpectedGCDs(e)}),this.trackedActions&&this.trackedActions.actions.forEach(t=>{a[t.action.name]={actual:e.getActionCountByIds([t.action.id]),expected:this.getBuffWindowExpectedTrackedActions(e,t)}}),this.rotationTableNotesColumnHeader&&(s.notes=this.getBuffWindowNotes(e)),{start:t,end:n,targetsData:a,rotation:e.rotation,notesMap:s}});return m.a.createElement(c.a,{targets:e,data:n,notes:t,onGoto:this.timeline.show,headerTitle:this.rotationTableHeader})}}O.handle="buffwindow",O.title={id:"core.buffwindow.title",defaults:"Buff Window"},Object(i.b)([l.d,Object(i.d)("design:type",g.a)],O.prototype,"data",void 0),Object(i.b)([l.d,Object(i.d)("design:type",u.d)],O.prototype,"suggestions",void 0),Object(i.b)([l.d,Object(i.d)("design:type",h.d)],O.prototype,"timeline",void 0),Object(i.b)([l.d,Object(i.d)("design:type",d.a)],O.prototype,"globalCooldown",void 0)},1310:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(23);const s=12e4;class i extends a.c{constructor(){super(...arguments),this._lastApplication={},this._clip={},this._statusDuration={},this.constructor.statusesToTrack.forEach(e=>{const t=this.data.getStatus(e);t&&(t.hasOwnProperty("duration")?this._statusDuration[e]=1e3*t.duration:(console.warn("statusId ".concat(e," is missing a duration property")),this._statusDuration[e]=s))}),this.addHook(["applydebuff","refreshdebuff"],{by:"player",abilityId:this.constructor.statusesToTrack},this._onDotApply),this.addHook("complete",this._onComplete)}excludeApplication(){return!1}addChecklistRules(){}addClippingSuggestions(e){}_onDotApply(e){const t=e.ability.guid,n="".concat(e.targetID,"|").concat(e.targetInstance),a=this._lastApplication[n]=this._lastApplication[n]||{};if(!a[t]||this.excludeApplication())return void(a[t]=e.timestamp);let s=this._statusDuration[t]-(e.timestamp-a[t]);s-=this.invuln.getUntargetableUptime("all",e.timestamp-this._statusDuration[t],e.timestamp),s-=this.invuln.getInvulnerableUptime("all",e.timestamp,e.timestamp+this._statusDuration[t]+s),this._clip[t]=(this._clip[t]||0)+Math.max(0,s),a[t]=e.timestamp}_onComplete(){this.addChecklistRules(),this.addClippingSuggestions(this._clip)}getUptimePercent(e){return this.enemies.getStatusUptime(e)/(this.parser.fightDuration-this.invuln.getInvulnerableUptime())*100}getClippingAmount(e){const t=this.parser.fightDuration-this.invuln.getInvulnerableUptime();return Math.round(60*this._clip[e]/t)}}i.handle="dots",i.dependencies=["data","enemies","invuln"],i.statusesToTrack=[]},1469:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),i=n(1472),r=n(1283),o=n(8),c=n(17),l=n(47),d=n(10),u=n(61),h=n(23),p=n(1288),m=51,g=52,f=54,b=99;function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const w=[d.b.LUSTRATE.id,d.b.EXCOGITATION.id,d.b.INDOMITABILITY.id,d.b.SACRED_SOIL.id,d.b.SCH_ENERGY_DRAIN.id],v=[d.b.EXCOGITATION.id,d.b.INDOMITABILITY.id,d.b.ADLOQUIUM.id,d.b.SUCCOR.id],_=3,C=6e4,T=1e4;class j extends h.c{constructor(){super(...arguments),this._totalAetherflowCasts=0,this._extraAetherflows=_,this._recitationActive=!1,this._uses=[],this.addEventHook("cast",{by:"player"},this._onCast),this.addEventHook("applybuff",{by:"player",abilityId:u.b.RECITATION.id},this._onGainRecitation),this.addEventHook("removebuff",{by:"player",abilityId:u.b.RECITATION.id},this._removeRecitation),this.addEventHook("death",{to:"player"},this._removeRecitation),this.addEventHook("complete",this._onComplete)}_onGainRecitation(){this._recitationActive=!0}_removeRecitation(){this._recitationActive=!1}_durationWithAetherflowOnCooldown(){return this.parser.fightDuration-T}_possibleAetherflowCasts(){return this._extraAetherflows+Math.floor(this._durationWithAetherflowOnCooldown()/C)*_}_updateAetherflowUses(e,t){this._totalAetherflowCasts++,this._uses.push({timestamp:e,debit:1,id:[t]})}_onCast(e){const t=e.ability.guid;w.includes(t)&&(this._recitationActive&&v.includes(t)||this._updateAetherflowUses(e.timestamp,t)),t===d.b.DISSIPATION.id&&(this._extraAetherflows+=_)}_onComplete(){this.checklist.add(new p.b({name:s.a.createElement(a.Fragment,null,s.a.createElement(o.Trans,{id:"sch.aetherflow.checklist.name",components:[s.a.createElement(c.a,y({},d.b.AETHERFLOW))]})),description:s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(o.Trans,{id:"sch.aetherflow.checklist.description-1"}))),requirements:[new p.a({name:s.a.createElement(a.Fragment,null,s.a.createElement(o.Trans,{id:"sch.aetherflow.checklist.requirement.uptime.name",components:[s.a.createElement(c.a,y({},d.b.AETHERFLOW))]})),percent:this.cooldowns.getTimeOnCooldown(d.b.AETHERFLOW.id)/this._durationWithAetherflowOnCooldown()*100}),new p.a({name:s.a.createElement(a.Fragment,null,s.a.createElement(o.Trans,{id:"sch.aetherflow.checklist.requirement.uses.name",values:{0:this._totalAetherflowCasts,1:this._possibleAetherflowCasts()},components:[s.a.createElement(c.a,y({},d.b.AETHERFLOW))]})),percent:this._totalAetherflowCasts/this._possibleAetherflowCasts()*100})]}))}output(){const e=this.cooldowns.getCooldown(d.b.AETHERFLOW.id).history.map(e=>({timestamp:[e.timestamp],id:[d.b.AETHERFLOW.id]})),t=this.cooldowns.getCooldown(d.b.DISSIPATION.id).history.map(e=>({timestamp:[e.timestamp],id:[d.b.DISSIPATION.id]})),n=this._uses;let a=0,u=0;return s.a.createElement(i.a,{collapsing:!0,unstackable:!0},s.a.createElement(i.a.Header,null,s.a.createElement(i.a.Row,null,s.a.createElement(i.a.HeaderCell,null,s.a.createElement(o.Trans,{id:"sch.aetherflow.cast-time"})),s.a.createElement(i.a.HeaderCell,null,s.a.createElement(o.Trans,{id:"sch.aetherflow.cooldown"})),s.a.createElement(i.a.HeaderCell,null,s.a.createElement(o.Trans,{id:"sch.aetherflow.drift"})),s.a.createElement(i.a.HeaderCell,null,s.a.createElement(o.Trans,{id:"sch.aetherflow.abilities-used"})),s.a.createElement(i.a.HeaderCell,null,s.a.createElement(o.Trans,{id:"sch.aetherflow.stacks-wasted"})))),s.a.createElement(i.a.Body,null,[].concat(e,t,n).sort((e,t)=>e.timestamp-t.timestamp).reduce((e,t)=>{if(0===e.length)return[t];const{id:n,debit:a,timestamp:s}=e[e.length-1];return t.debit?(e[e.length-1]={debit:(a||0)+t.debit,id:[].concat(n,t.id),timestamp:[].concat(s,t.timestamp)},e):[...e,t]},[]).map((e,t,n)=>{let{timestamp:o,debit:h=0,id:p}=e,m=0,g=0;if(p.includes(d.b.AETHERFLOW.id)){let e;const a=n[t+1],s=n[t+2];a&&a.id[0]===d.b.AETHERFLOW.id?e=a.timestamp[0]:s&&s.id[0]===d.b.AETHERFLOW.id?(e=s.timestamp[0],g+=1e3*_):e=this.parser.currentTimestamp,m=e-o[0]}g+=m,g-=C,g>0&&(a+=g);let f=0;return m>C&&(f=_-h||0,u+=f),Array.isArray(o)||(o=[o]),s.a.createElement(i.a.Row,{key:o},s.a.createElement(i.a.Cell,null,o.map(e=>this.parser.formatTimestamp(e)).join(", ")),s.a.createElement(i.a.Cell,null,m>0&&this.parser.formatDuration(m)),s.a.createElement(i.a.Cell,null,g>0&&this.parser.formatDuration(g)),s.a.createElement(i.a.Cell,null,s.a.createElement(r.a,null,p.map((e,t)=>s.a.createElement(r.a.Column,{key:t,width:4},s.a.createElement(c.a,y({},Object(l.a)(d.b,"id",e))))))),s.a.createElement(i.a.Cell,null,f||"-"))}),s.a.createElement(i.a.Row,null,s.a.createElement(i.a.Cell,{colSpan:"2",textAlign:"right",col:!0},"Total Drift"),s.a.createElement(i.a.Cell,null,this.parser.formatDuration(a)),s.a.createElement(i.a.Cell,{textAlign:"right"},"Total Stacks Wasted"),s.a.createElement(i.a.Cell,null,u||"-"))))}}j.displayOrder=m,j.handle="aetherflow",j.dependencies=["checklist","cooldowns"];var A=n(1310),I=n(1287);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const G={CLIPPING:{6:I.a.MINOR,9:I.a.MEDIUM,12:I.a.MAJOR},UPTIME:{84:p.c.WARN,94:p.c.SUCCESS}};class k extends A.a{addChecklistRules(){this.checklist.add(new p.d({name:s.a.createElement(o.Trans,{id:"sch.dots.checklist.name"}),description:s.a.createElement(o.Trans,{id:"sch.dots.checklist.description"}),tiers:G.UPTIME,requirements:[new p.a({name:s.a.createElement(o.Trans,{id:"sch.dots.checklist.requirement.bio-ii.name",components:[s.a.createElement(c.a,S({},d.b.BIOLYSIS))]}),percent:()=>this.getUptimePercent(u.b.BIOLYSIS.id)})]}))}addClippingSuggestions(e){const t=this.getClippingAmount(u.b.BIOLYSIS.id);this.suggestions.add(new I.c({icon:d.b.BIOLYSIS.icon,content:s.a.createElement(o.Trans,{id:"sch.dots.suggestions.clipping.content"}),tiers:G.CLIPPING,value:t,why:s.a.createElement(o.Trans,{id:"sch.dots.suggestions.clipping.why",values:{0:this.parser.formatDuration(1e3*t),1:this.parser.formatDuration(e[u.b.BIOLYSIS.id])},components:[s.a.createElement(c.d,S({},u.b.BIOLYSIS))]})}))}}k.handle="biolysis",k.displayOrder=g,k.dependencies=[...k.dependencies,"checklist","suggestions"],k.statusesToTrack=[u.b.BIOLYSIS.id];var x=n(52),B=n(1296);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const W={1:I.a.MINOR,5:I.a.MEDIUM,10:I.a.MAJOR};class N extends B.a{_onComplete(){this._leadingGcdEvent&&this._saveIfBad();const e=this._badWeaves.length;this.suggestions.add(new I.c({icon:d.b.SCH_RUIN_II.icon,content:s.a.createElement(o.Trans,{id:"sch.weaving.content",components:[s.a.createElement(c.a,H({},d.b.SCH_RUIN_II)),s.a.createElement(c.a,H({},d.b.BIOLYSIS)),s.a.createElement("a",{href:"javascript:void(0);",onClick:()=>this.parser.scrollTo(this.constructor.handle)}),s.a.createElement(x.a,{message:this.constructor.title})]}),why:s.a.createElement(o.Trans,{id:"sch.weaving.why",values:{badWeavesCount:e}}),tiers:W,value:e}))}}N.displayOrder=f;var L=n(1300);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class q extends L.a{constructor(){super(...arguments),this.trackedCds=[{cooldowns:[d.b.CHAIN_STRATAGEM],allowedAverageDowntime:7500,firstUseOffset:1e4}],this.checklistDescription=s.a.createElement(o.Trans,{id:"sch.chainstrat.cooldown.description",components:[s.a.createElement(c.a,F({},d.b.CHAIN_STRATAGEM))]})}}var J=n(125),z=n.n(J),X=n(14),K=n(1293);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const $=[d.b.SUMMON_EOS.id,d.b.SUMMON_SELENE.id],ee=[d.b.SCH_ENERGY_DRAIN.id,d.b.LUSTRATE.id,d.b.INDOMITABILITY.id,d.b.SACRED_SOIL.id,d.b.EXCOGITATION.id],te=100,ne=0,ae=10,se=z()(X.b.SCHOLAR.colour),ie=.8,re=.5,oe={50:I.a.MINOR};class ce extends h.c{constructor(){super(...arguments),this._gauge=ne,this._waste=0,this._history=[],this._fairyOut=!1,this._noFairyAtStart=!1,this.addEventHook("heal",{by:"pet",abilityId:u.b.FEY_UNION.id},this._onGaugeSpend),this.addEventHook("cast",{by:"player",abilityId:d.b.SCH_FEY_BLESSING.id},this._onGaugeSpend),this.addEventHook("death",{to:"player"},this._onDeath),this.addEventHook("cast",{by:"player",abilityId:ee},this._onGaugeGenerate),this.addEventHook("complete",this._onComplete),this.addEventHook("cast",{by:"player",abilityId:$},this._onSummon)}normalise(e){for(const t of e){if(!t.ability)continue;const e=Object(l.a)(d.b,"id",t.ability.guid);if(!e)continue;if(e.id&&$.includes(e.id)){this._noFairyAtStart=!0;break}const n=this.parser.report.friendlyPets.find(e=>e.id===t.sourceID)||{petOwner:-1};if("cast"===t.type&&t.sourceIsFriendly&&n.petOwner===this.parser.player.id&&e.pet){this._fairyOut=!0;break}}return e}_onSummon(){this._fairyOut=!0}_onGaugeSpend(){this._gauge-=ae,this._updateHistory()}_onGaugeGenerate(){!this.combatants.selected.hasStatus(u.b.DISSIPATION.id)&&this._fairyOut&&(this._gauge+=ae,this._gauge>te&&(this._gauge=te,this._waste+=ae),this._updateHistory())}_onDeath(){this._fairyOut=!1,this._gauge=0,this._updateHistory()}_updateHistory(){const e=this.parser.currentTimestamp-this.parser.fight.start_time;this._history.push({t:e,y:this._gauge})}_onComplete(){this._noFairyAtStart&&this.suggestions.add(new I.b({icon:d.b.SUMMON_SERAPH.icon,severity:I.a.MEDIUM,content:s.a.createElement(o.Trans,{id:"sch.gauge.nofairyatstart.content",components:[s.a.createElement(c.a,V({},d.b.SUMMON_EOS)),s.a.createElement(c.a,V({},d.b.SUMMON_SELENE))]}),why:s.a.createElement(o.Trans,{id:"sch.gauge.nofairyatstart.why"})})),this.suggestions.add(new I.c({icon:d.b.FEY_BLESSING.icon,tiers:oe,value:this._waste,content:s.a.createElement(o.Trans,{id:"sch.gauge.waste.suggestion.content",components:[s.a.createElement(c.a,V({},d.b.FEY_UNION)),s.a.createElement(c.a,V({},d.b.FEY_BLESSING))]}),why:s.a.createElement(o.Trans,{id:"sch.gauge.waste.suggestion.why",values:{0:this._waste}})}))}output(){const e={datasets:[{label:"Faerie Gauge",steppedLine:!0,data:this._history,backgroundColor:se.fade(ie),borderColor:se.fade(re)}]};return s.a.createElement(a.Fragment,null,s.a.createElement(K.a,{data:e}),s.a.createElement(o.Trans,{id:"sch.gauge.waste",values:{0:this._waste}}))}}ce.handle="fairieGauge",ce.title={id:"sch.gauge.title",defaults:"Faerie Gauge Usage"},ce.dependencies=["combatants","suggestions"];var le=n(1305),de=n(377);function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const me={1:I.a.MAJOR};class ge extends le.a{constructor(){super(...arguments),this.buffAction=d.b.SWIFTCAST,this.buffStatus=u.b.SWIFTCAST,this.rotationTableHeader=s.a.createElement(o.Trans,{id:"sch.swiftcast.title"})}onCast(e){const t=Object(de.a)(d.b,"id",e.ability.guid);t&&!t.autoAttack&&t.castTime&&this.activeBuffWindow&&this.activeBuffWindow.rotation.push(e)}onComplete(){const e=this.buffWindows.reduce((e,t)=>e+t.rotation.length?0:1,0);this.suggestions.add(new I.c({icon:d.b.SWIFTCAST.icon,content:s.a.createElement(o.Trans,{id:"sch.swiftcast.missed.suggestion.content",components:[s.a.createElement(c.a,he({},d.b.SWIFTCAST)),s.a.createElement(c.a,he({},d.b.RESURRECTION)),s.a.createElement(c.a,he({},d.b.BROIL_III))]}),tiers:me,value:e,why:s.a.createElement(o.Trans,{id:"sch.swiftcast.missed.suggestion.why",values:{missedSwifts:e}})}))}}ge.displayOrder=b,ge.handle="swiftcast",ge.title={id:"sch.swiftcast.title",defaults:"Swiftcast Actions"};var fe=n(1243);function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Oe=3e4,we={2:I.a.MEDIUM,5:I.a.MAJOR};class ve extends h.c{constructor(){super(...arguments),this._currentCast=null,this._droppedCasts=[],this._missedTimeMS=0,this.addEventHook("begincast",{by:"player"},this._onBeginCast),this.addEventHook("cast",{by:"player"},this._onCast),this.addEventHook("complete",this._onComplete)}_onBeginCast(e){this._currentCast&&this._pushDropCasts(e),this._currentCast=e}_onCast(e){const t=e.ability.guid;this._currentCast&&t!==this._currentCast.ability.guid&&this._pushDropCasts(e),this._currentCast=null}_pushDropCasts(e){this._missedTimeMS+=Math.min(this.gcd.getEstimate(),e.timestamp-this._currentCast.timestamp),this._droppedCasts.push({action:Object(l.a)(d.b,"id",this._currentCast.ability.guid),timestamp:this._currentCast.timestamp})}_onComplete(){this.suggestions.add(new I.c({icon:d.b.INTERJECT.icon,tiers:we,value:this._droppedCasts.length,content:s.a.createElement(o.Trans,{id:"sch.interrupts.suggestion.content",components:[s.a.createElement(c.a,Ee({},d.b.SCH_RUIN_II))]}),why:s.a.createElement(o.Trans,{id:"sch.interrupts.suggestion.why",values:{0:this._droppedCasts.length,1:this.parser.formatDuration(this._missedTimeMS)}})}))}output(){return s.a.createElement(i.a,{compact:!0,unstackable:!0,celled:!0},s.a.createElement(i.a.Header,null,s.a.createElement(i.a.Row,null,s.a.createElement(i.a.HeaderCell,{collapsing:!0},s.a.createElement("strong",null,s.a.createElement(o.Trans,{id:"sch.interrupts.table.time"}))),s.a.createElement(i.a.HeaderCell,null,s.a.createElement("strong",null,s.a.createElement(o.Trans,{id:"sch.interrupts.table.cast"}))))),s.a.createElement(i.a.Body,null,this._droppedCasts.map(e=>s.a.createElement(i.a.Row,{key:e.timestamp},s.a.createElement(i.a.Cell,{textAlign:"center"},s.a.createElement("span",{style:{marginRight:5}},this.parser.formatTimestamp(e.timestamp)),s.a.createElement(fe.a,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:()=>this.timeline.show(e.timestamp-this.parser.fight.start_time,e.timestamp-this.parser.fight.start_time+Oe)})),s.a.createElement(i.a.Cell,null,s.a.createElement(c.a,Ee({},e.action)))))))}}ve.handle="interrupts",ve.title={id:"sch.interrupts.title",defaults:"Interrupted Casts"},ve.dependencies=["timeline","gcd","suggestions"];t.default=[N,j,k,q,ce,ge,ve]}}]);
//# sourceMappingURL=jobs-sch.2b2e4614.js.map
(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1294:function(e,t,s){"use strict";s.d(t,"a",(function(){return b}));var n=s(10),i=s(1293),a=s(0),o=s.n(a),r=s(1285),c=s(1248),d=s(38);function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){h(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class b extends o.a.Component{render(){const{targets:e,notes:t,data:s,onGoto:i,headerTitle:a}=this.props;return o.a.createElement(r.a,{compact:!0,unstackable:!0,celled:!0},o.a.createElement(r.a.Header,null,o.a.createElement(r.a.Row,null,o.a.createElement(r.a.HeaderCell,{collapsing:!0},o.a.createElement("strong",null,o.a.createElement(n.Trans,{id:"core.ui.rotation-table.header.time"}))),(e||[]).map((e,t)=>o.a.createElement(r.a.HeaderCell,{key:"target_header_".concat(t),textAlign:"center",collapsing:!0},o.a.createElement("strong",null,e.header))),o.a.createElement(r.a.HeaderCell,null,o.a.createElement("strong",null,a||o.a.createElement(n.Trans,{id:"core.ui.rotation-table.header.rotation"}))),(t||[]).map((e,t)=>o.a.createElement(r.a.HeaderCell,{key:"note_header_".concat(t),textAlign:"center",collapsing:!0},o.a.createElement("strong",null,e.header))))),o.a.createElement(r.a.Body,null,s.map(s=>o.a.createElement(b.Row,u({key:s.start,onGoto:i,targets:e||[],notes:t||[]},s)))))}}b.targetAccessorResolver=(e,t)=>"string"==typeof t.accessor&&null!=e.targetsData?e.targetsData[t.accessor]:"function"==typeof t.accessor?t.accessor(e):{actual:0,expected:0},b.notesAccessorResolver=(e,t)=>"string"==typeof t.accessor&&null!=e.notesMap?e.notesMap[t.accessor]:"function"==typeof t.accessor?t.accessor(e):null,b.TargetCell=e=>{let{actual:t,expected:s}=e;return o.a.createElement(r.a.Cell,{textAlign:"center",positive:void 0!==s&&t>=s,negative:void 0!==s&&t<s},t,"/",void 0===s?"-":s)},b.Row=e=>{let{onGoto:t,targets:s,notes:n,notesMap:a,start:l,end:h,targetsData:m,rotation:p}=e;return o.a.createElement(r.a.Row,null,o.a.createElement(r.a.Cell,{textAlign:"center"},o.a.createElement("span",{style:{marginRight:5}},Object(d.d)(l/1e3)),"function"==typeof t&&o.a.createElement(c.a,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:()=>t(l,h)})),s.map(e=>b.targetAccessorResolver({start:l,end:h,targetsData:m,rotation:p},e)).map((e,t)=>o.a.createElement(b.TargetCell,u({key:"target_".concat(t)},e))),o.a.createElement(r.a.Cell,null,o.a.createElement(i.a,{events:p})),n.map(e=>b.notesAccessorResolver({start:l,end:h,targetsData:m,notesMap:a,rotation:p},e)).map((e,t)=>o.a.createElement(r.a.Cell,{key:"notes_".concat(t),textAlign:"center"},e)))}},1296:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s(129),i=s.n(n),a=s(0),o=s.n(a),r=s(377);const c={aspectRatio:3,scales:{xAxes:[{type:"time",time:{displayFormats:{minute:"m:ss",second:"m:ss",millisecond:"m:ss.SS"},tooltipFormat:"mm:ss.SSS"}}]}};class d extends a.PureComponent{render(){const e=i()({},c,this.props.options||{});return o.a.createElement(r.a,{data:this.props.data,options:e,width:e.aspectRatio,height:1})}}},1298:function(e,t,s){"use strict";s.d(t,"a",(function(){return w}));var n=s(376),i=s.n(n),a=s(373),o=s.n(a),r=s(2),c=s(10),d=s(1294),l=s(22),u=s(220),h=s(1291),b=s(61),m=s(0),p=s.n(m),g=s(222);function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function E(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const y=2.5,A=15e3,O={uncomboed:p.a.createElement(c.Trans,{id:"core.combos.issuetypenames.uncomboed"}),combobreak:p.a.createElement(c.Trans,{id:"core.combos.issuetypenames.combobreak"}),failedcombo:p.a.createElement(c.Trans,{id:"core.combos.issuetypenames.failed"})};class w extends l.c{constructor(){super(...arguments),this.lastGcdTime=this.parser.fight.start_time,this.currentComboChain=[],this.issues=[]}init(){this.addHook("aoedamage",{by:"player"},this.onCast),this.addHook("complete",this.onComplete)}get lastComboEvent(){return o()(this.currentComboChain)||null}get lastAction(){const e=this.lastComboEvent;return e?e.ability.guid:null}get comboBreakers(){return this.issues.filter(e=>"combobreak"===e.type).map(e=>e.event)}get uncomboedGcds(){return this.issues.filter(e=>"uncomboed"===e.type).map(e=>e.event)}fabricateComboEvent(e){const t=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){E(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},e,{type:"combo"});delete t.timestamp,this.parser.fabricateEvent(t)}recordBrokenCombo(e,t){this.isAllowableComboBreak(e,t)||this.issues.push({type:"combobreak",event:e,context:t}),this.currentComboChain=[]}recordUncomboedGcd(e){this.issues.push({type:"uncomboed",event:e,context:[]}),this.currentComboChain=[]}recordFailedCombo(e,t){this.issues.push({type:"failedcombo",event:e,context:t}),this.currentComboChain=[]}checkCombo(e,t){if(null==this.lastAction){if(e.start)return this.fabricateComboEvent(t),!0;if(e.from)return this.recordUncomboedGcd(t),!1}if(e.start)return this.recordBrokenCombo(t,this.currentComboChain),!0;if(e.from){if((Array.isArray(e.from)?e.from:[e.from]).includes(this.lastAction))return this.fabricateComboEvent(t),!e.end}return this.recordBrokenCombo(t,this.currentComboChain),!1}onCast(e){const t=this.data.getAction(e.ability.guid);if(t){if(t.onGcd&&(t.combo||t.breaksCombo)&&(e.timestamp-this.lastGcdTime>A&&(this.currentComboChain=[]),this.lastGcdTime=e.timestamp),t.combo){if(!e.successfulHit)return void this.recordFailedCombo(e,this.currentComboChain);this.checkCombo(t.combo,e)?this.currentComboChain.push(e):this.currentComboChain=[]}t.breaksCombo&&null!==this.lastAction&&this.recordBrokenCombo(e,this.currentComboChain)}}onComplete(){this.addJobSpecificSuggestions(this.comboBreakers,this.uncomboedGcds)||this.suggestions.add(new h.c({icon:this.constructor.suggestionIcon,content:p.a.createElement(c.Trans,{id:"core.combos.content",components:[p.a.createElement("p",null),p.a.createElement("p",null)]}),tiers:{1:h.a.MINOR,2:h.a.MEDIUM,4:h.a.MAJOR},value:this.issues.length,why:p.a.createElement(c.Trans,{id:"core.combos.why",values:{0:this.issues.length}})}))}addJobSpecificSuggestions(e,t){return!1}isAllowableComboBreak(e,t){return!1}output(){if(this.issues.length<=0)return!1;const e=this.parser.fight.start_time,t=this.issues.sort((e,t)=>e.event.timestamp-t.event.timestamp).map(t=>{var s,n;const a=[...t.context||[],t.event],r=i()(a),c=o()(a),d=this.data.getAction(r.ability.guid),l=this.data.getAction(c.ability.guid);return{start:r.timestamp-e+(null!==(s=null==d?void 0:d.cooldown)&&void 0!==s?s:y),end:c.timestamp-e+(null!==(n=null==l?void 0:l.cooldown)&&void 0!==n?n:y),rotation:a,notesMap:{reason:p.a.createElement("span",{style:{whiteSpace:"nowrap"}},O[t.type])}}});return p.a.createElement(d.a,{notes:[{header:p.a.createElement(c.Trans,{id:"core.combos.rotationtable.header.reason"}),accessor:"reason"}],data:t,onGoto:this.timeline.show})}}w.handle="combos",w.title={id:"core.combos.title",defaults:"Combo Issues"},w.displayOrder=u.a.COMBOS,w.suggestionIcon="https://xivapi.com/i/000000/000405.png",Object(r.b)([l.d,Object(r.d)("design:type",g.a)],w.prototype,"data",void 0),Object(r.b)([l.d,Object(r.d)("design:type",h.d)],w.prototype,"suggestions",void 0),Object(r.b)([l.d,Object(r.d)("design:type",b.d)],w.prototype,"timeline",void 0)},1307:function(e,t,s){"use strict";s.d(t,"a",(function(){return E}));var n=s(10),i=s(1300),a=s(0),o=s.n(a),r=s(22),c=s(61),d=s(375);function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){h(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b=1500,m=2500,p=2500,g=100,f=!1;class E extends r.c{constructor(){super(...arguments),this._castingEvent=null,this._estimatedBaseGcd=null,this._estimateGcdCount=-1,this._lastGcd={isInstant:!1,event:null},this.gcds=[],this.gcdGroupId="gcd",this.addHook("complete",this._onComplete)}normalise(e){for(let t=0;t<e.length;t++){const s=e[t];if(!this.parser.byPlayer(s)||!s.ability)continue;const n=this.data.getAction(s.ability.guid);if(n&&n.onGcd)switch(s.type){case"begincast":this._castingEvent=s;break;case"cast":const e=null!==this._castingEvent&&this._castingEvent.ability.guid===n.id,t=e?this._castingEvent:s;this.saveGcd(u({},this._lastGcd),t.timestamp),this._lastGcd.isInstant=!e,this._lastGcd.event=t,this._castingEvent=null}}return e.length&&this.saveGcd(u({},this._lastGcd),e[e.length-1].timestamp),this._debugLogSavedGcds(),e}_debugLogSavedGcds(){f&&this.gcds.forEach(e=>{const t=this.parser.formatTimestamp(e.timestamp),s=this.data.getAction(e.actionId),n=e.isInstant?" Instant":"",i=e.casterTaxed?" CasterTaxed":"";console.log("".concat(t," ").concat(s.name,"[").concat(e.length,"|").concat(e.normalizedLength,"] Speedmod[").concat(e.speedMod,"]").concat(n).concat(i))})}_onComplete(){const e=this.parser.fight.start_time;this.timeline.addGroup(new c.a({id:this.gcdGroupId,content:"GCD",order:-99})),this.gcds.forEach(t=>{const s=this.data.getAction(t.actionId);s&&this.timeline.addItem(new c.b({type:"background",start:t.timestamp-e,length:this._getGcdLength(t),title:s.name,group:this.gcdGroupId,content:o.a.createElement("img",{src:s.icon,alt:s.name,title:s.name})}))});const t=this.getEstimate(!1);this.statistics.add(new d.b({title:o.a.createElement(n.Trans,{id:"core.gcd.estimated-gcd"}),icon:this.data.actions.ATTACK.icon,value:this.parser.formatDuration(t),info:o.a.createElement(n.Trans,{id:"core.gcd.no-statistics",components:[o.a.createElement("em",null),o.a.createElement("em",null)]})}))}saveGcd(e,t){if(!e.event)return;const s=this.data.getAction(e.event.ability.guid);if(!s||!s.id)return;let n=this.speedmod.get(e.event.timestamp),i=s.castTime;n<=.5&&(n/=.5,i*=.5);let a=!1,o=10*Math.round((t-e.event.timestamp)/10);!e.isInstant&&i>=s.cooldown&&(o-=g,a=!0);const r=null!=s.gcdRecast?s.gcdRecast:s.cooldown,c=e.isInstant||i<r?r:i,d=Math.round(o*(p/1e3/c)*(1/n));this.gcds.push({timestamp:e.event.timestamp,length:o,normalizedLength:d,speedMod:n,castTime:i,cooldown:r,casterTaxed:a,actionId:s.id,isInstant:e.isInstant})}getEstimate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.gcds.length;if(null===this._estimatedBaseGcd||t!==this._estimateGcdCount){const e=this.gcds.map(e=>e.normalizedLength);this._estimatedBaseGcd=e.length?i.a.mean(i.a.mode(e)):m,this._estimateGcdCount=t}return e&&(this._estimatedBaseGcd=Math.max(b,Math.min(m,this._estimatedBaseGcd))),this._estimatedBaseGcd}getUptime(){return this.gcds.reduce((e,t)=>{const s=this._getGcdLength(t);return e+s-this.downtime.getDowntime(t.timestamp,t.timestamp+s)},0)}_getGcdLength(e){let t=e.isInstant||e.castTime<=e.cooldown?e.cooldown:Math.max(e.castTime,e.cooldown);if(t*=1e3,t>b){const s=this.getEstimate()/m;t=Math.max(b,t*s*e.speedMod)}return Math.round(t+(e.casterTaxed?g:0))}}E.handle="gcd",E.dependencies=["precastAction","castTime","data","downtime","speedmod","statistics","timeline"],E.title={id:"core.gcd.title",defaults:"Global Cooldown"}},1308:function(e,t,s){"use strict";s.d(t,"a",(function(){return A}));var n=s(373),i=s.n(n),a=s(2),o=s(10),r=s(19),c=s(1294),d=s(22),l=s(1307),u=s(1291),h=s(61),b=s(0),m=s.n(b),p=s(222);function g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?g(Object(s),!0).forEach((function(t){E(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function E(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class y{constructor(e,t){this.rotation=[],this.data=e,this.start=t}get gcds(){return this.rotation.map(e=>this.data.getAction(e.ability.guid)).filter(e=>e&&e.onGcd).length}getActionCountByIds(e){return this.rotation.filter(t=>e.includes(t.ability.guid)).length}}class A extends d.c{constructor(){super(...arguments),this.buffWindows=[]}get activeBuffWindow(){const e=i()(this.buffWindows);if(e&&null==e.end)return e}init(){this.addHook("cast",{by:"player"},this.onCast),this.addHook("applybuff",{by:"player"},this.onApplyBuff),this.addHook("removebuff",{by:"player"},this.onRemoveBuff),this.addHook("complete",this.onComplete)}onCast(e){const t=this.data.getAction(e.ability.guid);t&&!t.autoAttack&&this.activeBuffWindow&&this.considerAction(t)&&this.activeBuffWindow.rotation.push(e)}considerAction(e){return!0}onApplyBuff(e){this.buffStatus&&e.ability.guid===this.buffStatus.id&&this.startNewBuffWindow(e.timestamp)}startNewBuffWindow(e){this.buffWindows.push(new y(this.data,e))}onRemoveBuff(e){this.buffStatus&&e.ability.guid===this.buffStatus.id&&this.activeBuffWindow&&(this.activeBuffWindow.end=e.timestamp)}getBaselineExpectedGCDs(e){return this.expectedGCDs?this.expectedGCDs.expectedPerWindow:0}changeExpectedGCDsClassLogic(e){return 0}reduceExpectedGCDsEndOfFight(e){if(this.buffStatus.duration){const t=1e3*this.buffStatus.duration,s=this.parser.fight.end_time-e.start;if(t>=s){const e=this.globalCooldown.getEstimate();return Math.ceil((t-s)/e)}}return 0}getBaselineExpectedTrackedAction(e,t){return t.expectedPerWindow||0}changeExpectedTrackedActionClassLogic(e,t){return 0}getBuffWindowExpectedGCDs(e){return this.getBaselineExpectedGCDs(e)+this.changeExpectedGCDsClassLogic(e)-this.reduceExpectedGCDsEndOfFight(e)}getBuffWindowRequiredGCDsUsed(e){if(!this.requiredGCDs)return 0;const t=this.requiredGCDs.actions.map(e=>e.id);return e.getActionCountByIds(t)}getBuffWindowExpectedTrackedActions(e,t){return this.getBaselineExpectedTrackedAction(e,t)+this.changeExpectedTrackedActionClassLogic(e,t)}getBuffWindowNotes(e){}onComplete(){if(this.expectedGCDs){const e=this.buffWindows.reduce((e,t)=>{const s=this.getBuffWindowExpectedGCDs(t);return e+Math.max(0,s-t.gcds)},0);this.suggestions.add(new u.c({icon:this.buffAction.icon,content:this.expectedGCDs.suggestionContent,tiers:this.expectedGCDs.severityTiers,value:e,why:m.a.createElement(o.Trans,{id:"core.buffwindow.suggestions.missedgcd.why",values:{0:this.buffAction.name,missedGCDs:e}})}))}if(this.requiredGCDs){const e=this.buffWindows.reduce((e,t)=>e+Math.max(0,t.gcds-this.getBuffWindowRequiredGCDsUsed(t)),0);this.suggestions.add(new u.c({icon:this.requiredGCDs.icon,content:this.requiredGCDs.suggestionContent,tiers:this.requiredGCDs.severityTiers,value:e,why:m.a.createElement(o.Trans,{id:"core.buffwindow.suggestions.badgcd.why",values:{0:this.buffAction.name,invalidGCDs:e}})}))}if(this.trackedActions){const e=this.trackedActions.actions.reduce((e,t)=>e+this.buffWindows.reduce((e,s)=>e+Math.max(0,t.expectedPerWindow-s.getActionCountByIds([t.action.id])),0),0);this.suggestions.add(new u.c({icon:this.trackedActions.icon,content:this.trackedActions.suggestionContent,tiers:this.trackedActions.severityTiers,value:e,why:m.a.createElement(o.Trans,{id:"core.buffwindow.suggestions.trackedaction.why",values:{0:this.buffAction.name,missedActions:e}})}))}if(this.trackedBadActions){const e=this.trackedBadActions.actions.reduce((e,t)=>e+this.buffWindows.reduce((e,s)=>e+Math.max(0,s.getActionCountByIds([t.action.id])-t.expectedPerWindow),0),0);this.suggestions.add(new u.c({icon:this.trackedBadActions.icon,content:this.trackedBadActions.suggestionContent,tiers:this.trackedBadActions.severityTiers,value:e,why:m.a.createElement(o.Trans,{id:"core.buffwindow.suggestions.trackedbadaction.why",values:{0:this.buffAction.name,badActions:e}})}))}}output(){const e=[],t=[];this.expectedGCDs&&e.push({header:m.a.createElement(o.Trans,{id:"core.buffwindow.table.header.gcds"}),accessor:"missedgcd"}),this.requiredGCDs&&e.push({header:m.a.createElement("img",{src:this.requiredGCDs.icon,alt:"",style:{height:"20px"}}),accessor:"badgcd"}),this.trackedActions&&this.trackedActions.actions.forEach(t=>{e.push({header:m.a.createElement(r.a,f({showName:!1},t.action)),accessor:t.action.name})}),this.rotationTableNotesColumnHeader&&t.push({header:this.rotationTableNotesColumnHeader,accessor:"notes"});const s=this.buffWindows.map(e=>{const t=e.start-this.parser.fight.start_time,s=(null!=e.end?e.end:e.start)-this.parser.fight.start_time,n={},i={};return this.expectedGCDs&&(n.missedgcd={actual:e.gcds,expected:this.getBuffWindowExpectedGCDs(e)}),this.requiredGCDs&&(n.badgcd={actual:this.getBuffWindowRequiredGCDsUsed(e),expected:this.getBuffWindowExpectedGCDs(e)}),this.trackedActions&&this.trackedActions.actions.forEach(t=>{n[t.action.name]={actual:e.getActionCountByIds([t.action.id]),expected:this.getBuffWindowExpectedTrackedActions(e,t)}}),this.rotationTableNotesColumnHeader&&(i.notes=this.getBuffWindowNotes(e)),{start:t,end:s,targetsData:n,rotation:e.rotation,notesMap:i}});return m.a.createElement(c.a,{targets:e,data:s,notes:t,onGoto:this.timeline.show,headerTitle:this.rotationTableHeader})}}A.handle="buffwindow",A.title={id:"core.buffwindow.title",defaults:"Buff Window"},Object(a.b)([d.d,Object(a.d)("design:type",p.a)],A.prototype,"data",void 0),Object(a.b)([d.d,Object(a.d)("design:type",u.d)],A.prototype,"suggestions",void 0),Object(a.b)([d.d,Object(a.d)("design:type",h.d)],A.prototype,"timeline",void 0),Object(a.b)([d.d,Object(a.d)("design:type",l.a)],A.prototype,"globalCooldown",void 0)},1312:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s(22),i=s(61),a=s(0),o=s.n(a);const r=2e3;class c extends n.c{constructor(){super(...arguments),this._statuses={},this._groups={},this._statusToActionMap={},this._actionToMergeNameMap={};const e={by:[this.parser.player.id,...this.parser.player.pets.map(e=>e.id)]};this.addHook("complete",this._onComplete),this.addHook(["applybuff","applydebuff"],e,this._onApply),this.addHook(["refreshdebuff","refreshbuff"],e,this._onRefresh),this.addHook(["removebuff","removedebuff"],e,this._onRemove),this.cooldowns.constructor.cooldownOrder.forEach(e=>{e&&"object"==typeof e&&e.merge&&e.actions.forEach(t=>{this._actionToMergeNameMap[t]=e.name})}),Object.values(this.data.actions).forEach(e=>{e.statusesApplied&&e.statusesApplied.forEach(t=>{const s=this.data.statuses[t];this._statusToActionMap[s.id]=e})})}_onApply(e){this._isStatusAppliedToPet(e)||this._addStatus(e)}_onRefresh(e){this._isStatusAppliedToPet(e)||(this._endPrevStatus(e),this._addStatus(e))}_onRemove(e){this._isStatusAppliedToPet(e)||this._endPrevStatus(e)}_endPrevStatus(e){const t=this.data.getStatus(e.ability.guid);if(!t)return;const s=this._statuses[t.id];if(s){const t=s.usages[s.usages.length-1];t.end||(t.end=e.timestamp-this.parser.fight.start_time)}}_addStatus(e){const t=this.data.getStatus(e.ability.guid);if(!t)return;let s=this._statuses[t.id];s||(s=this._statuses[t.id]={status:t,usages:[]}),s.usages.some(t=>{return Math.abs(e.timestamp-this.parser.fight.start_time-t.start)<=r})||s.usages.push({start:e.timestamp-this.parser.fight.start_time})}_onComplete(){Object.values(this._statuses).forEach(e=>{const t=this._createGroupForStatus(e.status);t&&e.usages.forEach(s=>{t.addItem(new i.b({type:"background",start:s.start,end:s.end||s.start+1e3*e.status.duration,content:o.a.createElement("img",{src:e.status.icon,alt:e.status.name})}))})})}_createGroupForStatus(e){const t="status-"+(this.constructor.statusesStackMapping[e.id]||e.id);if(this._groups[t])return this._groups[t];const s=this._statusToActionMap[e.id];if(!s)return;const n=new i.c({id:t,content:e.name,showNested:!1});return this._groups[t]=n,this.timeline.attachToGroup(s.onGcd?this.gcd.gcdGroupId:this._actionToMergeNameMap[s.id]||s.id,n),n}_isStatusAppliedToPet(e){return this.parser.report.friendlyPets.some(t=>t.id===e.targetID)}}c.handle="statuses",c.dependencies=["data","timeline","cooldowns","gcd"],c.statusesStackMapping={}},1451:function(e,t){e.exports="data:image/png;base64,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"},1452:function(e,t,s){e.exports={helpText:"Kenki-module_helpText__3r8gJ"}},1462:function(e,t,s){"use strict";s.r(t);var n=s(10),i=s(0),a=s.n(i),o=s(9),r=s(22),c=s(1291);const d=new Set([o.b.FUGA.id,o.b.OKA.id,o.b.MANGETSU.id]),l=new Set([o.b.TENKA_GOKEN.id,o.b.KAESHI_GOKEN.id]),u=new Set([o.b.HISSATSU_KYUTEN.id,o.b.HISSATSU_GUREN.id]),h=new Set([o.b.FUGA.id,o.b.OKA.id,o.b.MANGETSU.id,o.b.HISSATSU_KYUTEN.id]),b=new Set([o.b.HISSATSU_GUREN.id,o.b.TENKA_GOKEN.id,o.b.KAESHI_GOKEN.id]),m=3,p=2;class g extends r.c{constructor(){super(...arguments),this._badAoeGCDs=0,this._badSenCasts=0,this._badKenkiCasts=0,this.addHook("aoedamage",{by:"player"},this._onAoe),this.addHook("complete",this._onComplete)}_onAoe(e){const t=e.ability.guid;b.has(t)?e.hits.length<p&&(d.has(t)?this._badAoeGCDs++:l.has(t)?this._badSenCasts++:u.has(t)&&this._badKenkiCasts++):h.has(t)&&e.hits.length<m&&(d.has(t)?this._badAoeGCDs++:l.has(t)?this._badSenCasts++:u.has(t)&&this._badKenkiCasts++)}_onComplete(){this.suggestions.add(new c.c({icon:o.b.HISSATSU_GUREN.icon,content:a.a.createElement(n.Trans,{id:"sam.aoechecker.suggestions.badkenki.content"}),tiers:{1:c.a.MINOR,3:c.a.MEDIUM,5:c.a.MAJOR},value:this._badKenkiCasts,why:a.a.createElement(n.Trans,{id:"sam.aoechecker.suggestions.aoekenki.why",values:{0:this._badKenkiCasts}})})),this.suggestions.add(new c.c({icon:o.b.TENKA_GOKEN.icon,content:a.a.createElement(n.Trans,{id:"sam.aoechecker.suggestions.badsen.content"}),tiers:{1:c.a.MINOR,3:c.a.MEDIUM,5:c.a.MAJOR},value:this._badSenCasts,why:a.a.createElement(n.Trans,{id:"sam.aoechecker.suggestions.badsen.why",values:{0:this._badSenCasts}})})),this.suggestions.add(new c.c({icon:o.b.FUGA.icon,content:a.a.createElement(n.Trans,{id:"sam.aoechecker.suggestions.badgcd.content"}),tiers:{1:c.a.MINOR,3:c.a.MEDIUM,5:c.a.MAJOR},value:this._badAoeGCDs,why:a.a.createElement(n.Trans,{id:"sam.aoechecker.suggestions.badgcd.why",values:{0:this._badAoeGCDs}})}))}}g.handle="aoechecker",g.title={id:"sam.aoechecker.title",defaults:"AoeChecker"},g.dependencies=["suggestions"];var f=s(19),E=s(54),y=s(1292);function A(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?A(Object(s),!0).forEach((function(t){w(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):A(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function w(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class S extends r.c{constructor(){super(...arguments),this.addHook("complete",this._onComplete)}_onComplete(){this.checklist.add(new y.b({name:a.a.createElement(n.Trans,{id:"sam.buffs.checklist.name"}),description:a.a.createElement(n.Trans,{id:"sam.buffs.description",components:[a.a.createElement(f.a,O({},o.b.JINPU)),a.a.createElement(f.a,O({},o.b.SHIFU))]}),target:95,requirements:[new y.a({name:a.a.createElement(n.Trans,{id:"sam.buffs.checklist.requirement.jinpu.name",components:[a.a.createElement(f.a,O({},o.b.JINPU))]}),percent:()=>this.getUptimePercent(E.b.JINPU.id)}),new y.a({name:a.a.createElement(n.Trans,{id:"sam.buffs.checklist.requirement.shifu.name",components:[a.a.createElement(f.a,O({},o.b.SHIFU))]}),percent:()=>this.getUptimePercent(E.b.SHIFU.id)})]}))}getUptimePercent(e){return this.combatants.getStatusUptime(e,this.parser.player.id)/(this.parser.fightDuration-this.invuln.getInvulnerableUptime())*100}}S.handle="buffs",S.title={id:"sam.buffs.title",defaults:"Buffs"},S.dependencies=["checklist","combatants","invuln"];var _=s(2),v=s(221),I=s(1298);class k extends I.a{checkCombo(e,t){return this.combatants.selected.hasStatus(E.b.MEIKYO_SHISUI.id)&&t.ability.guid!==o.b.HAKAZE.id?(this.fabricateComboEvent(t),!1):super.checkCombo(e,t)}}function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function G(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T(Object(s),!0).forEach((function(t){j(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function j(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}k.suggestionIcon=o.b.HAKAZE.icon,Object(_.b)([r.d,Object(_.d)("design:type",v.a)],k.prototype,"combatants",void 0);const C={[E.b.HIGANBANA.id]:6e4},H={1e3:c.a.MINOR,3e4:c.a.MEDIUM,6e4:c.a.MAJOR};class K extends r.c{constructor(){super(...arguments),this._lastApplication={},this._clip={[E.b.HIGANBANA.id]:0};const e={by:"player",abilityId:[E.b.HIGANBANA.id]};this.addHook(["applydebuff","refreshdebuff"],e,this._onDotApply),this.addHook("complete",this._onComplete)}_onDotApply(e){const t=e.ability.guid,s="".concat(e.targetID,"|").concat(e.targetInstance),n=this._lastApplication[s]=this._lastApplication[s]||{};if(!n[t])return void(n[t]=e.timestamp);let i=C[t]-(e.timestamp-n[t]);i-=this.invuln.getUntargetableUptime("all",e.timestamp-C[t],e.timestamp),i-=this.invuln.getInvulnerableUptime("all",e.timestamp,e.timestamp+C[t]+i),this._clip[t]+=Math.max(0,i),n[t]=e.timestamp}_onComplete(){this.checklist.add(new y.b({name:a.a.createElement(n.Trans,{id:"sam.higanbana.checklist.name",components:[a.a.createElement(f.a,G({},o.b.HIGANBANA))]}),description:a.a.createElement(n.Trans,{id:"sam.higanbana.checklist.description",components:[a.a.createElement(f.a,G({},o.b.HIGANBANA))]}),target:90,requirements:[new y.a({name:a.a.createElement(n.Trans,{id:"sam.higanbana.checklist.requirement",components:[a.a.createElement(f.a,G({},o.b.HIGANBANA))]}),percent:()=>this.getDotUptimePercent(E.b.HIGANBANA.id)})]}));const e=Math.max(...Object.values(this._clip));this.suggestions.add(new c.c({icon:o.b.HIGANBANA.icon,content:a.a.createElement(n.Trans,{id:"sam.higanbana.suggestion.content",components:[a.a.createElement(f.a,G({},o.b.HIGANBANA))]}),why:a.a.createElement(n.Trans,{id:"sam.higanbana.suggestion.why",values:{0:this.parser.formatDuration(this._clip[E.b.HIGANBANA.id]),1:E.b.HIGANBANA.name}}),tiers:H,value:e}))}getDotUptimePercent(e){return this.enemies.getStatusUptime(e)/(this.parser.fightDuration-this.invuln.getInvulnerableUptime())*100}}function M(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function U(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?M(Object(s),!0).forEach((function(t){D(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function D(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}K.handle="higanbana",K.title={id:"sam.higanbana.title",defaults:"Higanbana"},K.dependencies=["checklist","enemies","invuln","suggestions"];const P={[o.b.HAKAZE.id]:1,[o.b.JINPU.id]:1,[o.b.ENPI.id]:1,[o.b.SHIFU.id]:1,[o.b.FUGA.id]:1,[o.b.GEKKO.id]:1,[o.b.MANGETSU.id]:1,[o.b.KASHA.id]:1,[o.b.OKA.id]:1,[o.b.YUKIKAZE.id]:1,[o.b.HIGANBANA.id]:0,[o.b.TENKA_GOKEN.id]:0,[o.b.MIDARE_SETSUGEKKA.id]:0};class N extends r.c{constructor(){super(...arguments),this._badKaitenCasts=0,this._missedKaitenCasts=0,this.addHook("cast",{by:"player"},this._onCast),this.addHook("complete",this._onComplete)}_onCast(e){const t=e.ability.guid;this.combatants.selected.hasStatus(E.b.KAITEN.id)&&P.hasOwnProperty(t)&&(this._badKaitenCasts+=P[t]),t!==o.b.MIDARE_SETSUGEKKA.id&&t!==o.b.HIGANBANA.id||this.combatants.selected.hasStatus(E.b.KAITEN.id)||(this._missedKaitenCasts+=1)}_onComplete(){this._badKaitenCasts>0&&this.suggestions.add(new c.c({icon:o.b.HISSATSU_KAITEN.icon,content:a.a.createElement(n.Trans,{id:"sam.kaiten.suggestion.badkaiten.content",components:[a.a.createElement(f.a,U({},o.b.HISSATSU_KAITEN)),a.a.createElement(f.a,U({},o.b.IAIJUTSU))]}),tiers:{1:c.a.MINOR,3:c.a.MEDIUM,5:c.a.MAJOR},why:a.a.createElement(n.Trans,{id:"sam.suggestion.badkaiten.why",values:{0:this._badKaitenCasts}}),value:this._badKaitenCasts})),this._missedKaitenCasts>0&&this.suggestions.add(new c.c({icon:o.b.HISSATSU_KAITEN.icon,content:a.a.createElement(n.Trans,{id:"sam.kaiten.suggestion.missedkaiten.content",components:[a.a.createElement(f.a,U({},o.b.HISSATSU_KAITEN)),a.a.createElement(f.a,U({},o.b.MIDARE_SETSUGEKKA)),a.a.createElement(f.a,U({},o.b.HIGANBANA))]}),tiers:{1:c.a.MINOR,3:c.a.MEDIUM,5:c.a.MAJOR},why:a.a.createElement(n.Trans,{id:"sam.kaiten.suggestion.missedkaiten.why",values:{0:this._missedKaitenCasts},components:[a.a.createElement(f.a,U({},o.b.MIDARE_SETSUGEKKA)),a.a.createElement(f.a,U({},o.b.HIGANBANA))]}),value:this._missedKaitenCasts}))}}N.handle="kaiten",N.title={id:"sam.kaiten.title",defaults:"Kaiten"},N.dependencies=["combatants","suggestions"];var B=s(223),x=s.n(B),R=s(128),W=s.n(R),Y=s(1296),F=s(14),J=s(1451),q=s.n(J),L=s(1452),Q=s.n(L);function Z(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function V(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(s),!0).forEach((function(t){X(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Z(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function X(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const z=100,$={[o.b.HAKAZE.id]:{cast:5},[o.b.JINPU.id]:{combo:5},[o.b.SHIFU.id]:{combo:5},[o.b.YUKIKAZE.id]:{combo:10},[o.b.GEKKO.id]:{combo:5,positional:5},[o.b.KASHA.id]:{combo:5,positional:5},[o.b.FUGA.id]:{cast:5},[o.b.MANGETSU.id]:{combo:10},[o.b.OKA.id]:{combo:10},[o.b.ENPI.id]:{cast:10},[o.b.IKISHOTEN.id]:{cast:50},[o.b.HISSATSU_GYOTEN.id]:{cast:-10},[o.b.HISSATSU_YATEN.id]:{cast:-10},[o.b.HISSATSU_SEIGAN.id]:{cast:-15},[o.b.HISSATSU_KAITEN.id]:{cast:-20},[o.b.HISSATSU_SHINTEN.id]:{cast:-25},[o.b.HISSATSU_KYUTEN.id]:{cast:-25},[o.b.HISSATSU_GUREN.id]:{cast:-50},[o.b.HISSATSU_SENEI.id]:{cast:-50}},ee=10,te=3e3,se=5;class ne extends r.c{constructor(){super(...arguments),this._kenki={min:0,max:0},this._history={min:[],max:[]},this._wasted={min:0,max:0,transfer:0},this._badGuren=0,this.addHook(["cast","combo"],{by:"player",abilityId:Object.keys($).map(Number)},this._onAction);const e={by:"player",abilityId:E.b.MEDITATE.id};this.addHook("applybuff",e,this._onApplyMeditate),this.addHook("removebuff",e,this._onRemoveMeditate),this.addHook("death",{to:"player"},()=>this._set(0,0)),this.addHook("complete",this._onComplete)}modify(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const s=this._kenki.min+e,n=this._kenki.max+e+t;this._set(s,n),this._wasted.min+=Math.max(0,s-this._kenki.min);const i=Math.max(0,n-this._kenki.max);this._wasted.max+=i,this._wasted.transfer+=i,this._wasted.transfer=Math.max(0,this._wasted.transfer-t),s<0&&(this._wasted.min+=Math.min(this._wasted.transfer,-s),this._wasted.transfer=Math.max(0,this._wasted.transfer+s))}_set(e,t){this._kenki={min:x()(e,0,z),max:x()(t,0,z)};const s=this.parser.currentTimestamp-this.parser.fight.start_time;this._history.min.push({t:s,y:this._kenki.min}),this._history.max.push({t:s,y:this._kenki.max})}_onAction(e){const t=$[e.ability.guid];!t|!t[e.type]||this.modify(t[e.type],t.positional)}_onApplyMeditate(e){this.meditateStart=e.timestamp}_onRemoveMeditate(e){const t=e.timestamp-this.meditateStart,s=Math.min(Math.floor(t/te),se);this.modify(s*ee,s===se?0:ee)}_onComplete(){const{min:e,max:t}=this._wasted;this.suggestions.add(new c.c({icon:q.a,content:a.a.createElement(n.Trans,{id:"sam.kenki.suggestion.content",values:{MAX_KENKI:z}}),why:a.a.createElement(n.Trans,{id:"sam.kenki.suggestion.why",values:{min:e,max:t}}),value:(e+t)/2,tiers:{5:c.a.MINOR,20:c.a.MEDIUM,35:c.a.MAJOR}})),this.suggestions.add(new c.c({icon:o.b.HISSATSU_GUREN.icon,content:a.a.createElement(n.Trans,{id:"sam.kenki.suggestion.badguren.content",components:[a.a.createElement(f.a,V({},o.b.HISSATSU_GUREN)),a.a.createElement(f.a,V({},o.b.HISSATSU_SENEI))]}),why:a.a.createElement(n.Trans,{id:"sam.kenki.suggestion.badguren.why",values:{0:this._badGurens}}),value:this._badGurens,tiers:{1:c.a.MEDIUM,2:c.a.MAJOR}}))}output(){const e=W()(F.b.SAMURAI.colour),t={datasets:[{label:"Minimum",data:this._history.min,steppedLine:!0,fill:!1,borderColor:"transparent",pointRadius:0,pointHitRadius:10},{label:"Maximum",data:this._history.max,steppedLine:!0,backgroundColor:e.fade(.5),borderColor:e.fade(.2),fill:"-1",pointRadius:0,pointHitRadius:10}]};return a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:Q.a.helpText},"The visible area represents possible kenki values if positionals were missed."),a.a.createElement("div",null,a.a.createElement(Y.a,{data:t,options:{legend:!1,tooltips:{mode:"index",displayColors:!1}}})))}}ne.handle="kenki",ne.title={id:"sam.kenki.title",defaults:"Kenki"},ne.dependencies=["suggestions"];var ie,ae=s(501),oe=s.n(ae);function re(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ce(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?re(Object(s),!0).forEach((function(t){de(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):re(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function de(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}!function(e){e.SETSU="Setsu",e.GETSU="Getsu",e.KA="Ka"}(ie||(ie={}));const le={[o.b.YUKIKAZE.id]:ie.SETSU,[o.b.GEKKO.id]:ie.GETSU,[o.b.MANGETSU.id]:ie.GETSU,[o.b.KASHA.id]:ie.KA,[o.b.OKA.id]:ie.KA},ue=[o.b.HIGANBANA.id,o.b.TENKA_GOKEN.id,o.b.MIDARE_SETSUGEKKA.id],he=(o.b.KAESHI_HIGANBANA.id,o.b.KAESHI_GOKEN.id,o.b.KAESHI_SETSUGEKKA.id,10);class be extends r.c{constructor(){super(...arguments),this.sen={},this.allowoverwrite=!1,this.wasted=0}init(){this.addHook("cast",{by:"player",abilityId:Object.keys(le).map(Number)},this.onAction),this.addHook("cast",{by:"player",abilityId:ue},this.remove),this.addHook("cast",{by:"player",abilityId:o.b.HAGAKURE.id},this.onHagakure),this.addHook("death",{to:"player"},this.remove),this.addHook("complete",this.onComplete)}onAction(e){const t=le[e.ability.guid];this.sen[t]&&this.wasted++,this.sen[t]=!0}remove(){this.sen=oe()(this.sen,()=>!1)}onHagakure(){const e=Object.values(this.sen).filter(e=>e).length;this.kenki.modify(e*he),this.remove()}onComplete(){this.suggestions.add(new c.c({icon:o.b.MEIKYO_SHISUI.icon,content:a.a.createElement(n.Trans,{id:"sam.sen.suggestion.content",components:[a.a.createElement(f.a,ce({},o.b.GEKKO)),a.a.createElement(f.a,ce({},o.b.KASHA)),a.a.createElement(f.a,ce({},o.b.YUKIKAZE))]}),tiers:{1:c.a.MINOR,2:c.a.MEDIUM,3:c.a.MAJOR},value:this.wasted,why:a.a.createElement(n.Trans,{id:"sam.sen.suggestion.why",values:{0:this.wasted}})}))}}be.handle="sen",Object(_.b)([r.d,Object(_.d)("design:type",c.d)],be.prototype,"suggestions",void 0),Object(_.b)([r.d,Object(_.d)("design:type",ne)],be.prototype,"kenki",void 0);var me=s(379);class pe extends me.a{constructor(){super(...arguments),this.SPEED_BUFF_STATUS_IDS.push(E.b.SHIFU.id)}}var ge=s(1308);function fe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ee(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(s),!0).forEach((function(t){ye(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ye(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ae=new Set([o.b.HAKAZE.id,o.b.JINPU.id,o.b.ENPI.id,o.b.SHIFU.id,o.b.FUGA.id,o.b.GEKKO.id,o.b.MANGETSU.id,o.b.KASHA.id,o.b.OKA.id,o.b.YUKIKAZE.id]);class Oe extends ge.a{constructor(){super(...arguments),this.buffAction=o.b.MEIKYO_SHISUI,this.buffStatus=E.b.MEIKYO_SHISUI,this.expectedGCDs={expectedPerWindow:3,suggestionContent:a.a.createElement(n.Trans,{id:"sam.ms.suggestions.missedgcd.content",components:[a.a.createElement(f.a,Ee({},o.b.MEIKYO_SHISUI))]}),severityTiers:{1:c.a.MEDIUM,2:c.a.MAJOR}},this.requiredGCDs={icon:o.b.MEIKYO_SHISUI.icon,actions:[o.b.GEKKO,o.b.KASHA,o.b.YUKIKAZE,o.b.OKA,o.b.MANGETSU],suggestionContent:a.a.createElement(n.Trans,{id:"sam.ms.suggestions.badgcd.content",components:[a.a.createElement(f.a,Ee({},o.b.MEIKYO_SHISUI))]}),severityTiers:{1:c.a.MAJOR}}}considerAction(e){return!!Ae.has(e.id)}}function we(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Se(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?we(Object(s),!0).forEach((function(t){_e(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):we(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Oe.handle="Meikyo",Oe.title={id:"sam.ms.title",defaults:"Meikyo Shisui Windows"};class ve extends r.c{constructor(){super(...arguments),this._thirdEyes=0,this._openEyes=0,this._seiganEyes=0,this._badEyes=0,this.addHook("cast",{by:"player",abilityId:[o.b.MERCIFUL_EYES.id]},this._onBadSpend),this.addHook("cast",{by:"player",abilityId:[o.b.HISSATSU_SEIGAN.id]},this._onSpend),this.addHook("cast",{by:"player",abilityId:[o.b.THIRD_EYE.id]},this._onEye),this.addHook("applybuff",{to:"player",abilityId:[E.b.EYES_OPEN.id]},this._onGain),this.addHook("complete",this._onComplete)}_onEye(){this._thirdEyes+=1}_onSpend(){this._seiganEyes+=1}_onBadSpend(){this._badEyes+=1}_onGain(){this._openEyes+=1}_onComplete(){const e=this._thirdEyes-this._openEyes,t=this._openEyes-(this._badEyes+this._seiganEyes);0===this._thirdEyes&&this.suggestions.add(new c.b({icon:o.b.THIRD_EYE.icon,content:a.a.createElement(n.Trans,{id:"sam.thirdeye.suggestion.useyourdamnthirdeye.content",components:[a.a.createElement(f.a,Se({},o.b.THIRD_EYE)),a.a.createElement(f.a,Se({},o.b.HISSATSU_SEIGAN)),a.a.createElement(f.a,Se({},o.b.MERCIFUL_EYES))]}),severity:c.a.MEDIUM,why:a.a.createElement(n.Trans,{id:"sam.thirdeye.suggestion.useyourdamnthirdeye.why"})})),e>0&&this.suggestions.add(new c.b({icon:o.b.THIRD_EYE.icon,content:a.a.createElement(n.Trans,{id:"sam.thirdeye.suggestion.unopenedeyes.content",components:[a.a.createElement(f.a,Se({},o.b.THIRD_EYE))]}),severity:c.a.MINOR,why:a.a.createElement(n.Trans,{id:"sam.thirdeye.suggestion.unopenedeyes.why",values:{unopenedEyes:e}})})),t>0&&this.suggestions.add(new c.b({icon:o.b.HISSATSU_SEIGAN.icon,content:a.a.createElement(n.Trans,{id:"sam.thirdeye.suggestion.unspenteyes.content",components:[a.a.createElement(f.a,Se({},o.b.THIRD_EYE)),a.a.createElement(f.a,Se({},o.b.HISSATSU_SEIGAN))]}),severity:c.a.MINOR,why:a.a.createElement(n.Trans,{id:"sam.thirdeye.suggestion.unspenteyes.why",values:{unspentEyes:t}})})),this._badEyes>1&&this.suggestions.add(new c.b({icon:o.b.MERCIFUL_EYES.icon,content:a.a.createElement(n.Trans,{id:"sam.thirdeye.suggestion.badeyes.content",components:[a.a.createElement(f.a,Se({},o.b.MERCIFUL_EYES)),a.a.createElement(f.a,Se({},o.b.HISSATSU_SEIGAN))]}),severity:c.a.MINOR,why:a.a.createElement(n.Trans,{id:"sam.thirdeye.suggestion.badeyes.why",values:{0:this._badEyes},components:[a.a.createElement(f.a,Se({},o.b.MERCIFUL_EYES))]})}))}}function Ie(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ke(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(s),!0).forEach((function(t){Te(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ie(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Te(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}ve.handle="thirdEye",ve.title={id:"sam.thirdeye.title",defaults:"Third Eye"},ve.dependencies=["suggestions"];class Ge extends r.c{constructor(){super(...arguments),this._kaeshiFailures=0,this._kaeshiMidare=0,this.addHook("cast",{by:"player",abilityId:[o.b.KAESHI_HIGANBANA.id,o.b.KAESHI_GOKEN.id]},this._onBadTsubame),this.addHook("cast",{by:"player",abilityId:[o.b.KAESHI_SETSUGEKKA.id]},this._onDoubleMidare),this.addHook("complete",this._onComplete)}_onBadTsubame(){this._kaeshiFailures+=1}_onDoubleMidare(){this._kaeshiMidare+=1}_onComplete(){const e=this._kaeshiFailures+this._kaeshiMidare,t=this._kaeshiFailures;0===e&&this.suggestions.add(new c.b({icon:o.b.TSUBAME_GAESHI.icon,content:a.a.createElement(n.Trans,{id:"sam.tsubame.suggestion.notsubame.content",components:[a.a.createElement(f.a,ke({},o.b.TSUBAME_GAESHI)),a.a.createElement(f.a,ke({},o.b.MIDARE_SETSUGEKKA))]}),severity:c.a.MAJOR,why:a.a.createElement(n.Trans,{id:"sam.tsubame.suggestion.notsubame.why",components:[a.a.createElement(f.a,ke({},o.b.TSUBAME_GAESHI))]})})),this.suggestions.add(new c.c({icon:o.b.TSUBAME_GAESHI.icon,content:a.a.createElement(n.Trans,{id:"sam.tsubame.suggestion.badtsubame.content",components:[a.a.createElement(f.a,ke({},o.b.TSUBAME_GAESHI)),a.a.createElement(f.a,ke({},o.b.MIDARE_SETSUGEKKA))]}),tiers:{1:c.a.MEDIUM,2:c.a.MAJOR},why:a.a.createElement(n.Trans,{id:"sam.tsubame.suggestion.badtsubame.why",values:{badUses:t},components:[a.a.createElement(f.a,ke({},o.b.TSUBAME_GAESHI))]}),value:this._badUses}))}}Ge.handle="tsubame",Ge.title={id:"sam.tsubame.title",defaults:"Tsubame"},Ge.dependencies=["suggestions"];var je=s(1303);const Ce=15900,He=24620,Ke=2180,Me=4360;class Ue extends je.a{constructor(){super(...arguments),this.defaultAllowedAverageDowntime=Ke,this.trackedCds=[{cooldowns:[o.b.MEIKYO_SHISUI],firstUseOffset:Ce,allowedAverageDowntime:Me},{cooldowns:[o.b.KAESHI_SETSUGEKKA,o.b.KAESHI_GOKEN,o.b.KAESHI_HIGANBANA],firstUseOffset:He}]}}var De=s(1455);function Pe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ne(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(s),!0).forEach((function(t){Be(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Pe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Be(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const xe={[o.b.HIGANBANA.id]:1,[o.b.KAESHI_HIGANBANA.id]:1,[o.b.TENKA_GOKEN.id]:1,[o.b.KAESHI_GOKEN.id]:1,[o.b.MIDARE_SETSUGEKKA.id]:1,[o.b.KAESHI_SETSUGEKKA.id]:1},Re={[o.b.SHOHA.id]:3},We=3;class Ye extends r.c{constructor(){super(...arguments),this.stacks=0,this.shohaUses=0,this.stackHistory=[],this.wasteBySource={[o.b.HIGANBANA.id]:0,[o.b.KAESHI_HIGANBANA.id]:0,[o.b.TENKA_GOKEN.id]:0,[o.b.KAESHI_GOKEN.id]:0,[o.b.MIDARE_SETSUGEKKA.id]:0,[o.b.KAESHI_SETSUGEKKA.id]:0,[o.b.RAISE.id]:0},this.leftoverStacks=0,this.totalGeneratedStacks=0}init(){this.addHook("init",this.pushToHistory),this.addHook("cast",{by:"player",abilityId:Object.keys(xe).map(Number)},this.onGenerate),this.addHook("cast",{by:"player",abilityId:Object.keys(Re).map(Number)},this.onSpend),this.addEventHook(["applybuff","applybuffstack"],{to:"player",abilityId:E.b.MEDITATION.id},this.onMeditateGain),this.addHook("death",{to:"player"},this.onDeath),this.addHook("complete",this.onComplete)}onGenerate(e){if(this.stacks===We){const t=e.ability.guid,s=xe[t];this.addWaste(s,t)}}onMeditateGain(){this.stacks++,this.totalGeneratedStacks++,this.stacks>We&&(this.stacks=We),this.pushToHistory()}addWaste(e,t){if(this.stacks+=e,this.totalGeneratedStacks+=e,this.stacks>We){const e=this.stacks-We;this.wasteBySource[t]+=e,this.stacks=We}this.pushToHistory()}onSpend(e){this.stacks=0,this.shohaUses++,this.pushToHistory()}onDeath(){this.wasteBySource[o.b.RAISE.id]+=this.stacks,this.dumpRemainingResources()}dumpRemainingResources(){this.stacks=0,this.pushToHistory()}pushToHistory(){const e=this.parser.currentTimestamp-this.parser.fight.start_time;this.stackHistory.push({t:e,y:this.stacks})}onComplete(){this.dumpRemainingResources(),this.checklist.add(new y.b({name:"Meditation",description:a.a.createElement(n.Trans,{id:"sam.shoha.waste.content",components:[a.a.createElement(f.a,Ne({},o.b.SHOHA))]}),requirements:[new y.a({name:a.a.createElement(n.Trans,{id:"sam.shoha.checklist.requirement.waste.name"}),value:this.shohaUses,target:Math.floor(this.totalGeneratedStacks/We)})]}))}convertWasteMapToTable(){const e=[this.convertWasteEntryToRow(o.b.HIGANBANA),this.convertWasteEntryToRow(o.b.TENKA_GOKEN),this.convertWasteEntryToRow(o.b.MIDARE_SETSUGEKKA),this.convertWasteEntryToRow(o.b.KAESHI_HIGANBANA),this.convertWasteEntryToRow(o.b.KAESHI_GOKEN),this.convertWasteEntryToRow(o.b.KAESHI_SETSUGEKKA),this.convertWasteEntryToRow(o.b.RAISE)];return a.a.createElement(i.Fragment,{key:"wasteBySource-fragment"},a.a.createElement("table",{key:"wasteBySource-table"},a.a.createElement("tbody",{key:"wasteBySource-tbody"},e)))}convertWasteEntryToRow(e){const t=e.name;return a.a.createElement("tr",{key:e.id+"-row",style:{margin:0,padding:0}},a.a.createElement("td",{key:e.id+"-name"},a.a.createElement(f.a,Ne({name:t},e))),a.a.createElement("td",{key:e.id+"-value"},this.wasteBySource[e.id]))}output(){const e=[];e.push({key:"key-wastebysource",title:{key:"title-wastebysource",content:a.a.createElement(n.Trans,{id:"sam.shoha.waste.by-source.key"})},content:{key:"content-wastebysource",content:this.convertWasteMapToTable()}});const t=W()(F.b.SAMURAI.colour),s={datasets:[{label:"Meditation Stacks",steppedLine:!0,data:this.stackHistory,backgroundColor:t.fade(.8),borderColor:t.fade(.5)}]};return a.a.createElement(i.Fragment,null,a.a.createElement(Y.a,{data:s,options:{scales:{yAxes:[{ticks:{beginAtZero:!0,min:0,max:3,callback:e=>{if(e%1==0)return e}}}]}}}),a.a.createElement(De.a,{exclusive:!1,panels:e,styled:!0,fluid:!0}))}}Ye.handle="shoha",Ye.title={id:"sam.shoha.title",defaults:"Meditation Timeline"},Ye.displayMode=r.a.FULL,Object(_.b)([r.d,Object(_.d)("design:type",y.e)],Ye.prototype,"checklist",void 0),Object(_.b)([r.d,Object(_.d)("design:type",c.d)],Ye.prototype,"suggestions",void 0),Object(_.b)([r.d,Object(_.d)("design:type",v.a)],Ye.prototype,"combatants",void 0);var Fe=s(1312);class Je extends Fe.a{}Je.statusesStackMapping={[E.b.EYES_OPEN.id]:E.b.THIRD_EYE.id};t.default=[g,S,k,K,N,ne,be,pe,Oe,ve,Ge,Ue,Ye,Je]}}]);
//# sourceMappingURL=jobs-sam.3ed47d6b.js.map
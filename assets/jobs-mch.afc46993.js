(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1287:function(e,t,n){"use strict";var r=n(0),s=n.n(r),o=n(37);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c={MORBID:0,MAJOR:1,MEDIUM:2,MINOR:3,IGNORE:void 0};class l{constructor(e){this.icon="",this.content="",this.why="",this.severity=c.MEDIUM,Object.keys(e||{}).forEach(t=>{this[t]=e[t]})}}class u extends l{constructor(e){super(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({tiers:{},value:0,matcher:o.i},e))}get severity(){return this.matcher(this.tiers,this.value)}set severity(e){}}var d=n(2),h=n(8),m=n(26),p=n(1275),b=n(213),g=(n(129),n(1303)),f=n.n(g),y=n(29);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const w={[c.MORBID]:{content:s.a.createElement(h.Trans,{id:"core.suggestions.severity.morbid"}),color:"black",icon:"times"},[c.MAJOR]:{content:s.a.createElement(h.Trans,{id:"core.suggestions.severity.major"}),color:"red",icon:"arrow up"},[c.MEDIUM]:{content:s.a.createElement(h.Trans,{id:"core.suggestions.severity.medium"}),color:"orange"},[c.MINOR]:{content:s.a.createElement(h.Trans,{id:"core.suggestions.severity.minor"}),color:"blue",icon:"arrow down"}};let _=class extends s.a.Component{constructor(){super(...arguments),this.onToggleShowMinor=(e,t)=>{const{settingsStore:n}=this.context;n.setShowMinorSuggestions(t.checked)}}render(){const e=this.context.settingsStore.showMinorSuggestions,t=this.props.suggestions.filter(t=>e||t.severity!==c.MINOR),n=this.props.suggestions.some(e=>e.severity===c.MINOR);return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(p.a,{toggle:!0,label:s.a.createElement("label",null,s.a.createElement(h.Trans,{id:"core.suggestion.show-minor"})),defaultChecked:e,onChange:this.onToggleShowMinor,className:f.a.checkbox}),s.a.createElement("div",{className:f.a.items},t.map((e,t)=>s.a.createElement("div",{key:t,className:f.a.item},s.a.createElement("img",{src:e.icon,alt:""}),s.a.createElement("div",null,e.content,s.a.createElement("div",{className:f.a.extra},s.a.createElement(b.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({horizontal:!0},w[e.severity])),e.why)))),0===t.length&&s.a.createElement("div",{className:f.a.item},s.a.createElement("div",null,s.a.createElement("strong",null,s.a.createElement(h.Trans,{id:"core.suggestion.nothing"})),s.a.createElement("br",null),n&&s.a.createElement(h.Trans,{id:"core.suggestion.nothing-but-minor"})))))}};_.contextType=y.a,_=Object(d.b)([m.b],_);var v=_,C=n(23),j=n(218);class T extends C.c{constructor(){super(...arguments),this._suggestions=[]}add(e){e instanceof l?this._suggestions.push(e):console.error("TODO: Proper error message for passing a non-suggestion to the suggestion add handler")}output(){if(0===this._suggestions.length)return!1;const e=this._suggestions.filter(e=>e.severity!==c.IGNORE).sort((e,t)=>e.severity-t.severity);return s.a.createElement(v,{suggestions:e})}}T.handle="suggestions",T.displayOrder=j.a.SUGGESTIONS,T.displayMode=C.a.FULL,T.title={id:"core.suggestions.title",defaults:"Suggestions"},n.d(t,"d",(function(){return T})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u}))},1289:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(4),s=n.n(r),o=n(17),a=n(47),i=n(10),c=n(0),l=n.n(c),u=n(1302),d=n.n(u);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends c.Component{render(){const{events:e}=this.props;return l.a.createElement("div",{className:d.a.container},e.map((e,t)=>{const n=Object(a.a)(i.b,"id",e.ability.guid);if(!n||n.autoAttack)return;if(!n.icon)return console.error(e,"event ability has no icon"),!1;const r=[d.a.link,{[d.a.ogcd]:!n.onGcd}],c=n.onGcd?d.a.gcdSize:d.a.ogcdSize,u=n.id>=i.a?o.b:o.a;return l.a.createElement("div",{key:t,className:s()(...r)},l.a.createElement(u,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({showName:!1,iconSize:c},n)))}))}}},1290:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(8),s=n(1289),o=n(0),a=n.n(o),i=n(1472),c=n(1243),l=n(37);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends a.a.Component{render(){const{targets:e,notes:t,data:n,onGoto:s,headerTitle:o}=this.props;return a.a.createElement(i.a,{compact:!0,unstackable:!0,celled:!0},a.a.createElement(i.a.Header,null,a.a.createElement(i.a.Row,null,a.a.createElement(i.a.HeaderCell,{collapsing:!0},a.a.createElement("strong",null,a.a.createElement(r.Trans,{id:"core.ui.rotation-table.header.time"}))),(e||[]).map((e,t)=>a.a.createElement(i.a.HeaderCell,{key:"target_header_".concat(t),textAlign:"center",collapsing:!0},a.a.createElement("strong",null,e.header))),a.a.createElement(i.a.HeaderCell,null,a.a.createElement("strong",null,o||a.a.createElement(r.Trans,{id:"core.ui.rotation-table.header.rotation"}))),(t||[]).map((e,t)=>a.a.createElement(i.a.HeaderCell,{key:"note_header_".concat(t),textAlign:"center",collapsing:!0},a.a.createElement("strong",null,e.header))))),a.a.createElement(i.a.Body,null,n.map(n=>a.a.createElement(m.Row,d({key:n.start,onGoto:s,targets:e||[],notes:t||[]},n)))))}}m.targetAccessorResolver=(e,t)=>"string"==typeof t.accessor&&null!=e.targetsData?e.targetsData[t.accessor]:"function"==typeof t.accessor?t.accessor(e):{actual:0,expected:0},m.notesAccessorResolver=(e,t)=>"string"==typeof t.accessor&&null!=e.notesMap?e.notesMap[t.accessor]:"function"==typeof t.accessor?t.accessor(e):null,m.TargetCell=e=>{let{actual:t,expected:n}=e;return a.a.createElement(i.a.Cell,{textAlign:"center",positive:void 0!==n&&t>=n,negative:void 0!==n&&t<n},t,"/",void 0===n?"-":n)},m.Row=e=>{let{onGoto:t,targets:n,notes:r,notesMap:o,start:u,end:h,targetsData:p,rotation:b}=e;return a.a.createElement(i.a.Row,null,a.a.createElement(i.a.Cell,{textAlign:"center"},a.a.createElement("span",{style:{marginRight:5}},Object(l.d)(u/1e3)),"function"==typeof t&&a.a.createElement(c.a,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:()=>t(u,h)})),n.map(e=>m.targetAccessorResolver({start:u,end:h,targetsData:p,rotation:b},e)).map((e,t)=>a.a.createElement(m.TargetCell,d({key:"target_".concat(t)},e))),a.a.createElement(i.a.Cell,null,a.a.createElement(s.a,{events:b})),r.map(e=>m.notesAccessorResolver({start:u,end:h,targetsData:p,notesMap:o,rotation:b},e)).map((e,t)=>a.a.createElement(i.a.Cell,{key:"notes_".concat(t),textAlign:"center"},e)))}},1292:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(219),s=n.n(r),o=n(50),a=n.n(o),i=n(16),c=n.n(i),l=n(368),u=n.n(l),d=n(23),h=n(63),m=n(0),p=n.n(m);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class f extends d.c{constructor(){super(...arguments),this._cooldownGroups={},this._currentAction=null,this._cooldowns={},this._groups={},this._cooldownGroups=u()(this.data.actions,"cooldownGroup"),this._buildGroups(this.constructor.cooldownOrder),this.addHook("begincast",{by:"player"},this._onBeginCast),this.addHook("cast",{by:"player"},this._onCast),this.addHook("complete",this._onComplete)}_buildGroups(e){if(!e)return;return e.map((t,n)=>{const r=-(e.length-n);if("number"==typeof t){const e=this.data.getAction(t);return this._buildGroup({id:t,content:e&&e.name,order:r}),t}const s=this._buildGroup({id:t.name,content:t.name,order:r});return t.merge?t.actions.forEach(e=>{this._groups[e]=s}):s.nestedGroups=this._buildGroups(t.actions),t.name})}_buildGroup(e){const t=new h.c(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({showNested:!1},e));return this.timeline.addGroup(t),this._groups[e.id]=t,t}_onBeginCast(e){const t=this.data.getAction(e.ability.guid);t&&null!=t.cooldown&&(this._currentAction=t,this.startCooldown(t.id),c()(t.cooldownGroup)||this.startCooldownGroup(t.id,t.cooldownGroup))}_onCast(e){const t=this.data.getAction(e.ability.guid);if(!t||null==t.cooldown)return;const n=this._currentAction&&this._currentAction.id===t.id;this._currentAction=null,n||(this.startCooldown(t.id),c()(t.cooldownGroup)||this.startCooldownGroup(t.id,t.cooldownGroup))}_onComplete(){Object.keys(this._cooldowns).forEach(e=>{this._addToTimeline(parseInt(e,10))})}_addToTimeline(e){const t=this._cooldowns[e];if(!t)return!1;t.current&&(t.history.push(t.current),t.current=null);const n=this.data.getAction(e);return!(!n||n.onGcd)&&(this._groups[e]||this._buildGroup({id:e,content:n.name,order:e}),t.history.forEach(t=>{t.shared||this._groups[e].addItem(new h.b({type:"background",start:t.timestamp-this.parser.fight.start_time,length:t.length,content:p.a.createElement("img",{src:n.icon,alt:n.name})}))}),!0)}getCooldown(e){return this._cooldowns[e]||{current:null,history:[]}}startCooldownGroup(e,t){a()(this._cooldownGroups,t,[]).map(e=>e.id).filter(t=>t!==e).forEach(e=>this.startCooldown(e,!0))}startCooldown(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.data.getAction(e);if(!n)return;const r=this.getCooldown(e);if(r.current){const t=this.parser.currentTimestamp-this.parser.fight.start_time;r.current.timestamp<this.parser.fight.start_time&&r.current.length>t?this.resetCooldown(e):r.history.push(r.current)}r.current={timestamp:this.parser.currentTimestamp,length:1e3*n.cooldown,shared:t,invulnTime:0},this._cooldowns[e]=r}reduceCooldown(e,t){const n=this.getCooldown(e),r=this.parser.currentTimestamp;n.current&&n.current.timestamp+n.current.length<r&&(n.history.push(n.current),n.current=null),null!==n.current&&(n.current.length-=1e3*t,n.current.timestamp+n.current.length<r&&this.resetCooldown(e))}setInvulnTime(e){const t=this.getCooldown(e);let n=this.parser.fight.start_time,r={},s=!0;for(const e of t.history)s&&(n=e.timestamp+e.length,s=!1,r=e),r.invulnTime=this.downtime.getDowntime(n,e.timestamp),n=e.timestamp+e.length,r=e}resetCooldown(e){const t=this.getCooldown(e);null!==t.current&&(t.current.length=this.parser.currentTimestamp-t.current.timestamp,t.history.push(t.current),t.current=null)}getCooldownRemaining(e){const t=this.getCooldown(e).current;return t?t.length-(this.parser.currentTimestamp-t.timestamp):0}getTimeOnCooldown(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getCooldown(e),s=this.parser.currentTimestamp;return t?this.setInvulnTime(e):r.history.map(e=>{e.invulnTime=0}),r.history.reduce((e,t)=>e+this.getAdjustedTimeOnCooldown(t,s,n),r.current?this.getAdjustedTimeOnCooldown(r.current,s,n):0)}getAdjustedTimeOnCooldown(e,t,n){const r=t-e.timestamp,o=e.length+e.invulnTime+n;return s()(r,0,o)}get used(){return Object.keys(this._cooldowns)}}f.handle="cooldowns",f.dependencies=["data","downtime","timeline"],f.cooldownOrder=[]},1293:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(126),s=n.n(r),o=n(0),a=n.n(o),i=n(371);const c={aspectRatio:3,scales:{xAxes:[{type:"time",time:{displayFormats:{minute:"m:ss",second:"m:ss",millisecond:"m:ss.SS"},tooltipFormat:"mm:ss.SSS"}}]}};class l extends o.PureComponent{render(){const e=s()({},c,this.props.options||{});return a.a.createElement(i.a,{data:this.props.data,options:e,width:e.aspectRatio,height:1})}}},1295:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var r=n(370),s=n.n(r),o=n(366),a=n.n(o),i=n(2),c=n(8),l=n(1290),u=n(23),d=n(218),h=n(1287),m=n(63),p=n(0),b=n.n(p),g=n(367);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O=2.5,E=15e3,w={uncomboed:b.a.createElement(c.Trans,{id:"core.combos.issuetypenames.uncomboed"}),combobreak:b.a.createElement(c.Trans,{id:"core.combos.issuetypenames.combobreak"}),failedcombo:b.a.createElement(c.Trans,{id:"core.combos.issuetypenames.failed"})};class _ extends u.c{constructor(){super(...arguments),this.lastGcdTime=this.parser.fight.start_time,this.currentComboChain=[],this.issues=[]}init(){this.addHook("aoedamage",{by:"player"},this.onCast),this.addHook("complete",this.onComplete)}get lastComboEvent(){return a()(this.currentComboChain)||null}get lastAction(){const e=this.lastComboEvent;return e?e.ability.guid:null}get comboBreakers(){return this.issues.filter(e=>"combobreak"===e.type).map(e=>e.event)}get uncomboedGcds(){return this.issues.filter(e=>"uncomboed"===e.type).map(e=>e.event)}fabricateComboEvent(e){const t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{type:"combo"});delete t.timestamp,this.parser.fabricateEvent(t)}recordBrokenCombo(e,t){this.isAllowableComboBreak(e,t)||this.issues.push({type:"combobreak",event:e,context:t}),this.currentComboChain=[]}recordUncomboedGcd(e){this.issues.push({type:"uncomboed",event:e,context:[]}),this.currentComboChain=[]}recordFailedCombo(e,t){this.issues.push({type:"failedcombo",event:e,context:t}),this.currentComboChain=[]}checkCombo(e,t){if(null==this.lastAction){if(e.start)return this.fabricateComboEvent(t),!0;if(e.from)return this.recordUncomboedGcd(t),!1}if(e.start)return this.recordBrokenCombo(t,this.currentComboChain),!0;if(e.from){if((Array.isArray(e.from)?e.from:[e.from]).includes(this.lastAction))return this.fabricateComboEvent(t),!e.end}return this.recordBrokenCombo(t,this.currentComboChain),!1}onCast(e){const t=this.data.getAction(e.ability.guid);if(t){if(t.onGcd&&(t.combo||t.breaksCombo)&&(e.timestamp-this.lastGcdTime>E&&(this.currentComboChain=[]),this.lastGcdTime=e.timestamp),t.combo){if(!e.successfulHit)return void this.recordFailedCombo(e,this.currentComboChain);this.checkCombo(t.combo,e)?this.currentComboChain.push(e):this.currentComboChain=[]}t.breaksCombo&&null!==this.lastAction&&this.recordBrokenCombo(e,this.currentComboChain)}}onComplete(){this.addJobSpecificSuggestions(this.comboBreakers,this.uncomboedGcds)||this.suggestions.add(new h.c({icon:this.constructor.suggestionIcon,content:b.a.createElement(c.Trans,{id:"core.combos.content",components:[b.a.createElement("p",null),b.a.createElement("p",null)]}),tiers:{1:h.a.MINOR,2:h.a.MEDIUM,4:h.a.MAJOR},value:this.issues.length,why:b.a.createElement(c.Trans,{id:"core.combos.why",values:{0:this.issues.length}})}))}addJobSpecificSuggestions(e,t){return!1}isAllowableComboBreak(e,t){return!1}output(){if(this.issues.length<=0)return!1;const e=this.parser.fight.start_time,t=this.issues.sort((e,t)=>e.event.timestamp-t.event.timestamp).map(t=>{var n,r;const o=[...t.context||[],t.event],i=s()(o),c=a()(o),l=this.data.getAction(i.ability.guid),u=this.data.getAction(c.ability.guid);return{start:i.timestamp-e+(null!==(n=null==l?void 0:l.cooldown)&&void 0!==n?n:O),end:c.timestamp-e+(null!==(r=null==u?void 0:u.cooldown)&&void 0!==r?r:O),rotation:o,notesMap:{reason:b.a.createElement("span",{style:{whiteSpace:"nowrap"}},w[t.type])}}});return b.a.createElement(l.a,{notes:[{header:b.a.createElement(c.Trans,{id:"core.combos.rotationtable.header.reason"}),accessor:"reason"}],data:t,onGoto:this.timeline.show})}}_.handle="combos",_.title={id:"core.combos.title",defaults:"Combo Issues"},_.displayOrder=d.a.COMBOS,_.suggestionIcon="https://xivapi.com/i/000000/000405.png",Object(i.b)([u.d,Object(i.d)("design:type",g.a)],_.prototype,"data",void 0),Object(i.b)([u.d,Object(i.d)("design:type",h.d)],_.prototype,"suggestions",void 0),Object(i.b)([u.d,Object(i.d)("design:type",m.d)],_.prototype,"timeline",void 0)},1302:function(e,t,n){e.exports={gcdSize:"40px",ogcdSize:"30px",container:"Rotation-module_container__32KS2",link:"Rotation-module_link__2T3fu",ogcd:"Rotation-module_ogcd__3oBO8"}},1303:function(e,t,n){e.exports={gutter:"20px",checkbox:"Suggestions-module_checkbox__1Z22N",items:"Suggestions-module_items__3sCkP",item:"Suggestions-module_item__1yy1-",extra:"Suggestions-module_extra__3WN2d"}},1470:function(e,t,n){"use strict";n.r(t);var r=n(1295),s=n(10);class o extends r.a{}o.suggestionIcon=s.b.HEATED_SPLIT_SHOT.icon;var a=n(1292);class i extends a.a{}i.cooldownOrder=[s.b.WILDFIRE.id,s.b.GAUSS_ROUND.id,s.b.RICOCHET.id,s.b.HYPERCHARGE.id,s.b.BARREL_STABILIZER.id,s.b.REASSEMBLE.id,s.b.AUTOMATON_QUEEN.id,s.b.QUEEN_OVERDRIVE.id,s.b.TACTICIAN.id,s.b.FLAMETHROWER.id];var c=n(8),l=n(0),u=n.n(l),d=n(17),h=n(23),m=n(1287),p=n(125),b=n.n(p),g=n(1293);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E=100,w=5,_=50,v=50,C=10,j=20;class T extends h.c{constructor(){super(...arguments),this._gauge={heat:{current:0,waste:0,history:[]},battery:{current:0,waste:0,history:[]}},this._lastQueenCost=0,this.addHook("combo",{by:"player",abilityId:[s.b.SLUG_SHOT.id,s.b.CLEAN_SHOT.id,s.b.HEATED_SLUG_SHOT.id,s.b.HEATED_CLEAN_SHOT.id]},()=>this._addGauge("heat",w)),this.addHook("cast",{by:"player",abilityId:[s.b.SPLIT_SHOT.id,s.b.HEATED_SPLIT_SHOT.id,s.b.SPREAD_SHOT.id]},()=>this._addGauge("heat",w)),this.addHook("cast",{by:"player",abilityId:s.b.BARREL_STABILIZER.id},()=>this._addGauge("heat",_)),this.addHook("cast",{by:"player",abilityId:s.b.HYPERCHARGE.id},this._onOverheat),this.addHook("combo",{by:"player",abilityId:[s.b.CLEAN_SHOT.id,s.b.HEATED_CLEAN_SHOT.id]},this._onCleanShot),this.addHook("cast",{by:"player",abilityId:[s.b.HOT_SHOT.id,s.b.AIR_ANCHOR.id]},this._onAirAnchor),this.addHook("cast",{by:"player",abilityId:[s.b.ROOK_AUTOTURRET.id,s.b.AUTOMATON_QUEEN.id]},this._onQueen),this.addHook("death",{to:"player"},this._onDeath),this.addHook("complete",this._onComplete)}_pushToHistory(e){const t=this.parser.currentTimestamp-this.parser.fight.start_time;this._gauge[e].history.push({t:t,y:this._gauge[e].current})}_addGauge(e,t){const n=this._gauge[e];n.current+=t,n.current>=E&&(n.waste+=n.current-E,n.current=E),this._pushToHistory(e)}_onOverheat(){this._gauge.heat.current<v&&this.brokenLog.trigger(this,"negative heat",u.a.createElement(c.Trans,{id:"mch.gauge.trigger.negative-heat",values:{0:this._gauge.heat.current},components:[u.a.createElement(d.a,y({},s.b.HYPERCHARGE))]})),this._gauge.heat.current=Math.max(this._gauge.heat.current-v,0),this._pushToHistory("heat")}_onCleanShot(){this._addGauge("battery",C)}_onAirAnchor(){this._addGauge("battery",j)}_onQueen(){this._lastQueenCost=this._gauge.battery.current,this._gauge.battery.current=0,this._pushToHistory("battery")}_onDeath(){this._gauge.heat.current=0,this._gauge.battery.current=0}_onComplete(){this.suggestions.add(new m.c({icon:s.b.HYPERCHARGE.icon,content:u.a.createElement(c.Trans,{id:"mch.gauge.suggestions.heat-waste.content"}),tiers:{5:m.a.MINOR,30:m.a.MEDIUM,75:m.a.MAJOR},value:this._gauge.heat.waste,why:u.a.createElement(c.Trans,{id:"mch.gauge.suggestions.heat-waste.why",values:{0:this._gauge.heat.waste}})})),this.suggestions.add(new m.c({icon:s.b.AUTOMATON_QUEEN.icon,content:u.a.createElement(c.Trans,{id:"mch.gauge.suggestions.battery-waste.content",components:[u.a.createElement(d.a,y({},s.b.AUTOMATON_QUEEN))]}),tiers:{10:m.a.MINOR,30:m.a.MEDIUM,50:m.a.MAJOR},value:this._gauge.battery.waste,why:u.a.createElement(c.Trans,{id:"mch.gauge.suggestions.battery-waste.why",values:{0:this._gauge.battery.waste}})}))}output(){const e=b()("#D35A10"),t=b()("#2C9FCB"),n={datasets:[{label:"Heat",steppedLine:!0,data:this._gauge.heat.history,backgroundColor:e.fade(.8),borderColor:e.fade(.5)},{label:"Battery",steppedLine:!0,data:this._gauge.battery.history,backgroundColor:t.fade(.8),borderColor:t.fade(.5)}]};return u.a.createElement(l.Fragment,null,u.a.createElement(g.a,{data:n,options:{scales:{yAxes:[{ticks:{beginAtZero:!0,min:0,max:100}}]}}}))}lastQueenCost(){return this._lastQueenCost}}T.handle="gauge",T.title={id:"mch.gauge.title",defaults:"Heat & Battery Gauge"},T.dependencies=["brokenLog","suggestions"];var A=n(1281),R=n(1476),P=n(1289),D=n(47);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const H=8e3,M=5,W=4,G=0;class L extends h.c{constructor(){super(...arguments),this._overheatWindows={current:null,history:[]},this.addHook("cast",{by:"player"},this._onCast),this.addHook("cast",{by:"player",abilityId:s.b.HYPERCHARGE.id},this._onOverheat),this.addHook("death",{to:"player"},this._onDeath),this.addHook("complete",this._onComplete)}_finishOverheatWindow(){this._overheatWindows.current&&(this._overheatWindows.current.gcdCount=this._overheatWindows.current.casts.filter(e=>{const t=Object(D.a)(s.b,"id",e.ability.guid);return t&&t.onGcd}).length,this._overheatWindows.history.push(this._overheatWindows.current),this._overheatWindows.current=null)}_onCast(e){null!==this._overheatWindows.current&&(e.timestamp>this._overheatWindows.current.start+H?this._finishOverheatWindow():this._overheatWindows.current.casts.push(k({},e)))}_onOverheat(e){this._finishOverheatWindow(),this._overheatWindows.current={start:e.timestamp,casts:[]}}_onDeath(){this._finishOverheatWindow()}_onComplete(){this._finishOverheatWindow()}_formatGcdCount(e){return e===G?u.a.createElement("span",{className:"text-error"},e):e<=W?u.a.createElement("span",{className:"text-warning"},e):e}output(){const e=this._overheatWindows.history.map(e=>({title:{key:"title-"+e.start,content:u.a.createElement(l.Fragment,null,this.parser.formatTimestamp(e.start),u.a.createElement("span",null," - "),this._formatGcdCount(e.gcdCount),"/",M," ",u.a.createElement(c.Trans,{id:"mch.heat.panel-count",values:{0:e.gcdCount}}))},content:{key:"content-"+e.start,content:u.a.createElement(P.a,{events:e.casts})}}));return u.a.createElement(l.Fragment,null,u.a.createElement(A.a,null,u.a.createElement(c.Trans,{id:"mch.heat.accordion.message",values:{OVERHEAT_GCD_TARGET:M},components:[u.a.createElement(d.a,k({},s.b.HEAT_BLAST)),u.a.createElement(d.a,k({},s.b.GAUSS_ROUND)),u.a.createElement(d.a,k({},s.b.RICOCHET))]})),u.a.createElement(R.a,{exclusive:!1,panels:e,styled:!0,fluid:!0}))}}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}L.handle="heat",L.title={id:"mch.heat.title",defaults:"Overheat Windows"};const B=[s.b.ROLLER_DASH.id,s.b.ARM_PUNCH.id,s.b.PILE_BUNKER.id],F=200;class Q extends h.c{constructor(){super(...arguments),this._queens={current:null,history:[]},this.addHook("cast",{by:"player",abilityId:s.b.AUTOMATON_QUEEN.id},this._onQueenCast),this.addHook("damage",{by:"pet",abilityId:B},this._onQueenAttack),this.addHook("complete",this._onComplete)}_finishQueenWindow(){this._queens.current&&(this._queens.history.push(this._queens.current),this._queens.current=null)}_onQueenCast(e){this._finishQueenWindow(),this._queens.current={start:e.timestamp,casts:[],cost:this.gauge.lastQueenCost(),damage:0}}_onQueenAttack(e){if(null!==this._queens.current)this._queens.current.casts.push(x({},e)),this._queens.current.damage+=e.amount,e.ability.guid===s.b.PILE_BUNKER.id&&this._finishQueenWindow();else{const t=Object(D.a)(s.b,"id",e.ability.guid);this.brokenLog.trigger(this,"queenless queen attack",u.a.createElement(c.Trans,{id:"mch.queen.trigger.queenless-queen-attack",components:[u.a.createElement(d.a,x({},t))]}))}}_onComplete(){this._finishQueenWindow();const e=this._queens.history.filter(e=>e.casts.length&&e.casts[e.casts.length-1].ability.guid!==s.b.PILE_BUNKER.id).length;this.suggestions.add(new m.c({icon:s.b.AUTOMATON_QUEEN.icon,content:u.a.createElement(c.Trans,{id:"mch.queen.suggestions.missing-bunker.content",components:[u.a.createElement(d.a,x({},s.b.AUTOMATON_QUEEN)),u.a.createElement(d.a,x({},s.b.QUEEN_OVERDRIVE))]}),tiers:{1:m.a.MEDIUM,3:m.a.MAJOR},value:e,why:u.a.createElement(c.Trans,{id:"mch.queen.suggestions.missing-bunker.why",values:{missingBunkers:e}})}))}output(){const e=this._queens.history.map(e=>({title:{key:"title-"+e.start,content:u.a.createElement(l.Fragment,null,this.parser.formatTimestamp(e.start),u.a.createElement("span",null," - "),e.cost," Battery spent (",this.parser.formatDuration(e.cost*F),"), ",e.damage," total damage")},content:{key:"content-"+e.start,content:u.a.createElement(P.a,{events:e.casts})}}));return u.a.createElement(l.Fragment,null,u.a.createElement(A.a,null,u.a.createElement(c.Trans,{id:"mch.queen.accordion.message",components:[u.a.createElement(d.a,x({},s.b.AUTOMATON_QUEEN))]})),u.a.createElement(R.a,{exclusive:!1,panels:e,styled:!0,fluid:!0}))}}Q.handle="queen",Q.title={id:"mch.queen.title",defaults:"Automaton Queen Usage"},Q.dependencies=["brokenLog","gauge","suggestions"];var q=n(61);function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const V={[s.b.HEATED_SPLIT_SHOT.id]:1,[s.b.HEATED_SLUG_SHOT.id]:1,[s.b.HEATED_CLEAN_SHOT.id]:1,[s.b.HEAT_BLAST.id]:1,[s.b.AUTO_CROSSBOW.id]:1,[s.b.DRILL.id]:0,[s.b.BIOBLASTER.id]:1,[s.b.AIR_ANCHOR.id]:0};class Y extends h.c{constructor(){super(...arguments),this._badReassembles=0,this._droppedReassembles=0,this._lastConsumption=0,this.addHook("cast",{by:"player",abilityId:Object.keys(V).map(Number)},this._onCast),this.addHook("removedebuff",{by:"player",abilityId:q.b.REASSEMBLED.id},this._onRemoveReassemble),this.addHook("complete",this._onComplete)}_onCast(e){this.combatants.selected.hasStatus(q.b.REASSEMBLED.id)&&(this._badReassembles+=V[e.ability.guid],this._lastConsumption=e.timestamp)}_onRemoveReassemble(e){e.timestamp!==this._lastConsumption&&this._droppedReassembles++}_onComplete(){this.suggestions.add(new m.c({icon:s.b.REASSEMBLE.icon,content:u.a.createElement(c.Trans,{id:"mch.reassemble.suggestions.bad-gcds.content",components:[u.a.createElement(d.a,z({},s.b.REASSEMBLE)),u.a.createElement(d.a,z({},s.b.DRILL)),u.a.createElement(d.a,z({},s.b.AIR_ANCHOR))]}),tiers:{1:m.a.MEDIUM,2:m.a.MAJOR},value:this._badReassembles,why:u.a.createElement(c.Trans,{id:"mch.reassemble.suggestions.bad-gcds.why",values:{0:this._badReassembles}})})),this.suggestions.add(new m.c({icon:s.b.REASSEMBLE.icon,content:u.a.createElement(c.Trans,{id:"mch.reassemble.suggestions.dropped.content",components:[u.a.createElement(d.a,z({},s.b.REASSEMBLE))]}),tiers:{1:m.a.MEDIUM,2:m.a.MAJOR},value:this._droppedReassembles,why:u.a.createElement(c.Trans,{id:"mch.reassemble.suggestions.dropped.why",values:{0:this._droppedReassembles}})}))}}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Y.handle="reassemble",Y.dependencies=["combatants","suggestions"];const ee=1e3,te=6,ne=5,re=0;class se extends h.c{constructor(){super(...arguments),this._wildfireWindows={current:null,history:[]},this.addHook("damage",{by:"player"},this._onDamage),this.addHook("damage",{by:"player",abilityId:q.b.WILDFIRE.id},this._onWildfireDamage),this.addHook("applydebuff",{by:"player",abilityId:q.b.WILDFIRE.id},this._onWildfireApplied),this.addHook("complete",this._onComplete)}_onDamage(e){const t=this.enemies.getEntity(e.targetID);t&&t.hasStatus(q.b.WILDFIRE.id)&&null!==this._wildfireWindows.current&&this._wildfireWindows.current.targetId===e.targetID&&this._wildfireWindows.current.casts.push(X({},e))}_closeWildfireWindow(e){this._wildfireWindows.current.gcdCount=this._wildfireWindows.current.casts.filter(e=>{const t=Object(D.a)(s.b,"id",e.ability.guid);return t&&t.onGcd}).length,this._wildfireWindows.current.damage=e,this._wildfireWindows.history.push(this._wildfireWindows.current),this._wildfireWindows.current=null}_onWildfireDamage(e){null!==this._wildfireWindows.current?this._closeWildfireWindow(e.amount):(this.brokenLog.trigger(this,"no buff wf",u.a.createElement(c.Trans,{id:"mch.wildfire.trigger.no-buff-wf",components:[u.a.createElement(d.a,X({},s.b.WILDFIRE)),u.a.createElement(d.d,X({},q.b.WILDFIRE))]})),this._wildfireWindows.history.push({spoofed:!0,start:e.timestamp-1e3*q.b.WILDFIRE.duration,damage:e.amount}))}_onWildfireApplied(e){this._wildfireWindows.current&&this._wildfireWindows.current.start+ee<e.timestamp&&this._closeWildfireWindow(0),this._wildfireWindows.current={start:e.timestamp,casts:[],targetId:e.targetID}}_onComplete(){const e=this._wildfireWindows.history.filter(e=>e.gcdCount<te).length;this.suggestions.add(new m.c({icon:s.b.WILDFIRE.icon,content:u.a.createElement(c.Trans,{id:"mch.wildfire.suggestions.cooldown.content",components:[u.a.createElement(d.a,X({},s.b.WILDFIRE)),u.a.createElement(d.a,X({},s.b.HEAT_BLAST))]}),tiers:{1:m.a.MINOR,2:m.a.MEDIUM,4:m.a.MAJOR},value:e,why:u.a.createElement(c.Trans,{id:"mch.wildfire.suggestions.cooldown.why",values:{badWildfires:e,WILDFIRE_GCD_TARGET:te}})}));const t=this._wildfireWindows.history.filter(e=>0===e.damage).length;this.suggestions.add(new m.c({icon:s.b.WILDFIRE.icon,content:u.a.createElement(c.Trans,{id:"mch.wildfire.suggestions.fizzle.content",components:[u.a.createElement(d.a,X({},s.b.WILDFIRE))]}),tiers:{1:m.a.MEDIUM,2:m.a.MAJOR},value:t,why:u.a.createElement(c.Trans,{id:"mch.wildfire.suggestions.fizzle.why",values:{fizzledWildfires:t}})}))}_formatGcdCount(e){return e===re?u.a.createElement("span",{className:"text-error"},e):e<=ne?u.a.createElement("span",{className:"text-warning"},e):e}_formatDamage(e){return 0===e?u.a.createElement("span",{className:"text-error"},e):e}output(){const e=this._wildfireWindows.history.map(e=>e.spoofed?{title:{key:"title-"+e.start,content:u.a.createElement(l.Fragment,null,this.parser.formatTimestamp(e.start),u.a.createElement("span",null," - "),u.a.createElement(c.Trans,{id:"mch.wildfire.panel-count-spoofed",values:{0:e.damage}}))},content:{key:"content-"+e.start,content:u.a.createElement("img",{src:"https://xivapi.com/i/064000/064033.png"})}}:{title:{key:"title-"+e.start,content:u.a.createElement(l.Fragment,null,this.parser.formatTimestamp(e.start),u.a.createElement("span",null," - "),u.a.createElement(c.Trans,{id:"mch.wildfire.panel-count",values:{0:this._formatGcdCount(e.gcdCount),1:e.gcdCount,2:this._formatDamage(e.damage)}}))},content:{key:"content-"+e.start,content:u.a.createElement(P.a,{events:e.casts})}});return u.a.createElement(l.Fragment,null,u.a.createElement(A.a,null,u.a.createElement(c.Trans,{id:"mch.wildfire.accordion.message",values:{WILDFIRE_GCD_TARGET:te},components:[u.a.createElement(d.a,X({},s.b.WILDFIRE))]})),u.a.createElement(R.a,{exclusive:!1,panels:e,styled:!0,fluid:!0}))}}se.handle="wildfire",se.title={id:"mch.wildfire.title",defaults:"Wildfire"},se.dependencies=["brokenLog","enemies","suggestions"];t.default=[o,i,T,L,Y,se,Q]}}]);
//# sourceMappingURL=jobs-mch.afc46993.js.map
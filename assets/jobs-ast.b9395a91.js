(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1289:function(t,e,s){"use strict";var a=s(371),i=s(372);class n extends i.a{constructor(t,e){super(t),this.info=null,this.info=e}get name(){return this.info.name}get type(){return this.info.type}get guid(){return this.info.guid}get id(){return this.info.id}}s.d(e,"a",(function(){return r}));class r extends a.a{constructor(){super(...arguments),this._players={}}getEntities(){return this._players}getEntity(t){let e=this._players[t];if(!e){const s=this.parser.report.friendlies.find(e=>e.id===t);if(!s)return null;this._players[t]=e=new n(this.parser,s)}return e}get selected(){return this.getEntity(this.parser.player.id)}}r.handle="combatants"},1290:function(t,e,s){"use strict";s.d(e,"a",(function(){return g}));var a=s(218),i=s.n(a),n=s(49),r=s.n(n),o=s(15),c=s.n(o),l=s(367),d=s.n(l),u=s(24),p=s(80),h=s(0),b=s.n(h);function m(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function E(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class g extends u.c{constructor(){super(...arguments),this._cooldownGroups={},this._currentAction=null,this._cooldowns={},this._groups={},this._cooldownGroups=d()(this.data.actions,"cooldownGroup"),this._buildGroups(this.constructor.cooldownOrder),this.addHook("begincast",{by:"player"},this._onBeginCast),this.addHook("cast",{by:"player"},this._onCast),this.addHook("complete",this._onComplete)}_buildGroups(t){if(!t)return;return t.map((e,s)=>{const a=-(t.length-s);if("number"==typeof e){const t=this.data.getAction(e);return this._buildGroup({id:e,content:t&&t.name,order:a}),e}const i=this._buildGroup({id:e.name,content:e.name,order:a});return e.merge?e.actions.forEach(t=>{this._groups[t]=i}):i.nestedGroups=this._buildGroups(e.actions),e.name})}_buildGroup(t){const e=new p.c(function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?m(Object(s),!0).forEach((function(e){E(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({showNested:!1},t));return this.timeline.addGroup(e),this._groups[t.id]=e,e}_onBeginCast(t){const e=this.data.getAction(t.ability.guid);e&&null!=e.cooldown&&(this._currentAction=e,this.startCooldown(e.id),c()(e.cooldownGroup)||this.startCooldownGroup(e.id,e.cooldownGroup))}_onCast(t){const e=this.data.getAction(t.ability.guid);if(!e||null==e.cooldown)return;const s=this._currentAction&&this._currentAction.id===e.id;this._currentAction=null,s||(this.startCooldown(e.id),c()(e.cooldownGroup)||this.startCooldownGroup(e.id,e.cooldownGroup))}_onComplete(){Object.keys(this._cooldowns).forEach(t=>{this._addToTimeline(parseInt(t,10))})}_addToTimeline(t){const e=this._cooldowns[t];if(!e)return!1;e.current&&(e.history.push(e.current),e.current=null);const s=this.data.getAction(t);return!(!s||s.onGcd)&&(this._groups[t]||this._buildGroup({id:t,content:s.name,order:t}),e.history.forEach(e=>{e.shared||this._groups[t].addItem(new p.b({type:"background",start:e.timestamp-this.parser.fight.start_time,length:e.length,content:b.a.createElement("img",{src:s.icon,alt:s.name})}))}),!0)}getCooldown(t){return this._cooldowns[t]||{current:null,history:[]}}startCooldownGroup(t,e){r()(this._cooldownGroups,e,[]).map(t=>t.id).filter(e=>e!==t).forEach(t=>this.startCooldown(t,!0))}startCooldown(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=this.data.getAction(t);if(!s)return;const a=this.getCooldown(t);if(a.current){const e=this.parser.currentTimestamp-this.parser.fight.start_time;a.current.timestamp<this.parser.fight.start_time&&a.current.length>e?this.resetCooldown(t):a.history.push(a.current)}a.current={timestamp:this.parser.currentTimestamp,length:1e3*s.cooldown,shared:e,invulnTime:0},this._cooldowns[t]=a}reduceCooldown(t,e){const s=this.getCooldown(t),a=this.parser.currentTimestamp;s.current&&s.current.timestamp+s.current.length<a&&(s.history.push(s.current),s.current=null),null!==s.current&&(s.current.length-=1e3*e,s.current.timestamp+s.current.length<a&&this.resetCooldown(t))}setInvulnTime(t){const e=this.getCooldown(t);let s=this.parser.fight.start_time,a={},i=!0;for(const t of e.history)i&&(s=t.timestamp+t.length,i=!1,a=t),a.invulnTime=this.downtime.getDowntime(s,t.timestamp),s=t.timestamp+t.length,a=t}resetCooldown(t){const e=this.getCooldown(t);null!==e.current&&(e.current.length=this.parser.currentTimestamp-e.current.timestamp,e.history.push(e.current),e.current=null)}getCooldownRemaining(t){const e=this.getCooldown(t).current;return e?e.length-(this.parser.currentTimestamp-e.timestamp):0}getTimeOnCooldown(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=this.getCooldown(t),i=this.parser.currentTimestamp;return e?this.setInvulnTime(t):a.history.map(t=>{t.invulnTime=0}),a.history.reduce((t,e)=>t+this.getAdjustedTimeOnCooldown(e,i,s),a.current?this.getAdjustedTimeOnCooldown(a.current,i,s):0)}getAdjustedTimeOnCooldown(t,e,s){const a=e-t.timestamp,n=t.length+t.invulnTime+s;return i()(a,0,n)}get used(){return Object.keys(this._cooldowns)}}g.handle="cooldowns",g.dependencies=["data","downtime","timeline"],g.cooldownOrder=[]},1307:function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var a=s(24),i=s(80),n=s(0),r=s.n(n);const o=2e3;class c extends a.c{constructor(){super(...arguments),this._statuses={},this._groups={},this._statusToActionMap={},this._actionToMergeNameMap={};const t={by:[this.parser.player.id,...this.parser.player.pets.map(t=>t.id)]};this.addHook("complete",this._onComplete),this.addHook(["applybuff","applydebuff"],t,this._onApply),this.addHook(["refreshdebuff","refreshbuff"],t,this._onRefresh),this.addHook(["removebuff","removedebuff"],t,this._onRemove),this.cooldowns.constructor.cooldownOrder.forEach(t=>{t&&"object"==typeof t&&t.merge&&t.actions.forEach(e=>{this._actionToMergeNameMap[e]=t.name})}),Object.values(this.data.actions).forEach(t=>{t.statusesApplied&&t.statusesApplied.forEach(e=>{const s=this.data.statuses[e];this._statusToActionMap[s.id]=t})})}_onApply(t){this._isStatusAppliedToPet(t)||this._addStatus(t)}_onRefresh(t){this._isStatusAppliedToPet(t)||(this._endPrevStatus(t),this._addStatus(t))}_onRemove(t){this._isStatusAppliedToPet(t)||this._endPrevStatus(t)}_endPrevStatus(t){const e=this.data.getStatus(t.ability.guid);if(!e)return;const s=this._statuses[e.id];if(s){const e=s.usages[s.usages.length-1];e.end||(e.end=t.timestamp-this.parser.fight.start_time)}}_addStatus(t){const e=this.data.getStatus(t.ability.guid);if(!e)return;let s=this._statuses[e.id];s||(s=this._statuses[e.id]={status:e,usages:[]}),s.usages.some(e=>{return Math.abs(t.timestamp-this.parser.fight.start_time-e.start)<=o})||s.usages.push({start:t.timestamp-this.parser.fight.start_time})}_onComplete(){Object.values(this._statuses).forEach(t=>{const e=this._createGroupForStatus(t.status);e&&t.usages.forEach(s=>{e.addItem(new i.b({type:"background",start:s.start,end:s.end||s.start+1e3*t.status.duration,content:r.a.createElement("img",{src:t.status.icon,alt:t.status.name})}))})})}_createGroupForStatus(t){const e="status-"+(this.constructor.statusesStackMapping[t.id]||t.id);if(this._groups[e])return this._groups[e];const s=this._statusToActionMap[t.id];if(!s)return;const a=new i.c({id:e,content:t.name,showNested:!1});return this._groups[e]=a,this.timeline.attachToGroup(s.onGcd?this.gcd.gcdGroupId:this._actionToMergeNameMap[s.id]||s.id,a),a}_isStatusAppliedToPet(t){return this.parser.report.friendlyPets.some(e=>e.id===t.targetID)}}c.handle="statuses",c.dependencies=["data","timeline","cooldowns","gcd"],c.statusesStackMapping={}},1308:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var a=s(24);const i=12e4;class n extends a.c{constructor(){super(...arguments),this._lastApplication={},this._clip={},this._statusDuration={},this.constructor.statusesToTrack.forEach(t=>{const e=this.data.getStatus(t);e&&(e.hasOwnProperty("duration")?this._statusDuration[t]=1e3*e.duration:(console.warn("statusId ".concat(t," is missing a duration property")),this._statusDuration[t]=i))}),this.addHook(["applydebuff","refreshdebuff"],{by:"player",abilityId:this.constructor.statusesToTrack},this._onDotApply),this.addHook("complete",this._onComplete)}excludeApplication(){return!1}addChecklistRules(){}addClippingSuggestions(t){}_onDotApply(t){const e=t.ability.guid,s="".concat(t.targetID,"|").concat(t.targetInstance),a=this._lastApplication[s]=this._lastApplication[s]||{};if(!a[e]||this.excludeApplication())return void(a[e]=t.timestamp);let i=this._statusDuration[e]-(t.timestamp-a[e]);i-=this.invuln.getUntargetableUptime("all",t.timestamp-this._statusDuration[e],t.timestamp),i-=this.invuln.getInvulnerableUptime("all",t.timestamp,t.timestamp+this._statusDuration[e]+i),this._clip[e]=(this._clip[e]||0)+Math.max(0,i),a[e]=t.timestamp}_onComplete(){this.addChecklistRules(),this.addClippingSuggestions(this._clip)}getUptimePercent(t){return this.enemies.getStatusUptime(t)/(this.parser.fightDuration-this.invuln.getInvulnerableUptime())*100}getClippingAmount(t){const e=this.parser.fightDuration-this.invuln.getInvulnerableUptime();return Math.round(60*this._clip[t]/e)}}n.handle="dots",n.dependencies=["data","enemies","invuln"],n.statusesToTrack=[]},1311:function(t,e,s){var a=s(375),i=s(63),n=s(126),r=Math.max,o=Math.min;t.exports=function(t,e,s){var c=null==t?0:t.length;if(!c)return-1;var l=c-1;return void 0!==s&&(l=n(s),l=s<0?r(c+l,0):o(l,c-1)),a(t,i(e,3),l,!0)}},1330:function(t,e,s){var a=s(97);t.exports=function(){var t=arguments,e=a(t[0]);return t.length<3?e:e.replace(t[1],t[2])}},1430:function(t,e,s){var a=s(1431),i=s(1432),n=s(691),r=s(34);t.exports=function(t,e){return(r(t)?a:i)(t,n(e))}},1431:function(t,e){t.exports=function(t,e){for(var s=null==t?0:t.length;s--&&!1!==e(t[s],s,t););return t}},1432:function(t,e,s){var a=s(1433),i=s(690)(a,!0);t.exports=i},1433:function(t,e,s){var a=s(1434),i=s(77);t.exports=function(t,e){return t&&a(t,e,i)}},1434:function(t,e,s){var a=s(689)(!0);t.exports=a},1435:function(t,e,s){var a=s(219),i=s(1436);t.exports=function(t,e){return i(t||[],e||[],a)}},1436:function(t,e){t.exports=function(t,e,s){for(var a=-1,i=t.length,n=e.length,r={};++a<i;){var o=a<n?e[a]:void 0;s(r,t[a],o)}return r}},1437:function(t,e,s){t.exports={jobIcon:"ArcanaSuggestions-module_jobIcon__11BjB",cardActionRow:"ArcanaSuggestions-module_cardActionRow__intyq",cardActionTable:"ArcanaSuggestions-module_cardActionTable__n0w3M",buffIcon:"ArcanaSuggestions-module_buffIcon__2CcPF",buffPlaceholder:"ArcanaSuggestions-module_buffPlaceholder__apWUF",buffUnknown:"ArcanaSuggestions-module_buffUnknown__1dQTy",sealIconContainer:"ArcanaSuggestions-module_sealIconContainer__2zqCi",sealIcon:"ArcanaSuggestions-module_sealIcon__1L2CN"}},1438:function(t,e){t.exports="data:image/png;base64,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"},1439:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABcFJREFUeNrcVktvG1UUvo+587BnbMd27KSOmyYpaYkEDYWCQIUFqGJXCVUgsYQdEiAk1myQWFViwRYk4BcgFl3QIiFQBUWlglZtk7RpmsR5260f43nPvZczTiOV9OF20wVjWfO6d75zvvOdB5ZSoid5EPSED+XuG4zxf60hCCPZM2r7Be6ddxbJ3m/7ORcC3Zeq3QwqD7Pm5UMGHcgoyRqma1jXGFYUiljyjgsUB6GMgkgGcA45l9HP5xx+x6AHxgnfbcGOh3DCh6cM5dlJTVcUbOoM59IGNjWVZDQNGwTeg0dhGEk3CEXbD1Gz2ea24wn/7xkvmq9F/LE83LeHkXKBGl1XWGmDDOkqLoNnpZQuB3QNZeCeEkLiMJZOEJK668v1lEbW/UhsDQ1S+6/LfvTHRS/uG8PkyOeoUhxQNMeTFsGypGBeMXVZyWbz1WLRLGfTLG/oWMM4FmHgObbd2eg6ZNnWRKbdQQy8X5scVTsrm7GobUSiLyDohHqB0IFWk1FZGMybQ2P7x/afePej6crES09TdXQYYwYBnPe6m+fa8xe+rm2sL5Ybt8McRoR1ukgW84oYKVMOgGE/QBxEAminTAhpUKpbL75ybPCNN09Mxdxhy7Nn1jLZkrQKBwuqOW5kq+8Y0+Wjg6sXTxauXTylw27BBQlcXzhTE3rQ7IiEVvEwQAmekSgCTNh64EAFbTXa9snP3zudNbg5uoeWK4O0Mjn1zFP7pj8ZN0qvG1QdotUXvhinVFO8s997Yag1/YBsQVw7ICxvN+A9iY9xT9IxIYozNzu3+tsvZ2b8QCwrmr7MsXEjFKnljdVrteXzn9aj1jkwUcAeAw0eeL9S3btvPG3wvSkDl1QFWfAh2q/SED+QIoyQb2i4Y6bZpmGwVYrpQszlVVDtpXaXX+56yqLtxJut61952ykXIWaU6Z7Jt6ppLS7qjBQMjfTytq9oIInjW+0YYSJFvYV8gnEzpUe0OsxQaUAxeZVFukYyVppUuu2l0by3ZCipUVifRswct8BQS1WxqUKhIPReBncDJnxT2xGQxSK5jiiQwjmSbVug8b0iKhWULBjViTl2QSCRCNYQSu3rfYqyDOQn0iiBPAW2MOoP2AOFZFcGLEKzFmXpFEQTLIVnaLiomFmL5FUVZRUiU5RIRrTynUoGVnEnqakxKDwGa4XcJZj7AZKMSWi1zJiZJiZUj7RlEqOQo2ohq2j5LMkUc8oY1NcJK4WGrMJERkmNbddx6aDAnnf9ULag5IFaZSg44v0AJVMwBY9SMUc51wvzjJIMzmkZKN4WeFsAg8ZMPZzIZPPD2YmPdUgkkLaCuF8T69d/rDm+0vBDcdvzhQvAfQERUIK5REyEcWr6yKHK1MGJ0fkrP+HQ8ywqaUmntDK89/mRkUMfltTckSTk4F2I6nPfrdWWbsw7gQag8WYYI7vHcz8PoRlJjRGUBP7WVg0Xjz5nHv/s29dE2NQUZBtWbriSKRwcUK1JNdGEiLf4+qUvV+b++eHK7a56DcS12HXEZkIrCK4vIIFukgQ6hLbku27b+f3XUw23tTB7/O0Ppstjx6qUjpR6/TCuRW79z/aNC98sr6/OLNZvhbPNDpqBXF0CllpXb/j+zELYv3gngFBNfZXRjqGTW07X1mcvn8ehu+KVirmblqkOagykj8M4CLp2q9nY6Hpkye7Km62uWICqtAF5bK9sxPxR2pNodngi/6iYozaUOaqA/iEv4kaj7gduo57SkkYM7QL6UxzjThDhuuPzVc+XGwC2FXFpX1+KoqX16JEAE9GAhyhiDLmQxQJ6H5Ry5ApOG0GEshJh3Ql6Y0QQBMKFUtiCRnwbqHSaNncvzfkhUMkfa8TYGaBePZwiOUh+TJAKXV7XVcJAVCzZAoZFIP3YDWTARfJH4emz3cRY+bAh6oGAu6a27Sltu5PsDElkZ2oDEAFrScJOv6kN/+8H4ScO+K8AAwC9nQSRivkU2QAAAABJRU5ErkJggg=="},1440:function(t,e){t.exports="data:image/png;base64,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"},1441:function(t,e,s){t.exports={gutter:"20px",simpleStatistic:"SectStatistic-module_simpleStatistic__1XpFM",wrapper:"SectStatistic-module_wrapper__2WuUu",icon:"SectStatistic-module_icon__2g8Qm",value:"SectStatistic-module_value__2YPEq"}},1454:function(t,e,s){"use strict";s.r(e);var a=s(2),i=s(8),n=s(18),r=s(10),o=s(61),c=s(24),l=s(1286),d=s(1308),u=s(1285),p=s(0),h=s.n(p);function b(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function m(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?b(Object(s),!0).forEach((function(e){E(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function E(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const g={CLIPPING:{2:u.a.MINOR,4:u.a.MEDIUM,6:u.a.MAJOR},UPTIME:{84:l.c.WARN,91:l.c.SUCCESS}};class O extends d.a{addChecklistRules(){this.checklist.add(new l.d({name:h.a.createElement(i.Trans,{id:"ast.dots.rule.name"}),description:h.a.createElement(i.Trans,{id:"ast.dots.rule.description",components:[h.a.createElement(n.a,m({},r.b.DRAW))]}),tiers:g.UPTIME,requirements:[new l.a({name:h.a.createElement(i.Trans,{id:"ast.dots.requirement.uptime.name",components:[h.a.createElement(n.a,m({},r.b.COMBUST_III))]}),percent:()=>this.getUptimePercent(o.b.COMBUST_III.id)})]}))}addClippingSuggestions(t){this.suggestions.add(new u.c({icon:r.b.COMBUST_III.icon,content:h.a.createElement(i.Trans,{id:"ast.dots.suggestion.clip.content",components:[h.a.createElement(n.a,m({},r.b.COMBUST_III))]}),why:h.a.createElement(i.Trans,{id:"ast.dots.suggestion.clip.why",values:{0:this.parser.formatDuration(1e3*this.getClippingAmount(o.b.COMBUST_III.id)),1:this.parser.formatDuration(t[o.b.COMBUST_III.id])}}),tiers:g.CLIPPING,value:this.getClippingAmount(o.b.COMBUST_III.id)}))}}O.handle="combust",O.statusesToTrack=[o.b.COMBUST_III.id],Object(a.b)([c.d,Object(a.d)("design:type",l.e)],O.prototype,"checklist",void 0),Object(a.b)([c.d,Object(a.d)("design:type",u.d)],O.prototype,"suggestions",void 0);var y=s(1290);const f=[r.b.THE_BALANCE.id,r.b.THE_BOLE.id,r.b.THE_ARROW.id,r.b.THE_SPEAR.id,r.b.THE_EWER.id,r.b.THE_SPIRE.id,r.b.LORD_OF_CROWNS.id,r.b.LADY_OF_CROWNS.id],A=[r.b.THE_BALANCE.id,r.b.THE_BOLE.id],S=[r.b.THE_ARROW.id,r.b.THE_EWER.id],T=[r.b.THE_SPEAR.id,r.b.THE_SPIRE.id],I=[o.b.BALANCE_DRAWN.id,o.b.BOLE_DRAWN.id,o.b.ARROW_DRAWN.id,o.b.SPEAR_DRAWN.id,o.b.EWER_DRAWN.id,o.b.SPIRE_DRAWN.id,o.b.LORD_OF_CROWNS_DRAWN.id,o.b.LADY_OF_CROWNS_DRAWN.id],_=[o.b.THE_BALANCE.id,o.b.THE_BOLE.id,o.b.THE_ARROW.id,o.b.THE_SPEAR.id,o.b.THE_EWER.id,o.b.THE_SPIRE.id,o.b.LORD_OF_CROWNS.id,o.b.LADY_OF_CROWNS.id];class v extends y.a{}function C(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function w(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?C(Object(s),!0).forEach((function(e){N(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):C(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function N(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}v.cooldownOrder=[{name:"Draw/Undraw",merge:!0,actions:[r.b.DRAW.id,r.b.UNDRAW.id]},{name:"Redraw/Minor Arcana",merge:!0,actions:[r.b.REDRAW.id,r.b.MINOR_ARCANA.id]},r.b.SLEEVE_DRAW.id,{name:"Play",merge:!0,actions:[...f]},r.b.DIVINATION.id,r.b.LIGHTSPEED.id,r.b.ESSENTIAL_DIGNITY.id,r.b.CELESTIAL_INTERSECTION.id,r.b.SYNASTRY.id,{name:"Earthly Star",merge:!0,actions:[r.b.EARTHLY_STAR.id,r.b.STELLAR_DETONATION.id]},r.b.CELESTIAL_OPPOSITION.id,{name:"Horoscope",merge:!0,actions:[r.b.HOROSCOPE.id,r.b.HOROSCOPE_ACTIVATION.id]},r.b.COLLECTIVE_UNCONSCIOUS.id,r.b.NEUTRAL_SECT.id,r.b.LUCID_DREAMING.id];const D={UNCOOKED:{1:u.a.MEDIUM,2:u.a.MAJOR},USES_MISSED:{1:u.a.MEDIUM,2:u.a.MAJOR}},R=[r.b.STELLAR_BURST.id,r.b.STELLAR_EXPLOSION.id];class L extends c.c{constructor(){super(...arguments),this._uses=0,this._lastUse=0,this._totalHeld=0,this._earlyBurstCount=0}init(){this.addHook("cast",{abilityId:r.b.EARTHLY_STAR.id,by:"player"},this._onSet),this.addHook("cast",{abilityId:R,by:"pet"},this._onPetCast),this.addHook("complete",this._onComplete)}_onSet(t){this._uses++,0===this._lastUse&&(this._lastUse=this.parser.fight.start_time);const e=t.timestamp-this._lastUse-1e3*r.b.EARTHLY_STAR.cooldown;e>0&&(this._totalHeld+=e),this._lastUse=t.timestamp}_onPetCast(t){t.ability.guid===r.b.STELLAR_BURST.id&&this._earlyBurstCount++}_onComplete(){const t=this._earlyBurstCount;t>0&&this.suggestions.add(new u.c({icon:r.b.STELLAR_DETONATION.icon,content:h.a.createElement(i.Trans,{id:"ast.earthly-star.suggestion.uncooked.content",components:[h.a.createElement(n.a,w({},r.b.EARTHLY_STAR))]}),why:h.a.createElement(i.Trans,{id:"ast.earthly-star.suggestion.uncooked.why",values:{earlyBurstCount:t}}),tiers:D.UNCOOKED,value:t}));const e=0===this._uses?this.parser.fightDuration:this._totalHeld,s=Math.floor(e/(1e3*r.b.EARTHLY_STAR.cooldown));(s>1||0===this._uses)&&this.suggestions.add(new u.c({icon:r.b.EARTHLY_STAR.icon,content:h.a.createElement(i.Trans,{id:"ast.earthyl-star.suggestion.missed-use.content",components:[h.a.createElement(n.a,w({},r.b.EARTHLY_STAR))]}),tiers:D.USES_MISSED,value:0===this._uses?100:s,why:h.a.createElement(i.Trans,{id:"ast.earthyl-star.suggestion.missed-use.why",values:{0:this.parser.formatDuration(e),_usesMissed:s}})}))}}L.handle="earthlystar",L.title={id:"ast.earthly-star.title",defaults:"Earthly Star"},Object(a.b)([c.d,Object(a.d)("design:type",u.d)],L.prototype,"suggestions",void 0);var P=s(1287),j=s(55),U=s(1474),H={DRAW_CHECKLIST:40,LIGHTSPEED:52,ARCANA_TRACKING:55};function k(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function W(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?k(Object(s),!0).forEach((function(e){M(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):k(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function M(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const F=-2.5;class G extends c.c{constructor(){super(...arguments),this._active=!1,this._lightspeed={},this._history=[],this._ctIndex=null,this._missedGcds=0,this.addHook("cast",{by:"player"},this._onCast);const t={by:"player",abilityId:o.b.LIGHTSPEED.id};this.addHook("applybuff",t,this._onApplyLightspeed),this.addHook("removebuff",t,this._onRemoveLightspeed),this.addHook("complete",this._onComplete)}_onCast(t){const e=t.ability.guid;e===r.b.LIGHTSPEED.id&&this._startLightspeed(t.timestamp);const s=Object(j.a)(r.b,"id",e);this._active&&s&&!s.autoAttack&&this._lightspeed.casts.push(t)}_onApplyLightspeed(t){this._active||this._startLightspeed(t.timestamp)}_onRemoveLightspeed(){this._stopAndSave()}_onComplete(){this._active&&this._stopAndSave()}_startLightspeed(t){this._active=!0,this._lightspeed={start:t,end:null,casts:[]},this._ctIndex=this.castTime.set("all",F)}_stopAndSave(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parser.currentTimestamp;this._active&&(this._active=!1,this._lightspeed.end=t,this._history.push(this._lightspeed),this.castTime.reset(this._ctIndex))}activeAt(t){return!!(this._active&&this._lightspeed.start<=t)||this._history.some(e=>e.start<=t&&e.end>=t)}output(){const t=h.a.createElement(p.Fragment,null,h.a.createElement("p",null,h.a.createElement("span",{className:"text-error"},h.a.createElement(i.Trans,{id:"ast.lightspeed.messages.no-casts",components:[h.a.createElement(n.a,W({},r.b.LIGHTSPEED))]})))),e=this._history.map(t=>{const e=t.casts.map(t=>Object(j.a)(r.b,"id",t.ability.guid)).filter(t=>t&&t.onGcd),s=e.length,a=e.reduce((t,e)=>e.mpCost/2+t,0);return{key:t.start,title:{content:h.a.createElement(h.a.Fragment,null,this.parser.formatTimestamp(t.start)," - ",h.a.createElement(i.Trans,{id:"ast.lightspeed.rotation.gcd",values:{numGcds:s}})," - ",a," ",h.a.createElement(i.Trans,{id:"ast.lightspeed.rotation.mp-saved"}))},content:{content:h.a.createElement(P.a,{events:t.casts})}}}),s=h.a.createElement(U.a,{exclusive:!1,panels:e,styled:!0,fluid:!0});return h.a.createElement(p.Fragment,null,h.a.createElement("p",null,h.a.createElement(i.Trans,{id:"ast.lightspeed.messages.explanation",components:[h.a.createElement(n.a,W({},r.b.LIGHTSPEED)),h.a.createElement(n.a,W({},r.b.DIVINATION)),h.a.createElement(n.a,W({},r.b.SLEEVE_DRAW)),h.a.createElement("br",null),h.a.createElement("br",null),h.a.createElement("br",null),h.a.createElement("br",null),h.a.createElement(n.a,W({},r.b.ASCEND))]})),0===e.length&&t,e.length>0&&s)}}function B(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function x(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?B(Object(s),!0).forEach((function(e){V(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):B(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function V(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}G.handle="lightspeed",G.dependencies=["castTime"],G.title={id:"ast.lightspeed.title",defaults:"Lightspeed"},G.displayOrder=H.LIGHTSPEED;const K=2;class J extends c.c{constructor(){super(...arguments),this._lastUse=0,this._uses=0,this._totalHeld=0,this._extensions=0,this._gcdCountHoldingLucid=0,this._maxMP=null,this._MP=null,this._MPthresholdTime=null;const t={by:"player",abilityId:[r.b.LUCID_DREAMING.id]};this.addHook("cast",t,this._onCastLucid),this.addHook("refreshbuff",{by:"player",to:"player"},this._onRefreshLucid),this.addHook("complete",this._onComplete)}_onCastLucid(t){this._uses++,0===this._lastUse&&(this._lastUse=this.parser.fight.start_time);let e=0;e=1===this._uses?t.timestamp-this.parser.fight.start_time:t.timestamp-this._lastUse-1e3*r.b.LUCID_DREAMING.cooldown,e>0&&(this._totalHeld+=e),this._lastUse=t.timestamp}_onRefreshLucid(t){t.ability.guid===o.b.LUCID_DREAMING.id&&this._extensions++}_onComplete(){const t=0===this._uses?this.parser.fightDuration:this._totalHeld,e=Math.floor(t/(1e3*r.b.LUCID_DREAMING.cooldown));(e>1||0===this._uses)&&this.suggestions.add(new u.b({icon:r.b.LUCID_DREAMING.icon,content:h.a.createElement(p.Fragment,null,h.a.createElement(i.Trans,{id:"ast.lucid-dreaming.suggestion.content",components:[h.a.createElement(n.a,x({},r.b.LUCID_DREAMING))]})),severity:0===this._uses||e>K?u.a.MAJOR:u.a.MEDIUM,why:h.a.createElement(p.Fragment,null,h.a.createElement(i.Trans,{id:"ast.lucid-dreaming.suggestion.why",values:{0:this.parser.formatDuration(t),_usesMissed:e}}))}))}}function Q(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Z(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(s),!0).forEach((function(e){Y(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Q(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function Y(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}J.handle="lucid",J.dependencies=["suggestions"];class X extends c.c{constructor(){super(...arguments),this.addHook("cast",{by:"player"},this._onCast),this.addHook("complete",this._onComplete),this._badUndraws=[]}_onCast(t){this._saveIfBadUndraw(t)}_saveIfBadUndraw(t){t.ability.guid===r.b.UNDRAW.id&&this._badUndraws.push(t)}_onComplete(){const t=this._badUndraws;t>0&&this.suggestions.add(new u.b({icon:"https://xivapi.com/i/003000/003108.png",content:h.a.createElement(p.Fragment,null,h.a.createElement(i.Trans,{id:"ast.arcana-undraw-usage.suggestions.content",components:[h.a.createElement(n.a,Z({},r.b.UNDRAW)),h.a.createElement(n.a,Z({},r.b.MINOR_ARCANA))]})),severity:u.a.MAJOR,why:h.a.createElement(i.Trans,{id:"ast.arcana-undraw-usage.suggestions.why",values:{0:t.length}})}))}}function q(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function z(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?q(Object(s),!0).forEach((function(e){$(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):q(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function $(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}X.handle="arcanaundraws",X.dependencies=["suggestions"];const tt={ACTIVATES_MISSED:{1:u.a.MINOR,2:u.a.MEDIUM}};r.b.HELIOS.id,r.b.ASPECTED_HELIOS.id,o.b.HOROSCOPE.id,o.b.HOROSCOPE_HELIOS.id;class et extends c.c{constructor(){super(...arguments),this.uses=0,this.activations=0}init(){this.addHook("cast",{abilityId:r.b.HOROSCOPE.id,by:"player"},this.onHoroscope),this.addHook("cast",{abilityId:r.b.HOROSCOPE_ACTIVATION.id,by:"player"},this.onActivate),this.addHook("complete",this.onComplete)}onHoroscope(t){this.uses++}onActivate(t){this.activations++}onComplete(){const t=this.uses-this.activations;this.suggestions.add(new u.c({icon:r.b.HOROSCOPE_ACTIVATION.icon,content:h.a.createElement(i.Trans,{id:"ast.horoscope.suggestion.expired.content",components:[h.a.createElement(n.a,z({},r.b.HOROSCOPE))]}),why:h.a.createElement(i.Trans,{id:"ast.horoscope.suggestion.expired.why",values:{missedActivations:t}}),tiers:tt.ACTIVATES_MISSED,value:t}))}}et.handle="horoscope",et.title={id:"ast.horoscope.title",defaults:"Horoscope"},Object(a.b)([c.d,Object(a.d)("design:type",u.d)],et.prototype,"suggestions",void 0);var st=s(218),at=s.n(st),it=s(1430),nt=s.n(it),rt=s(1311),ot=s.n(rt),ct=s(1330),lt=s.n(ct),dt=s(365),ut=s.n(dt),pt=s(207),ht=s.n(pt),bt=s(1435),mt=s.n(bt),Et=s(382);function gt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Ot(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?gt(Object(s),!0).forEach((function(e){yt(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):gt(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function yt(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const ft=20,At=2e3,St=[r.b.DRAW.id,r.b.REDRAW.id,r.b.MINOR_ARCANA.id,...f,r.b.SLEEVE_DRAW.id],Tt=[r.b.DRAW.id,r.b.REDRAW.id,r.b.SLEEVE_DRAW.id,r.b.MINOR_ARCANA.id,r.b.UNDRAW.id,r.b.DIVINATION.id,...f],It=mt()(f,I),_t=mt()(_,I),vt=mt()(_,f),Ct=mt()(I,f);var wt;!function(t){t[t.NOTHING=0]="NOTHING",t[t.SOLAR=1]="SOLAR",t[t.LUNAR=2]="LUNAR",t[t.CELESTIAL=3]="CELESTIAL"}(wt||(wt={}));const Nt=[wt.NOTHING,wt.NOTHING,wt.NOTHING];var Dt,Rt,Lt;(Rt=Dt||(Dt={}))[Rt.NOTHING=0]="NOTHING",Rt[Rt.BALANCE=o.b.BALANCE_DRAWN.id]="BALANCE",Rt[Rt.BOLE=o.b.BOLE_DRAWN.id]="BOLE",Rt[Rt.ARROW=o.b.ARROW_DRAWN.id]="ARROW",Rt[Rt.SPEAR=o.b.SPEAR_DRAWN.id]="SPEAR",Rt[Rt.EWER=o.b.EWER_DRAWN.id]="EWER",Rt[Rt.SPIRE=o.b.SPIRE_DRAWN.id]="SPIRE",Rt[Rt.LORD_OF_CROWNS=o.b.LORD_OF_CROWNS_DRAWN.id]="LORD_OF_CROWNS",Rt[Rt.LADY_OF_CROWNS=o.b.LADY_OF_CROWNS_DRAWN.id]="LADY_OF_CROWNS",function(t){t[t.NOTHING=0]="NOTHING",t[t.ONE_STACK=1]="ONE_STACK",t[t.TWO_STACK=2]="TWO_STACK"}(Lt||(Lt={}));class Pt extends c.c{constructor(){super(...arguments),this.cardStateLog=[{lastEvent:{type:"pull",timestamp:this.parser.fight.start_time,targetIsFriendly:!0,sourceIsFriendly:!0},drawState:Dt.NOTHING,sealState:Nt,sleeveState:Lt.NOTHING}],this.pullStateInitialized=!1,this.pullIndex=0,this.prepullArcanas=[],this.isCastEvent=t=>"cast"===t.type,this.isBuffEvent=t=>"buff"===t.type}init(){this.addHook("cast",{abilityId:Tt,by:"player"},this.onCast),this.addHook("applybuff",{abilityId:_,by:"player"},this.onPrepullArcana),this.addHook("removebuff",{abilityId:_,by:"player"},this.offPrepullArcana),this.addHook("removebuff",{abilityId:I,by:"player"},this.offDrawnStatus),this.addHook("death",{to:"player"},this.onDeath)}normalise(t){const e=this.parser.fight.start_time;let s=!0;const a=[];for(const i of t){if(i.timestamp-e>=1e3*o.b.SLEEVE_DRAW.duration)break;if("cast"===i.type&&this.isCastEvent(i)&&r.b.SLEEVE_DRAW.id===i.ability.guid)s=!1;else{if("cast"!==i.type||!this.isCastEvent(i)||r.b.DRAW.id!==i.ability.guid)continue;a.push(i)}}return s&&ht()(a.length,Lt.TWO_STACK,Lt.TWO_STACK+2)&&(this.cardStateLog[0].sleeveState=a.length-1),t}get cardLogs(){return this.cardStateLog}getCardState(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parser.fight.start_time;return this.cardStateLog.find(e=>e.lastEvent&&t>e.lastEvent.timestamp)}getPullState(){return this.cardStateLog.find(t=>t.lastEvent&&"pull"===t.lastEvent.type)}onPrepullArcana(t){t.timestamp>this.parser.fight.start_time||this.prepullArcanas.push(t)}offPrepullArcana(t){t.timestamp>=this.parser.fight.start_time+1e3*o.b.THE_BALANCE.duration||this.prepullArcanas.forEach(e=>{if(e.ability.guid!==t.ability.guid||e.targetID!==t.targetID)return;const s=Ot({},ut()(this.cardStateLog)),a=Object(j.a)(r.b,"id",this.arcanaStatusToPlay(t.ability.guid));if(!a)return;const i={ability:{name:a.name,guid:a.id,type:1,abilityIcon:lt()(lt()(a.icon,"https://xivapi.com/i/",""),"/","-")},timestamp:t.timestamp-1e3*o.b.THE_BALANCE.duration,type:"cast",sourceIsFriendly:!0,targetIsFriendly:!0,sourceID:t.sourceID,targetID:t.targetID};s.lastEvent=Ot({},i),s.drawState=Dt.NOTHING,s.sealState=Nt,this.cardStateLog.unshift(s),this.pullIndex++})}offDrawnStatus(t){if(!I.includes(t.ability.guid))return;if(this.retconSearch(this.arcanaDrawnToPlay(t.ability.guid)),!this.cardStateLog.some(e=>e.lastEvent&&ht()(t.timestamp,e.lastEvent.timestamp-ft,e.lastEvent.timestamp+ft))){const e=Ot({},ut()(this.cardStateLog)),s={ability:{name:r.b.UNDRAW.name,guid:r.b.UNDRAW.id,type:1,abilityIcon:lt()(lt()(o.b.NOCTURNAL_SECT.icon,"https://xivapi.com/i/",""),"/","-")},timestamp:t.timestamp,type:"cast",sourceIsFriendly:!0,targetIsFriendly:!0,sourceID:t.sourceID,targetID:t.sourceID};e.lastEvent=s,e.drawState=Dt.NOTHING,this.cardStateLog.push(e)}}onCast(t){if(t.timestamp<this.parser.fight.start_time)return;const e=t.ability.guid;!this.pullStateInitialized&&f.includes(e)&&this.initPullState(t);const s=Ot({},ut()(this.cardStateLog));if(s.lastEvent=t,f.includes(e)){s.drawState=Dt.NOTHING,this.retconSearch(e);let t=wt.NOTHING;A.includes(e)?t=wt.SOLAR:S.includes(e)?t=wt.LUNAR:T.includes(e)&&(t=wt.CELESTIAL);const a=[...s.sealState];s.sealState=this.addSeal(t,a),s.sleeveState>Lt.NOTHING&&(s.sleeveState=this.consumeSleeve(s.sleeveState))}e===r.b.DIVINATION.id&&(s.sealState=Nt),e===r.b.UNDRAW.id&&(s.drawState=Dt.NOTHING),e===r.b.SLEEVE_DRAW.id&&(s.sleeveState=this.startSleeve()),this.cardStateLog.push(s)}onDeath(t){const e=Ot({},ut()(this.cardStateLog));"cast"===e.lastEvent.type&&e.lastEvent.ability.guid===r.b.UNDRAW.id&&t.timestamp-e.lastEvent.timestamp<=At+ft&&this.cardStateLog.pop(),this.cardStateLog.push({lastEvent:Ot({},t),drawState:Dt.NOTHING,sealState:Nt,sleeveState:Lt.NOTHING})}initPullState(t){const e=t.ability.guid,s=this.cardStateLog.slice(this.pullIndex+1);if(s.length>0&&s.forEach(t=>{if("cast"===t.lastEvent.type&&St.includes(t.lastEvent.ability.guid))return this.pullStateInitialized=!0}),!this.pullStateInitialized&&f.includes(e)){const t=this.arcanaActionToStatus(e);this.cardStateLog.forEach((e,s)=>{if("pull"===e.lastEvent.type)return this.cardStateLog[s].drawState=t||Dt.NOTHING,this.pullStateInitialized=!0})}}retconSearch(t){let e=!0;const s=ut()(this.cardStateLog);let a=s.lastEvent;if("pull"===a.type)return;a=s.lastEvent;const i=a.ability.guid;([r.b.UNDRAW.id,...f,r.b.MINOR_ARCANA.id,r.b.REDRAW.id].includes(i)||r.b.DRAW.id===i&&I.includes(s.drawState))&&(e=!1);const n=e?this.cardStateLog:this.cardStateLog.slice(0,this.cardStateLog.length-1);let o=ot()(n,t=>this.isCastEvent(t.lastEvent)&&St.includes(t.lastEvent.ability.guid));-1!==o&&this.cardStateLog[o].drawState!==Dt.NOTHING||(o=o<0?this.pullIndex:o,nt()(this.cardStateLog,(s,a)=>{e&&a>=o?s.drawState=this.arcanaActionToStatus(t):a>=o&&a!==this.cardStateLog.length-1&&(s.drawState=this.arcanaActionToStatus(t))}))}addSeal(t,e){return t?(e.shift(),e.push(t),e):e}startSleeve(){return Lt.TWO_STACK}consumeSleeve(t){return t--,at()(t,Lt.NOTHING,Lt.TWO_STACK)}arcanaActionToStatus(t){return f.includes(t)&&(t=It[t]),t}arcanaStatusToDrawn(t){return _.includes(t)&&(t=_t[t]),t}arcanaStatusToPlay(t){return _.includes(t)&&(t=vt[t]),t}arcanaDrawnToPlay(t){return I.includes(t)&&(t=Ct[t]),t}}Pt.handle="arcanaTracking",Pt.title={id:"ast.arcana-tracking.title",defaults:"Arcana Tracking"},Pt.displayOrder=H.ARCANA_TRACKING,Object(a.b)([c.d,Object(a.d)("design:type",Et.a)],Pt.prototype,"precastStatus",void 0);var jt=s(178),Ut=s(14),Ht=s(1289),kt=s(80),Wt=s(1470),Mt=s(1243),Ft=s(1437),Gt=s.n(Ft),Bt=s(1438),xt=s.n(Bt),Vt=s(1439),Kt=s.n(Vt),Jt=s(1440),Qt=s.n(Jt);function Zt(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Yt(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(s),!0).forEach((function(e){Xt(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Zt(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function Xt(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const qt=3e4,zt={[Lt.NOTHING]:"",[Lt.ONE_STACK]:o.b.SLEEVE_DRAW.icon,[Lt.TWO_STACK]:"https://xivapi.com/i/019000/019562.png"},$t={[wt.NOTHING]:"",[wt.SOLAR]:Qt.a,[wt.LUNAR]:Kt.a,[wt.CELESTIAL]:xt.a};class te extends c.c{constructor(){super(...arguments),this.cardLogs=[],this.partyComp=[]}init(){this.addHook("complete",this._onComplete)}_onComplete(){const t=this.combatants.getEntities();for(const[e,s]of Object.entries(t))"LimitBreak"!==s.type&&this.partyComp.push(s.type);this.cardLogs=this.arcanaTracking.cardLogs.map(t=>{const e=t.lastEvent.targetID!==this.parser.player.id?this.combatants.getEntity(t.lastEvent.targetID):this.combatants.selected;return Yt({},t,{targetName:e?e.name:null,targetJob:e?e.type:null})})}output(){return h.a.createElement(h.a.Fragment,null,h.a.createElement("p",null,h.a.createElement(i.Trans,{id:"ast.arcana-suggestions.messages.explanation"})),h.a.createElement("p",null,h.a.createElement(i.Trans,{id:"ast.arcana-suggestions.messages.footnote",components:[h.a.createElement(n.a,Yt({},r.b.PLAY))]})),h.a.createElement(Wt.a,{collapsing:!0,unstackable:!0,className:Gt.a.cardActionTable},h.a.createElement(Wt.a.Header,null,h.a.createElement(Wt.a.Row,null,h.a.createElement(Wt.a.HeaderCell,{width:1},h.a.createElement(i.Trans,{id:"ast.arcana-suggestions.messages.time"})),h.a.createElement(Wt.a.HeaderCell,{width:1},h.a.createElement(i.Trans,{id:"ast.arcana-suggestions.messages.latest-action"})),h.a.createElement(Wt.a.HeaderCell,{width:2},h.a.createElement(i.Trans,{id:"ast.arcana-suggestions.messages.target"})),h.a.createElement(Wt.a.HeaderCell,{width:2},h.a.createElement(i.Trans,{id:"ast.arcana-suggestions.messages.spread-state"})))),h.a.createElement(Wt.a.Body,null,this.cardLogs.map(t=>{if("pull"===t.lastEvent.type)return h.a.createElement(Wt.a.Row,{key:t.lastEvent.timestamp,className:Gt.a.cardActionRow},h.a.createElement(Wt.a.Cell,null,h.a.createElement(Mt.a,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:()=>this.timeline.show(0,qt)}),this.parser.formatTimestamp(t.lastEvent.timestamp)),h.a.createElement(Wt.a.Cell,null,h.a.createElement(i.Trans,{id:"ast.arcana-suggestions.messages.pull"})),h.a.createElement(Wt.a.Cell,null),this.RenderSpreadState(t));{const e=t.lastEvent.timestamp-this.parser.fight.start_time,s=e+qt,a=this.parser.formatTimestamp(t.lastEvent.timestamp);return h.a.createElement(Wt.a.Row,{key:t.lastEvent.timestamp,className:Gt.a.cardActionRow},h.a.createElement(Wt.a.Cell,null,e>=0&&h.a.createElement(Mt.a,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:()=>this.timeline.show(e,s)}),h.a.createElement("span",{style:{marginRight:10}},a)),this.RenderAction(t),this.RenderSpreadState(t))}}))),h.a.createElement(Mt.a,{onClick:()=>this.parser.scrollTo(te.handle)},h.a.createElement(i.Trans,{id:"ast.arcana-suggestions.scroll-to-top-button"})))}RenderAction(t){if("cast"===t.lastEvent.type&&f.includes(t.lastEvent.ability.guid)){const e=Object(j.a)(Ut.b,"logType",t.targetJob);return h.a.createElement(h.a.Fragment,null,h.a.createElement(Wt.a.Cell,null,h.a.createElement(n.a,Yt({},Object(j.a)(r.b,"id",t.lastEvent.ability.guid)))),h.a.createElement(Wt.a.Cell,null,e&&h.a.createElement(jt.a,{job:e}),t.targetName))}return"cast"===t.lastEvent.type?h.a.createElement(h.a.Fragment,null,h.a.createElement(Wt.a.Cell,null,h.a.createElement(n.a,Yt({},Object(j.a)(r.b,"id",t.lastEvent.ability.guid)))),h.a.createElement(Wt.a.Cell,null)):"death"===t.lastEvent.type?h.a.createElement(h.a.Fragment,null,h.a.createElement(Wt.a.Cell,null,h.a.createElement(i.Trans,{id:"ast.arcana-tracking.messages.death"})),h.a.createElement(Wt.a.Cell,null)):h.a.createElement(h.a.Fragment,null,h.a.createElement(Wt.a.Cell,null),h.a.createElement(Wt.a.Cell,null))}RenderSpreadState(t){const e=Object(j.a)(o.b,"id",t.drawState);return h.a.createElement(Wt.a.Cell,null,h.a.createElement("span",{style:{marginRight:10,marginLeft:0}},e&&h.a.createElement("img",{src:e.icon,className:Gt.a.buffIcon,alt:e.name}),!e&&h.a.createElement("span",{className:Gt.a.buffPlaceholder})),h.a.createElement("span",{className:Gt.a.sealIconContainer},t.sealState.map(t=>t>0?h.a.createElement("img",{src:$t[t],className:Gt.a.sealIcon,alt:"Seal icon"}):h.a.createElement("span",{className:Gt.a.sealIcon}))),h.a.createElement("span",{style:{marginLeft:5}},t.sleeveState>0&&h.a.createElement("img",{src:zt[t.sleeveState],className:Gt.a.buffIcon,alt:r.b.SLEEVE_DRAW.name})))}}te.handle="arcanaSuggestions",te.title={id:"ast.arcana-suggestions.title",defaults:"Arcana Logs"},te.displayOrder=H.ARCANA_TRACKING,Object(a.b)([c.d,Object(a.d)("design:type",Ht.a)],te.prototype,"combatants",void 0),Object(a.b)([c.d,Object(a.d)("design:type",Pt)],te.prototype,"arcanaTracking",void 0),Object(a.b)([c.d,Object(a.d)("design:type",kt.d)],te.prototype,"timeline",void 0);var ee=s(381),se=s(370),ae=s(262),ie=s(1441),ne=s.n(ie);class re extends ae.a{constructor(t){super(t),this.Content=()=>h.a.createElement("div",{className:ne.a.simpleStatistic},h.a.createElement("div",{className:ne.a.wrapper},this.icon&&h.a.createElement("img",{src:this.icon,className:ne.a.icon}),h.a.createElement("div",{className:ne.a.value},this.value))),this.icon=t.icon,this.value=t.value}}function oe(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function ce(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?oe(Object(s),!0).forEach((function(e){le(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):oe(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function le(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const de="https://xivapi.com/i/064000/064017.png",ue=[r.b.ASPECTED_BENEFIC.id,r.b.ASPECTED_HELIOS.id,r.b.CELESTIAL_INTERSECTION.id,r.b.CELESTIAL_OPPOSITION.id],pe=[o.b.ASPECTED_BENEFIC.id,o.b.ASPECTED_HELIOS.id,o.b.DIURNAL_OPPOSITION.id,o.b.NOCTURNAL_INTERSECTION.id,o.b.NOCTURNAL_BALANCE.id],he=[o.b.NOCTURNAL_FIELD.id,o.b.NOCTURNAL_OPPOSITION.id,o.b.DIURNAL_INTERSECTION.id,o.b.DIURNAL_BALANCE.id],be={[r.b.ASPECTED_BENEFIC.id]:[o.b.ASPECTED_BENEFIC.id,o.b.NOCTURNAL_FIELD.id],[r.b.ASPECTED_HELIOS.id]:[o.b.ASPECTED_HELIOS.id,o.b.NOCTURNAL_FIELD.id],[r.b.CELESTIAL_INTERSECTION.id]:[o.b.DIURNAL_INTERSECTION.id,o.b.NOCTURNAL_INTERSECTION.id],[r.b.CELESTIAL_OPPOSITION.id]:[o.b.DIURNAL_OPPOSITION.id,o.b.NOCTURNAL_OPPOSITION.id]},me=[r.b.DIURNAL_SECT.id,r.b.NOCTURNAL_SECT.id],Ee=[o.b.DIURNAL_SECT.id,o.b.NOCTURNAL_SECT.id],ge={name:o.b.DIURNAL_SECT.name,guid:o.b.DIURNAL_SECT.id,type:1,abilityIcon:lt()(lt()(o.b.DIURNAL_SECT.icon,"https://xivapi.com/i/",""),"/","-")},Oe={name:o.b.NOCTURNAL_SECT.name,guid:o.b.NOCTURNAL_SECT.id,type:1,abilityIcon:lt()(lt()(o.b.NOCTURNAL_SECT.icon,"https://xivapi.com/i/",""),"/","-")};class ye extends c.c{constructor(){super(...arguments),this.pullWithoutSect=!1,this.activeSectId=void 0,this.gaveup=!1}init(){this.addHook("cast",{abilityId:[...me],by:"player"},this.onCast),this.addHook("applybuff",{abilityId:[...Ee],by:"player"},this.onApplySect),this.addHook("complete",this.onComplete)}normalise(t){const e=this.parser.fight.start_time;let s=null;for(const a of t){if("applybuff"===a.type&&Ee.includes(a.ability.guid))break;if(!s&&"cast"===a.type&&ue.includes(a.ability.guid))s=a;else{if(!s||"applybuff"!==a.type&&"refreshbuff"!==a.type||![...he,...pe].includes(a.ability.guid))continue;if(this.mapCastToBuff(s.ability.guid).includes(a.ability.guid)&&[...pe,...he].includes(a.ability.guid)){const s=pe.includes(a.ability.guid)?ge:Oe;t.splice(0,0,ce({},a,{timestamp:e-1,type:"applybuff",ability:s,targetID:a.sourceID,targetIsFriendly:!0}));break}}}return t}onCast(t){this.pullWithoutSect=!0;const e=Object(j.a)(r.b,"id",t.ability.guid);e&&(this.activeSectId=e.id)}onApplySect(t){if(!this.activeSectId){const e=Object(j.a)(r.b,"id",this.mapBuffToCast(t.ability.guid));e&&(this.activeSectId=e.id)}}onComplete(){this.gaveup||!this.pullWithoutSect&&this.activeSectId||this.suggestions.add(new u.b({icon:this.activeSectId&&r.b.DIURNAL_SECT.id!==this.activeSectId?r.b.NOCTURNAL_SECT.icon:r.b.DIURNAL_SECT.icon,content:h.a.createElement(i.Trans,{id:"ast.sect.suggestions.no-sect.content",components:[h.a.createElement(n.a,ce({},r.b.DIURNAL_SECT)),h.a.createElement(n.a,ce({},r.b.NOCTURNAL_SECT))]}),why:h.a.createElement(i.Trans,{id:"ast.sect.suggestions.no-sect.why"}),severity:u.a.MAJOR}));const t=this.parser.fightFriendlies.some(t=>"Scholar"===t.type);this.activeSectId===r.b.NOCTURNAL_SECT.id&&t&&this.suggestions.add(new u.b({icon:r.b.NOCTURNAL_SECT.icon,content:h.a.createElement(i.Trans,{id:"ast.sect.suggestions.noct-with-sch.content",components:[h.a.createElement(n.d,ce({},o.b.NOCTURNAL_FIELD)),h.a.createElement(n.a,ce({},r.b.NOCTURNAL_SECT)),h.a.createElement(n.d,ce({},o.b.GALVANIZE))]}),why:h.a.createElement(i.Trans,{id:"ast.sect.suggestions.noct-with-sch.why"}),severity:u.a.MAJOR}));const e=this.activeSectId?r.b.DIURNAL_SECT.id===this.activeSectId?r.b.DIURNAL_SECT.icon:r.b.NOCTURNAL_SECT.icon:de,s=h.a.createElement(i.Trans,{id:"ast.sect.info.no-sect-detected"}),a=this.activeSectId?r.b.DIURNAL_SECT.id===this.activeSectId?r.b.DIURNAL_SECT.name:r.b.NOCTURNAL_SECT.name:s;this.statistics.add(new re({icon:e,value:a,info:h.a.createElement(i.Trans,{id:"ast.sect.info",components:[h.a.createElement("br",null),h.a.createElement(n.a,ce({},r.b.DIURNAL_SECT)),h.a.createElement("br",null),h.a.createElement(n.a,ce({},r.b.NOCTURNAL_SECT)),h.a.createElement(n.a,ce({},r.b.NEUTRAL_SECT))]})}))}mapCastToBuff(t){return ue.includes(t)?be[t]:[]}mapBuffToCast(t){switch(t){case o.b.NOCTURNAL_SECT.id:return r.b.NOCTURNAL_SECT.id;case o.b.DIURNAL_SECT.id:return r.b.DIURNAL_SECT.id;default:return-1}}}function fe(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Ae(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?fe(Object(s),!0).forEach((function(e){Se(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):fe(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function Se(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}ye.handle="sect",Object(a.b)([c.d,Object(a.d)("design:type",se.c)],ye.prototype,"statistics",void 0),Object(a.b)([c.d,Object(a.d)("design:type",ee.a)],ye.prototype,"precastAction",void 0),Object(a.b)([c.d,Object(a.d)("design:type",u.d)],ye.prototype,"suggestions",void 0);const Te={MINOR:.15,MEDIUM:.5,MAJOR:.8};class Ie extends c.c{constructor(){super(...arguments),this.lastUse=0,this.uses=0,this.totalHeld=0}init(){this.addHook("cast",{abilityId:r.b.CELESTIAL_INTERSECTION.id,by:"player"},this.onCast),this.addHook("complete",this.onComplete)}onCast(t){this.uses++,0===this.lastUse&&(this.lastUse=this.parser.fight.start_time);const e=t.timestamp-this.lastUse-1e3*r.b.CELESTIAL_INTERSECTION.cooldown;e>0&&(this.totalHeld+=e),this.lastUse=t.timestamp}onComplete(){const t=0===this.uses?this.parser.fightDuration:this.totalHeld,e=Math.floor(t/(1e3*r.b.CELESTIAL_INTERSECTION.cooldown)),s=(this.parser.fight.end_time-this.parser.fight.start_time)/(1e3*r.b.CELESTIAL_INTERSECTION.cooldown)-1,a={[s*Te.MINOR]:u.a.MINOR,[s*Te.MEDIUM]:u.a.MEDIUM,[s*Te.MAJOR]:u.a.MAJOR};(e>1||0===this.uses)&&this.suggestions.add(new u.c({icon:r.b.CELESTIAL_INTERSECTION.icon,content:h.a.createElement(i.Trans,{id:"ast.celestial-intersection.suggestion.content",components:[h.a.createElement(n.a,Ae({},r.b.CELESTIAL_INTERSECTION))]}),tiers:a,value:0===this.uses?100:e,why:h.a.createElement(i.Trans,{id:"ast.celestial-intersection.suggestion.why",values:{0:this.parser.formatDuration(t),usesMissed:e},components:[h.a.createElement(n.a,Ae({},r.b.CELESTIAL_INTERSECTION))]})}))}}Ie.handle="celestialintersection",Object(a.b)([c.d,Object(a.d)("design:type",u.d)],Ie.prototype,"suggestions",void 0);const _e=[o.b.ASPECTED_HELIOS.id,o.b.WHEEL_OF_FORTUNE.id,o.b.ASPECTED_BENEFIC.id,o.b.DIURNAL_OPPOSITION.id,o.b.DIURNAL_INTERSECTION.id,o.b.DIURNAL_BALANCE.id],ve={65:l.c.SUCCESS,50:l.c.WARN};class Ce extends c.c{constructor(){super(...arguments),this.healingDirect=0,this.overhealDirect=0,this.healingOverTime=0,this.overhealOverTime=0,this.healingPet=0,this.overhealPet=0}init(){this.addHook("heal",{by:"player"},this.onHeal),this.addHook("heal",{by:"pet"},this.onPetHeal),this.addHook("complete",this.onComplete)}onHeal(t){const e=t.ability.guid;_e.includes(e)?(this.healingOverTime+=t.amount,this.overhealOverTime+=t.overheal||0):(this.healingDirect+=t.amount,this.overhealDirect+=t.overheal||0)}onPetHeal(t){this.healingPet+=t.amount,this.overhealPet+=t.overheal||0}onComplete(){const t=100*this.healingDirect/(this.healingDirect+this.overhealDirect),e=100*this.healingPet/(this.healingPet+this.overhealPet),s=100*this.healingOverTime/(this.healingOverTime+this.overhealOverTime),a=this.healingOverTime+this.healingDirect+this.healingPet,n=this.overhealOverTime+this.overhealPet+this.healingOverTime;this.checklist.add(new l.d({name:h.a.createElement(i.Trans,{id:"ast.overheal.rule.name"}),description:h.a.createElement(h.a.Fragment,null,h.a.createElement(i.Trans,{id:"ast.overheal.rule.description"}),h.a.createElement("ul",null,h.a.createElement("li",null,h.a.createElement(i.Trans,{id:"ast.overheal.requirement.nonhot"}),this.invertPercent(t),"%"),e>0&&h.a.createElement("li",null,h.a.createElement(i.Trans,{id:"ast.overheal.requirement.earthly-star"}),this.invertPercent(e),"%"),h.a.createElement("li",null,h.a.createElement(i.Trans,{id:"ast.overheal.requirement.hot"}),this.invertPercent(s),"%"))),tiers:ve,requirements:[new we({name:h.a.createElement(i.Trans,{id:"ast.overheal.requirement.all"}),percent:100*a/(a+n)})]}))}invertPercent(t){return(100-t).toFixed(2)}}Ce.handle="overheal",Object(a.b)([c.d,Object(a.d)("design:type",l.e)],Ce.prototype,"checklist",void 0);class we extends l.a{get percentInverted(){return 100-this.percent}get content(){return null!==this._percent||null===this.value?"".concat(this.percentInverted.toFixed(2),"%"):"".concat(this.value.toFixed(0),"/").concat(this.target.toFixed(0))}}function Ne(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function De(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ne(Object(s),!0).forEach((function(e){Re(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ne(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function Re(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}const Le=15e3,Pe=3,je=2,Ue=3,He={DRAW_HOLDING:{1:u.a.MINOR,3:u.a.MEDIUM,6:u.a.MAJOR},SLEEVE_DRAW_HOLDING:{1:u.a.MEDIUM,2:u.a.MAJOR}};class ke extends c.c{constructor(){super(...arguments),this.lastDrawTimestamp=0,this.draws=0,this.drawDrift=0,this.drawTotalDrift=0,this.plays=0,this.prepullPrepped=!1,this.lastSleeveTimestamp=0,this.sleeveUses=0,this.sleeveDrift=0,this.sleeveTotalDrift=0,this.prepullSleeve=!1}init(){this.addHook("cast",{abilityId:r.b.DRAW.id,by:"player"},this.onDraw),this.addHook("cast",{abilityId:r.b.SLEEVE_DRAW.id,by:"player"},this.onSleeveDraw),this.addHook("cast",{abilityId:f,by:"player"},this.onPlay),this.addHook("applybuff",{abilityId:o.b.SLEEVE_DRAW.id,by:"player"},this.onSleeveBuff),this.addHook("applybuff",{abilityId:_,by:"player"},this.onPlayBuff),this.addHook("complete",this._onComplete)}onDraw(t){this.draws++,1===this.draws?this.drawDrift=t.timestamp-this.parser.fight.start_time:this.drawDrift=t.timestamp-this.lastDrawTimestamp-1e3*r.b.DRAW.cooldown,this.drawDrift>0&&(this.drawTotalDrift+=this.drawDrift),this.lastDrawTimestamp=t.timestamp}onPlay(){this.plays++}onPlayBuff(t){t.timestamp>this.parser.fight.start_time||(this.prepullPrepped=!0,this.plays++)}onSleeveDraw(t){this.sleeveUses++,1!==this.sleeveUses||this.prepullSleeve?this.sleeveDrift=t.timestamp-this.lastSleeveTimestamp-1e3*r.b.SLEEVE_DRAW.cooldown:this.sleeveDrift=t.timestamp-this.parser.fight.start_time,this.sleeveDrift>0&&(this.sleeveTotalDrift+=this.sleeveDrift),this.lastSleeveTimestamp=t.timestamp}onSleeveBuff(t){t.timestamp>this.parser.fight.start_time||(this.prepullSleeve=!0,this.sleeveUses++,this.lastSleeveTimestamp=this.parser.fight.start_time)}_onComplete(){this.parser.fight.end_time-this.lastSleeveTimestamp>1e3*r.b.SLEEVE_DRAW.cooldown&&(this.sleeveTotalDrift+=this.parser.fight.end_time-(this.lastSleeveTimestamp+1e3*r.b.SLEEVE_DRAW.cooldown)),this.parser.fight.end_time-this.lastDrawTimestamp>1e3*r.b.DRAW.cooldown&&(this.drawTotalDrift+=this.parser.fight.end_time-(this.lastDrawTimestamp+1e3*r.b.DRAW.cooldown));const t=this.parser.fight.end_time-this.parser.fight.start_time,e=(Math.floor((t-2*Le)/(1e3*r.b.SLEEVE_DRAW.cooldown))+1)*Pe,s=Math.floor((t-Le)/(1e3*r.b.DRAW.cooldown))+1,a=s+e+1;this.arcanaTracking.getPullState().drawState>0&&(this.prepullPrepped=!0);const o=(this.prepullPrepped?1:0)+this.draws+this.sleeveUses*Pe,c=Math.floor((a-je)/a*100),d=Math.floor((a-Ue)/a*100);this.checklist.add(new l.d({displayOrder:H.DRAW_CHECKLIST,name:h.a.createElement(i.Trans,{id:"ast.draw.checklist.name"}),description:h.a.createElement(h.a.Fragment,null,h.a.createElement(i.Trans,{id:"ast.draw.checklist.description",components:[h.a.createElement(n.a,De({},r.b.DIVINATION))]}),h.a.createElement("ul",null,h.a.createElement("li",null,h.a.createElement(i.Trans,{id:"ast.draw.checklist.description.prepull"})," ",this.prepullPrepped?1:0,"/1"),h.a.createElement("li",null,h.a.createElement(i.Trans,{id:"ast.draw.checklist.description.draws",components:[h.a.createElement(n.a,De({},r.b.DRAW))]})," ",this.draws,"/",s),h.a.createElement("li",null,h.a.createElement(i.Trans,{id:"ast.draw.checklist.description.sleeve-draws",components:[h.a.createElement(n.a,De({},r.b.SLEEVE_DRAW))]})," ",this.sleeveUses*Pe,"/",e),h.a.createElement("li",null,h.a.createElement(i.Trans,{id:"ast.draw.checklist.description.total"})," ",o,"/",a))),tiers:{[c]:l.c.WARN,[d]:l.c.FAIL,100:l.c.SUCCESS},requirements:[new l.a({name:h.a.createElement(i.Trans,{id:"ast.draw.checklist.requirement.name",components:[h.a.createElement(n.a,De({},r.b.PLAY))]}),value:this.plays,target:a})]}));const p=Math.floor(this.drawTotalDrift/(1e3*r.b.DRAW.cooldown));this.draws>0&&p>0&&this.suggestions.add(new u.c({icon:r.b.DRAW.icon,content:h.a.createElement(i.Trans,{id:"ast.draw.suggestions.draw-uses.content",components:[h.a.createElement(n.a,De({},r.b.DRAW))]}),tiers:He.DRAW_HOLDING,value:p,why:h.a.createElement(i.Trans,{id:"ast.draw.suggestions.draw-uses.why",values:{0:this.parser.formatDuration(this.drawTotalDrift),drawsMissed:p},components:[h.a.createElement(n.a,De({},r.b.DRAW))]})})),0===this.draws&&this.suggestions.add(new u.b({icon:r.b.DRAW.icon,content:h.a.createElement(i.Trans,{id:"ast.draw.suggestions.draw-no-usage.content",components:[h.a.createElement(n.a,De({},r.b.DRAW))]}),why:h.a.createElement(i.Trans,{id:"ast.draw.suggestions.draw-no-usage.why"}),severity:u.a.MAJOR}));const b=Math.floor(this.sleeveTotalDrift/(1e3*r.b.SLEEVE_DRAW.cooldown));this.sleeveUses>0&&b>0&&this.suggestions.add(new u.c({icon:r.b.SLEEVE_DRAW.icon,content:h.a.createElement(i.Trans,{id:"ast.draw.suggestions.sleeve-uses.content",components:[h.a.createElement(n.a,De({},r.b.SLEEVE_DRAW)),h.a.createElement(n.a,De({},r.b.DIVINATION)),h.a.createElement(n.a,De({},r.b.LIGHTSPEED))]}),tiers:He.SLEEVE_DRAW_HOLDING,value:b,why:h.a.createElement(i.Trans,{id:"ast.draw.suggestions.sleeve-uses.why",values:{0:this.parser.formatDuration(this.sleeveTotalDrift),sleevesMissed:b},components:[h.a.createElement(n.a,De({},r.b.SLEEVE_DRAW))]})})),0===this.sleeveUses&&this.suggestions.add(new u.b({icon:r.b.SLEEVE_DRAW.icon,content:h.a.createElement(i.Trans,{id:"ast.draw.suggestions.sleeve-no-usage.content",components:[h.a.createElement(n.a,De({},r.b.SLEEVE_DRAW)),h.a.createElement(n.a,De({},r.b.DIVINATION)),h.a.createElement(n.a,De({},r.b.LIGHTSPEED))]}),why:h.a.createElement(i.Trans,{id:"ast.draw.suggestions.sleeve-no-usage.why"}),severity:u.a.MAJOR}))}}function We(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Me(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?We(Object(s),!0).forEach((function(e){Fe(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):We(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function Fe(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}ke.handle="draw",ke.title={id:"ast.draw.title",defaults:"Draw"},Object(a.b)([c.d,Object(a.d)("design:type",l.e)],ke.prototype,"checklist",void 0),Object(a.b)([c.d,Object(a.d)("design:type",u.d)],ke.prototype,"suggestions",void 0),Object(a.b)([c.d,Object(a.d)("design:type",Pt)],ke.prototype,"arcanaTracking",void 0);const Ge={MINOR:.1,MEDIUM:.3,MAJOR:.5};class Be extends c.c{constructor(){super(...arguments),this.lastUse=0,this.uses=0,this.totalHeld=0}init(){this.addHook("cast",{abilityId:r.b.CELESTIAL_OPPOSITION.id,by:"player"},this.onCast),this.addHook("applybuff",{abilityId:[o.b.DIURNAL_SECT.id,o.b.NOCTURNAL_SECT.id],by:"player"},this.onSect),this.addHook("complete",this.onComplete)}onCast(t){this.uses++,0===this.lastUse&&(this.lastUse=this.parser.fight.start_time);const e=t.timestamp-this.lastUse-1e3*r.b.CELESTIAL_OPPOSITION.cooldown;e>0&&(this.totalHeld+=e),this.lastUse=t.timestamp}onSect(t){this.activeSect=Object(j.a)(o.b,"id",t.ability.guid)}onComplete(){const t=0===this.uses?this.parser.fightDuration:this.totalHeld,e=Math.floor(t/(1e3*r.b.CELESTIAL_OPPOSITION.cooldown)),s=(this.parser.fight.end_time-this.parser.fight.start_time)/(1e3*r.b.CELESTIAL_OPPOSITION.cooldown)-1,a={[s*Ge.MINOR]:u.a.MINOR,[s*Ge.MEDIUM]:u.a.MEDIUM,[s*Ge.MAJOR]:u.a.MAJOR},c=h.a.createElement(i.Trans,{id:"ast.celestial-opposition.suggestion.content.diurnal",components:[h.a.createElement(n.a,Me({},r.b.CELESTIAL_OPPOSITION)),h.a.createElement(n.d,Me({},o.b.DIURNAL_SECT)),h.a.createElement(n.a,Me({},r.b.BENEFIC_II))]}),l=h.a.createElement(i.Trans,{id:"ast.celestial-opposition.suggestion.content.noct",components:[h.a.createElement(n.a,Me({},r.b.CELESTIAL_OPPOSITION)),h.a.createElement(n.d,Me({},o.b.NOCTURNAL_SECT)),h.a.createElement(n.a,Me({},r.b.ASPECTED_HELIOS))]}),d=this.activeSect&&this.activeSect.id===o.b.NOCTURNAL_SECT.id?l:c;(e>1||0===this.uses)&&this.suggestions.add(new u.c({icon:r.b.CELESTIAL_OPPOSITION.icon,content:d,tiers:a,value:0===this.uses?100:e,why:h.a.createElement(i.Trans,{id:"ast.celestial-opposition.suggestion.why",values:{0:this.parser.formatDuration(t),usesMissed:e},components:[h.a.createElement(n.a,Me({},r.b.CELESTIAL_OPPOSITION))]})}))}}Be.handle="celestialopposition",Object(a.b)([c.d,Object(a.d)("design:type",u.d)],Be.prototype,"suggestions",void 0),Object(a.b)([c.d,Object(a.d)("design:type",ye)],Be.prototype,"sect",void 0);var xe=s(1298);function Ve(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function Ke(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Ve(Object(s),!0).forEach((function(e){Je(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Ve(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function Je(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}class Qe extends xe.a{constructor(){super(...arguments),this.trackedCds=[{cooldowns:[r.b.DIVINATION],allowedAverageDowntime:2500,firstUseOffset:12500}],this.target=100,this.checklistName=h.a.createElement(i.Trans,{id:"ast.ogcd-downtime.divination.name"}),this.checklistDescription=h.a.createElement(i.Trans,{id:"ast.ogcd-downtime.divination.description",components:[h.a.createElement(n.a,Ke({},r.b.DIVINATION)),h.a.createElement(n.a,Ke({},r.b.MINOR_ARCANA))]})}}var Ze=s(1307);class Ye extends Ze.a{}function Xe(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}function qe(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?Xe(Object(s),!0).forEach((function(e){ze(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Xe(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function ze(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}Ye.statusesStackMapping={[o.b.GIANT_DOMINANCE.id]:o.b.EARTHLY_DOMINANCE.id};const $e={WASTED_ST_HEAL_TIERS:{1:u.a.MINOR,10:u.a.MEDIUM}},ts=[r.b.BENEFIC.id,r.b.BENEFIC_II.id];class es extends c.c{constructor(){super(...arguments),this.nonSynastryHeals=0}init(){this.addHook("cast",{abilityId:ts,by:"player"},this.onSingleTargetHealCast),this.addHook("complete",this.onComplete)}onSingleTargetHealCast(t){this.cooldowns.getCooldownRemaining(r.b.SYNASTRY.id)>0||this.nonSynastryHeals++}onComplete(){this.suggestions.add(new u.c({icon:r.b.SYNASTRY.icon,content:h.a.createElement(i.Trans,{id:"ast.synastry.suggestion.content",components:[h.a.createElement(n.a,qe({},r.b.SYNASTRY))]}),tiers:$e.WASTED_ST_HEAL_TIERS,value:this.nonSynastryHeals,why:h.a.createElement(i.Trans,{id:"ast.synastry.suggestion.why",values:{0:this.nonSynastryHeals}})}))}}es.handle="synastry",Object(a.b)([c.d,Object(a.d)("design:type",Ht.a)],es.prototype,"combatants",void 0),Object(a.b)([c.d,Object(a.d)("design:type",u.d)],es.prototype,"suggestions",void 0),Object(a.b)([c.d,Object(a.d)("design:type",y.a)],es.prototype,"cooldowns",void 0);e.default=[v,O,G,L,J,ke,X,et,Pt,te,ye,Ie,Ce,Qe,Be,Ye,es]}}]);
//# sourceMappingURL=jobs-ast.b9395a91.js.map
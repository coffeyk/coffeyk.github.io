(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1288:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(8),s=n(1287),c=n(0),i=n.n(c),r=n(1470),o=n(1243),l=n(37);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends i.a.Component{render(){const{targets:e,notes:t,data:n,onGoto:s,headerTitle:c}=this.props;return i.a.createElement(r.a,{compact:!0,unstackable:!0,celled:!0},i.a.createElement(r.a.Header,null,i.a.createElement(r.a.Row,null,i.a.createElement(r.a.HeaderCell,{collapsing:!0},i.a.createElement("strong",null,i.a.createElement(a.Trans,{id:"core.ui.rotation-table.header.time"}))),(e||[]).map((e,t)=>i.a.createElement(r.a.HeaderCell,{key:"target_header_".concat(t),textAlign:"center",collapsing:!0},i.a.createElement("strong",null,e.header))),i.a.createElement(r.a.HeaderCell,null,i.a.createElement("strong",null,c||i.a.createElement(a.Trans,{id:"core.ui.rotation-table.header.rotation"}))),(t||[]).map((e,t)=>i.a.createElement(r.a.HeaderCell,{key:"note_header_".concat(t),textAlign:"center",collapsing:!0},i.a.createElement("strong",null,e.header))))),i.a.createElement(r.a.Body,null,n.map(n=>i.a.createElement(h.Row,g({key:n.start,onGoto:s,targets:e||[],notes:t||[]},n)))))}}h.targetAccessorResolver=(e,t)=>"string"==typeof t.accessor&&null!=e.targetsData?e.targetsData[t.accessor]:"function"==typeof t.accessor?t.accessor(e):{actual:0,expected:0},h.notesAccessorResolver=(e,t)=>"string"==typeof t.accessor&&null!=e.notesMap?e.notesMap[t.accessor]:"function"==typeof t.accessor?t.accessor(e):null,h.TargetCell=e=>{let{actual:t,expected:n}=e;return i.a.createElement(r.a.Cell,{textAlign:"center",positive:void 0!==n&&t>=n,negative:void 0!==n&&t<n},t,"/",void 0===n?"-":n)},h.Row=e=>{let{onGoto:t,targets:n,notes:a,notesMap:c,start:d,end:m,targetsData:u,rotation:p}=e;return i.a.createElement(r.a.Row,null,i.a.createElement(r.a.Cell,{textAlign:"center"},i.a.createElement("span",{style:{marginRight:5}},Object(l.d)(d/1e3)),"function"==typeof t&&i.a.createElement(o.a,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:()=>t(d,m)})),n.map(e=>h.targetAccessorResolver({start:d,end:m,targetsData:u,rotation:p},e)).map((e,t)=>i.a.createElement(h.TargetCell,g({key:"target_".concat(t)},e))),i.a.createElement(r.a.Cell,null,i.a.createElement(s.a,{events:p})),a.map(e=>h.notesAccessorResolver({start:d,end:m,targetsData:u,notesMap:c,rotation:p},e)).map((e,t)=>i.a.createElement(r.a.Cell,{key:"notes_".concat(t),textAlign:"center"},e)))}},1294:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(8),s=n(0),c=n.n(s),i=n(1474),r=n(1287),o=n(51),l=n(24),d=n(1285),g=n(37);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u=2,p={0:2,1:1,2.5:0},b={1:d.a.MEDIUM,5:d.a.MAJOR};class v extends l.c{constructor(){super(...arguments),this._weaves=[],this._ongoingCastEvent=null,this._leadingGcdEvent=null,this._trailingGcdEvent=null,this._badWeaves=[],this.addHook("begincast",{by:"player"},this._onBeginCast),this.addHook("cast",{by:"player"},this._onCast),this.addHook("complete",this._onComplete)}_onBeginCast(e){this._ongoingCastEvent=e}_onCast(e){const t=this.data.getAction(e.ability.guid);t&&!t.autoAttack&&(this.isOgcd(t)?this._weaves.push(e):(this._ongoingCastEvent&&this._ongoingCastEvent.ability.guid===t.id?this._trailingGcdEvent=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{timestamp:this._ongoingCastEvent.timestamp}):this._trailingGcdEvent=e,this._ongoingCastEvent=null,this._saveIfBad(),this._leadingGcdEvent=this._trailingGcdEvent,this._weaves=[]))}_onComplete(){this._leadingGcdEvent&&this._saveIfBad();const e=this._badWeaves;this.suggestions.add(new d.c({icon:"https://xivapi.com/i/001000/001785.png",content:c.a.createElement(a.Trans,{id:"core.weaving.content",components:[c.a.createElement("a",{href:"javascript:void(0);",onClick:()=>this.parser.scrollTo(this.constructor.handle)}),c.a.createElement(o.a,{message:this.constructor.title})]}),why:c.a.createElement(a.Trans,{id:"core.weaving.why",values:{0:e.length}}),tiers:b,value:e.length}))}_saveIfBad(){const e=this._leadingGcdEvent||{timestamp:this.parser.fight.start_time},t=this._trailingGcdEvent.timestamp-e.timestamp-this.invuln.getUntargetableUptime("all",e.timestamp,this._trailingGcdEvent.timestamp),n={leadingGcdEvent:e,trailingGcdEvent:this._trailingGcdEvent,gcdTimeDiff:t,weaves:this._weaves};0!==n.weaves.length&&this.isBadWeave(n)&&this._badWeaves.push(n)}isOgcd(e){return!e.onGcd&&!e.autoAttack}isBadWeave(e,t){const n=e.weaves.filter(e=>!this.invuln.isUntargetable("all",e.timestamp)).length;if(!t)if(e.leadingGcdEvent.ability){const n=this.castTime.forEvent(e.leadingGcdEvent),a=Object(g.i)(p,n);t=void 0!==a?a:u}else t=u;const a=this.speedmod.get(this.parser.timestamp),s=this.gcd.getEstimate()*a;return e.gcdTimeDiff>s&&n>t}output(){const e=this._badWeaves;if(0===e.length)return!1;const t=e.map(e=>({key:e.leadingGcdEvent.timestamp,title:{content:c.a.createElement(c.a.Fragment,null,c.a.createElement("strong",null,this.parser.formatTimestamp(e.leadingGcdEvent.timestamp))," - ",c.a.createElement(a.Trans,{id:"core.weaving.panel-count",values:{0:e.weaves.length}})," (",this.parser.formatDuration(e.gcdTimeDiff)," ",c.a.createElement(a.Trans,{id:"core.weaving.between-gcds"}),")")},content:{content:c.a.createElement(r.a,{events:[...e.leadingGcdEvent.ability?[e.leadingGcdEvent]:[],...e.weaves]})}}));return c.a.createElement(i.a,{exclusive:!1,panels:t,styled:!0,fluid:!0})}}v.handle="weaving",v.dependencies=["castTime","data","gcd","invuln","speedmod","suggestions"],v.title={id:"core.weaving.title",defaults:"Weaving Issues"}},1304:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(8),s=n(1295),c=n(0),i=n.n(c),r=n(24),o=n(80),l=n(370);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h=1500,u=2500,p=2500,b=100,v=!1;class f extends r.c{constructor(){super(...arguments),this._castingEvent=null,this._estimatedBaseGcd=null,this._estimateGcdCount=-1,this._lastGcd={isInstant:!1,event:null},this.gcds=[],this.gcdGroupId="gcd",this.addHook("complete",this._onComplete)}normalise(e){for(let t=0;t<e.length;t++){const n=e[t];if(!this.parser.byPlayer(n)||!n.ability)continue;const a=this.data.getAction(n.ability.guid);if(a&&a.onGcd)switch(n.type){case"begincast":this._castingEvent=n;break;case"cast":const e=null!==this._castingEvent&&this._castingEvent.ability.guid===a.id,t=e?this._castingEvent:n;this.saveGcd(g({},this._lastGcd),t.timestamp),this._lastGcd.isInstant=!e,this._lastGcd.event=t,this._castingEvent=null}}return e.length&&this.saveGcd(g({},this._lastGcd),e[e.length-1].timestamp),this._debugLogSavedGcds(),e}_debugLogSavedGcds(){v&&this.gcds.forEach(e=>{const t=this.parser.formatTimestamp(e.timestamp),n=this.data.getAction(e.actionId),a=e.isInstant?" Instant":"",s=e.casterTaxed?" CasterTaxed":"";console.log("".concat(t," ").concat(n.name,"[").concat(e.length,"|").concat(e.normalizedLength,"] Speedmod[").concat(e.speedMod,"]").concat(a).concat(s))})}_onComplete(){const e=this.parser.fight.start_time;this.timeline.addGroup(new o.a({id:this.gcdGroupId,content:"GCD",order:-99})),this.gcds.forEach(t=>{const n=this.data.getAction(t.actionId);n&&this.timeline.addItem(new o.b({type:"background",start:t.timestamp-e,length:this._getGcdLength(t),title:n.name,group:this.gcdGroupId,content:i.a.createElement("img",{src:n.icon,alt:n.name,title:n.name})}))});const t=this.getEstimate(!1);this.statistics.add(new l.b({title:i.a.createElement(a.Trans,{id:"core.gcd.estimated-gcd"}),icon:this.data.actions.ATTACK.icon,value:this.parser.formatDuration(t),info:i.a.createElement(a.Trans,{id:"core.gcd.no-statistics",components:[i.a.createElement("em",null),i.a.createElement("em",null)]})}))}saveGcd(e,t){if(!e.event)return;const n=this.data.getAction(e.event.ability.guid);if(!n||!n.id)return;let a=this.speedmod.get(e.event.timestamp),s=n.castTime;a<=.5&&(a/=.5,s*=.5);let c=!1,i=10*Math.round((t-e.event.timestamp)/10);!e.isInstant&&s>=n.cooldown&&(i-=b,c=!0);const r=null!=n.gcdRecast?n.gcdRecast:n.cooldown,o=e.isInstant||s<r?r:s,l=Math.round(i*(p/1e3/o)*(1/a));this.gcds.push({timestamp:e.event.timestamp,length:i,normalizedLength:l,speedMod:a,castTime:s,cooldown:r,casterTaxed:c,actionId:n.id,isInstant:e.isInstant})}getEstimate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.gcds.length;if(null===this._estimatedBaseGcd||t!==this._estimateGcdCount){const e=this.gcds.map(e=>e.normalizedLength);this._estimatedBaseGcd=e.length?s.a.mean(s.a.mode(e)):u,this._estimateGcdCount=t}return e&&(this._estimatedBaseGcd=Math.max(h,Math.min(u,this._estimatedBaseGcd))),this._estimatedBaseGcd}getUptime(){return this.gcds.reduce((e,t)=>{const n=this._getGcdLength(t);return e+n-this.downtime.getDowntime(t.timestamp,t.timestamp+n)},0)}_getGcdLength(e){let t=e.isInstant||e.castTime<=e.cooldown?e.cooldown:Math.max(e.castTime,e.cooldown);if(t*=1e3,t>h){const n=this.getEstimate()/u;t=Math.max(h,t*n*e.speedMod)}return Math.round(t+(e.casterTaxed?b:0))}}f.handle="gcd",f.dependencies=["precastAction","castTime","data","downtime","speedmod","statistics","timeline"],f.title={id:"core.gcd.title",defaults:"Global Cooldown"}},1476:function(e,t,n){"use strict";n(687);var a=n(5),s=n.n(a),c=n(4),i=n.n(c),r=(n(9),n(0)),o=n.n(r),l=n(23),d=n(151),g=n(152),m=n(186);function h(e){var t=e.children,n=e.className,a=e.computer,c=e.color,r=e.floated,m=e.largeScreen,u=e.mobile,p=e.only,b=e.stretched,v=e.tablet,f=e.textAlign,O=e.verticalAlign,E=e.widescreen,j=e.width,w=i()(c,Object(l.a)(b,"stretched"),Object(l.c)(p,"only"),Object(l.d)(f),Object(l.e)(r,"floated"),Object(l.f)(O),Object(l.g)(a,"wide computer"),Object(l.g)(m,"wide large screen"),Object(l.g)(u,"wide mobile"),Object(l.g)(v,"wide tablet"),Object(l.g)(E,"wide widescreen"),Object(l.g)(j,"wide"),"column",n),y=Object(d.a)(h,e),_=Object(g.a)(h,e);return o.a.createElement(_,s()({},y,{className:w}),t)}h.handledProps=["as","children","className","color","computer","floated","largeScreen","mobile","only","stretched","tablet","textAlign","verticalAlign","widescreen","width"],h.propTypes={},h.create=Object(m.f)(h,(function(e){return{children:e}}));var u=h;function p(e){var t=e.centered,n=e.children,a=e.className,c=e.color,r=e.columns,m=e.divided,h=e.only,u=e.reversed,b=e.stretched,v=e.textAlign,f=e.verticalAlign,O=i()(c,Object(l.a)(t,"centered"),Object(l.a)(m,"divided"),Object(l.a)(b,"stretched"),Object(l.c)(h,"only"),Object(l.c)(u,"reversed"),Object(l.d)(v),Object(l.f)(f),Object(l.g)(r,"column",!0),"row",a),E=Object(d.a)(p,e),j=Object(g.a)(p,e);return o.a.createElement(j,s()({},E,{className:O}),n)}p.handledProps=["as","centered","children","className","color","columns","divided","only","reversed","stretched","textAlign","verticalAlign"],p.propTypes={};var b=p;function v(e){var t=e.celled,n=e.centered,a=e.children,c=e.className,r=e.columns,m=e.container,h=e.divided,u=e.doubling,p=e.inverted,b=e.padded,f=e.relaxed,O=e.reversed,E=e.stackable,j=e.stretched,w=e.textAlign,y=e.verticalAlign,_=i()("ui",Object(l.a)(n,"centered"),Object(l.a)(m,"container"),Object(l.a)(u,"doubling"),Object(l.a)(p,"inverted"),Object(l.a)(E,"stackable"),Object(l.a)(j,"stretched"),Object(l.b)(t,"celled"),Object(l.b)(h,"divided"),Object(l.b)(b,"padded"),Object(l.b)(f,"relaxed"),Object(l.c)(O,"reversed"),Object(l.d)(w),Object(l.f)(y),Object(l.g)(r,"column",!0),"grid",c),G=Object(d.a)(v,e),C=Object(g.a)(v,e);return o.a.createElement(C,s()({},G,{className:_}),a)}v.handledProps=["as","celled","centered","children","className","columns","container","divided","doubling","inverted","padded","relaxed","reversed","stackable","stretched","textAlign","verticalAlign"],v.Column=u,v.Row=b,v.propTypes={};t.a=v}}]);
//# sourceMappingURL=4.6df952bc.js.map
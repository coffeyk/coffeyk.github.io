(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1287:function(e,t,n){"use strict";var r=n(0),s=n.n(r),i=n(37);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c={MORBID:0,MAJOR:1,MEDIUM:2,MINOR:3,IGNORE:void 0};class l{constructor(e){this.icon="",this.content="",this.why="",this.severity=c.MEDIUM,Object.keys(e||{}).forEach(t=>{this[t]=e[t]})}}class u extends l{constructor(e){super(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({tiers:{},value:0,matcher:i.i},e))}get severity(){return this.matcher(this.tiers,this.value)}set severity(e){}}var d=n(2),h=n(8),m=n(26),p=n(1275),g=n(213),f=(n(129),n(1303)),b=n.n(f),O=n(29);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const w={[c.MORBID]:{content:s.a.createElement(h.Trans,{id:"core.suggestions.severity.morbid"}),color:"black",icon:"times"},[c.MAJOR]:{content:s.a.createElement(h.Trans,{id:"core.suggestions.severity.major"}),color:"red",icon:"arrow up"},[c.MEDIUM]:{content:s.a.createElement(h.Trans,{id:"core.suggestions.severity.medium"}),color:"orange"},[c.MINOR]:{content:s.a.createElement(h.Trans,{id:"core.suggestions.severity.minor"}),color:"blue",icon:"arrow down"}};let E=class extends s.a.Component{constructor(){super(...arguments),this.onToggleShowMinor=(e,t)=>{const{settingsStore:n}=this.context;n.setShowMinorSuggestions(t.checked)}}render(){const e=this.context.settingsStore.showMinorSuggestions,t=this.props.suggestions.filter(t=>e||t.severity!==c.MINOR),n=this.props.suggestions.some(e=>e.severity===c.MINOR);return s.a.createElement(s.a.Fragment,null,n&&s.a.createElement(p.a,{toggle:!0,label:s.a.createElement("label",null,s.a.createElement(h.Trans,{id:"core.suggestion.show-minor"})),defaultChecked:e,onChange:this.onToggleShowMinor,className:b.a.checkbox}),s.a.createElement("div",{className:b.a.items},t.map((e,t)=>s.a.createElement("div",{key:t,className:b.a.item},s.a.createElement("img",{src:e.icon,alt:""}),s.a.createElement("div",null,e.content,s.a.createElement("div",{className:b.a.extra},s.a.createElement(g.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({horizontal:!0},w[e.severity])),e.why)))),0===t.length&&s.a.createElement("div",{className:b.a.item},s.a.createElement("div",null,s.a.createElement("strong",null,s.a.createElement(h.Trans,{id:"core.suggestion.nothing"})),s.a.createElement("br",null),n&&s.a.createElement(h.Trans,{id:"core.suggestion.nothing-but-minor"})))))}};E.contextType=O.a,E=Object(d.b)([m.b],E);var j=E,D=n(23),k=n(218);class x extends D.c{constructor(){super(...arguments),this._suggestions=[]}add(e){e instanceof l?this._suggestions.push(e):console.error("TODO: Proper error message for passing a non-suggestion to the suggestion add handler")}output(){if(0===this._suggestions.length)return!1;const e=this._suggestions.filter(e=>e.severity!==c.IGNORE).sort((e,t)=>e.severity-t.severity);return s.a.createElement(j,{suggestions:e})}}x.handle="suggestions",x.displayOrder=k.a.SUGGESTIONS,x.displayMode=D.a.FULL,x.title={id:"core.suggestions.title",defaults:"Suggestions"},n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u}))},1288:function(e,t,n){"use strict";var r=n(0),s=n.n(r),i=n(1297),o=n(37),a=n(23);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u={SUCCESS:2,WARN:1,FAIL:void 0},d=95;class h{constructor(e){this.name="",this.description=null,this.requirements=[],this.target=d,this.displayOrder=a.b.DEFAULT,Object.keys(e||{}).forEach(t=>{this[t]=e[t]})}get tier(){return Object(o.i)({[this.target]:u.SUCCESS},this.percent)}get percent(){const e=this.requirements.map(e=>e.percent);return e.length?i.a.mean(e):0}}class m extends h{constructor(e){super(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({tiers:{},matcher:o.i},e))}get tier(){return this.matcher(this.tiers,this.percent)}}var p=n(94),g=n(1274),f=n(1476),b=n(1308),O=n.n(b);const y={[u.SUCCESS]:{text:"text-success",color:"green",icon:"checkmark",autoExpand:!1},[u.WARN]:{text:"text-warning",color:"yellow",icon:"warning sign",autoExpand:!0},[u.FAIL]:{text:"text-error",color:"red",icon:"remove",autoExpand:!0}};class v extends r.Component{render(){const{rules:e}=this.props;if(!e.length)return!1;const t=[],n=e.map((e,n)=>{const r=y[e.tier];let i=e.percent;return i=Math.min(i,100),r.autoExpand&&t.push(n),{key:n,title:{className:O.a.title,content:s.a.createElement(s.a.Fragment,null,s.a.createElement(p.a,{name:r.icon,className:r.text}),e.name,s.a.createElement("div",{className:O.a.percent+" "+r.text},i.toFixed(1),"%",s.a.createElement(g.a,{percent:i,className:O.a.progress,size:"small",color:r.color})))},content:{content:s.a.createElement(s.a.Fragment,null,e.description&&s.a.createElement("div",{className:O.a.description},s.a.createElement(p.a,{name:"info",size:"large"}),s.a.createElement("p",null,e.description)),s.a.createElement("ul",null,e.requirements.map((e,t)=>s.a.createElement("li",{key:t},e.name,": ",e.content))))}}});return s.a.createElement(f.a,{exclusive:!1,panels:n,defaultActiveIndex:t,styled:!0,fluid:!0})}}var w=v,E=n(218);class j extends a.c{constructor(){super(...arguments),this._rules=[]}add(e){e instanceof h?this._rules.push(e):console.error("TODO: This error message")}output(){const e=[...this._rules];return e.sort((e,t)=>e.displayOrder-t.displayOrder),s.a.createElement(w,{rules:e})}}j.handle="checklist",j.title={id:"core.checklist.title",defaults:"Checklist"},j.displayOrder=E.a.CHECKLIST,j.displayMode=a.a.FULL;class D{constructor(e){this.name="",this._percent=null,this.value=null,this.target=100,this.overrideDisplay=null,Object.keys(e||{}).forEach(t=>{this[t]=e[t]})}get content(){return null!==this.overrideDisplay?this.overrideDisplay:null!==this._percent||null===this.value?"".concat(this.percent.toFixed(2),"%"):"".concat(this.value.toFixed(0),"/").concat(this.target.toFixed(0))}get percent(){return null===this._percent?null===this.value?0:100*(("function"==typeof this.value?this.value():this.value)||0)/this.target:("function"==typeof this._percent?this._percent():this._percent)||0}set percent(e){this._percent=e}}n.d(t,"e",(function(){return j})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return D}))},1289:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(4),s=n.n(r),i=n(17),o=n(47),a=n(10),c=n(0),l=n.n(c),u=n(1302),d=n.n(u);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends c.Component{render(){const{events:e}=this.props;return l.a.createElement("div",{className:d.a.container},e.map((e,t)=>{const n=Object(o.a)(a.b,"id",e.ability.guid);if(!n||n.autoAttack)return;if(!n.icon)return console.error(e,"event ability has no icon"),!1;const r=[d.a.link,{[d.a.ogcd]:!n.onGcd}],c=n.onGcd?d.a.gcdSize:d.a.ogcdSize,u=n.id>=a.a?i.b:i.a;return l.a.createElement("div",{key:t,className:s()(...r)},l.a.createElement(u,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({showName:!1,iconSize:c},n)))}))}}},1297:function(e,t,n){"use strict";var r=n(1475),s=n(1454),i=n(1478),o=n(1474);t.a=Object(r.a)({meanDependencies:s.a,modeDependencies:i.a,stdDependencies:o.a})},1300:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(2),s=n(8),i=n(17),o=n(23),a=n(1288),c=n(0),l=n.n(c),u=n(367),d=n(1314);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g extends o.c{constructor(){super(...arguments),this.usages=new Map,this.resets=new Map,this.checklistName=l.a.createElement(s.Trans,{id:"core.cooldownDowntime.use-ogcd-cds"}),this.checklistDescription=l.a.createElement(s.Trans,{id:"core.cooldownDowntime.ogcd-cd-metric"}),this.checklistTarget=95,this.defaultAllowedAverageDowntime=1250,this.defaultFirstUseOffset=0}countUsage(e){return!0}init(){const e=this.trackedCds.map(e=>e.cooldowns).reduce((e,t)=>e.concat(t)).map(e=>e.id),t=this.trackedCds.map(e=>{var t,n;return null!==(t=null===(n=e.resetBy)||void 0===n?void 0:n.actions)&&void 0!==t?t:[]}).reduce((e,t)=>e.concat(t)).map(e=>e.id);this.addEventHook("cast",{by:"player",abilityId:e},this.onTrackedCast),this.addEventHook("cast",{by:"player",abilityId:t},this.onResetCast),this.addEventHook("complete",this.onComplete),this.trackedCds.forEach(e=>{this.usages.set(e,[]),this.resets.set(e,[])})}onTrackedCast(e){if(!this.countUsage(e))return;const t=this.getTrackedGroup(e.ability.guid);void 0!==t&&(this.usages.get(t)||[]).push(e)}getTrackedGroup(e){return this.trackedCds.find(t=>void 0!==t.cooldowns.find(t=>t.id===e))}onResetCast(e){this.trackedCds.forEach(t=>{var n;(null===(n=t.resetBy)||void 0===n?void 0:n.actions.find(t=>t.id===e.ability.guid))&&(this.resets.get(t)||[]).push(e)})}onComplete(){const e=[];for(const t of this.trackedCds){const n=this.calculateMaxUsages(t),r=(this.usages.get(t)||[]).length||0,s=r/n*100,o=t.cooldowns.map((e,t)=>l.a.createElement(l.a.Fragment,null,t>0?", ":"",l.a.createElement(i.a,m({},this.data.getAction(e.id)))));this.debug(JSON.stringify(o)),e.push(new a.a({name:o,percent:s,overrideDisplay:"".concat(r," / ").concat(n," (").concat(s.toFixed(2),"%)")}))}this.checklist.add(new a.b({name:this.checklistName,description:this.checklistDescription,requirements:e,target:this.checklistTarget}))}calculateMaxUsages(e){const t=e.cooldowns[0];if(void 0===t.cooldown)return 0;const n=t.charges||1,r=1e3*t.cooldown+(n>1?0:e.allowedAverageDowntime||this.defaultAllowedAverageDowntime),s=this.resets.get(e)||[],i=e.resetBy&&e.resetBy.refundAmount?e.resetBy.refundAmount:0;let o=0;this.debug("Checking downtime for group ".concat(t.name," with default first use ").concat(e.firstUseOffset," and step ").concat(r," and ").concat(n," charges"));let a=n,c=0;const l=this.parser.fight.start_time+(e.firstUseOffset||this.defaultFirstUseOffset),u=(this.usages.get(e)||[])[0];let d=l;for(u&&(this.debug("Actual first use of skill ".concat(t.name," at ").concat(this.parser.formatTimestamp(u.timestamp))),d=Math.min(u.timestamp,l));d<this.parser.fight.end_time;){for(c+=a,this.debug("Expected ".concat(a," usages at ").concat(this.parser.formatTimestamp(d),". Count: ").concat(c)),a=0,d+=r,a+=1;s.length>0&&s[0].timestamp<d;){const e=s[0],t=d;d-i<e.timestamp?a<n?d-=i:(o+=e.timestamp-(d-i),d=e.timestamp):d-=i,this.debug("Reset (".concat(e.ability.name,") used at ").concat(this.parser.formatTimestamp(e.timestamp),". Changing next charge time from ").concat(this.parser.formatTimestamp(t)," to ").concat(this.parser.formatTimestamp(d))),s.shift()}for(;a<n&&this.downtime.isDowntime(d);){this.debug("Saving charge during downtime at ".concat(this.parser.formatTimestamp(d),". ").concat(a," charges stored"));const e=this.downtime.getDowntimeWindows(d)[0];e.end<d+r&&(c+=a,this.debug("Delayed charge spend at ".concat(this.parser.formatTimestamp(e.end),". ").concat(a," charges spent. No charge time lost. Count: ").concat(c)),a=0),d+=r,a+=1}if(this.downtime.isDowntime(d)){const e=this.downtime.getDowntimeWindows(d)[0];this.debug("Downtime detected at ".concat(this.parser.formatTimestamp(d)," in window from ").concat(this.parser.formatTimestamp(e.start)," to ").concat(this.parser.formatTimestamp(e.end))),d=e.end}}return this.debug("Total count for group ".concat(t.name," is ").concat(c,". Total reset time lost is ").concat(this.parser.formatDuration(o),".")),c}}g.handle="cooldownDowntime",g.title={id:"core.cooldownDowntime.title",defaults:"Cooldown Downtime"},g.debug=!1,Object(r.b)([o.d,Object(r.d)("design:type",u.a)],g.prototype,"data",void 0),Object(r.b)([o.d,Object(r.d)("design:type",d.a)],g.prototype,"downtime",void 0),Object(r.b)([o.d,Object(r.d)("design:type",a.e)],g.prototype,"checklist",void 0)},1302:function(e,t,n){e.exports={gcdSize:"40px",ogcdSize:"30px",container:"Rotation-module_container__32KS2",link:"Rotation-module_link__2T3fu",ogcd:"Rotation-module_ogcd__3oBO8"}},1303:function(e,t,n){e.exports={gutter:"20px",checkbox:"Suggestions-module_checkbox__1Z22N",items:"Suggestions-module_items__3sCkP",item:"Suggestions-module_item__1yy1-",extra:"Suggestions-module_extra__3WN2d"}},1308:function(e,t,n){e.exports={lg:"(min-width: 992px)",title:"Checklist-module_title__2ro7x",percent:"Checklist-module_percent__EKBdj",progress:"Checklist-module_progress__28lgp",description:"Checklist-module_description__3Bf5O"}},1314:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(23);class s extends r.c{_internalDowntime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentTimestamp;const n=[...this.unableToAct.getDowntimes(e,t),...this.invuln.getInvulns("all",e,t,"untargetable")].sort((e,t)=>e.start-t.start);if(!n.length)return[];const r=[n.shift()];return n.forEach(e=>{const t=r[r.length-1];e.start<=t.end?e.end>t.end&&(t.end=e.end):r.push(e)}),r}isDowntime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parser.currentTimestamp;return this._internalDowntime(e,e).length>0}getDowntime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentTimestamp;return this._internalDowntime(e,t).reduce((n,r)=>n+Math.min(r.end,t)-Math.max(r.start,e),0)}getDowntimes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentTimestamp,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return this._internalDowntime(e,t).reduce((r,s)=>(Math.min(s.end,t)-Math.max(s.start,e)>Math.min(n,0)&&r.push(Math.min(s.end,t)-Math.max(s.start,e)),r),[])}getDowntimeWindows(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.parser.currentTimestamp,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return this._internalDowntime(e,t).reduce((r,s)=>(Math.min(s.end,t)-Math.max(s.start,e)>Math.min(n,0)&&r.push({start:Math.max(s.start,e),end:Math.min(s.end,t)}),r),[])}}s.handle="downtime",s.dependencies=["invuln","unableToAct"]}}]);
//# sourceMappingURL=2.d8b69bcf.js.map
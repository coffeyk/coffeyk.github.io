{"version":3,"sources":["webpack:///./src/parser/core/Combatant.js","webpack:///./src/parser/core/modules/Combatants.js","webpack:///./src/parser/core/modules/Cooldowns.js","webpack:///./src/parser/core/modules/Statuses.js","webpack:///./src/parser/core/modules/DoTs.js","webpack:///./node_modules/lodash/findLastIndex.js","webpack:///./node_modules/lodash/replace.js","webpack:///./node_modules/lodash/forEachRight.js","webpack:///./node_modules/lodash/_arrayEachRight.js","webpack:///./node_modules/lodash/_baseEachRight.js","webpack:///./node_modules/lodash/_baseForOwnRight.js","webpack:///./node_modules/lodash/_baseForRight.js","webpack:///./node_modules/lodash/zipObject.js","webpack:///./node_modules/lodash/_baseZipObject.js","webpack:///./src/parser/jobs/ast/modules/ArcanaTracking/ArcanaSuggestions.module.css?2006","webpack:///./src/parser/jobs/ast/modules/ArcanaTracking/seal_celestial.png","webpack:///./src/parser/jobs/ast/modules/ArcanaTracking/seal_lunar.png","webpack:///./src/parser/jobs/ast/modules/ArcanaTracking/seal_solar.png","webpack:///./src/parser/jobs/ast/modules/Sect/SectStatistic.module.css?6def","webpack:///./src/parser/jobs/ast/modules/Combust.tsx","webpack:///./src/parser/jobs/ast/modules/ArcanaGroups.ts","webpack:///./src/parser/jobs/ast/modules/Cooldowns.tsx","webpack:///./src/parser/jobs/ast/modules/EarthlyStar.tsx","webpack:///./src/parser/jobs/ast/modules/DISPLAY_ORDER.js","webpack:///./src/parser/jobs/ast/modules/Lightspeed.js","webpack:///./src/parser/jobs/ast/modules/LucidDreaming.js","webpack:///./src/parser/jobs/ast/modules/ArcanaUndrawUsage.js","webpack:///./src/parser/jobs/ast/modules/Horoscope.tsx","webpack:///./src/parser/jobs/ast/modules/ArcanaTracking/ArcanaTracking.tsx","webpack:///./src/parser/jobs/ast/modules/ArcanaTracking/ArcanaSuggestions.tsx","webpack:///./src/parser/jobs/ast/modules/Sect/SectStatistic.tsx","webpack:///./src/parser/jobs/ast/modules/Sect/Sect.tsx","webpack:///./src/parser/jobs/ast/modules/CelestialIntersection.tsx","webpack:///./src/parser/jobs/ast/modules/Overheal.tsx","webpack:///./src/parser/jobs/ast/modules/Draw.tsx","webpack:///./src/parser/jobs/ast/modules/CelestialOpposition.tsx","webpack:///./src/parser/jobs/ast/modules/DivinationDowntime.tsx","webpack:///./src/parser/jobs/ast/modules/Statuses.js","webpack:///./src/parser/jobs/ast/modules/Synastry.tsx","webpack:///./src/parser/jobs/ast/modules/index.js"],"names":["Combatant","Entity","constructor","parser","info","super","this","name","type","guid","id","Combatants","Entities","arguments","_players","getEntities","getEntity","actorId","player","report","friendlies","find","handle","Cooldowns","Module","_cooldownGroups","_currentAction","_cooldowns","_groups","data","actions","_buildGroups","cooldownOrder","addHook","by","_onBeginCast","_onCast","_onComplete","groups","map","i","order","length","action","getAction","_buildGroup","content","group","merge","forEach","nestedGroups","opts","ItemGroup","showNested","timeline","addGroup","event","ability","cooldown","startCooldown","cooldownGroup","startCooldownGroup","finishingCast","Object","keys","actionId","_addToTimeline","parseInt","cd","current","history","push","onGcd","use","shared","addItem","Item","start","timestamp","fight","start_time","src","icon","alt","getCooldown","originActionId","filter","sharedCooldown","currentFightDuration","currentTimestamp","resetCooldown","invulnTime","reduceCooldown","reduction","setInvulnTime","previousEndTimestamp","previousCooldown","isFirst","downtime","getDowntime","getCooldownRemaining","getTimeOnCooldown","considerInvulnTime","extension","reduce","time","status","getAdjustedTimeOnCooldown","duration","maximumDuration","dependencies","STATUS_APPLY_ON_PARTY_THRESHOLD_MILLISECONDS","Statuses","_statuses","_statusToActionMap","_actionToMergeNameMap","byFilter","pets","p","_onApply","_onRefresh","_onRemove","cooldowns","ac","values","statusesApplied","statusKey","statuses","_isStatusAppliedToPet","_addStatus","_endPrevStatus","getStatus","statusEntry","prev","usages","end","some","it","Math","abs","entry","_createGroupForStatus","st","stid","statusesStackMapping","attachToGroup","gcd","gcdGroupId","friendlyPets","targetID","DEFAULT_DURATION_MILLIS","DoTs","_lastApplication","_clip","_statusDuration","statusesToTrack","statusId","hasOwnProperty","console","warn","abilityId","_onDotApply","excludeApplication","addChecklistRules","addClippingSuggestions","clip","applicationKey","targetInstance","lastApplication","invuln","getUntargetableUptime","getInvulnerableUptime","max","getUptimePercent","enemies","getStatusUptime","fightDuration","getClippingAmount","fightDurationMillis","round","baseFindIndex","baseIteratee","toInteger","nativeMax","nativeMin","min","module","exports","array","predicate","fromIndex","index","undefined","toString","args","string","replace","arrayEachRight","baseEachRight","castFunction","isArray","collection","iteratee","baseForOwnRight","createBaseEach","baseForRight","object","createBaseFor","assignValue","baseZipObject","props","assignFunc","valsLength","result","value","SEVERITIES","CLIPPING","2","SEVERITY","MINOR","4","MEDIUM","6","MAJOR","UPTIME","84","TARGET","WARN","91","SUCCESS","Combust","checklist","add","TieredRule","description","ACTIONS","DRAW","tiers","requirements","Requirement","COMBUST_III","percent","STATUSES","suggestions","TieredSuggestion","why","formatDuration","__decorate","dependency","__metadata","Checklist","prototype","Suggestions","PLAY","THE_BALANCE","THE_BOLE","THE_ARROW","THE_SPEAR","THE_EWER","THE_SPIRE","LORD_OF_CROWNS","LADY_OF_CROWNS","SOLAR_SEAL_ARCANA","LUNAR_SEAL_ARCANA","CELESTIAL_SEAL_ARCANA","DRAWN_ARCANA","BALANCE_DRAWN","BOLE_DRAWN","ARROW_DRAWN","SPEAR_DRAWN","EWER_DRAWN","SPIRE_DRAWN","LORD_OF_CROWNS_DRAWN","LADY_OF_CROWNS_DRAWN","ARCANA_STATUSES","CoreCooldowns","UNDRAW","REDRAW","MINOR_ARCANA","SLEEVE_DRAW","DIVINATION","LIGHTSPEED","ESSENTIAL_DIGNITY","CELESTIAL_INTERSECTION","SYNASTRY","EARTHLY_STAR","STELLAR_DETONATION","CELESTIAL_OPPOSITION","HOROSCOPE","HOROSCOPE_ACTIVATION","COLLECTIVE_UNCONSCIOUS","NEUTRAL_SECT","LUCID_DREAMING","SEVERETIES","UNCOOKED","1","USES_MISSED","PET_CASTS","STELLAR_BURST","STELLAR_EXPLOSION","EarthlyStar","_uses","_lastUse","_totalHeld","_earlyBurstCount","init","_onSet","_onPetCast","_held","earlyBurstCount","holdDuration","_usesMissed","floor","title","DRAW_CHECKLIST","ARCANA_TRACKING","LIGHTSPEED_CAST_TIME_MOD","_active","_lightspeed","_history","_ctIndex","_missedGcds","lsBuffFilter","_onApplyLightspeed","_onRemoveLightspeed","_startLightspeed","getDataBy","autoAttack","casts","_stopAndSave","castTime","set","endTime","reset","activeAt","lightspeed","output","noCastsMessage","className","panels","gcdActions","cast","numGcds","mpSavings","totalSavings","mpCost","key","formatTimestamp","Rotation","events","lightspeedDisplay","Accordion","exclusive","styled","fluid","ASCEND","displayOrder","DISPLAY_ORDER","WASTED_USES_MAX_MEDIUM","LucidDreaming","_extensions","_gcdCountHoldingLucid","_maxMP","_MP","_MPthresholdTime","_filter","_onCastLucid","to","_onRefreshLucid","Suggestion","severity","ArcanaUndrawUsage","_badUndraws","_saveIfBadUndraw","badUndraws","ACTIVATES_MISSED","HELIOS","ASPECTED_HELIOS","HOROSCOPE_HELIOS","Horoscope","uses","activations","onHoroscope","onActivate","onComplete","missedActivations","LINKED_EVENT_THRESHOLD","DEATH_EVENT_STATUS_DROP_DELAY","CARD_GRANTING_ABILITIES","CARD_ACTIONS","PLAY_TO_STATUS_LOOKUP","STATUS_TO_DRAWN_LOOKUP","STATUS_TO_PLAY_LOOKUP","DRAWN_TO_PLAY_LOOKUP","SealType","CLEAN_SEAL_STATE","NOTHING","DrawnType","SleeveType","ArcanaTracking","cardStateLog","lastEvent","targetIsFriendly","sourceIsFriendly","drawState","sealState","sleeveState","pullStateInitialized","pullIndex","prepullArcanas","isCastEvent","isBuffEvent","onCast","onPrepullArcana","offPrepullArcana","offDrawnStatus","onDeath","normalise","startTime","prepullSleeve","sleeveDrawLog","TWO_STACK","getCardState","artifact","getPullState","arcanaBuff","cardStateItem","arcanaAction","arcanaStatusToPlay","arcanaCastEvent","abilityIcon","sourceID","unshift","includes","retconSearch","arcanaDrawnToPlay","stateItem","NOCTURNAL_SECT","initPullState","sealObtained","SOLAR","LUNAR","CELESTIAL","addSeal","consumeSleeve","startSleeve","lastCardState","pop","lookupLog","slice","cardState","drawnStatus","arcanaActionToStatus","cardActionId","searchLatest","lastLog","latestActionId","searchLog","lastIndex","seal","shift","arcanaId","arcanaStatusToDrawn","PrecastStatus","TIMELINE_UPPER_MOD","SLEEVE_ICON","ONE_STACK","SEAL_ICON","sealSolar","sealLunar","sealCelestial","ArcanaSuggestions","cardLogs","partyComp","combatants","combatant","entries","arcanaTracking","target","selected","targetName","targetJob","Table","collapsing","unstackable","styles","cardActionTable","Header","Row","HeaderCell","width","Body","cardActionRow","Cell","Button","circular","compact","size","onClick","show","RenderSpreadState","formattedTime","style","marginRight","RenderAction","scrollTo","JOBS","JobIcon","job","drawnArcana","marginLeft","buffIcon","buffPlaceholder","sealIconContainer","sealType","sealIcon","Timeline","SectStatstic","AbstractStatistic","Content","simpleStatistic","wrapper","NO_SECT_ICON","ASPECTED_ACTIONS","ASPECTED_BENEFIC","DIURNAL_SECT_STATUSES","DIURNAL_OPPOSITION","NOCTURNAL_INTERSECTION","NOCTURNAL_BALANCE","NOCTURNAL_SECT_STATUSES","NOCTURNAL_FIELD","NOCTURNAL_OPPOSITION","DIURNAL_INTERSECTION","DIURNAL_BALANCE","ACTION_STATUS_MAP","SECT_ACTIONS","DIURNAL_SECT","SECT_STATUSES","DIURNAL_SECT_BUFF_ABILITY","NOCTURNAL_SECT_BUFF_ABILITY","Sect","pullWithoutSect","activeSectId","gaveup","onApplySect","aspectedCast","mapCastToBuff","SECT_ABILITY","splice","sect","mapBuffToCast","withScholar","fightFriendlies","friendly","GALVANIZE","noSectValue","statistics","SectStatistic","Statistics","PrecastAction","SEVERITY_MOD","CelestialIntersection","lastUse","totalHeld","held","usesMissed","maxUses","end_time","WASTED_USE_TIERS","HOT_STATUSES","WHEEL_OF_FORTUNE","SEVERITY_TIERS","Overheal","healingDirect","overhealDirect","healingOverTime","overhealOverTime","healingPet","overhealPet","onHeal","onPetHeal","amount","overheal","nonHotOverhealPercent","petOverhealPercent","hotOverhealPercent","sourcesSum","sourcesSumOverheal","invertPercent","InvertedRequirement","toFixed","_percent","percentInverted","CARD_DURATION","SLEEVE_DRAW_PLAYS_GIVEN","WARN_TARGET_MAXPLAYS","FAIL_TARGET_MAXPLAYS","DRAW_HOLDING","3","SLEEVE_DRAW_HOLDING","Draw","lastDrawTimestamp","draws","drawDrift","drawTotalDrift","plays","prepullPrepped","lastSleeveTimestamp","sleeveUses","sleeveDrift","sleeveTotalDrift","onDraw","onSleeveDraw","onPlay","onSleeveBuff","onPlayBuff","playsFromSleeveDraw","playsFromDraw","theoreticalMaxPlays","totalCardsObtained","warnTarget","failTarget","FAIL","drawsMissed","sleevesMissed","CelestialOpposition","onSect","activeSect","suggestContentDiurnal","BENEFIC_II","suggestContentNoct","OGCDDowntime","CooldownDowntime","trackedCds","allowedAverageDowntime","firstUseOffset","checklistName","checklistDescription","CoreStatuses","GIANT_DOMINANCE","EARTHLY_DOMINANCE","WASTED_ST_HEAL_TIERS","10","GCD_ST_HEAL","BENEFIC","Synastry","nonSynastryHeals","onSingleTargetHealCast","Lightspeed","DivinationDowntime"],"mappings":"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","file":"assets/jobs-ast.b9395a91.js","sourcesContent":["import Entity from './Entity';\n// This is basically a copy of Enemy - XIV doesn't really have as much on Combatants as WoW.\n// TODO: Should I just merge all this crap into the Entity handlers and call it a day?\nexport default class Combatant extends Entity {\n    constructor(parser, info) {\n        super(parser);\n        this.info = null;\n        this.info = info;\n    }\n    get name() { return this.info.name; }\n    get type() { return this.info.type; }\n    get guid() { return this.info.guid; }\n    get id() { return this.info.id; }\n}\n","import Entities from './Entities';\nimport Combatant from '../Combatant';\nexport default class Combatants extends Entities {\n    constructor() {\n        super(...arguments);\n        this._players = {};\n    }\n    getEntities() {\n        return this._players;\n    }\n    getEntity(actorId) {\n        let player = this._players[actorId];\n        if (!player) {\n            const info = this.parser.report.friendlies.find(player => player.id === actorId);\n            if (!info) {\n                return null;\n            }\n            this._players[actorId] = player = new Combatant(this.parser, info);\n        }\n        return player;\n    }\n    get selected() {\n        return this.getEntity(this.parser.player.id);\n    }\n}\nCombatants.handle = 'combatants';\n","import _ from 'lodash';\nimport Module from 'parser/core/Module';\nimport { ItemGroup, Item } from './Timeline';\nimport React from 'react';\n// Track the cooldowns on actions and shit\nexport default class Cooldowns extends Module {\n    constructor(...args) {\n        super(...args);\n        this._cooldownGroups = {};\n        this._currentAction = null;\n        this._cooldowns = {};\n        this._groups = {};\n        this._cooldownGroups = _.groupBy(this.data.actions, 'cooldownGroup');\n        // Pre-build groups for actions explicitly set by subclasses\n        this._buildGroups(this.constructor.cooldownOrder);\n        this.addHook('begincast', { by: 'player' }, this._onBeginCast);\n        this.addHook('cast', { by: 'player' }, this._onCast);\n        this.addHook('complete', this._onComplete);\n    }\n    _buildGroups(groups) {\n        // If there's no groups, noop\n        if (!groups) {\n            return;\n        }\n        const ids = groups.map((data, i) => {\n            const order = -(groups.length - i);\n            // If it's just an action id, build a group for it and stop\n            if (typeof data === 'number') {\n                const action = this.data.getAction(data);\n                this._buildGroup({\n                    id: data,\n                    content: action && action.name,\n                    order,\n                });\n                return data;\n            }\n            // Build the base group\n            const group = this._buildGroup({\n                id: data.name,\n                content: data.name,\n                order,\n            });\n            if (data.merge) {\n                // If it's a merge group, we only need to register our group for each of the IDs\n                data.actions.forEach(id => {\n                    this._groups[id] = group;\n                });\n            }\n            else {\n                // Otherwise, build nested groups for each action\n                group.nestedGroups = this._buildGroups(data.actions);\n            }\n            return data.name;\n        });\n        return ids;\n    }\n    _buildGroup(opts) {\n        const group = new ItemGroup({ showNested: false, ...opts });\n        this.timeline.addGroup(group);\n        this._groups[opts.id] = group;\n        return group;\n    }\n    // cooldown starts at the beginning of the casttime\n    // (though 99% of CD based abilities have no cast time)\n    // TODO: Should I be tracking pet CDs too? I mean, contagion/radiant are a thing.\n    _onBeginCast(event) {\n        const action = this.data.getAction(event.ability.guid);\n        if (!action || action.cooldown == null) {\n            return;\n        }\n        this._currentAction = action;\n        this.startCooldown(action.id);\n        if (!_.isNil(action.cooldownGroup)) {\n            this.startCooldownGroup(action.id, action.cooldownGroup);\n        }\n    }\n    _onCast(event) {\n        const action = this.data.getAction(event.ability.guid);\n        if (!action || action.cooldown == null) {\n            return;\n        }\n        const finishingCast = this._currentAction && this._currentAction.id === action.id;\n        this._currentAction = null;\n        if (finishingCast) {\n            return;\n        }\n        this.startCooldown(action.id);\n        if (!_.isNil(action.cooldownGroup)) {\n            this.startCooldownGroup(action.id, action.cooldownGroup);\n        }\n    }\n    _onComplete() {\n        Object.keys(this._cooldowns).forEach(actionId => {\n            this._addToTimeline(parseInt(actionId, 10));\n        });\n    }\n    _addToTimeline(actionId) {\n        const cd = this._cooldowns[actionId];\n        if (!cd) {\n            return false;\n        }\n        // Clean out any 'current' cooldowns into the history\n        if (cd.current) {\n            cd.history.push(cd.current);\n            cd.current = null;\n        }\n        const action = this.data.getAction(actionId);\n        // If the action is on the GCD, GlobalCooldown will be managing its own group\n        if (!action || action.onGcd) {\n            return false;\n        }\n        // Ensure we've got a group for this item\n        if (!this._groups[actionId]) {\n            this._buildGroup({\n                id: actionId,\n                content: action.name,\n                order: actionId,\n            });\n        }\n        // Add CD info to the timeline\n        cd.history\n            .forEach(use => {\n            if (!use.shared) {\n                this._groups[actionId].addItem(new Item({\n                    type: 'background',\n                    start: use.timestamp - this.parser.fight.start_time,\n                    length: use.length,\n                    content: <img src={action.icon} alt={action.name}/>,\n                }));\n            }\n        });\n        return true;\n    }\n    getCooldown(actionId) {\n        return this._cooldowns[actionId] || {\n            current: null,\n            history: [],\n        };\n    }\n    startCooldownGroup(originActionId, cooldownGroup) {\n        const sharedCooldownActions = _.get(this._cooldownGroups, cooldownGroup, []);\n        sharedCooldownActions\n            .map(action => action.id)\n            .filter(id => id !== originActionId)\n            .forEach(id => this.startCooldown(id, true));\n    }\n    startCooldown(actionId, sharedCooldown = false) {\n        // TODO: handle shared CDs\n        const action = this.data.getAction(actionId);\n        if (!action) {\n            return;\n        }\n        // Get the current cooldown status, falling back to a new cooldown\n        const cd = this.getCooldown(actionId);\n        // If there's a current object, move it into the history\n        // TODO: handle errors on CD overlap\n        if (cd.current) {\n            const currentFightDuration = this.parser.currentTimestamp - this.parser.fight.start_time;\n            if (cd.current.timestamp < this.parser.fight.start_time && cd.current.length > currentFightDuration) {\n                // Pre-pull usage, reset the cooldown to prevent overlap on timeline since we don't know exactly when cooldown was used pre-pull\n                this.resetCooldown(actionId);\n            }\n            else {\n                cd.history.push(cd.current);\n            }\n        }\n        cd.current = {\n            timestamp: this.parser.currentTimestamp,\n            length: action.cooldown * 1000,\n            shared: sharedCooldown,\n            invulnTime: 0,\n        };\n        // Save the info back out (to ensure propagation if we've got a new info)\n        this._cooldowns[actionId] = cd;\n    }\n    reduceCooldown(actionId, reduction) {\n        const cd = this.getCooldown(actionId);\n        const currentTimestamp = this.parser.currentTimestamp;\n        // Check if current isn't current\n        if (cd.current && cd.current.timestamp + cd.current.length < currentTimestamp) {\n            cd.history.push(cd.current);\n            cd.current = null;\n        }\n        // TODO: Do I need to warn if they're reducing cooldown on something _with_ no cooldown?\n        if (cd.current === null) {\n            return;\n        }\n        // Reduce the CD\n        cd.current.length -= reduction * 1000;\n        // If the reduction would have made it come off CD earlier than now, reset it - the extra time reduction should be lost.\n        if (cd.current.timestamp + cd.current.length < currentTimestamp) {\n            this.resetCooldown(actionId);\n        }\n    }\n    setInvulnTime(actionId) {\n        const cd = this.getCooldown(actionId);\n        let previousEndTimestamp = this.parser.fight.start_time;\n        let previousCooldown = {};\n        let isFirst = true;\n        for (const cooldown of cd.history) {\n            if (isFirst) {\n                previousEndTimestamp = (cooldown.timestamp + cooldown.length);\n                isFirst = false;\n                previousCooldown = cooldown;\n            }\n            //We invuln time is the time the boss was invuln from when the CD came off CD and when it was next executed\n            previousCooldown.invulnTime = this.downtime.getDowntime(previousEndTimestamp, cooldown.timestamp);\n            previousEndTimestamp = (cooldown.timestamp + cooldown.length);\n            previousCooldown = cooldown;\n        }\n    }\n    resetCooldown(actionId) {\n        const cd = this.getCooldown(actionId);\n        // If there's nothing running, we can just stop\n        // TODO: need to warn?\n        if (cd.current === null) {\n            return;\n        }\n        // Fix up the length\n        cd.current.length = this.parser.currentTimestamp - cd.current.timestamp;\n        // Move the CD into the history\n        cd.history.push(cd.current);\n        cd.current = null;\n    }\n    getCooldownRemaining(actionId) {\n        const current = this.getCooldown(actionId).current;\n        if (!current) {\n            return 0;\n        }\n        return current.length - (this.parser.currentTimestamp - current.timestamp);\n    }\n    // TODO: Should this be here?\n    getTimeOnCooldown(actionId, considerInvulnTime = false, extension = 0) {\n        const cd = this.getCooldown(actionId);\n        const currentTimestamp = this.parser.currentTimestamp;\n        if (considerInvulnTime) {\n            this.setInvulnTime(actionId);\n        }\n        else {\n            cd.history.map(cooldown => {\n                cooldown.invulnTime = 0;\n            });\n        }\n        return cd.history.reduce((time, status) => time + this.getAdjustedTimeOnCooldown(status, currentTimestamp, extension), cd.current ? this.getAdjustedTimeOnCooldown(cd.current, currentTimestamp, extension) : 0);\n    }\n    getAdjustedTimeOnCooldown(cooldown, currentTimestamp, extension) {\n        // Doesn't count time on CD outside the bounds of the current fight, it'll throw calcs off\n        // Add to the length of the cooldown any invuln time for the boss\n        // Additionally account for any extension the caller allowed to the CD Length\n        const duration = currentTimestamp - cooldown.timestamp;\n        const maximumDuration = cooldown.length + cooldown.invulnTime + extension;\n        return _.clamp(duration, 0, maximumDuration);\n    }\n    get used() {\n        return Object.keys(this._cooldowns);\n    }\n}\nCooldowns.handle = 'cooldowns';\nCooldowns.dependencies = [\n    'data',\n    'downtime',\n    'timeline',\n];\n// Array used to sort cooldowns in the timeline. Elements should be either IDs for\n// top-level groups, or objects of the format {name: string, actions: array} for\n// nested groups. Actions not specified here will be sorted by their ID below.\n// Check the NIN and SMN modules for examples.\nCooldowns.cooldownOrder = [];\n","import Module from 'parser/core/Module';\nimport { ItemGroup, Item } from './Timeline';\nimport React from 'react';\nconst STATUS_APPLY_ON_PARTY_THRESHOLD_MILLISECONDS = 2 * 1000;\n// Track statuses applied by actions\nexport default class Statuses extends Module {\n    constructor(...args) {\n        super(...args);\n        this._statuses = {};\n        this._groups = {};\n        this._statusToActionMap = {};\n        this._actionToMergeNameMap = {};\n        const ids = [this.parser.player.id, ...this.parser.player.pets.map(p => p.id)];\n        const byFilter = { by: ids };\n        this.addHook('complete', this._onComplete);\n        this.addHook(['applybuff', 'applydebuff'], byFilter, this._onApply);\n        this.addHook(['refreshdebuff', 'refreshbuff'], byFilter, this._onRefresh);\n        this.addHook(['removebuff', 'removedebuff'], byFilter, this._onRemove);\n        this.cooldowns.constructor.cooldownOrder.forEach(cd => {\n            if (cd && typeof cd === 'object' && cd.merge) {\n                cd.actions.forEach(ac => {\n                    this._actionToMergeNameMap[ac] = cd.name;\n                });\n            }\n        });\n        // Map statuses to actions\n        Object.values(this.data.actions).forEach(action => {\n            if (!action.statusesApplied) {\n                return;\n            }\n            action.statusesApplied.forEach(statusKey => {\n                const status = this.data.statuses[statusKey];\n                this._statusToActionMap[status.id] = action;\n            });\n        });\n    }\n    _onApply(event) {\n        if (this._isStatusAppliedToPet(event)) {\n            return;\n        }\n        this._addStatus(event);\n    }\n    _onRefresh(event) {\n        if (this._isStatusAppliedToPet(event)) {\n            return;\n        }\n        this._endPrevStatus(event);\n        this._addStatus(event);\n    }\n    _onRemove(event) {\n        if (this._isStatusAppliedToPet(event)) {\n            return;\n        }\n        this._endPrevStatus(event);\n    }\n    _endPrevStatus(event) {\n        const status = this.data.getStatus(event.ability.guid);\n        if (!status) {\n            return;\n        }\n        const statusEntry = this._statuses[status.id];\n        if (statusEntry) {\n            const prev = statusEntry.usages[statusEntry.usages.length - 1];\n            if (!prev.end) {\n                prev.end = event.timestamp - this.parser.fight.start_time;\n            }\n        }\n    }\n    _addStatus(event) {\n        const status = this.data.getStatus(event.ability.guid);\n        if (!status) {\n            return;\n        }\n        let statusEntry = this._statuses[status.id];\n        if (!statusEntry) {\n            statusEntry = this._statuses[status.id] = {\n                status: status,\n                usages: [],\n            };\n        }\n        if (statusEntry.usages.some(it => {\n            const diff = Math.abs(event.timestamp - this.parser.fight.start_time - it.start);\n            return diff <= STATUS_APPLY_ON_PARTY_THRESHOLD_MILLISECONDS;\n        })) {\n            return;\n        }\n        statusEntry.usages.push({\n            start: event.timestamp - this.parser.fight.start_time,\n        });\n    }\n    _onComplete() {\n        Object.values(this._statuses).forEach(entry => {\n            const group = this._createGroupForStatus(entry.status);\n            if (!group) {\n                return;\n            }\n            entry.usages.forEach(st => {\n                group.addItem(new Item({\n                    type: 'background',\n                    start: st.start,\n                    end: st.end || st.start + entry.status.duration * 1000,\n                    content: <img src={entry.status.icon} alt={entry.status.name}/>,\n                }));\n            });\n        });\n    }\n    _createGroupForStatus(status) {\n        const stid = 'status-' + (this.constructor.statusesStackMapping[status.id] || status.id);\n        if (this._groups[stid]) {\n            return this._groups[stid];\n        }\n        // find action for status\n        const action = this._statusToActionMap[status.id];\n        if (!action) {\n            return undefined;\n        }\n        const group = new ItemGroup({\n            id: stid,\n            content: status.name,\n            showNested: false,\n        });\n        this._groups[stid] = group;\n        this.timeline.attachToGroup(action.onGcd ? this.gcd.gcdGroupId : (this._actionToMergeNameMap[action.id] || action.id), group);\n        return group;\n    }\n    _isStatusAppliedToPet(event) {\n        return (this.parser.report.friendlyPets.some(p => p.id === event.targetID));\n    }\n}\nStatuses.handle = 'statuses';\nStatuses.dependencies = [\n    'data',\n    'timeline',\n    'cooldowns',\n    'gcd',\n];\nStatuses.statusesStackMapping = {};\n","import Module from 'parser/core/Module';\n// Absurdly large fallback number, so missing duration properties will result in both a console warning and stupid suggestions\nconst DEFAULT_DURATION_MILLIS = 120000;\nexport default class DoTs extends Module {\n    constructor(...args) {\n        super(...args);\n        this._lastApplication = {};\n        this._clip = {};\n        this._statusDuration = {};\n        // NOTE: All statuses submodules track should include a duration property, otherwise the results this produces will be very fucky\n        this.constructor.statusesToTrack.forEach(statusId => {\n            const status = this.data.getStatus(statusId);\n            if (!status) {\n                return;\n            }\n            if (!status.hasOwnProperty('duration')) {\n                console.warn(`statusId ${statusId} is missing a duration property`);\n                this._statusDuration[statusId] = DEFAULT_DURATION_MILLIS;\n            }\n            else {\n                this._statusDuration[statusId] = status.duration * 1000;\n            }\n        });\n        this.addHook(['applydebuff', 'refreshdebuff'], { by: 'player', abilityId: this.constructor.statusesToTrack }, this._onDotApply);\n        this.addHook('complete', this._onComplete);\n    }\n    // *** FUNCTIONS TO OVERRIDE *** //\n    excludeApplication() {\n        // To be overridden by submodules that want to exclude certain applications from clipping calculations (e.g. SMN when rushing)\n        return false;\n    }\n    addChecklistRules() {\n        // To be overridden by submodules to display the checklist rules for their job. This should be handled on a job-by-job\n        // basis rather than generically, since the description text isn't one-size-fits-all, and some jobs may be tracking\n        // more than just DoTs with this module (e.g. DRG's Disembowel).\n    }\n    // Allow Typescript overrides using the parameter\n    // eslint-disable-next-line no-unused-vars\n    addClippingSuggestions(clip) {\n        // To be overridden by submodules to display any clipping suggestions. This should also be handled on a job-by-job\n        // basis, since different jobs have different thresholds for what constitutes bad clipping with varying explanations\n        // for why.\n    }\n    // ***************************** //\n    _onDotApply(event) {\n        const statusId = event.ability.guid;\n        // Make sure we're tracking for this target\n        const applicationKey = `${event.targetID}|${event.targetInstance}`;\n        const lastApplication = this._lastApplication[applicationKey] = this._lastApplication[applicationKey] || {};\n        // If it's not been applied yet or should be excluded per job-specific logic (if any), set it and skip out\n        if (!lastApplication[statusId] || this.excludeApplication()) {\n            lastApplication[statusId] = event.timestamp;\n            return;\n        }\n        // Base clip calc\n        let clip = this._statusDuration[statusId] - (event.timestamp - lastApplication[statusId]);\n        // Remove any untargetable time from the clip - often want to hardcast after an invuln phase, but refresh w/ 3D shortly after.\n        clip -= this.invuln.getUntargetableUptime('all', event.timestamp - this._statusDuration[statusId], event.timestamp);\n        // Also remove invuln time in the future that casting later would just push dots into\n        // TODO: This relies on a full set of invuln data ahead of time. Can this be trusted?\n        clip -= this.invuln.getInvulnerableUptime('all', event.timestamp, event.timestamp + this._statusDuration[statusId] + clip);\n        // Capping clip at 0 - less than that is downtime, which is handled by the checklist requirement\n        this._clip[statusId] = (this._clip[statusId] || 0) + Math.max(0, clip);\n        lastApplication[statusId] = event.timestamp;\n    }\n    _onComplete() {\n        this.addChecklistRules();\n        this.addClippingSuggestions(this._clip);\n    }\n    // These two functions are helpers for submodules and should be used but not overridden\n    getUptimePercent(statusId) {\n        const statusUptime = this.enemies.getStatusUptime(statusId);\n        const fightDuration = this.parser.fightDuration - this.invuln.getInvulnerableUptime();\n        return (statusUptime / fightDuration) * 100;\n    }\n    getClippingAmount(statusId) {\n        // This normalises clipping as seconds clipped per minute, since some level of clipping is expected and we need tiers that work for both long and short fights\n        const fightDurationMillis = (this.parser.fightDuration - this.invuln.getInvulnerableUptime());\n        // eslint-disable-next-line no-magic-numbers\n        const clipSecsPerMin = Math.round((this._clip[statusId] * 60) / fightDurationMillis);\n        return clipSecsPerMin;\n    }\n}\nDoTs.handle = 'dots';\nDoTs.dependencies = [\n    'data',\n    'enemies',\n    'invuln',\n];\n// To be overriden by submodules with an array of status IDs to track\nDoTs.statusesToTrack = [];\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * This method is like `_.findIndex` except that it iterates over elements\n * of `collection` from right to left.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=array.length-1] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': true },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': false }\n * ];\n *\n * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n * // => 2\n *\n * // The `_.matches` iteratee shorthand.\n * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n * // => 0\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findLastIndex(users, ['active', false]);\n * // => 2\n *\n * // The `_.property` iteratee shorthand.\n * _.findLastIndex(users, 'active');\n * // => 0\n */\nfunction findLastIndex(array, predicate, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = length - 1;\n  if (fromIndex !== undefined) {\n    index = toInteger(fromIndex);\n    index = fromIndex < 0\n      ? nativeMax(length + index, 0)\n      : nativeMin(index, length - 1);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index, true);\n}\n\nmodule.exports = findLastIndex;\n","var toString = require('./toString');\n\n/**\n * Replaces matches for `pattern` in `string` with `replacement`.\n *\n * **Note:** This method is based on\n * [`String#replace`](https://mdn.io/String/replace).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to modify.\n * @param {RegExp|string} pattern The pattern to replace.\n * @param {Function|string} replacement The match replacement.\n * @returns {string} Returns the modified string.\n * @example\n *\n * _.replace('Hi Fred', 'Fred', 'Barney');\n * // => 'Hi Barney'\n */\nfunction replace() {\n  var args = arguments,\n      string = toString(args[0]);\n\n  return args.length < 3 ? string : string.replace(args[1], args[2]);\n}\n\nmodule.exports = replace;\n","var arrayEachRight = require('./_arrayEachRight'),\n    baseEachRight = require('./_baseEachRight'),\n    castFunction = require('./_castFunction'),\n    isArray = require('./isArray');\n\n/**\n * This method is like `_.forEach` except that it iterates over elements of\n * `collection` from right to left.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @alias eachRight\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @see _.forEach\n * @example\n *\n * _.forEachRight([1, 2], function(value) {\n *   console.log(value);\n * });\n * // => Logs `2` then `1`.\n */\nfunction forEachRight(collection, iteratee) {\n  var func = isArray(collection) ? arrayEachRight : baseEachRight;\n  return func(collection, castFunction(iteratee));\n}\n\nmodule.exports = forEachRight;\n","/**\n * A specialized version of `_.forEachRight` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEachRight(array, iteratee) {\n  var length = array == null ? 0 : array.length;\n\n  while (length--) {\n    if (iteratee(array[length], length, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEachRight;\n","var baseForOwnRight = require('./_baseForOwnRight'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEachRight` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEachRight = createBaseEach(baseForOwnRight, true);\n\nmodule.exports = baseEachRight;\n","var baseForRight = require('./_baseForRight'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwnRight` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwnRight(object, iteratee) {\n  return object && baseForRight(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwnRight;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * This function is like `baseFor` except that it iterates over properties\n * in the opposite order.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseForRight = createBaseFor(true);\n\nmodule.exports = baseForRight;\n","var assignValue = require('./_assignValue'),\n    baseZipObject = require('./_baseZipObject');\n\n/**\n * This method is like `_.fromPairs` except that it accepts two arrays,\n * one of property identifiers and one of corresponding values.\n *\n * @static\n * @memberOf _\n * @since 0.4.0\n * @category Array\n * @param {Array} [props=[]] The property identifiers.\n * @param {Array} [values=[]] The property values.\n * @returns {Object} Returns the new object.\n * @example\n *\n * _.zipObject(['a', 'b'], [1, 2]);\n * // => { 'a': 1, 'b': 2 }\n */\nfunction zipObject(props, values) {\n  return baseZipObject(props || [], values || [], assignValue);\n}\n\nmodule.exports = zipObject;\n","/**\n * This base implementation of `_.zipObject` which assigns values using `assignFunc`.\n *\n * @private\n * @param {Array} props The property identifiers.\n * @param {Array} values The property values.\n * @param {Function} assignFunc The function to assign values.\n * @returns {Object} Returns the new object.\n */\nfunction baseZipObject(props, values, assignFunc) {\n  var index = -1,\n      length = props.length,\n      valsLength = values.length,\n      result = {};\n\n  while (++index < length) {\n    var value = index < valsLength ? values[index] : undefined;\n    assignFunc(result, props[index], value);\n  }\n  return result;\n}\n\nmodule.exports = baseZipObject;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"jobIcon\":\"ArcanaSuggestions-module_jobIcon__11BjB\",\"cardActionRow\":\"ArcanaSuggestions-module_cardActionRow__intyq\",\"cardActionTable\":\"ArcanaSuggestions-module_cardActionTable__n0w3M\",\"buffIcon\":\"ArcanaSuggestions-module_buffIcon__2CcPF\",\"buffPlaceholder\":\"ArcanaSuggestions-module_buffPlaceholder__apWUF\",\"buffUnknown\":\"ArcanaSuggestions-module_buffUnknown__1dQTy\",\"sealIconContainer\":\"ArcanaSuggestions-module_sealIconContainer__2zqCi\",\"sealIcon\":\"ArcanaSuggestions-module_sealIcon__1L2CN\"};","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gutter\":\"20px\",\"simpleStatistic\":\"SectStatistic-module_simpleStatistic__1XpFM\",\"wrapper\":\"SectStatistic-module_wrapper__2WuUu\",\"icon\":\"SectStatistic-module_icon__2g8Qm\",\"value\":\"SectStatistic-module_value__2YPEq\"};","import { __decorate, __metadata } from \"tslib\";\nimport { Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport { dependency } from 'parser/core/Module';\nimport Checklist, { Requirement, TARGET, TieredRule } from 'parser/core/modules/Checklist';\nimport DoTs from 'parser/core/modules/DoTs';\nimport Suggestions, { SEVERITY, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport React from 'react';\nconst SEVERITIES = {\n    CLIPPING: {\n        2: SEVERITY.MINOR,\n        4: SEVERITY.MEDIUM,\n        6: SEVERITY.MAJOR,\n    },\n    UPTIME: {\n        84: TARGET.WARN,\n        91: TARGET.SUCCESS,\n    },\n};\nexport default class Combust extends DoTs {\n    addChecklistRules() {\n        this.checklist.add(new TieredRule({\n            name: <Trans id=\"ast.dots.rule.name\">Keep your DoT up</Trans>,\n            description: <Trans id=\"ast.dots.rule.description\">\n\t\t\t\tCombust III makes up a good portion of your damage. Aim to keep this DoT up at all times. It also can be used to weave (<ActionLink {...ACTIONS.DRAW}/>) and manage cards, or maneuver around without dropping GCD uptime.\n\t\t\t\t</Trans>,\n            tiers: SEVERITIES.UPTIME,\n            requirements: [\n                new Requirement({\n                    name: <Trans id=\"ast.dots.requirement.uptime.name\"><ActionLink {...ACTIONS.COMBUST_III}/> uptime</Trans>,\n                    percent: () => this.getUptimePercent(STATUSES.COMBUST_III.id),\n                }),\n            ],\n        }));\n    }\n    addClippingSuggestions(clip) {\n        // Suggestion for DoT clipping\n        this.suggestions.add(new TieredSuggestion({\n            icon: ACTIONS.COMBUST_III.icon,\n            content: <Trans id=\"ast.dots.suggestion.clip.content\">\n\t\t\t\t\tAvoid refreshing <ActionLink {...ACTIONS.COMBUST_III}/> significantly before it expires.\n\t\t\t\t</Trans>,\n            why: <Trans id=\"ast.dots.suggestion.clip.why\">\n\t\t\t\t\t\tAn average of {this.parser.formatDuration(this.getClippingAmount(STATUSES.COMBUST_III.id) * 1000)} of Combust clipped every minute, for a total of {this.parser.formatDuration(clip[STATUSES.COMBUST_III.id])} lost to early refreshes.\n\t\t\t\t\t</Trans>,\n            tiers: SEVERITIES.CLIPPING,\n            value: this.getClippingAmount(STATUSES.COMBUST_III.id),\n        }));\n    }\n}\nCombust.handle = 'combust';\nCombust.statusesToTrack = [\n    STATUSES.COMBUST_III.id,\n];\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Checklist)\n], Combust.prototype, \"checklist\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], Combust.prototype, \"suggestions\", void 0);\n","import ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\n// Grouped cards for future convenience - whatever processing desired\n/* Grouped actions */\nexport const PLAY = [\n    ACTIONS.THE_BALANCE.id,\n    ACTIONS.THE_BOLE.id,\n    ACTIONS.THE_ARROW.id,\n    ACTIONS.THE_SPEAR.id,\n    ACTIONS.THE_EWER.id,\n    ACTIONS.THE_SPIRE.id,\n    ACTIONS.LORD_OF_CROWNS.id,\n    ACTIONS.LADY_OF_CROWNS.id,\n];\nexport const SOLAR_SEAL_ARCANA = [\n    ACTIONS.THE_BALANCE.id,\n    ACTIONS.THE_BOLE.id,\n];\nexport const LUNAR_SEAL_ARCANA = [\n    ACTIONS.THE_ARROW.id,\n    ACTIONS.THE_EWER.id,\n];\nexport const CELESTIAL_SEAL_ARCANA = [\n    ACTIONS.THE_SPEAR.id,\n    ACTIONS.THE_SPIRE.id,\n];\n/* Arcana spread states */\nexport const DRAWN_ARCANA = [\n    STATUSES.BALANCE_DRAWN.id,\n    STATUSES.BOLE_DRAWN.id,\n    STATUSES.ARROW_DRAWN.id,\n    STATUSES.SPEAR_DRAWN.id,\n    STATUSES.EWER_DRAWN.id,\n    STATUSES.SPIRE_DRAWN.id,\n    STATUSES.LORD_OF_CROWNS_DRAWN.id,\n    STATUSES.LADY_OF_CROWNS_DRAWN.id,\n];\nexport const ARCANA_STATUSES = [\n    STATUSES.THE_BALANCE.id,\n    STATUSES.THE_BOLE.id,\n    STATUSES.THE_ARROW.id,\n    STATUSES.THE_SPEAR.id,\n    STATUSES.THE_EWER.id,\n    STATUSES.THE_SPIRE.id,\n    STATUSES.LORD_OF_CROWNS.id,\n    STATUSES.LADY_OF_CROWNS.id,\n];\n","import ACTIONS from 'data/ACTIONS';\nimport CoreCooldowns from 'parser/core/modules/Cooldowns';\nimport { PLAY } from './ArcanaGroups';\nexport default class Cooldowns extends CoreCooldowns {\n}\nCooldowns.cooldownOrder = [\n    // Arcanum\n    {\n        name: 'Draw/Undraw',\n        merge: true,\n        actions: [\n            ACTIONS.DRAW.id,\n            ACTIONS.UNDRAW.id,\n        ],\n    },\n    {\n        name: 'Redraw/Minor Arcana',\n        merge: true,\n        actions: [\n            ACTIONS.REDRAW.id,\n            ACTIONS.MINOR_ARCANA.id,\n        ],\n    },\n    ACTIONS.SLEEVE_DRAW.id,\n    {\n        name: 'Play',\n        merge: true,\n        actions: [...PLAY],\n    },\n    ACTIONS.DIVINATION.id,\n    ACTIONS.LIGHTSPEED.id,\n    // oGCD ST heals\n    ACTIONS.ESSENTIAL_DIGNITY.id,\n    ACTIONS.CELESTIAL_INTERSECTION.id,\n    ACTIONS.SYNASTRY.id,\n    // oGCD AoE heals\n    {\n        name: 'Earthly Star',\n        merge: true,\n        actions: [\n            ACTIONS.EARTHLY_STAR.id,\n            ACTIONS.STELLAR_DETONATION.id,\n        ],\n    },\n    ACTIONS.CELESTIAL_OPPOSITION.id,\n    // Horoscope\n    {\n        name: 'Horoscope',\n        merge: true,\n        actions: [\n            ACTIONS.HOROSCOPE.id,\n            ACTIONS.HOROSCOPE_ACTIVATION.id,\n        ],\n    },\n    // Party mitigation\n    ACTIONS.COLLECTIVE_UNCONSCIOUS.id,\n    // Healing buff\n    ACTIONS.NEUTRAL_SECT.id,\n    // Role actions\n    ACTIONS.LUCID_DREAMING.id,\n];\n","import { __decorate, __metadata } from \"tslib\";\nimport { t } from '@lingui/macro';\nimport { Plural, Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport Module, { dependency } from 'parser/core/Module';\nimport Suggestions, { SEVERITY, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport React from 'react';\n// Tiny module to count the number of early detonations on Earthly Star.\n// TODO: Could expand to analyse Earthly Star usage, timing, overheal, etc - Sushi\nconst SEVERETIES = {\n    UNCOOKED: {\n        1: SEVERITY.MEDIUM,\n        2: SEVERITY.MAJOR,\n    },\n    USES_MISSED: {\n        1: SEVERITY.MEDIUM,\n        2: SEVERITY.MAJOR,\n    },\n};\n// const PLAYER_CASTS = [ACTIONS.EARTHLY_STAR.id, ACTIONS.STELLAR_DETONATION.id]\nconst PET_CASTS = [ACTIONS.STELLAR_BURST.id, ACTIONS.STELLAR_EXPLOSION.id];\n// const PLAYER_STATUSES = [STATUSES.EARTHLY_DOMINANCE.id, STATUSES.GIANT_DOMINANCE.id]\nexport default class EarthlyStar extends Module {\n    constructor() {\n        super(...arguments);\n        this._uses = 0;\n        this._lastUse = 0;\n        this._totalHeld = 0;\n        this._earlyBurstCount = 0;\n    }\n    init() {\n        this.addHook('cast', { abilityId: ACTIONS.EARTHLY_STAR.id, by: 'player' }, this._onSet);\n        this.addHook('cast', { abilityId: PET_CASTS, by: 'pet' }, this._onPetCast);\n        // this.addHook('applybuff', {abilityId: PLAYER_STATUSES, by: 'player'}, this._onDominance)\n        this.addHook('complete', this._onComplete);\n    }\n    _onSet(event) {\n        this._uses++;\n        // TODO: Instead determine how far back they used it prepull by checking explosion time.\n        if (this._lastUse === 0) {\n            this._lastUse = this.parser.fight.start_time;\n        }\n        const _held = event.timestamp - this._lastUse - (ACTIONS.EARTHLY_STAR.cooldown * 1000);\n        if (_held > 0) {\n            this._totalHeld += _held;\n        }\n        // update the last use\n        this._lastUse = event.timestamp;\n    }\n    _onPetCast(event) {\n        const actionID = event.ability.guid;\n        if (actionID === ACTIONS.STELLAR_BURST.id) {\n            this._earlyBurstCount++;\n        }\n    }\n    _onComplete() {\n        /*\n            SUGGESTION: Early detonations\n        */\n        const earlyBurstCount = this._earlyBurstCount;\n        if (earlyBurstCount > 0) {\n            this.suggestions.add(new TieredSuggestion({\n                icon: ACTIONS.STELLAR_DETONATION.icon,\n                content: <Trans id=\"ast.earthly-star.suggestion.uncooked.content\">\n\t\t\t\t\tPlan your <ActionLink {...ACTIONS.EARTHLY_STAR}/> placements so that it's always cooked enough for the full potency when you need it.\n\t\t\t\t</Trans>,\n                why: <Trans id=\"ast.earthly-star.suggestion.uncooked.why\">\n\t\t\t\t\t<Plural value={earlyBurstCount} one=\"# detonation\" other=\"# detonations\"/> of an uncooked Earthly Star.\n\t\t\t\t</Trans>,\n                tiers: SEVERETIES.UNCOOKED,\n                value: earlyBurstCount,\n            }));\n        }\n        /*\n            SUGGESTION: Missed uses\n        */\n        const holdDuration = this._uses === 0 ? this.parser.fightDuration : this._totalHeld;\n        const _usesMissed = Math.floor(holdDuration / (ACTIONS.EARTHLY_STAR.cooldown * 1000));\n        if (_usesMissed > 1 || this._uses === 0) {\n            this.suggestions.add(new TieredSuggestion({\n                icon: ACTIONS.EARTHLY_STAR.icon,\n                content: <Trans id=\"ast.earthyl-star.suggestion.missed-use.content\">\n\t\t\t\t\tUse <ActionLink {...ACTIONS.EARTHLY_STAR}/> more frequently. It may save a healing GCD and results in more damage output.\n\t\t\t\t</Trans>,\n                tiers: SEVERETIES.USES_MISSED,\n                value: this._uses === 0 ? 100 : _usesMissed,\n                why: <Trans id=\"ast.earthyl-star.suggestion.missed-use.why\">\n\t\t\t\t\tAbout {_usesMissed} uses of Earthly Star were missed by holding it for at least a total of {this.parser.formatDuration(holdDuration)}.\n\t\t\t\t</Trans>,\n            }));\n        }\n    }\n}\nEarthlyStar.handle = 'earthlystar';\nEarthlyStar.title = t('ast.earthly-star.title') `Earthly Star`;\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], EarthlyStar.prototype, \"suggestions\", void 0);\n","export default {\n    DRAW_CHECKLIST: 40,\n    LIGHTSPEED: 52,\n    ARCANA_TRACKING: 55,\n};\n","import { t } from '@lingui/macro';\nimport { Plural, Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport Rotation from 'components/ui/Rotation';\nimport { getDataBy } from 'data';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport Module from 'parser/core/Module';\nimport React, { Fragment } from 'react';\nimport { Accordion } from 'semantic-ui-react';\nimport DISPLAY_ORDER from './DISPLAY_ORDER';\nconst LIGHTSPEED_CAST_TIME_MOD = -2.5;\nexport default class LIGHTSPEED extends Module {\n    constructor(...args) {\n        super(...args);\n        this._active = false;\n        this._lightspeed = {};\n        this._history = [];\n        this._ctIndex = null;\n        this._missedGcds = 0;\n        this.addHook('cast', { by: 'player' }, this._onCast);\n        const lsBuffFilter = {\n            by: 'player',\n            abilityId: STATUSES.LIGHTSPEED.id,\n        };\n        this.addHook('applybuff', lsBuffFilter, this._onApplyLightspeed);\n        this.addHook('removebuff', lsBuffFilter, this._onRemoveLightspeed);\n        this.addHook('complete', this._onComplete);\n    }\n    _onCast(event) {\n        const actionId = event.ability.guid;\n        // If it's a LIGHTSPEED cast, start tracking\n        if (actionId === ACTIONS.LIGHTSPEED.id) {\n            this._startLightspeed(event.timestamp);\n        }\n        // Only going to save casts during LIGHTSPEED\n        const action = getDataBy(ACTIONS, 'id', actionId);\n        if (!this._active || !action || action.autoAttack) {\n            return;\n        }\n        // Save the event to the LIGHTSPEED casts\n        this._lightspeed.casts.push(event);\n    }\n    _onApplyLightspeed(event) {\n        // If we're not active at this point, they started the fight with LIGHTSPEED up. Clean up the mess.\n        if (this._active) {\n            return;\n        }\n        this._startLightspeed(event.timestamp);\n    }\n    _onRemoveLightspeed() {\n        this._stopAndSave();\n    }\n    _onComplete() {\n        // Clean up any existing casts\n        if (this._active) {\n            this._stopAndSave();\n        }\n    }\n    _startLightspeed(start) {\n        this._active = true;\n        this._lightspeed = {\n            start,\n            end: null,\n            casts: [],\n        };\n        this._ctIndex = this.castTime.set('all', LIGHTSPEED_CAST_TIME_MOD);\n    }\n    _stopAndSave(endTime = this.parser.currentTimestamp) {\n        // Make sure we've not already stopped this one\n        if (!this._active) {\n            return;\n        }\n        this._active = false;\n        this._lightspeed.end = endTime;\n        this._history.push(this._lightspeed);\n        this.castTime.reset(this._ctIndex);\n    }\n    activeAt(time) {\n        // If it's during the current one, easy way out\n        if (this._active && this._lightspeed.start <= time) {\n            return true;\n        }\n        return this._history.some(lightspeed => lightspeed.start <= time && lightspeed.end >= time);\n    }\n    output() {\n        const noCastsMessage = <Fragment>\n\t\t\t<p>\n\t\t\t\t<span className=\"text-error\"><Trans id=\"ast.lightspeed.messages.no-casts\">There were no casts recorded for <ActionLink {...ACTIONS.LIGHTSPEED}/></Trans></span>\n\t\t\t</p>\n\t\t</Fragment>;\n        const panels = this._history.map(lightspeed => {\n            const gcdActions = lightspeed.casts\n                .map(cast => getDataBy(ACTIONS, 'id', cast.ability.guid))\n                .filter(action => action && action.onGcd);\n            const numGcds = gcdActions.length;\n            const mpSavings = gcdActions\n                .reduce((totalSavings, action) => action.mpCost / 2 + totalSavings, 0);\n            // TODO: Use mpCostFactor instead of mpCost to be level agnostic\n            return {\n                key: lightspeed.start,\n                title: {\n                    content: <>\n\t\t\t\t\t\t{this.parser.formatTimestamp(lightspeed.start)}\n\t\t\t\t\t\t&nbsp;-&nbsp;<Trans id=\"ast.lightspeed.rotation.gcd\"><Plural value={numGcds} one=\"# GCD\" other=\"# GCDs\"/></Trans>\n\t\t\t\t\t\t&nbsp;-&nbsp;{mpSavings} <Trans id=\"ast.lightspeed.rotation.mp-saved\">MP saved</Trans>\n\t\t\t\t\t</>,\n                },\n                content: {\n                    content: <Rotation events={lightspeed.casts}/>,\n                },\n            };\n        });\n        const lightspeedDisplay = <Accordion exclusive={false} panels={panels} styled fluid/>;\n        return <Fragment>\n\t\t\t<p>\n\t\t\t\t<Trans id=\"ast.lightspeed.messages.explanation\">\n\t\t\t\tThe main use of <ActionLink {...ACTIONS.LIGHTSPEED}/> should be for weaving card actions during <ActionLink {...ACTIONS.DIVINATION}/> and <ActionLink {...ACTIONS.SLEEVE_DRAW}/> windows.<br />\n                It can also be used for MP savings on heavy healing segments, keeping casts up while on the move and other specific scenarios.<br />\n\t\t\t\tEach fight calls for a different strategy, but try to utilize it as much as possible.<br /><br />\n\t\t\t\tUnless it's being used for <ActionLink {...ACTIONS.ASCEND}/>, lightspeed should fit at least 6 GCDs.\n\t\t\t\t</Trans>\n\t\t\t</p>\n\t\t\t{panels.length === 0 && noCastsMessage}\n\t\t\t{panels.length > 0 && lightspeedDisplay}\n\n\t\t</Fragment>;\n    }\n}\nLIGHTSPEED.handle = 'lightspeed';\nLIGHTSPEED.dependencies = [\n    'castTime',\n];\nLIGHTSPEED.title = t('ast.lightspeed.title') `Lightspeed`;\nLIGHTSPEED.displayOrder = DISPLAY_ORDER.LIGHTSPEED;\n","import React, { Fragment } from 'react';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport Module from 'parser/core/Module';\nimport { Suggestion, SEVERITY } from 'parser/core/modules/Suggestions';\nimport { ActionLink } from 'components/ui/DbLink';\nimport { Plural, Trans } from '@lingui/react';\nconst WASTED_USES_MAX_MEDIUM = 2;\nexport default class LucidDreaming extends Module {\n    constructor(...args) {\n        super(...args);\n        this._lastUse = 0;\n        this._uses = 0;\n        this._totalHeld = 0;\n        this._extensions = 0;\n        this._gcdCountHoldingLucid = 0;\n        this._maxMP = null;\n        this._MP = null;\n        this._MPthresholdTime = null;\n        const _filter = {\n            by: 'player',\n            abilityId: [ACTIONS.LUCID_DREAMING.id],\n        };\n        this.addHook('cast', _filter, this._onCastLucid);\n        this.addHook('refreshbuff', { by: 'player', to: 'player' }, this._onRefreshLucid);\n        this.addHook('complete', this._onComplete);\n    }\n    _onCastLucid(event) {\n        this._uses++;\n        if (this._lastUse === 0) {\n            this._lastUse = this.parser.fight.start_time;\n        }\n        let _held = 0;\n        if (this._uses === 1) {\n            // The first use, take holding as from the first minute of the fight\n            _held = event.timestamp - this.parser.fight.start_time;\n        }\n        else {\n            // Take holding as from the time it comes off cooldown\n            _held = event.timestamp - this._lastUse - (ACTIONS.LUCID_DREAMING.cooldown * 1000);\n        }\n        if (_held > 0) {\n            this._totalHeld += _held;\n        }\n        //update the last use\n        this._lastUse = event.timestamp;\n    }\n    _onRefreshLucid(event) {\n        if (event.ability.guid === STATUSES.LUCID_DREAMING.id) {\n            this._extensions++;\n        }\n    }\n    _onComplete() {\n        //uses missed reported in 1 decimal\n        const holdDuration = this._uses === 0 ? this.parser.fightDuration : this._totalHeld;\n        const _usesMissed = Math.floor(holdDuration / (ACTIONS.LUCID_DREAMING.cooldown * 1000));\n        if (_usesMissed > 1 || this._uses === 0) {\n            this.suggestions.add(new Suggestion({\n                icon: ACTIONS.LUCID_DREAMING.icon,\n                content: <Fragment>\n\t\t\t\t\t<Trans id=\"ast.lucid-dreaming.suggestion.content\">\n\t\t\t\t\tKeep <ActionLink {...ACTIONS.LUCID_DREAMING}/> on cooldown for better MP management.\n\t\t\t\t\t</Trans>\n\t\t\t\t</Fragment>,\n                severity: this._uses === 0 || _usesMissed > WASTED_USES_MAX_MEDIUM ? SEVERITY.MAJOR : SEVERITY.MEDIUM,\n                why: <Fragment>\n\t\t\t\t\t<Trans id=\"ast.lucid-dreaming.suggestion.why\">\n\t\t\t\t\t\t<Plural value={_usesMissed} one=\"# use\" other=\"# uses\"/> of Lucid Dreaming were missed by holding it for at least a total of {this.parser.formatDuration(holdDuration)}.\n\t\t\t\t\t</Trans>\n\t\t\t\t</Fragment>,\n            }));\n        }\n    }\n}\nLucidDreaming.handle = 'lucid';\nLucidDreaming.dependencies = [\n    'suggestions',\n];\n","import { Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\n// import STATUSES from 'data/STATUSES'\nimport Module from 'parser/core/Module';\nimport { SEVERITY, Suggestion } from 'parser/core/modules/Suggestions';\nimport React, { Fragment } from 'react';\nexport default class ArcanaUndrawUsage extends Module {\n    constructor(...args) {\n        super(...args);\n        this.addHook('cast', { by: 'player' }, this._onCast);\n        this.addHook('complete', this._onComplete);\n        this._badUndraws = [];\n    }\n    _onCast(event) {\n        this._saveIfBadUndraw(event);\n    }\n    _saveIfBadUndraw(event) {\n        const actionId = event.ability.guid;\n        // It's a OGCD Arcana Undraw. GET IT.\n        if (actionId === ACTIONS.UNDRAW.id) {\n            this._badUndraws.push(event);\n        }\n    }\n    _onComplete() {\n        const badUndraws = this._badUndraws;\n        if (badUndraws > 0) {\n            this.suggestions.add(new Suggestion({\n                icon: 'https://xivapi.com/i/003000/003108.png',\n                content: <Fragment>\n\t\t\t\t\t<Trans id=\"ast.arcana-undraw-usage.suggestions.content\">\n                    Due to Draw starting its cooldown the moment it's used, there is no longer any reason to <ActionLink {...ACTIONS.UNDRAW}/> instead of playing it or converting it with <ActionLink {...ACTIONS.MINOR_ARCANA}/></Trans>\n\t\t\t\t</Fragment>,\n                severity: SEVERITY.MAJOR,\n                why: <Trans id=\"ast.arcana-undraw-usage.suggestions.why\">\n\t\t\t\t\t{badUndraws.length} instances of using undraw.</Trans>,\n            }));\n        }\n    }\n}\nArcanaUndrawUsage.handle = 'arcanaundraws';\nArcanaUndrawUsage.dependencies = [\n    'suggestions',\n];\n","import { __decorate, __metadata } from \"tslib\";\nimport { t } from '@lingui/macro';\nimport { Plural, Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport Module, { dependency } from 'parser/core/Module';\nimport Suggestions, { SEVERITY, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport React from 'react';\n// Things to track:\n// Did they forget to activate horoscope?\n// Did they cast a Helios/Aspected Helios without Horoscope despite having it up?\n// Maybe track how they used it?\nconst SEVERETIES = {\n    ACTIVATES_MISSED: {\n        1: SEVERITY.MINOR,\n        2: SEVERITY.MEDIUM,\n    },\n};\nconst HELIOS_CASTS = [\n    ACTIONS.HELIOS.id,\n    ACTIONS.ASPECTED_HELIOS.id,\n];\nconst HOROSCOPE_STATUSES = [\n    STATUSES.HOROSCOPE.id,\n    STATUSES.HOROSCOPE_HELIOS.id,\n];\nexport default class Horoscope extends Module {\n    constructor() {\n        super(...arguments);\n        this.uses = 0;\n        this.activations = 0;\n    }\n    init() {\n        this.addHook('cast', { abilityId: ACTIONS.HOROSCOPE.id, by: 'player' }, this.onHoroscope);\n        this.addHook('cast', { abilityId: ACTIONS.HOROSCOPE_ACTIVATION.id, by: 'player' }, this.onActivate);\n        this.addHook('complete', this.onComplete);\n    }\n    onHoroscope(event) {\n        this.uses++;\n    }\n    onActivate(event) {\n        this.activations++;\n    }\n    onComplete() {\n        /*\n            SUGGESTION: Didn't activate\n        */\n        const missedActivations = this.uses - this.activations;\n        this.suggestions.add(new TieredSuggestion({\n            icon: ACTIONS.HOROSCOPE_ACTIVATION.icon,\n            content: <Trans id=\"ast.horoscope.suggestion.expired.content\">\n\t\t\t\t<ActionLink {...ACTIONS.HOROSCOPE}/> does not activate by itself, so don't forget to use it again or it will expire for no potency.\n\t\t\t</Trans>,\n            why: <Trans id=\"ast.horoscope.suggestion.expired.why\">\n\t\t\t\t<Plural value={missedActivations} one=\"# expiration\" other=\"# expirations\"/>  of Horoscope without reading fortunes again.\n\t\t\t</Trans>,\n            tiers: SEVERETIES.ACTIVATES_MISSED,\n            value: missedActivations,\n        }));\n    }\n}\nHoroscope.handle = 'horoscope';\nHoroscope.title = t('ast.horoscope.title') `Horoscope`;\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], Horoscope.prototype, \"suggestions\", void 0);\n","import { __decorate, __metadata } from \"tslib\";\nimport { t } from '@lingui/macro';\nimport { getDataBy } from 'data';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport _ from 'lodash';\nimport Module, { dependency } from 'parser/core/Module';\nimport PrecastStatus from 'parser/core/modules/PrecastStatus';\nimport { ARCANA_STATUSES, CELESTIAL_SEAL_ARCANA, DRAWN_ARCANA, LUNAR_SEAL_ARCANA, PLAY, SOLAR_SEAL_ARCANA } from '../ArcanaGroups';\nimport DISPLAY_ORDER from '../DISPLAY_ORDER';\nconst LINKED_EVENT_THRESHOLD = 20;\nconst DEATH_EVENT_STATUS_DROP_DELAY = 2000;\nconst CARD_GRANTING_ABILITIES = [ACTIONS.DRAW.id, ACTIONS.REDRAW.id, ACTIONS.MINOR_ARCANA.id, ...PLAY, ACTIONS.SLEEVE_DRAW.id];\nconst CARD_ACTIONS = [\n    ACTIONS.DRAW.id,\n    ACTIONS.REDRAW.id,\n    ACTIONS.SLEEVE_DRAW.id,\n    ACTIONS.MINOR_ARCANA.id,\n    ACTIONS.UNDRAW.id,\n    ACTIONS.DIVINATION.id,\n    ...PLAY,\n];\nconst PLAY_TO_STATUS_LOOKUP = _.zipObject(PLAY, DRAWN_ARCANA);\nconst STATUS_TO_DRAWN_LOOKUP = _.zipObject(ARCANA_STATUSES, DRAWN_ARCANA);\nconst STATUS_TO_PLAY_LOOKUP = _.zipObject(ARCANA_STATUSES, PLAY);\nconst DRAWN_TO_PLAY_LOOKUP = _.zipObject(DRAWN_ARCANA, PLAY);\nexport var SealType;\n(function (SealType) {\n    SealType[SealType[\"NOTHING\"] = 0] = \"NOTHING\";\n    SealType[SealType[\"SOLAR\"] = 1] = \"SOLAR\";\n    SealType[SealType[\"LUNAR\"] = 2] = \"LUNAR\";\n    SealType[SealType[\"CELESTIAL\"] = 3] = \"CELESTIAL\";\n})(SealType || (SealType = {}));\nconst CLEAN_SEAL_STATE = [SealType.NOTHING, SealType.NOTHING, SealType.NOTHING];\nexport var DrawnType;\n(function (DrawnType) {\n    DrawnType[DrawnType[\"NOTHING\"] = 0] = \"NOTHING\";\n    DrawnType[DrawnType[\"BALANCE\"] = STATUSES.BALANCE_DRAWN.id] = \"BALANCE\";\n    DrawnType[DrawnType[\"BOLE\"] = STATUSES.BOLE_DRAWN.id] = \"BOLE\";\n    DrawnType[DrawnType[\"ARROW\"] = STATUSES.ARROW_DRAWN.id] = \"ARROW\";\n    DrawnType[DrawnType[\"SPEAR\"] = STATUSES.SPEAR_DRAWN.id] = \"SPEAR\";\n    DrawnType[DrawnType[\"EWER\"] = STATUSES.EWER_DRAWN.id] = \"EWER\";\n    DrawnType[DrawnType[\"SPIRE\"] = STATUSES.SPIRE_DRAWN.id] = \"SPIRE\";\n    DrawnType[DrawnType[\"LORD_OF_CROWNS\"] = STATUSES.LORD_OF_CROWNS_DRAWN.id] = \"LORD_OF_CROWNS\";\n    DrawnType[DrawnType[\"LADY_OF_CROWNS\"] = STATUSES.LADY_OF_CROWNS_DRAWN.id] = \"LADY_OF_CROWNS\";\n})(DrawnType || (DrawnType = {}));\nexport var SleeveType;\n(function (SleeveType) {\n    SleeveType[SleeveType[\"NOTHING\"] = 0] = \"NOTHING\";\n    SleeveType[SleeveType[\"ONE_STACK\"] = 1] = \"ONE_STACK\";\n    SleeveType[SleeveType[\"TWO_STACK\"] = 2] = \"TWO_STACK\";\n})(SleeveType || (SleeveType = {}));\n// TODO: Try to track for when a seal was not given on pull due to latency?\nexport default class ArcanaTracking extends Module {\n    constructor() {\n        super(...arguments);\n        this.cardStateLog = [{\n                lastEvent: {\n                    type: 'pull',\n                    timestamp: this.parser.fight.start_time,\n                    targetIsFriendly: true,\n                    sourceIsFriendly: true,\n                },\n                drawState: DrawnType.NOTHING,\n                sealState: CLEAN_SEAL_STATE,\n                sleeveState: SleeveType.NOTHING,\n            }];\n        this.pullStateInitialized = false;\n        this.pullIndex = 0;\n        this.prepullArcanas = [];\n        this.isCastEvent = (event) => event.type === 'cast';\n        this.isBuffEvent = (event) => event.type === 'buff';\n    }\n    init() {\n        this.addHook('cast', { abilityId: CARD_ACTIONS, by: 'player' }, this.onCast);\n        this.addHook('applybuff', { abilityId: ARCANA_STATUSES, by: 'player' }, this.onPrepullArcana);\n        this.addHook('removebuff', { abilityId: ARCANA_STATUSES, by: 'player' }, this.offPrepullArcana);\n        this.addHook('removebuff', { abilityId: DRAWN_ARCANA, by: 'player' }, this.offDrawnStatus);\n        this.addHook('death', { to: 'player' }, this.onDeath);\n    }\n    normalise(events) {\n        const startTime = this.parser.fight.start_time;\n        let prepullSleeve = true;\n        const sleeveDrawLog = [];\n        for (const event of events) {\n            if (event.timestamp - startTime >= (STATUSES.SLEEVE_DRAW.duration * 1000)) {\n                // End loop if: 1. Max duration of sleeve draw status passed\n                break;\n            }\n            else if (event.type === 'cast' && this.isCastEvent(event) && ACTIONS.SLEEVE_DRAW.id === event.ability.guid) {\n                // they used sleeve so it can't have been prepull\n                prepullSleeve = false;\n            }\n            else if (event.type === 'cast' && this.isCastEvent(event) && ACTIONS.DRAW.id === event.ability.guid) {\n                sleeveDrawLog.push(event);\n            }\n            else {\n                continue;\n            }\n        }\n        // if they drew 2-3 cards in the first 30 sec, we can assume they had a sleeve draw\n        if (prepullSleeve && _.inRange(sleeveDrawLog.length, SleeveType.TWO_STACK, SleeveType.TWO_STACK + 2)) {\n            this.cardStateLog[0].sleeveState = sleeveDrawLog.length - 1;\n        }\n        return events;\n    }\n    get cardLogs() {\n        return this.cardStateLog;\n    }\n    /**\n     * @param {number} timestamp - desired timestamp to get the state. Defaults to pull state.\n     * @returns {CardState} - object containing the card state and last event\n     */\n    getCardState(timestamp = this.parser.fight.start_time) {\n        const stateItem = this.cardStateLog.find(artifact => artifact.lastEvent && timestamp > artifact.lastEvent.timestamp);\n        return stateItem;\n    }\n    /**\n     * @returns {CardState} - object containing the card state of the pull\n     */\n    getPullState() {\n        const stateItem = this.cardStateLog.find(artifact => artifact.lastEvent && artifact.lastEvent.type === 'pull');\n        return stateItem;\n    }\n    /**\n     * Adds the Arcana Buff to _prepullArcanas if it was a precast status\n     */\n    onPrepullArcana(event) {\n        if (event.timestamp > this.parser.fight.start_time) {\n            return;\n        }\n        this.prepullArcanas.push(event);\n    }\n    /**\n     * Determine exactly when they casted their prepull arcana\n     * If they had overwritten this buff, it will falsly pull back the timestamp of their prepull cast, but since we are guessing, it may as well be the same.\n     */\n    offPrepullArcana(event) {\n        if (event.timestamp >= this.parser.fight.start_time + (STATUSES.THE_BALANCE.duration * 1000)) {\n            return;\n        }\n        this.prepullArcanas.forEach(arcanaBuff => {\n            if (!(arcanaBuff.ability.guid === event.ability.guid\n                && arcanaBuff.targetID === event.targetID)) {\n                return;\n            }\n            const cardStateItem = { ..._.last(this.cardStateLog) };\n            const arcanaAction = getDataBy(ACTIONS, 'id', this.arcanaStatusToPlay(event.ability.guid));\n            if (!arcanaAction) {\n                return;\n            }\n            const arcanaCastEvent = {\n                ability: {\n                    name: arcanaAction.name,\n                    guid: arcanaAction.id,\n                    type: 1,\n                    abilityIcon: _.replace(_.replace(arcanaAction.icon, 'https://xivapi.com/i/', ''), '/', '-'),\n                },\n                timestamp: event.timestamp - (STATUSES.THE_BALANCE.duration * 1000),\n                type: 'cast',\n                sourceIsFriendly: true,\n                targetIsFriendly: true,\n                sourceID: event.sourceID,\n                targetID: event.targetID,\n            };\n            cardStateItem.lastEvent = { ...arcanaCastEvent };\n            cardStateItem.drawState = DrawnType.NOTHING;\n            cardStateItem.sealState = CLEAN_SEAL_STATE;\n            this.cardStateLog.unshift(cardStateItem);\n            this.pullIndex++;\n        });\n    }\n    /**\n     * This will run on removebuff. It will look for the loss of Arcanas Drawn statuses\n     * 5.0: This was a lot more meaningful when we had multiple statuses to track like royal road, held, drawn, etc.\n     * it's still useful now as it helps mitigate out-of-order log events (if that's still a thing anyway..)\n     *\n     * a) If it can't find any clear reason why the player had lost the buff, let's do a retconsearch to figure out since when they had it\n     *\n     * b) If they lost the buff with no link to any timestamp, it could be a /statusoff macro.\n     *    Creates a new entry as this is technically also a card action.\n     *\n     */\n    offDrawnStatus(event) {\n        if (!DRAWN_ARCANA.includes(event.ability.guid)) {\n            return;\n        }\n        // a) check if this card was obtained legally, if not, retcon the logs\n        this.retconSearch(this.arcanaDrawnToPlay(event.ability.guid));\n        // b) check if this was a standalone statusoff/undraw, if so, fab undraw event and add to logs\n        const isPaired = this.cardStateLog.some(stateItem => stateItem.lastEvent\n            && _.inRange(event.timestamp, stateItem.lastEvent.timestamp - LINKED_EVENT_THRESHOLD, stateItem.lastEvent.timestamp + LINKED_EVENT_THRESHOLD));\n        if (!isPaired) {\n            const cardStateItem = { ..._.last(this.cardStateLog) };\n            // fabbing an undraw cast event\n            const lastEvent = {\n                ability: { name: ACTIONS.UNDRAW.name, guid: ACTIONS.UNDRAW.id, type: 1, abilityIcon: _.replace(_.replace(STATUSES.NOCTURNAL_SECT.icon, 'https://xivapi.com/i/', ''), '/', '-') },\n                timestamp: event.timestamp,\n                type: 'cast',\n                sourceIsFriendly: true,\n                targetIsFriendly: true,\n                sourceID: event.sourceID,\n                targetID: event.sourceID,\n            };\n            cardStateItem.lastEvent = lastEvent;\n            cardStateItem.drawState = DrawnType.NOTHING;\n            this.cardStateLog.push(cardStateItem);\n        }\n    }\n    /**\n     * MAIN DATA GATHERING LOOP\n     * Creates a CardState duplicated from the previous known state of the Astrologian's spread, then modifies it based on the current action.\n     * Adds the CardState to cardStateLog\n     *\n     */\n    onCast(event) {\n        // For now, we're not looking at any other precast action other than Plays, which is handled by offPrepullArcana() to check removebuff instead of cast for better estimation\n        if (event.timestamp < this.parser.fight.start_time) {\n            return;\n        }\n        const actionId = event.ability.guid;\n        // Piecing together what they have on prepull\n        if (!this.pullStateInitialized && PLAY.includes(actionId)) {\n            this.initPullState(event);\n        }\n        const cardStateItem = { ..._.last(this.cardStateLog) };\n        cardStateItem.lastEvent = event;\n        if (PLAY.includes(actionId)) {\n            cardStateItem.drawState = DrawnType.NOTHING;\n            // Make sure they have been holding onto this from the last instance of a DRAW/REDRAW/MINOR_ARCANA\n            this.retconSearch(actionId);\n            // Work out what seal they got\n            let sealObtained = SealType.NOTHING;\n            if (SOLAR_SEAL_ARCANA.includes(actionId)) {\n                sealObtained = SealType.SOLAR;\n            }\n            else if (LUNAR_SEAL_ARCANA.includes(actionId)) {\n                sealObtained = SealType.LUNAR;\n            }\n            else if (CELESTIAL_SEAL_ARCANA.includes(actionId)) {\n                sealObtained = SealType.CELESTIAL;\n            }\n            const sealState = [...cardStateItem.sealState];\n            cardStateItem.sealState = this.addSeal(sealObtained, sealState);\n            if (cardStateItem.sleeveState > SleeveType.NOTHING) {\n                cardStateItem.sleeveState = this.consumeSleeve(cardStateItem.sleeveState);\n            }\n        }\n        if (actionId === ACTIONS.DIVINATION.id) {\n            cardStateItem.sealState = CLEAN_SEAL_STATE;\n        }\n        if (actionId === ACTIONS.UNDRAW.id) {\n            cardStateItem.drawState = DrawnType.NOTHING;\n        }\n        if (actionId === ACTIONS.SLEEVE_DRAW.id) {\n            cardStateItem.sleeveState = this.startSleeve();\n        }\n        this.cardStateLog.push(cardStateItem);\n    }\n    /**\n     * Cards scattered all over the floor, covered with your blood\n     * Inserts a new event into _cardStateLogs\n     */\n    onDeath(event) {\n        // TODO: This is a duct tape fix\n        // Checks on the previous event - it may be an erroneous drawnArcana flagged by offDrawnArcana. Statuses SEEM to drop 2s + 20ms earlier than the Death event.\n        const lastCardState = { ..._.last(this.cardStateLog) };\n        if (lastCardState.lastEvent.type === 'cast' && lastCardState.lastEvent.ability.guid === ACTIONS.UNDRAW.id\n            && (event.timestamp - lastCardState.lastEvent.timestamp <= DEATH_EVENT_STATUS_DROP_DELAY + LINKED_EVENT_THRESHOLD)) {\n            this.cardStateLog.pop();\n        }\n        // Fab a death event\n        this.cardStateLog.push({\n            lastEvent: {\n                ...event,\n            },\n            drawState: DrawnType.NOTHING,\n            sealState: CLEAN_SEAL_STATE,\n            sleeveState: SleeveType.NOTHING,\n        });\n    }\n    /**\n     * Initializes _cardStateLog pull entry for the first ever PLAY\n     * Looks for a previous DRAW. If none, then DRAW was made prepull. Updates pull state.\n     *\n     */\n    initPullState(event) {\n        const actionId = event.ability.guid;\n        // First check that there's no DRAW between this and pullIndex\n        const lookupLog = this.cardStateLog.slice(this.pullIndex + 1);\n        if (lookupLog.length > 0) {\n            lookupLog.forEach(cardState => {\n                if (cardState.lastEvent.type === 'cast'\n                    && CARD_GRANTING_ABILITIES.includes(cardState.lastEvent.ability.guid)) {\n                    // We're done since they had a DRAW\n                    return this.pullStateInitialized = true;\n                }\n            });\n        }\n        if (!this.pullStateInitialized && PLAY.includes(actionId)) {\n            // They had something in the draw slot\n            const drawnStatus = this.arcanaActionToStatus(actionId);\n            this.cardStateLog.forEach((cardState, index) => {\n                if (cardState.lastEvent.type === 'pull') {\n                    this.cardStateLog[index].drawState = drawnStatus ? drawnStatus : DrawnType.NOTHING;\n                    return this.pullStateInitialized = true;\n                }\n            });\n        }\n    }\n    /**\n     * Loops back to see if the specified card was in possession without the possiblity of it being obtained via legal abilities.\n     * This is presumed to mean they had it prepull, or since that latest ability. This function will then retcon the history since we know they had it.\n     * The reason why this is necessary is because some logs come with draw/buff/play out of order.\n     * Would be done in normaliser except we won't\n     *\n     * 5.0: Haha we only have one card slot now.\n     *\n     * @param actionId{array} The specified card drawn id\n     * @return {void} null\n     */\n    retconSearch(cardActionId) {\n        let searchLatest = true;\n        const lastLog = _.last(this.cardStateLog);\n        let lastEvent = lastLog.lastEvent;\n        if (lastEvent.type === 'pull') {\n            return;\n        }\n        lastEvent = lastLog.lastEvent;\n        const latestActionId = lastEvent.ability.guid;\n        // We can skip search+replace for the latest card event if that was a way to lose a card in draw slot.\n        // 1. The standard ways of losing something in draw slot.\n        // 2. If they used Draw while holding a Minor Arcana or Draw\n        if ([ACTIONS.UNDRAW.id, ...PLAY, ACTIONS.MINOR_ARCANA.id, ACTIONS.REDRAW.id].includes(latestActionId)\n            || (ACTIONS.DRAW.id === latestActionId && DRAWN_ARCANA.includes(lastLog.drawState))) {\n            searchLatest = false;\n        }\n        const searchLog = searchLatest ? this.cardStateLog : this.cardStateLog.slice(0, this.cardStateLog.length - 1);\n        // Looking for those abilities in CARD_GRANTING_ABILITIES that could possibly get us this card\n        let lastIndex = _.findLastIndex(searchLog, stateItem => this.isCastEvent(stateItem.lastEvent) && CARD_GRANTING_ABILITIES.includes(stateItem.lastEvent.ability.guid));\n        // There were no finds of specified abilities, OR it wasn't logged.\n        if (lastIndex === -1 || this.cardStateLog[lastIndex].drawState === DrawnType.NOTHING) {\n            // If none were found, they had it prepull, so assume this is pullIndex\n            lastIndex = lastIndex < 0 ? this.pullIndex : lastIndex;\n            // Modify log, they were holding onto this card since index\n            // Differenciate depending on searchLatest\n            _.forEachRight(this.cardStateLog, (stateItem, index) => {\n                if (searchLatest && index >= lastIndex) {\n                    stateItem.drawState = this.arcanaActionToStatus(cardActionId);\n                }\n                else if (index >= lastIndex && index !== this.cardStateLog.length - 1) {\n                    stateItem.drawState = this.arcanaActionToStatus(cardActionId);\n                }\n            });\n        }\n    }\n    // Helpers\n    addSeal(seal, sealState) {\n        if (!seal) {\n            return sealState;\n        }\n        sealState.shift();\n        sealState.push(seal);\n        return sealState;\n    }\n    startSleeve() {\n        return SleeveType.TWO_STACK;\n    }\n    consumeSleeve(sleeveState) {\n        sleeveState--;\n        return _.clamp(sleeveState, SleeveType.NOTHING, SleeveType.TWO_STACK);\n    }\n    /**\n     * Flips an arcana action id to the matching arcana status id\n     *\n     * @param arcanaId{int} The ID of an arcana.\n     * @return {int} the ID of the arcana in status, or the same id received if it didn't match the flip lookup.\n     */\n    arcanaActionToStatus(arcanaId) {\n        if (PLAY.includes(arcanaId)) {\n            arcanaId = PLAY_TO_STATUS_LOOKUP[arcanaId];\n        }\n        return arcanaId;\n    }\n    /**\n     * Flips an arcana status id to the matching arcana drawn id\n     *\n     * @param arcanaId{int} The ID of an arcana status.\n     * @return {int} the ID of the arcana in drawn arcanas, or the same id received if it didn't match the flip lookup.\n     */\n    arcanaStatusToDrawn(arcanaId) {\n        if (ARCANA_STATUSES.includes(arcanaId)) {\n            arcanaId = STATUS_TO_DRAWN_LOOKUP[arcanaId];\n        }\n        return arcanaId;\n    }\n    /**\n     * Flips an arcana status id to the matching arcana action id\n     *\n     * @param arcanaId{int} The ID of an arcana status.\n     * @return {int} the ID of the arcana in play, or the same id received if it didn't match the flip lookup.\n     */\n    arcanaStatusToPlay(arcanaId) {\n        if (ARCANA_STATUSES.includes(arcanaId)) {\n            arcanaId = STATUS_TO_PLAY_LOOKUP[arcanaId];\n        }\n        return arcanaId;\n    }\n    /**\n     * Flips a drawn arcana status id to the matching arcana action id\n     *\n     * @param arcanaId{int} The ID of an arcana drawn status.\n     * @return {int} the ID of the arcana in play, or the same id received if it didn't match the flip lookup.\n     */\n    arcanaDrawnToPlay(arcanaId) {\n        if (DRAWN_ARCANA.includes(arcanaId)) {\n            arcanaId = DRAWN_TO_PLAY_LOOKUP[arcanaId];\n        }\n        return arcanaId;\n    }\n}\nArcanaTracking.handle = 'arcanaTracking';\nArcanaTracking.title = t('ast.arcana-tracking.title') `Arcana Tracking`;\nArcanaTracking.displayOrder = DISPLAY_ORDER.ARCANA_TRACKING;\n__decorate([\n    dependency,\n    __metadata(\"design:type\", PrecastStatus)\n], ArcanaTracking.prototype, \"precastStatus\", void 0);\n","import { __decorate, __metadata } from \"tslib\";\nimport { t } from '@lingui/macro';\nimport { Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport JobIcon from 'components/ui/JobIcon';\nimport { getDataBy } from 'data';\nimport ACTIONS from 'data/ACTIONS';\nimport JOBS from 'data/JOBS';\nimport STATUSES from 'data/STATUSES';\nimport Module, { dependency } from 'parser/core/Module';\nimport Combatants from 'parser/core/modules/Combatants';\nimport Timeline from 'parser/core/modules/Timeline';\nimport React from 'react';\nimport { Button, Table } from 'semantic-ui-react';\nimport { PLAY } from '../ArcanaGroups';\nimport DISPLAY_ORDER from '../DISPLAY_ORDER';\nimport styles from './ArcanaSuggestions.module.css';\nimport ArcanaTracking, { SealType, SleeveType } from './ArcanaTracking';\nimport sealCelestial from './seal_celestial.png';\nimport sealLunar from './seal_lunar.png';\nimport sealSolar from './seal_solar.png';\nconst TIMELINE_UPPER_MOD = 30000; // in ms\nconst SLEEVE_ICON = {\n    [SleeveType.NOTHING]: '',\n    [SleeveType.ONE_STACK]: STATUSES.SLEEVE_DRAW.icon,\n    [SleeveType.TWO_STACK]: 'https://xivapi.com/i/019000/019562.png',\n};\nconst SEAL_ICON = {\n    [SealType.NOTHING]: '',\n    [SealType.SOLAR]: sealSolar,\n    [SealType.LUNAR]: sealLunar,\n    [SealType.CELESTIAL]: sealCelestial,\n};\nexport default class ArcanaSuggestions extends Module {\n    constructor() {\n        super(...arguments);\n        this.cardLogs = [];\n        this.partyComp = [];\n    }\n    init() {\n        this.addHook('complete', this._onComplete);\n    }\n    _onComplete() {\n        const combatants = this.combatants.getEntities();\n        for (const [key, combatant] of Object.entries(combatants)) {\n            if (combatant.type === 'LimitBreak') {\n                continue;\n            }\n            this.partyComp.push(combatant.type);\n        }\n        this.cardLogs = this.arcanaTracking.cardLogs.map(artifact => {\n            const target = artifact.lastEvent.targetID !== this.parser.player.id ? this.combatants.getEntity(artifact.lastEvent.targetID) : this.combatants.selected;\n            const cardLog = {\n                ...artifact,\n                targetName: target ? target.name : null,\n                targetJob: target ? target.type : null,\n            };\n            return cardLog;\n        });\n    }\n    output() {\n        return <>\n\t\t<p>\n\t\t\t<Trans id=\"ast.arcana-suggestions.messages.explanation\">\n\t\t\t\tThis section keeps track of every card action made during the fight, and the state of the spread after each action.\n\t\t\t</Trans>\n\t\t</p>\n\t\t<p>\n\t\t\t<Trans id=\"ast.arcana-suggestions.messages.footnote\">\n\t\t\t\t* No pre-pull actions are being represented aside from <ActionLink {...ACTIONS.PLAY}/>, and this is only an approximation based on the buff duration.\n\t\t\t</Trans>\n\t\t</p>\n\t\t<Table collapsing unstackable className={styles.cardActionTable}>\n\t\t\t\t\t<Table.Header>\n\t\t\t\t\t\t<Table.Row>\n\t\t\t\t\t\t\t<Table.HeaderCell width={1}>\n\t\t\t\t\t\t\t\t<Trans id=\"ast.arcana-suggestions.messages.time\">\n\t\t\t\t\t\t\t\t\t\t\tTime\n\t\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t\t</Table.HeaderCell>\n\t\t\t\t\t\t\t<Table.HeaderCell width={1}>\n\t\t\t\t\t\t\t\t<Trans id=\"ast.arcana-suggestions.messages.latest-action\">Lastest Action</Trans>\n\t\t\t\t\t\t\t</Table.HeaderCell>\n\t\t\t\t\t\t\t<Table.HeaderCell width={2}>\n\t\t\t\t\t\t\t\t<Trans id=\"ast.arcana-suggestions.messages.target\">Target</Trans>\n\t\t\t\t\t\t\t</Table.HeaderCell>\n\t\t\t\t\t\t\t<Table.HeaderCell width={2}>\n\t\t\t\t\t\t\t\t<Trans id=\"ast.arcana-suggestions.messages.spread-state\">Spread State</Trans>\n\t\t\t\t\t\t\t</Table.HeaderCell>\n\t\t\t\t\t\t</Table.Row>\n\t\t\t\t\t</Table.Header>\n\t\t\t\t\t<Table.Body>\n\t\t\t\t\t\t{this.cardLogs.map(artifact => {\n            if (artifact.lastEvent.type === 'pull') {\n                return <Table.Row key={artifact.lastEvent.timestamp} className={styles.cardActionRow}>\n\t\t\t\t\t\t\t\t\t\t<Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t<Button circular compact size=\"mini\" icon=\"time\" onClick={() => this.timeline.show(0, TIMELINE_UPPER_MOD)}/>\n\t\t\t\t\t\t\t\t\t\t{this.parser.formatTimestamp(artifact.lastEvent.timestamp)}</Table.Cell>\n\t\t\t\t\t\t\t\t\t\t<Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t<Trans id=\"ast.arcana-suggestions.messages.pull\">\n\t\t\t\t\t\t\t\t\t\t\t\tPull\n\t\t\t\t\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t\t\t\t\t<Table.Cell>\n\t\t\t\t\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t\t\t\t\t{this.RenderSpreadState(artifact)}\n\t\t\t\t\t\t\t\t\t</Table.Row>;\n            }\n            else {\n                const start = artifact.lastEvent.timestamp - this.parser.fight.start_time;\n                const end = start + TIMELINE_UPPER_MOD;\n                const formattedTime = this.parser.formatTimestamp(artifact.lastEvent.timestamp);\n                return <Table.Row key={artifact.lastEvent.timestamp} className={styles.cardActionRow}>\n\t\t\t\t\t\t\t\t\t\t<Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t{start >= 0 && <Button circular compact size=\"mini\" icon=\"time\" onClick={() => this.timeline.show(start, end)}/>}\n\t\t\t\t\t\t\t\t\t\t\t<span style={{ marginRight: 10 }}>{formattedTime}</span>\n\t\t\t\t\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t\t\t\t\t{this.RenderAction(artifact)}\n\t\t\t\t\t\t\t\t\t\t{this.RenderSpreadState(artifact)}\n\t\t\t\t\t\t\t\t\t</Table.Row>;\n            }\n        })}\n\t\t\t\t\t</Table.Body>\n\t\t\t\t</Table>\n\t\t\t\t<Button onClick={() => this.parser.scrollTo(ArcanaSuggestions.handle)}>\n\t\t\t\t\t<Trans id=\"ast.arcana-suggestions.scroll-to-top-button\">Jump to start of Arcana Logs</Trans>\n\t\t\t\t</Button>\n\t\t</>;\n    }\n    // Helper for output()\n    RenderAction(artifact) {\n        if (artifact.lastEvent.type === 'cast' && PLAY.includes(artifact.lastEvent.ability.guid)) {\n            const targetJob = getDataBy(JOBS, 'logType', artifact.targetJob);\n            return <>\n\t\t\t<Table.Cell>\n\t\t\t\t<ActionLink {...getDataBy(ACTIONS, 'id', artifact.lastEvent.ability.guid)}/>\n\t\t\t</Table.Cell>\n\t\t\t<Table.Cell>\n\t\t\t\t{targetJob && <JobIcon job={targetJob}/>}\n\t\t\t\t{artifact.targetName}\n\t\t\t</Table.Cell>\n\t\t\t</>;\n        }\n        else if (artifact.lastEvent.type === 'cast') {\n            return <>\n\t\t\t\t<Table.Cell>\n\t\t\t\t\t<ActionLink {...getDataBy(ACTIONS, 'id', artifact.lastEvent.ability.guid)}/>\n\t\t\t\t</Table.Cell>\n\t\t\t\t<Table.Cell>\n\t\t\t\t</Table.Cell>\n\t\t\t</>;\n        }\n        else if (artifact.lastEvent.type === 'death') {\n            return <><Table.Cell>\n\t\t\t\t<Trans id=\"ast.arcana-tracking.messages.death\">Death</Trans>\n\t\t\t</Table.Cell>\n\t\t\t<Table.Cell>\n\t\t\t</Table.Cell>\n\t\t\t</>;\n        }\n        else {\n            return <>\n\t\t\t\t<Table.Cell>\n\t\t\t\t</Table.Cell>\n\t\t\t\t<Table.Cell>\n\t\t\t\t</Table.Cell>\n\t\t\t</>;\n        }\n    }\n    // Helper for output()\n    RenderSpreadState(artifact) {\n        const drawnArcana = getDataBy(STATUSES, 'id', artifact.drawState);\n        return <Table.Cell>\n\t\t\t<span style={{ marginRight: 10, marginLeft: 0 }}>\n\t\t\t{drawnArcana && <img src={drawnArcana.icon} className={styles.buffIcon} alt={drawnArcana.name}/>}\n\t\t\t{!drawnArcana && <span className={styles.buffPlaceholder}/>}\n\t\t\t</span>\n\t\t\t<span className={styles.sealIconContainer}>\n\t\t\t{artifact.sealState.map(sealType => {\n            if (sealType > 0) {\n                return <img src={SEAL_ICON[sealType]} className={styles.sealIcon} alt=\"Seal icon\"/>;\n            }\n            else {\n                return <span className={styles.sealIcon}></span>;\n            }\n        })}\n\t\t\t</span>\n\t\t\t<span style={{ marginLeft: 5 }}>\n\t\t\t{artifact.sleeveState > 0 && <img src={SLEEVE_ICON[artifact.sleeveState]} className={styles.buffIcon} alt={ACTIONS.SLEEVE_DRAW.name}/>}\n\t\t\t</span>\n\t\t</Table.Cell>;\n    }\n}\nArcanaSuggestions.handle = 'arcanaSuggestions';\nArcanaSuggestions.title = t('ast.arcana-suggestions.title') `Arcana Logs`;\nArcanaSuggestions.displayOrder = DISPLAY_ORDER.ARCANA_TRACKING;\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Combatants)\n], ArcanaSuggestions.prototype, \"combatants\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", ArcanaTracking)\n], ArcanaSuggestions.prototype, \"arcanaTracking\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Timeline)\n], ArcanaSuggestions.prototype, \"timeline\", void 0);\n","import { AbstractStatistic } from 'parser/core/modules/Statistics/AbstractStatistic';\nimport React from 'react';\nimport styles from './SectStatistic.module.css';\nexport default class SectStatstic extends AbstractStatistic {\n    constructor(opts) {\n        super(opts);\n        this.Content = () => (<div className={styles.simpleStatistic}>\r\n\t\t\t<div className={styles.wrapper}>\r\n\t\t\t\t{this.icon && <img src={this.icon} className={styles.icon}/>}\r\n\t\t\t\t<div className={styles.value}>{this.value}</div>\r\n\t\t\t</div>\r\n\t\t</div>);\n        this.icon = opts.icon;\n        this.value = opts.value;\n    }\n}\n","import { __decorate, __metadata } from \"tslib\";\nimport { Trans } from '@lingui/react';\nimport { ActionLink, StatusLink } from 'components/ui/DbLink';\nimport { getDataBy } from 'data';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport _ from 'lodash';\nimport Module, { dependency } from 'parser/core/Module';\nimport PrecastAction from 'parser/core/modules/PrecastAction';\nimport { Statistics } from 'parser/core/modules/Statistics';\nimport Suggestions, { SEVERITY, Suggestion } from 'parser/core/modules/Suggestions';\nimport React from 'react';\nimport SectStatistic from './SectStatistic';\nconst NO_SECT_ICON = 'https://xivapi.com/i/064000/064017.png';\nconst ASPECTED_ACTIONS = [\n    ACTIONS.ASPECTED_BENEFIC.id,\n    ACTIONS.ASPECTED_HELIOS.id,\n    ACTIONS.CELESTIAL_INTERSECTION.id,\n    ACTIONS.CELESTIAL_OPPOSITION.id,\n];\nconst DIURNAL_SECT_STATUSES = [\n    STATUSES.ASPECTED_BENEFIC.id,\n    STATUSES.ASPECTED_HELIOS.id,\n    STATUSES.DIURNAL_OPPOSITION.id,\n    STATUSES.NOCTURNAL_INTERSECTION.id,\n    STATUSES.NOCTURNAL_BALANCE.id,\n];\nconst NOCTURNAL_SECT_STATUSES = [\n    STATUSES.NOCTURNAL_FIELD.id,\n    STATUSES.NOCTURNAL_OPPOSITION.id,\n    STATUSES.DIURNAL_INTERSECTION.id,\n    STATUSES.DIURNAL_BALANCE.id,\n];\nconst ACTION_STATUS_MAP = {\n    [ACTIONS.ASPECTED_BENEFIC.id]: [\n        STATUSES.ASPECTED_BENEFIC.id,\n        STATUSES.NOCTURNAL_FIELD.id,\n    ],\n    [ACTIONS.ASPECTED_HELIOS.id]: [\n        STATUSES.ASPECTED_HELIOS.id,\n        STATUSES.NOCTURNAL_FIELD.id,\n    ],\n    [ACTIONS.CELESTIAL_INTERSECTION.id]: [\n        STATUSES.DIURNAL_INTERSECTION.id,\n        STATUSES.NOCTURNAL_INTERSECTION.id,\n    ],\n    [ACTIONS.CELESTIAL_OPPOSITION.id]: [\n        STATUSES.DIURNAL_OPPOSITION.id,\n        STATUSES.NOCTURNAL_OPPOSITION.id,\n    ],\n};\nconst SECT_ACTIONS = [\n    ACTIONS.DIURNAL_SECT.id,\n    ACTIONS.NOCTURNAL_SECT.id,\n];\nconst SECT_STATUSES = [\n    STATUSES.DIURNAL_SECT.id,\n    STATUSES.NOCTURNAL_SECT.id,\n];\nconst DIURNAL_SECT_BUFF_ABILITY = {\n    name: STATUSES.DIURNAL_SECT.name,\n    guid: STATUSES.DIURNAL_SECT.id,\n    type: 1,\n    abilityIcon: _.replace(_.replace(STATUSES.DIURNAL_SECT.icon, 'https://xivapi.com/i/', ''), '/', '-'),\n};\nconst NOCTURNAL_SECT_BUFF_ABILITY = {\n    name: STATUSES.NOCTURNAL_SECT.name,\n    guid: STATUSES.NOCTURNAL_SECT.id,\n    type: 1,\n    abilityIcon: _.replace(_.replace(STATUSES.NOCTURNAL_SECT.icon, 'https://xivapi.com/i/', ''), '/', '-'),\n};\n// Determine sect by checking the result of an aspected spell/ability\nexport default class Sect extends Module {\n    constructor() {\n        super(...arguments);\n        this.pullWithoutSect = false;\n        this.activeSectId = undefined;\n        this.gaveup = false;\n    }\n    init() {\n        this.addHook('cast', { abilityId: [...SECT_ACTIONS], by: 'player' }, this.onCast);\n        this.addHook('applybuff', { abilityId: [...SECT_STATUSES], by: 'player' }, this.onApplySect);\n        this.addHook('complete', this.onComplete);\n    }\n    normalise(events) {\n        const startTime = this.parser.fight.start_time;\n        let aspectedCast = null;\n        for (const event of events) {\n            if (event.type === 'applybuff' && SECT_STATUSES.includes(event.ability.guid)) {\n                // They started the fight without a sect and switched it on mid-fight :blobsweat: we gud here\n                break;\n            }\n            if (!aspectedCast && event.type === 'cast' && ASPECTED_ACTIONS.includes(event.ability.guid)) {\n                // Detecting a cast of an aspected action, so now we examine what comes out of it\n                aspectedCast = event;\n            }\n            else if (aspectedCast\n                && (event.type === 'applybuff' || event.type === 'refreshbuff') && [...NOCTURNAL_SECT_STATUSES, ...DIURNAL_SECT_STATUSES].includes(event.ability.guid)) {\n                // This is an applybuff event of a sect buff that came after an aspected action\n                if (this.mapCastToBuff(aspectedCast.ability.guid).includes(event.ability.guid)\n                    && [...DIURNAL_SECT_STATUSES, ...NOCTURNAL_SECT_STATUSES].includes(event.ability.guid)) {\n                    const SECT_ABILITY = DIURNAL_SECT_STATUSES.includes(event.ability.guid) ? DIURNAL_SECT_BUFF_ABILITY : NOCTURNAL_SECT_BUFF_ABILITY;\n                    // Fab a sect buff event at the start of the fight\n                    events.splice(0, 0, {\n                        ...event,\n                        timestamp: startTime - 1,\n                        type: 'applybuff',\n                        ability: SECT_ABILITY,\n                        targetID: event.sourceID,\n                        targetIsFriendly: true,\n                    });\n                    break;\n                }\n            }\n            else {\n                continue;\n            }\n        }\n        return events;\n    }\n    onCast(event) {\n        // If they casted a sect at anytime it means they pulled without one on\n        this.pullWithoutSect = true;\n        const sect = getDataBy(ACTIONS, 'id', event.ability.guid);\n        if (sect) {\n            this.activeSectId = sect.id;\n        }\n    }\n    // Looking for the sect buff that we fabricated, but if they switched it on mid-fight that'll get picked up too\n    onApplySect(event) {\n        if (!this.activeSectId) {\n            const sect = getDataBy(ACTIONS, 'id', this.mapBuffToCast(event.ability.guid));\n            if (sect) {\n                this.activeSectId = sect.id;\n            }\n        }\n    }\n    onComplete() {\n        /*\n            SUGGESTION: Pulled without Sect\n        */\n        if (!this.gaveup && (this.pullWithoutSect || !this.activeSectId)) {\n            this.suggestions.add(new Suggestion({\n                icon: !this.activeSectId || ACTIONS.DIURNAL_SECT.id === this.activeSectId ? ACTIONS.DIURNAL_SECT.icon : ACTIONS.NOCTURNAL_SECT.icon,\n                content: <Trans id=\"ast.sect.suggestions.no-sect.content\">\n\t\t\t\t\tDon't start without <ActionLink {...ACTIONS.DIURNAL_SECT}/> or <ActionLink {...ACTIONS.NOCTURNAL_SECT}/>. There are several abilities that can't be used without one of these stances.\n\t\t\t\t</Trans>,\n                why: <Trans id=\"ast.sect.suggestions.no-sect.why\">\n\t\t\t\t\tThere was no sect detected at the start of the fight.\n\t\t\t\t</Trans>,\n                severity: SEVERITY.MAJOR,\n            }));\n        }\n        /*\n            SUGGESTION: Noct with Scholar\n        */\n        const withScholar = this.parser.fightFriendlies.some(friendly => friendly.type === 'Scholar');\n        if (this.activeSectId === ACTIONS.NOCTURNAL_SECT.id && withScholar) {\n            this.suggestions.add(new Suggestion({\n                icon: ACTIONS.NOCTURNAL_SECT.icon,\n                content: <Trans id=\"ast.sect.suggestions.noct-with-sch.content\">\n\t\t\t\t\tIt is counter-productive to use this Sect with this composition. The main shields <StatusLink {...STATUSES.NOCTURNAL_FIELD}/> from <ActionLink {...ACTIONS.NOCTURNAL_SECT}/> do not stack with Scholar's main shield <StatusLink {...STATUSES.GALVANIZE}/>.\n\t\t\t\t</Trans>,\n                why: <Trans id=\"ast.sect.suggestions.noct-with-sch.why\">\n\t\t\t\t\tNocturnal Sect was used with a Scholar in the party.\n\t\t\t\t</Trans>,\n                severity: SEVERITY.MAJOR,\n            }));\n        }\n        // Statistic box\n        const icon = !this.activeSectId ? NO_SECT_ICON\n            : ACTIONS.DIURNAL_SECT.id === this.activeSectId ? ACTIONS.DIURNAL_SECT.icon\n                : ACTIONS.NOCTURNAL_SECT.icon;\n        const noSectValue = <Trans id=\"ast.sect.info.no-sect-detected\">No sect detected</Trans>;\n        const value = !this.activeSectId ? noSectValue :\n            ACTIONS.DIURNAL_SECT.id === this.activeSectId ? ACTIONS.DIURNAL_SECT.name\n                : ACTIONS.NOCTURNAL_SECT.name;\n        this.statistics.add(new SectStatistic({\n            icon,\n            value,\n            info: (<Trans id=\"ast.sect.info\">\n\t\t\t\tThe choice of Sect boils down to the content being played, group composition and player preference.<br />\n\t\t\t\t<ActionLink {...ACTIONS.DIURNAL_SECT}/> provides more potency per heal from regens, and is most effective in dungeons and 8-man content if damage taken does not exceed maximum HP.<br />\n\t\t\t\t<ActionLink {...ACTIONS.NOCTURNAL_SECT}/> is essential if shields are necessary for survival that <ActionLink {...ACTIONS.NEUTRAL_SECT}/> cannot cover. Noct shields cannot be stacked with Scholar's and is not recommended when healing alongside one.\n\t\t\t</Trans>),\n        }));\n    }\n    // Helpers\n    mapCastToBuff(actionId) {\n        if (ASPECTED_ACTIONS.includes(actionId)) {\n            return ACTION_STATUS_MAP[actionId];\n        }\n        return [];\n    }\n    mapBuffToCast(statusId) {\n        switch (statusId) {\n            case STATUSES.NOCTURNAL_SECT.id:\n                return ACTIONS.NOCTURNAL_SECT.id;\n            case STATUSES.DIURNAL_SECT.id:\n                return ACTIONS.DIURNAL_SECT.id;\n            default:\n                return -1;\n        }\n    }\n}\nSect.handle = 'sect';\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Statistics)\n], Sect.prototype, \"statistics\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", PrecastAction)\n], Sect.prototype, \"precastAction\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], Sect.prototype, \"suggestions\", void 0);\n","import { __decorate, __metadata } from \"tslib\";\nimport { Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport Module, { dependency } from 'parser/core/Module';\nimport Suggestions, { SEVERITY, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport React from 'react';\nconst SEVERITY_MOD = {\n    MINOR: 0.15,\n    MEDIUM: 0.5,\n    MAJOR: 0.8,\n};\n// Lifted from WHM benison and adapted to AST and TSX\nexport default class CelestialIntersection extends Module {\n    constructor() {\n        super(...arguments);\n        this.lastUse = 0;\n        this.uses = 0;\n        this.totalHeld = 0;\n    }\n    init() {\n        this.addHook('cast', { abilityId: ACTIONS.CELESTIAL_INTERSECTION.id, by: 'player' }, this.onCast);\n        this.addHook('complete', this.onComplete);\n    }\n    onCast(event) {\n        this.uses++;\n        if (this.lastUse === 0) {\n            this.lastUse = this.parser.fight.start_time;\n        }\n        const held = event.timestamp - this.lastUse - (ACTIONS.CELESTIAL_INTERSECTION.cooldown * 1000);\n        if (held > 0) {\n            this.totalHeld += held;\n        }\n        // update the last use\n        this.lastUse = event.timestamp;\n    }\n    onComplete() {\n        const holdDuration = this.uses === 0 ? this.parser.fightDuration : this.totalHeld;\n        const usesMissed = Math.floor(holdDuration / (ACTIONS.CELESTIAL_INTERSECTION.cooldown * 1000));\n        const fightDuration = this.parser.fight.end_time - this.parser.fight.start_time;\n        const maxUses = (fightDuration / (ACTIONS.CELESTIAL_INTERSECTION.cooldown * 1000)) - 1;\n        const WASTED_USE_TIERS = {\n            [maxUses * SEVERITY_MOD.MINOR]: SEVERITY.MINOR,\n            [maxUses * SEVERITY_MOD.MEDIUM]: SEVERITY.MEDIUM,\n            [maxUses * SEVERITY_MOD.MAJOR]: SEVERITY.MAJOR,\n        };\n        if (usesMissed > 1 || this.uses === 0) {\n            this.suggestions.add(new TieredSuggestion({\n                icon: ACTIONS.CELESTIAL_INTERSECTION.icon,\n                content: <Trans id=\"ast.celestial-intersection.suggestion.content\">\r\n\t\t\t\t\tUse <ActionLink {...ACTIONS.CELESTIAL_INTERSECTION}/> more frequently. Frequent uses can heal or mitigate a large amount of damage over the course of a fight, potentially resulting in fewer required healing GCDs.\r\n\t\t\t\t</Trans>,\n                tiers: WASTED_USE_TIERS,\n                value: this.uses === 0 ? 100 : usesMissed,\n                why: <Trans id=\"ast.celestial-intersection.suggestion.why\">\r\n\t\t\t\t\tAbout {usesMissed} uses of <ActionLink {...ACTIONS.CELESTIAL_INTERSECTION}/> were missed by holding it for at least a total of {this.parser.formatDuration(holdDuration)}.\r\n\t\t\t\t</Trans>,\n            }));\n        }\n    }\n}\nCelestialIntersection.handle = 'celestialintersection';\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], CelestialIntersection.prototype, \"suggestions\", void 0);\n","import { __decorate, __metadata } from \"tslib\";\nimport { Trans } from '@lingui/react';\nimport STATUSES from 'data/STATUSES';\nimport Module, { dependency } from 'parser/core/Module';\nimport { Requirement, TARGET, TieredRule } from 'parser/core/modules/Checklist';\nimport Checklist from 'parser/core/modules/Checklist';\nimport React from 'react';\nconst HOT_STATUSES = [\n    STATUSES.ASPECTED_HELIOS.id,\n    STATUSES.WHEEL_OF_FORTUNE.id,\n    STATUSES.ASPECTED_BENEFIC.id,\n    STATUSES.DIURNAL_OPPOSITION.id,\n    STATUSES.DIURNAL_INTERSECTION.id,\n    STATUSES.DIURNAL_BALANCE.id,\n];\n// doing 100-x where x is the overheal % for clarity\nconst SEVERITY_TIERS = {\n    // tslint:disable-next-line: no-magic-numbers\n    [100 - 35]: TARGET.SUCCESS,\n    // tslint:disable-next-line: no-magic-numbers\n    [100 - 50]: TARGET.WARN,\n};\n// Adapted from whm Overheal\nexport default class Overheal extends Module {\n    constructor() {\n        super(...arguments);\n        this.healingDirect = 0;\n        this.overhealDirect = 0;\n        this.healingOverTime = 0;\n        this.overhealOverTime = 0;\n        this.healingPet = 0;\n        this.overhealPet = 0;\n    }\n    init() {\n        this.addHook('heal', { by: 'player' }, this.onHeal);\n        this.addHook('heal', { by: 'pet' }, this.onPetHeal);\n        this.addHook('complete', this.onComplete);\n    }\n    onHeal(event) {\n        const guid = event.ability.guid;\n        if (HOT_STATUSES.includes(guid)) {\n            this.healingOverTime += event.amount;\n            this.overhealOverTime += event.overheal || 0;\n        }\n        else {\n            this.healingDirect += event.amount;\n            this.overhealDirect += event.overheal || 0;\n        }\n    }\n    onPetHeal(event) {\n        this.healingPet += event.amount;\n        this.overhealPet += event.overheal || 0;\n    }\n    onComplete() {\n        const nonHotOverhealPercent = 100 * this.healingDirect / (this.healingDirect + this.overhealDirect);\n        const petOverhealPercent = 100 * this.healingPet / (this.healingPet + this.overhealPet);\n        const hotOverhealPercent = 100 * this.healingOverTime / (this.healingOverTime + this.overhealOverTime);\n        const sourcesSum = this.healingOverTime + this.healingDirect + this.healingPet;\n        const sourcesSumOverheal = this.overhealOverTime + this.overhealPet + this.healingOverTime;\n        this.checklist.add(new TieredRule({\n            name: <Trans id=\"ast.overheal.rule.name\">Avoid overheal</Trans>,\n            description: <><Trans id=\"ast.overheal.rule.description\">\n\t\t\t\tAvoid wasting heals by healing for more than required to fill a target's HP bar. While some overheal is inevitable, overheal only serves to generate more enmity, for no gain. Being efficient with healing additionally helps with your MP management.\n\t\t\t</Trans>\n\t\t\t<ul>\n\t\t\t\t<li><Trans id=\"ast.overheal.requirement.nonhot\"> Overheal (non-HoT): </Trans>{this.invertPercent(nonHotOverhealPercent)}%</li>\n\t\t\t\t{petOverhealPercent > 0 && <li><Trans id=\"ast.overheal.requirement.earthly-star\"> Overheal (Earthly Star): </Trans>{this.invertPercent(petOverhealPercent)}%</li>}\n\t\t\t\t<li><Trans id=\"ast.overheal.requirement.hot\"> Overheal (HoT): </Trans>{this.invertPercent(hotOverhealPercent)}%</li>\n\t\t\t</ul></>,\n            tiers: SEVERITY_TIERS,\n            requirements: [\n                new InvertedRequirement({\n                    name: <Trans id=\"ast.overheal.requirement.all\"> Overheal (all sources)</Trans>,\n                    percent: (100 * sourcesSum / (sourcesSum + sourcesSumOverheal)),\n                }),\n            ],\n        }));\n    }\n    invertPercent(value) {\n        const invertedValue = 100 - value;\n        return invertedValue.toFixed(2);\n    }\n}\nOverheal.handle = 'overheal';\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Checklist)\n], Overheal.prototype, \"checklist\", void 0);\n// yeh, I'm not doing this in core, but I really want to show overheal as overheal, since that's what the community understands\nexport class InvertedRequirement extends Requirement {\n    get percentInverted() {\n        return 100 - this.percent;\n    }\n    get content() {\n        if (this._percent !== null || this.value === null) {\n            return `${this.percentInverted.toFixed(2)}%`;\n        }\n        return `${this.value.toFixed(0)}/${this.target.toFixed(0)}`; // avoid weird floating point shit\n    }\n}\n","import { __decorate, __metadata } from \"tslib\";\nimport { t } from '@lingui/macro';\nimport { Plural, Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport Module, { dependency } from 'parser/core/Module';\nimport Checklist, { Requirement, TARGET, TieredRule } from 'parser/core/modules/Checklist';\nimport Suggestions, { SEVERITY, Suggestion, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport DISPLAY_ORDER from 'parser/jobs/ast/modules/DISPLAY_ORDER';\nimport React from 'react';\nimport { ARCANA_STATUSES, PLAY } from './ArcanaGroups';\nimport ArcanaTracking from './ArcanaTracking/ArcanaTracking';\n// TODO THINGS TO TRACK:\n// Track them using Draw when they still have a minor arcana (oopsie) or a card in the spread\nconst CARD_DURATION = 15000;\nconst SLEEVE_DRAW_PLAYS_GIVEN = 3;\nconst WARN_TARGET_MAXPLAYS = 2;\nconst FAIL_TARGET_MAXPLAYS = 3;\nconst SEVERITIES = {\n    DRAW_HOLDING: {\n        1: SEVERITY.MINOR,\n        3: SEVERITY.MEDIUM,\n        6: SEVERITY.MAJOR,\n    },\n    SLEEVE_DRAW_HOLDING: {\n        1: SEVERITY.MEDIUM,\n        2: SEVERITY.MAJOR,\n    },\n};\nexport default class Draw extends Module {\n    constructor() {\n        super(...arguments);\n        this.lastDrawTimestamp = 0;\n        this.draws = 0;\n        this.drawDrift = 0;\n        this.drawTotalDrift = 0;\n        this.plays = 0;\n        this.prepullPrepped = false;\n        this.lastSleeveTimestamp = 0;\n        this.sleeveUses = 0;\n        this.sleeveDrift = 0;\n        this.sleeveTotalDrift = 0;\n        this.prepullSleeve = false;\n    }\n    init() {\n        this.addHook('cast', { abilityId: ACTIONS.DRAW.id, by: 'player' }, this.onDraw);\n        this.addHook('cast', { abilityId: ACTIONS.SLEEVE_DRAW.id, by: 'player' }, this.onSleeveDraw);\n        this.addHook('cast', { abilityId: PLAY, by: 'player' }, this.onPlay);\n        this.addHook('applybuff', { abilityId: STATUSES.SLEEVE_DRAW.id, by: 'player' }, this.onSleeveBuff);\n        this.addHook('applybuff', { abilityId: ARCANA_STATUSES, by: 'player' }, this.onPlayBuff);\n        this.addHook('complete', this._onComplete);\n    }\n    onDraw(event) {\n        this.draws++;\n        if (this.draws === 1) {\n            // The first use, take holding as from the start of the fight\n            this.drawDrift = event.timestamp - this.parser.fight.start_time;\n        }\n        else {\n            // Take holding as from the time it comes off cooldown\n            this.drawDrift = event.timestamp - this.lastDrawTimestamp - (ACTIONS.DRAW.cooldown * 1000);\n        }\n        // Keep track of total drift time not using Draw\n        if (this.drawDrift > 0) {\n            this.drawTotalDrift += this.drawDrift;\n        }\n        // update the last use\n        this.lastDrawTimestamp = event.timestamp;\n    }\n    onPlay() {\n        this.plays++;\n    }\n    onPlayBuff(event) {\n        if (event.timestamp > this.parser.fight.start_time) {\n            return;\n        }\n        this.prepullPrepped = true;\n        this.plays++;\n    }\n    onSleeveDraw(event) {\n        this.sleeveUses++;\n        if (this.sleeveUses === 1 && !this.prepullSleeve) {\n            // The first use, take holding as from the start of the fight\n            this.sleeveDrift = event.timestamp - this.parser.fight.start_time;\n        }\n        else {\n            // Take holding as from the time it comes off cooldown\n            this.sleeveDrift = event.timestamp - this.lastSleeveTimestamp - (ACTIONS.SLEEVE_DRAW.cooldown * 1000);\n        }\n        // Keep track of total drift time not using sleeve\n        if (this.sleeveDrift > 0) {\n            this.sleeveTotalDrift += this.sleeveDrift;\n        }\n        // update the last use\n        this.lastSleeveTimestamp = event.timestamp;\n    }\n    onSleeveBuff(event) {\n        if (event.timestamp > this.parser.fight.start_time) {\n            return;\n        }\n        this.prepullSleeve = true;\n        this.sleeveUses++;\n        this.lastSleeveTimestamp = this.parser.fight.start_time;\n    }\n    _onComplete() {\n        // If they stopped using Sleeve at any point in the fight, this'll calculate the drift \"accurately\"\n        if (this.parser.fight.end_time - this.lastSleeveTimestamp > (ACTIONS.SLEEVE_DRAW.cooldown * 1000)) {\n            this.sleeveTotalDrift += (this.parser.fight.end_time - (this.lastSleeveTimestamp + (ACTIONS.SLEEVE_DRAW.cooldown * 1000)));\n        }\n        // If they stopped using Draw at any point in the fight, this'll calculate the drift \"accurately\"\n        if (this.parser.fight.end_time - this.lastDrawTimestamp > (ACTIONS.DRAW.cooldown * 1000)) {\n            this.drawTotalDrift += (this.parser.fight.end_time - ((this.lastDrawTimestamp + ACTIONS.DRAW.cooldown * 1000)));\n        }\n        // Max plays:\n        // [(fight time / 30s draw time + 1) - 1 if fight time doesn't end between xx:05-xx:29s, and xx:45-xx:60s]\n        // eg 7:00: 14 -1 = 13  draws by default. 7:17 fight time would mean 14 draws, since they can play the last card at least.\n        // in otherwords, fightDuration - 15s (for the buff @ CARD_DURATION)\n        // SleeveDraw consideration:\n        // fight time / 180s sleeve time + 1: each sleeve gives an extra 3 plays 7:00 = 9 extra plays.\n        // Prepull consideration: + 1 play\n        // Begin Theoretical Max Plays calc\n        const fightDuration = this.parser.fight.end_time - this.parser.fight.start_time;\n        const maxSleeveUses = Math.floor((fightDuration - (CARD_DURATION * 2)) / (ACTIONS.SLEEVE_DRAW.cooldown * 1000)) + 1;\n        const playsFromSleeveDraw = maxSleeveUses * SLEEVE_DRAW_PLAYS_GIVEN;\n        const playsFromDraw = Math.floor((fightDuration - CARD_DURATION) / (ACTIONS.DRAW.cooldown * 1000)) + 1;\n        const theoreticalMaxPlays = playsFromDraw + playsFromSleeveDraw + 1;\n        // TODO: Include downtime calculation for each fight??\n        // TODO: Suggest how to redraw effectively (maybe in ArcanaSuggestions)\n        // Confirm they had preprepped a card on pull\n        const pullState = this.arcanaTracking.getPullState();\n        if (pullState.drawState > 0) {\n            this.prepullPrepped = true;\n        }\n        const totalCardsObtained = (this.prepullPrepped ? 1 : 0) + this.draws + (this.sleeveUses * SLEEVE_DRAW_PLAYS_GIVEN);\n        /*\n            CHECKLIST: Number of cards played\n        */\n        const warnTarget = Math.floor(((theoreticalMaxPlays - WARN_TARGET_MAXPLAYS) / theoreticalMaxPlays) * 100);\n        const failTarget = Math.floor(((theoreticalMaxPlays - FAIL_TARGET_MAXPLAYS) / theoreticalMaxPlays) * 100);\n        this.checklist.add(new TieredRule({\n            displayOrder: DISPLAY_ORDER.DRAW_CHECKLIST,\n            name: <Trans id=\"ast.draw.checklist.name\">\n\t\t\t\tPlay as many cards as possible\n\t\t\t</Trans>,\n            description: <><Trans id=\"ast.draw.checklist.description\">\n\t\t\t\tPlaying cards will let you collect seals for <ActionLink {...ACTIONS.DIVINATION}/> and contribute to party damage.\n\t\t\t</Trans>\n\t\t\t<ul>\n\t\t\t\t<li><Trans id=\"ast.draw.checklist.description.prepull\">Prepared before pull:</Trans>&nbsp;{this.prepullPrepped ? 1 : 0}/1</li>\n\t\t\t\t<li><Trans id=\"ast.draw.checklist.description.draws\">Obtained from <ActionLink {...ACTIONS.DRAW}/>:</Trans>&nbsp;{this.draws}/{playsFromDraw}</li>\n\t\t\t\t<li><Trans id=\"ast.draw.checklist.description.sleeve-draws\">Obtained from <ActionLink {...ACTIONS.SLEEVE_DRAW}/>:</Trans>&nbsp;{this.sleeveUses * SLEEVE_DRAW_PLAYS_GIVEN}/{playsFromSleeveDraw}</li>\n\t\t\t\t<li><Trans id=\"ast.draw.checklist.description.total\">Total cards obtained:</Trans>&nbsp;{totalCardsObtained}/{theoreticalMaxPlays}</li>\n\t\t\t</ul></>,\n            tiers: { [warnTarget]: TARGET.WARN, [failTarget]: TARGET.FAIL, [100]: TARGET.SUCCESS },\n            requirements: [\n                new Requirement({\n                    name: <Trans id=\"ast.draw.checklist.requirement.name\">\n\t\t\t\t\t\t<ActionLink {...ACTIONS.PLAY}/> uses\n\t\t\t\t\t</Trans>,\n                    value: this.plays,\n                    target: theoreticalMaxPlays,\n                }),\n            ],\n        }));\n        /*\n            SUGGESTION: Didn't use draw enough\n        */\n        const drawsMissed = Math.floor(this.drawTotalDrift / (ACTIONS.DRAW.cooldown * 1000));\n        if (this.draws > 0 && drawsMissed > 0) {\n            this.suggestions.add(new TieredSuggestion({\n                icon: ACTIONS.DRAW.icon,\n                content: <Trans id=\"ast.draw.suggestions.draw-uses.content\">\n\t\t\t\t\t\tUse <ActionLink {...ACTIONS.DRAW}/> as soon as its available to maximize the number of cards played.\n\t\t\t\t</Trans>,\n                tiers: SEVERITIES.DRAW_HOLDING,\n                value: drawsMissed,\n                why: <Trans id=\"ast.draw.suggestions.draw-uses.why\">\n\t\t\t\t\tAbout <Plural value={drawsMissed} one=\" # use\" other=\"# uses\"/> of <ActionLink {...ACTIONS.DRAW}/> were missed by holding it for at least a total of {this.parser.formatDuration(this.drawTotalDrift)}.\n\t\t\t\t</Trans>,\n            }));\n        }\n        /*\n            SUGGESTION: Didn't use draw at all\n        */\n        if (this.draws === 0) {\n            this.suggestions.add(new Suggestion({\n                icon: ACTIONS.DRAW.icon,\n                content: <Trans id=\"ast.draw.suggestions.draw-no-usage.content\">\n\t\t\t\t\t\tNo uses of <ActionLink {...ACTIONS.DRAW}/> at all.\n\t\t\t\t</Trans>,\n                why: <Trans id=\"ast.draw.suggestions.draw-no-usage.why\">\n\t\t\t\t\tNo draws used.\n\t\t\t\t</Trans>,\n                severity: SEVERITY.MAJOR,\n            }));\n        }\n        /*\n            SUGGESTION: Didn't use sleeve draw enough\n        */\n        const sleevesMissed = Math.floor(this.sleeveTotalDrift / (ACTIONS.SLEEVE_DRAW.cooldown * 1000));\n        if (this.sleeveUses > 0 && sleevesMissed > 0) {\n            this.suggestions.add(new TieredSuggestion({\n                icon: ACTIONS.SLEEVE_DRAW.icon,\n                content: <Trans id=\"ast.draw.suggestions.sleeve-uses.content\">\n\t\t\t\t\t\tUse <ActionLink {...ACTIONS.SLEEVE_DRAW}/> more frequently. It should be paired with every other <ActionLink {...ACTIONS.DIVINATION}/> to stack buffs at the same time. <ActionLink {...ACTIONS.LIGHTSPEED}/> can be used to weave card abilities.\n\t\t\t\t</Trans>,\n                tiers: SEVERITIES.SLEEVE_DRAW_HOLDING,\n                value: sleevesMissed,\n                why: <Trans id=\"ast.draw.suggestions.sleeve-uses.why\">\n\t\t\t\t\tAbout <Plural value={sleevesMissed} one=\" # use\" other=\"# uses\"/> of <ActionLink {...ACTIONS.SLEEVE_DRAW}/> were missed by holding it for at least a total of {this.parser.formatDuration(this.sleeveTotalDrift)}.\n\t\t\t\t</Trans>,\n            }));\n        }\n        /*\n            SUGGESTION: Didn't use sleeve draw at all\n        */\n        if (this.sleeveUses === 0) {\n            this.suggestions.add(new Suggestion({\n                icon: ACTIONS.SLEEVE_DRAW.icon,\n                content: <Trans id=\"ast.draw.suggestions.sleeve-no-usage.content\">\n\t\t\t\t\t\tNo uses of <ActionLink {...ACTIONS.SLEEVE_DRAW}/> at all.\n\t\t\t\t\t\tIt should be paired with every other <ActionLink {...ACTIONS.DIVINATION}/> to stack buffs at the same time. <ActionLink {...ACTIONS.LIGHTSPEED}/> can be used to weave card abilities.\n\t\t\t\t</Trans>,\n                why: <Trans id=\"ast.draw.suggestions.sleeve-no-usage.why\">\n\t\t\t\t\tNo sleeve draws used.\n\t\t\t\t</Trans>,\n                severity: SEVERITY.MAJOR,\n            }));\n        }\n    }\n}\nDraw.handle = 'draw';\nDraw.title = t('ast.draw.title') `Draw`;\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Checklist)\n], Draw.prototype, \"checklist\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], Draw.prototype, \"suggestions\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", ArcanaTracking)\n], Draw.prototype, \"arcanaTracking\", void 0);\n","import { __decorate, __metadata } from \"tslib\";\nimport { Trans } from '@lingui/react';\nimport { ActionLink, StatusLink } from 'components/ui/DbLink';\nimport { getDataBy } from 'data';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport Module, { dependency } from 'parser/core/Module';\nimport Suggestions, { SEVERITY, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport React from 'react';\nimport Sect from './Sect';\nconst SEVERITY_MOD = {\n    MINOR: 0.1,\n    MEDIUM: 0.3,\n    MAJOR: 0.5,\n};\n// Lifted from WHM benison and adapted to AST and TSX\nexport default class CelestialOpposition extends Module {\n    constructor() {\n        super(...arguments);\n        this.lastUse = 0;\n        this.uses = 0;\n        this.totalHeld = 0;\n    }\n    init() {\n        this.addHook('cast', { abilityId: ACTIONS.CELESTIAL_OPPOSITION.id, by: 'player' }, this.onCast);\n        this.addHook('applybuff', { abilityId: [STATUSES.DIURNAL_SECT.id, STATUSES.NOCTURNAL_SECT.id], by: 'player' }, this.onSect);\n        this.addHook('complete', this.onComplete);\n    }\n    onCast(event) {\n        this.uses++;\n        if (this.lastUse === 0) {\n            this.lastUse = this.parser.fight.start_time;\n        }\n        const held = event.timestamp - this.lastUse - (ACTIONS.CELESTIAL_OPPOSITION.cooldown * 1000);\n        if (held > 0) {\n            this.totalHeld += held;\n        }\n        // update the last use\n        this.lastUse = event.timestamp;\n    }\n    onSect(event) {\n        this.activeSect = getDataBy(STATUSES, 'id', event.ability.guid);\n    }\n    onComplete() {\n        const holdDuration = this.uses === 0 ? this.parser.fightDuration : this.totalHeld;\n        const usesMissed = Math.floor(holdDuration / (ACTIONS.CELESTIAL_OPPOSITION.cooldown * 1000));\n        const fightDuration = this.parser.fight.end_time - this.parser.fight.start_time;\n        const maxUses = (fightDuration / (ACTIONS.CELESTIAL_OPPOSITION.cooldown * 1000)) - 1;\n        const WASTED_USE_TIERS = {\n            [maxUses * SEVERITY_MOD.MINOR]: SEVERITY.MINOR,\n            [maxUses * SEVERITY_MOD.MEDIUM]: SEVERITY.MEDIUM,\n            [maxUses * SEVERITY_MOD.MAJOR]: SEVERITY.MAJOR,\n        };\n        const suggestContentDiurnal = <Trans id=\"ast.celestial-opposition.suggestion.content.diurnal\">\n\t\t\t\tUse <ActionLink {...ACTIONS.CELESTIAL_OPPOSITION}/> more frequently. In <StatusLink {...STATUSES.DIURNAL_SECT}/>, the heal and regen combined add up to the same potency of a <ActionLink {...ACTIONS.BENEFIC_II}/> on each player it reaches.\n\t\t\t\tTrusting the regens to top off the party HP will save MP and GCDs on healing.\n\t\t\t</Trans>;\n        const suggestContentNoct = <Trans id=\"ast.celestial-opposition.suggestion.content.noct\">\n\t\t\t\tUse <ActionLink {...ACTIONS.CELESTIAL_OPPOSITION}/> more frequently. In <StatusLink {...STATUSES.NOCTURNAL_SECT}/>, the shield is the same potency as from <ActionLink {...ACTIONS.ASPECTED_HELIOS}/>,\n\t\t\t\tso it can save MP and GCDs casting it. Since shields last 30 seconds it can be cast much earlier than incoming damage and allow the cooldown to refresh sooner.\n\t\t\t</Trans>;\n        const content = this.activeSect && this.activeSect.id === STATUSES.NOCTURNAL_SECT.id ? suggestContentNoct : suggestContentDiurnal;\n        if (usesMissed > 1 || this.uses === 0) {\n            this.suggestions.add(new TieredSuggestion({\n                icon: ACTIONS.CELESTIAL_OPPOSITION.icon,\n                content,\n                tiers: WASTED_USE_TIERS,\n                value: this.uses === 0 ? 100 : usesMissed,\n                why: <Trans id=\"ast.celestial-opposition.suggestion.why\">\n\t\t\t\t\tAbout {usesMissed} uses of <ActionLink {...ACTIONS.CELESTIAL_OPPOSITION}/> were missed by holding it for at least a total of {this.parser.formatDuration(holdDuration)}.\n\t\t\t\t</Trans>,\n            }));\n        }\n    }\n}\nCelestialOpposition.handle = 'celestialopposition';\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], CelestialOpposition.prototype, \"suggestions\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Sect)\n], CelestialOpposition.prototype, \"sect\", void 0);\n","import { Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport { CooldownDowntime } from 'parser/core/modules/CooldownDowntime';\nimport React from 'react';\nexport default class OGCDDowntime extends CooldownDowntime {\n    constructor() {\n        super(...arguments);\n        this.trackedCds = [\n            {\n                cooldowns: [ACTIONS.DIVINATION],\n                allowedAverageDowntime: 2500,\n                firstUseOffset: 12500,\n            },\n        ];\n        this.target = 100;\n        this.checklistName = <Trans id=\"ast.ogcd-downtime.divination.name\">Use Divination</Trans>;\n        this.checklistDescription = <Trans id=\"ast.ogcd-downtime.divination.description\"><ActionLink {...ACTIONS.DIVINATION}/> provides Astrologian with a strong amount of raid DPS when stacked together with arcanum.\n\t\t\tDamage percentage bonuses stack multiplicatively, so it's most optimal to stack it with cards from <ActionLink {...ACTIONS.MINOR_ARCANA}/>.\n\t\t\tTry to time the usage to match raid buffs and high output phases of other party members - it's more important to use it on time rather than hold it in an attempt to have 3 different seals.\n\t</Trans>;\n    }\n}\n","import CoreStatuses from 'parser/core/modules/Statuses';\nimport STATUSES from 'data/STATUSES';\nexport default class Statuses extends CoreStatuses {\n}\nStatuses.statusesStackMapping = {\n    [STATUSES.GIANT_DOMINANCE.id]: STATUSES.EARTHLY_DOMINANCE.id,\n};\n","import { __decorate, __metadata } from \"tslib\";\nimport { Plural, Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport Module, { dependency } from 'parser/core/Module';\nimport Combatants from 'parser/core/modules/Combatants';\nimport Cooldowns from 'parser/core/modules/Cooldowns';\nimport Suggestions, { SEVERITY, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport React from 'react';\nconst SEVERITIES = {\n    WASTED_ST_HEAL_TIERS: {\n        1: SEVERITY.MINOR,\n        10: SEVERITY.MEDIUM,\n    },\n};\nconst GCD_ST_HEAL = [\n    ACTIONS.BENEFIC.id,\n    ACTIONS.BENEFIC_II.id,\n];\n// Ripped off from WHM and converted to TSX\nexport default class Synastry extends Module {\n    constructor() {\n        super(...arguments);\n        this.nonSynastryHeals = 0;\n    }\n    init() {\n        this.addHook('cast', { abilityId: GCD_ST_HEAL, by: 'player' }, this.onSingleTargetHealCast);\n        this.addHook('complete', this.onComplete);\n    }\n    onSingleTargetHealCast(event) {\n        // Ignore if Synastry is still on CD or we already have it up\n        if (this.cooldowns.getCooldownRemaining(ACTIONS.SYNASTRY.id) > 0) {\n            return;\n        }\n        this.nonSynastryHeals++;\n    }\n    onComplete() {\n        this.suggestions.add(new TieredSuggestion({\n            icon: ACTIONS.SYNASTRY.icon,\n            content: <Trans id=\"ast.synastry.suggestion.content\">\r\n\t\t\t\tTry to use <ActionLink {...ACTIONS.SYNASTRY}/> if you need to cast a single-target GCD heal. The GCD heal itself is already an efficiency loss, so it's better to make it as strong as possible if Synastry is not needed soon.\r\n\t\t\t</Trans>,\n            tiers: SEVERITIES.WASTED_ST_HEAL_TIERS,\n            value: this.nonSynastryHeals,\n            why: <Trans id=\"ast.synastry.suggestion.why\">\r\n\t\t\t\t<Plural value={this.nonSynastryHeals} one=\"# single-target GCD heal was cast\" other=\"# single-target GCD heals were cast\"/> without synastry even though it was available.\r\n\t\t\t</Trans>,\n        }));\n    }\n}\nSynastry.handle = 'synastry';\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Combatants)\n], Synastry.prototype, \"combatants\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], Synastry.prototype, \"suggestions\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Cooldowns)\n], Synastry.prototype, \"cooldowns\", void 0);\n","import Combust from './Combust';\nimport Cooldowns from './Cooldowns';\n// import Draw from './Draw'\nimport EarthlyStar from './EarthlyStar';\nimport Lightspeed from './Lightspeed';\nimport LucidDreaming from './LucidDreaming';\nimport ArcanaUndrawUsage from './ArcanaUndrawUsage';\nimport Horoscope from './Horoscope';\nimport { ArcanaTracking, ArcanaSuggestions } from './ArcanaTracking';\nimport Sect from './Sect';\nimport CelestialIntersection from './CelestialIntersection';\nimport Overheal from './Overheal';\nimport Draw from './Draw';\nimport CelestialOpposition from './CelestialOpposition';\nimport DivinationDowntime from './DivinationDowntime';\nimport Statuses from './Statuses';\nimport Synastry from './Synastry';\nexport default [\n    Cooldowns,\n    Combust,\n    Lightspeed,\n    EarthlyStar,\n    LucidDreaming,\n    Draw,\n    ArcanaUndrawUsage,\n    Horoscope,\n    ArcanaTracking,\n    ArcanaSuggestions,\n    Sect,\n    CelestialIntersection,\n    Overheal,\n    DivinationDowntime,\n    CelestialOpposition,\n    Statuses,\n    Synastry,\n];\n"],"sourceRoot":""}
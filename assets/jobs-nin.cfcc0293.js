(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1285:function(e,t,n){"use strict";var s=n(0),i=n.n(s),r=n(37);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c={MORBID:0,MAJOR:1,MEDIUM:2,MINOR:3,IGNORE:void 0};class l{constructor(e){this.icon="",this.content="",this.why="",this.severity=c.MEDIUM,Object.keys(e||{}).forEach(t=>{this[t]=e[t]})}}class u extends l{constructor(e){super(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({tiers:{},value:0,matcher:r.i},e))}get severity(){return this.matcher(this.tiers,this.value)}set severity(e){}}var d=n(2),h=n(8),m=n(26),b=n(1275),p=n(212),g=(n(128),n(1301)),O=n.n(g),_=n(29);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E={[c.MORBID]:{content:i.a.createElement(h.Trans,{id:"core.suggestions.severity.morbid"}),color:"black",icon:"times"},[c.MAJOR]:{content:i.a.createElement(h.Trans,{id:"core.suggestions.severity.major"}),color:"red",icon:"arrow up"},[c.MEDIUM]:{content:i.a.createElement(h.Trans,{id:"core.suggestions.severity.medium"}),color:"orange"},[c.MINOR]:{content:i.a.createElement(h.Trans,{id:"core.suggestions.severity.minor"}),color:"blue",icon:"arrow down"}};let w=class extends i.a.Component{constructor(){super(...arguments),this.onToggleShowMinor=(e,t)=>{const{settingsStore:n}=this.context;n.setShowMinorSuggestions(t.checked)}}render(){const e=this.context.settingsStore.showMinorSuggestions,t=this.props.suggestions.filter(t=>e||t.severity!==c.MINOR),n=this.props.suggestions.some(e=>e.severity===c.MINOR);return i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(b.a,{toggle:!0,label:i.a.createElement("label",null,i.a.createElement(h.Trans,{id:"core.suggestion.show-minor"})),defaultChecked:e,onChange:this.onToggleShowMinor,className:O.a.checkbox}),i.a.createElement("div",{className:O.a.items},t.map((e,t)=>i.a.createElement("div",{key:t,className:O.a.item},i.a.createElement("img",{src:e.icon,alt:""}),i.a.createElement("div",null,e.content,i.a.createElement("div",{className:O.a.extra},i.a.createElement(p.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({horizontal:!0},E[e.severity])),e.why)))),0===t.length&&i.a.createElement("div",{className:O.a.item},i.a.createElement("div",null,i.a.createElement("strong",null,i.a.createElement(h.Trans,{id:"core.suggestion.nothing"})),i.a.createElement("br",null),n&&i.a.createElement(h.Trans,{id:"core.suggestion.nothing-but-minor"})))))}};w.contextType=_.a,w=Object(d.b)([m.b],w);var v=w,T=n(24),A=n(217);class C extends T.c{constructor(){super(...arguments),this._suggestions=[]}add(e){e instanceof l?this._suggestions.push(e):console.error("TODO: Proper error message for passing a non-suggestion to the suggestion add handler")}output(){if(0===this._suggestions.length)return!1;const e=this._suggestions.filter(e=>e.severity!==c.IGNORE).sort((e,t)=>e.severity-t.severity);return i.a.createElement(v,{suggestions:e})}}C.handle="suggestions",C.displayOrder=A.a.SUGGESTIONS,C.displayMode=T.a.FULL,C.title={id:"core.suggestions.title",defaults:"Suggestions"},n.d(t,"d",(function(){return C})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u}))},1286:function(e,t,n){"use strict";var s=n(0),i=n.n(s),r=n(1295),o=n(37),a=n(24);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u={SUCCESS:2,WARN:1,FAIL:void 0},d=95;class h{constructor(e){this.name="",this.description=null,this.requirements=[],this.target=d,this.displayOrder=a.b.DEFAULT,Object.keys(e||{}).forEach(t=>{this[t]=e[t]})}get tier(){return Object(o.i)({[this.target]:u.SUCCESS},this.percent)}get percent(){const e=this.requirements.map(e=>e.percent);return e.length?r.a.mean(e):0}}class m extends h{constructor(e){super(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({tiers:{},matcher:o.i},e))}get tier(){return this.matcher(this.tiers,this.percent)}}var b=n(93),p=n(1274),g=n(1474),O=n(1306),_=n.n(O);const y={[u.SUCCESS]:{text:"text-success",color:"green",icon:"checkmark",autoExpand:!1},[u.WARN]:{text:"text-warning",color:"yellow",icon:"warning sign",autoExpand:!0},[u.FAIL]:{text:"text-error",color:"red",icon:"remove",autoExpand:!0}};class f extends s.Component{render(){const{rules:e}=this.props;if(!e.length)return!1;const t=[],n=e.map((e,n)=>{const s=y[e.tier];let r=e.percent;return r=Math.min(r,100),s.autoExpand&&t.push(n),{key:n,title:{className:_.a.title,content:i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{name:s.icon,className:s.text}),e.name,i.a.createElement("div",{className:_.a.percent+" "+s.text},r.toFixed(1),"%",i.a.createElement(p.a,{percent:r,className:_.a.progress,size:"small",color:s.color})))},content:{content:i.a.createElement(i.a.Fragment,null,e.description&&i.a.createElement("div",{className:_.a.description},i.a.createElement(b.a,{name:"info",size:"large"}),i.a.createElement("p",null,e.description)),i.a.createElement("ul",null,e.requirements.map((e,t)=>i.a.createElement("li",{key:t},e.name,": ",e.content))))}}});return i.a.createElement(g.a,{exclusive:!1,panels:n,defaultActiveIndex:t,styled:!0,fluid:!0})}}var E=f,w=n(217);class v extends a.c{constructor(){super(...arguments),this._rules=[]}add(e){e instanceof h?this._rules.push(e):console.error("TODO: This error message")}output(){const e=[...this._rules];return e.sort((e,t)=>e.displayOrder-t.displayOrder),i.a.createElement(E,{rules:e})}}v.handle="checklist",v.title={id:"core.checklist.title",defaults:"Checklist"},v.displayOrder=w.a.CHECKLIST,v.displayMode=a.a.FULL;class T{constructor(e){this.name="",this._percent=null,this.value=null,this.target=100,this.overrideDisplay=null,Object.keys(e||{}).forEach(t=>{this[t]=e[t]})}get content(){return null!==this.overrideDisplay?this.overrideDisplay:null!==this._percent||null===this.value?"".concat(this.percent.toFixed(2),"%"):"".concat(this.value.toFixed(0),"/").concat(this.target.toFixed(0))}get percent(){return null===this._percent?null===this.value?0:100*(("function"==typeof this.value?this.value():this.value)||0)/this.target:("function"==typeof this._percent?this._percent():this._percent)||0}set percent(e){this._percent=e}}n.d(t,"e",(function(){return v})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return T}))},1287:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var s=n(4),i=n.n(s),r=n(18),o=n(55),a=n(10),c=n(0),l=n.n(c),u=n(1300),d=n.n(u);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class b extends c.Component{render(){const{events:e}=this.props;return l.a.createElement("div",{className:d.a.container},e.map((e,t)=>{const n=Object(o.a)(a.b,"id",e.ability.guid);if(!n||n.autoAttack)return;if(!n.icon)return console.error(e,"event ability has no icon"),!1;const s=[d.a.link,{[d.a.ogcd]:!n.onGcd}],c=n.onGcd?d.a.gcdSize:d.a.ogcdSize,u=n.id>=a.a?r.b:r.a;return l.a.createElement("div",{key:t,className:i()(...s)},l.a.createElement(u,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({showName:!1,iconSize:c},n)))}))}}},1288:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var s=n(8),i=n(1287),r=n(0),o=n.n(r),a=n(1470),c=n(1243),l=n(37);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends o.a.Component{render(){const{targets:e,notes:t,data:n,onGoto:i,headerTitle:r}=this.props;return o.a.createElement(a.a,{compact:!0,unstackable:!0,celled:!0},o.a.createElement(a.a.Header,null,o.a.createElement(a.a.Row,null,o.a.createElement(a.a.HeaderCell,{collapsing:!0},o.a.createElement("strong",null,o.a.createElement(s.Trans,{id:"core.ui.rotation-table.header.time"}))),(e||[]).map((e,t)=>o.a.createElement(a.a.HeaderCell,{key:"target_header_".concat(t),textAlign:"center",collapsing:!0},o.a.createElement("strong",null,e.header))),o.a.createElement(a.a.HeaderCell,null,o.a.createElement("strong",null,r||o.a.createElement(s.Trans,{id:"core.ui.rotation-table.header.rotation"}))),(t||[]).map((e,t)=>o.a.createElement(a.a.HeaderCell,{key:"note_header_".concat(t),textAlign:"center",collapsing:!0},o.a.createElement("strong",null,e.header))))),o.a.createElement(a.a.Body,null,n.map(n=>o.a.createElement(m.Row,d({key:n.start,onGoto:i,targets:e||[],notes:t||[]},n)))))}}m.targetAccessorResolver=(e,t)=>"string"==typeof t.accessor&&null!=e.targetsData?e.targetsData[t.accessor]:"function"==typeof t.accessor?t.accessor(e):{actual:0,expected:0},m.notesAccessorResolver=(e,t)=>"string"==typeof t.accessor&&null!=e.notesMap?e.notesMap[t.accessor]:"function"==typeof t.accessor?t.accessor(e):null,m.TargetCell=e=>{let{actual:t,expected:n}=e;return o.a.createElement(a.a.Cell,{textAlign:"center",positive:void 0!==n&&t>=n,negative:void 0!==n&&t<n},t,"/",void 0===n?"-":n)},m.Row=e=>{let{onGoto:t,targets:n,notes:s,notesMap:r,start:u,end:h,targetsData:b,rotation:p}=e;return o.a.createElement(a.a.Row,null,o.a.createElement(a.a.Cell,{textAlign:"center"},o.a.createElement("span",{style:{marginRight:5}},Object(l.d)(u/1e3)),"function"==typeof t&&o.a.createElement(c.a,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:()=>t(u,h)})),n.map(e=>m.targetAccessorResolver({start:u,end:h,targetsData:b,rotation:p},e)).map((e,t)=>o.a.createElement(m.TargetCell,d({key:"target_".concat(t)},e))),o.a.createElement(a.a.Cell,null,o.a.createElement(i.a,{events:p})),s.map(e=>m.notesAccessorResolver({start:u,end:h,targetsData:b,notesMap:r,rotation:p},e)).map((e,t)=>o.a.createElement(a.a.Cell,{key:"notes_".concat(t),textAlign:"center"},e)))}},1290:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var s=n(218),i=n.n(s),r=n(49),o=n.n(r),a=n(15),c=n.n(a),l=n(367),u=n.n(l),d=n(24),h=n(80),m=n(0),b=n.n(m);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class O extends d.c{constructor(){super(...arguments),this._cooldownGroups={},this._currentAction=null,this._cooldowns={},this._groups={},this._cooldownGroups=u()(this.data.actions,"cooldownGroup"),this._buildGroups(this.constructor.cooldownOrder),this.addHook("begincast",{by:"player"},this._onBeginCast),this.addHook("cast",{by:"player"},this._onCast),this.addHook("complete",this._onComplete)}_buildGroups(e){if(!e)return;return e.map((t,n)=>{const s=-(e.length-n);if("number"==typeof t){const e=this.data.getAction(t);return this._buildGroup({id:t,content:e&&e.name,order:s}),t}const i=this._buildGroup({id:t.name,content:t.name,order:s});return t.merge?t.actions.forEach(e=>{this._groups[e]=i}):i.nestedGroups=this._buildGroups(t.actions),t.name})}_buildGroup(e){const t=new h.c(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({showNested:!1},e));return this.timeline.addGroup(t),this._groups[e.id]=t,t}_onBeginCast(e){const t=this.data.getAction(e.ability.guid);t&&null!=t.cooldown&&(this._currentAction=t,this.startCooldown(t.id),c()(t.cooldownGroup)||this.startCooldownGroup(t.id,t.cooldownGroup))}_onCast(e){const t=this.data.getAction(e.ability.guid);if(!t||null==t.cooldown)return;const n=this._currentAction&&this._currentAction.id===t.id;this._currentAction=null,n||(this.startCooldown(t.id),c()(t.cooldownGroup)||this.startCooldownGroup(t.id,t.cooldownGroup))}_onComplete(){Object.keys(this._cooldowns).forEach(e=>{this._addToTimeline(parseInt(e,10))})}_addToTimeline(e){const t=this._cooldowns[e];if(!t)return!1;t.current&&(t.history.push(t.current),t.current=null);const n=this.data.getAction(e);return!(!n||n.onGcd)&&(this._groups[e]||this._buildGroup({id:e,content:n.name,order:e}),t.history.forEach(t=>{t.shared||this._groups[e].addItem(new h.b({type:"background",start:t.timestamp-this.parser.fight.start_time,length:t.length,content:b.a.createElement("img",{src:n.icon,alt:n.name})}))}),!0)}getCooldown(e){return this._cooldowns[e]||{current:null,history:[]}}startCooldownGroup(e,t){o()(this._cooldownGroups,t,[]).map(e=>e.id).filter(t=>t!==e).forEach(e=>this.startCooldown(e,!0))}startCooldown(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.data.getAction(e);if(!n)return;const s=this.getCooldown(e);if(s.current){const t=this.parser.currentTimestamp-this.parser.fight.start_time;s.current.timestamp<this.parser.fight.start_time&&s.current.length>t?this.resetCooldown(e):s.history.push(s.current)}s.current={timestamp:this.parser.currentTimestamp,length:1e3*n.cooldown,shared:t,invulnTime:0},this._cooldowns[e]=s}reduceCooldown(e,t){const n=this.getCooldown(e),s=this.parser.currentTimestamp;n.current&&n.current.timestamp+n.current.length<s&&(n.history.push(n.current),n.current=null),null!==n.current&&(n.current.length-=1e3*t,n.current.timestamp+n.current.length<s&&this.resetCooldown(e))}setInvulnTime(e){const t=this.getCooldown(e);let n=this.parser.fight.start_time,s={},i=!0;for(const e of t.history)i&&(n=e.timestamp+e.length,i=!1,s=e),s.invulnTime=this.downtime.getDowntime(n,e.timestamp),n=e.timestamp+e.length,s=e}resetCooldown(e){const t=this.getCooldown(e);null!==t.current&&(t.current.length=this.parser.currentTimestamp-t.current.timestamp,t.history.push(t.current),t.current=null)}getCooldownRemaining(e){const t=this.getCooldown(e).current;return t?t.length-(this.parser.currentTimestamp-t.timestamp):0}getTimeOnCooldown(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=this.getCooldown(e),i=this.parser.currentTimestamp;return t?this.setInvulnTime(e):s.history.map(e=>{e.invulnTime=0}),s.history.reduce((e,t)=>e+this.getAdjustedTimeOnCooldown(t,i,n),s.current?this.getAdjustedTimeOnCooldown(s.current,i,n):0)}getAdjustedTimeOnCooldown(e,t,n){const s=t-e.timestamp,r=e.length+e.invulnTime+n;return i()(s,0,r)}get used(){return Object.keys(this._cooldowns)}}O.handle="cooldowns",O.dependencies=["data","downtime","timeline"],O.cooldownOrder=[]},1291:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var s=n(125),i=n.n(s),r=n(0),o=n.n(r),a=n(369);const c={aspectRatio:3,scales:{xAxes:[{type:"time",time:{displayFormats:{minute:"m:ss",second:"m:ss",millisecond:"m:ss.SS"},tooltipFormat:"mm:ss.SSS"}}]}};class l extends r.PureComponent{render(){const e=i()({},c,this.props.options||{});return o.a.createElement(a.a,{data:this.props.data,options:e,width:e.aspectRatio,height:1})}}},1293:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var s=n(368),i=n.n(s),r=n(365),o=n.n(r),a=n(2),c=n(8),l=n(1288),u=n(24),d=n(217),h=n(1285),m=n(80),b=n(0),p=n.n(b),g=n(366);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const y=2.5,f=15e3,E={uncomboed:p.a.createElement(c.Trans,{id:"core.combos.issuetypenames.uncomboed"}),combobreak:p.a.createElement(c.Trans,{id:"core.combos.issuetypenames.combobreak"}),failedcombo:p.a.createElement(c.Trans,{id:"core.combos.issuetypenames.failed"})};class w extends u.c{constructor(){super(...arguments),this.lastGcdTime=this.parser.fight.start_time,this.currentComboChain=[],this.issues=[]}init(){this.addHook("aoedamage",{by:"player"},this.onCast),this.addHook("complete",this.onComplete)}get lastComboEvent(){return o()(this.currentComboChain)||null}get lastAction(){const e=this.lastComboEvent;return e?e.ability.guid:null}get comboBreakers(){return this.issues.filter(e=>"combobreak"===e.type).map(e=>e.event)}get uncomboedGcds(){return this.issues.filter(e=>"uncomboed"===e.type).map(e=>e.event)}fabricateComboEvent(e){const t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{type:"combo"});delete t.timestamp,this.parser.fabricateEvent(t)}recordBrokenCombo(e,t){this.isAllowableComboBreak(e,t)||this.issues.push({type:"combobreak",event:e,context:t}),this.currentComboChain=[]}recordUncomboedGcd(e){this.issues.push({type:"uncomboed",event:e,context:[]}),this.currentComboChain=[]}recordFailedCombo(e,t){this.issues.push({type:"failedcombo",event:e,context:t}),this.currentComboChain=[]}checkCombo(e,t){if(null==this.lastAction){if(e.start)return this.fabricateComboEvent(t),!0;if(e.from)return this.recordUncomboedGcd(t),!1}if(e.start)return this.recordBrokenCombo(t,this.currentComboChain),!0;if(e.from){if((Array.isArray(e.from)?e.from:[e.from]).includes(this.lastAction))return this.fabricateComboEvent(t),!e.end}return this.recordBrokenCombo(t,this.currentComboChain),!1}onCast(e){const t=this.data.getAction(e.ability.guid);if(t){if(t.onGcd&&(t.combo||t.breaksCombo)&&(e.timestamp-this.lastGcdTime>f&&(this.currentComboChain=[]),this.lastGcdTime=e.timestamp),t.combo){if(!e.successfulHit)return void this.recordFailedCombo(e,this.currentComboChain);this.checkCombo(t.combo,e)?this.currentComboChain.push(e):this.currentComboChain=[]}t.breaksCombo&&null!==this.lastAction&&this.recordBrokenCombo(e,this.currentComboChain)}}onComplete(){this.addJobSpecificSuggestions(this.comboBreakers,this.uncomboedGcds)||this.suggestions.add(new h.c({icon:this.constructor.suggestionIcon,content:p.a.createElement(c.Trans,{id:"core.combos.content",components:[p.a.createElement("p",null),p.a.createElement("p",null)]}),tiers:{1:h.a.MINOR,2:h.a.MEDIUM,4:h.a.MAJOR},value:this.issues.length,why:p.a.createElement(c.Trans,{id:"core.combos.why",values:{0:this.issues.length}})}))}addJobSpecificSuggestions(e,t){return!1}isAllowableComboBreak(e,t){return!1}output(){if(this.issues.length<=0)return!1;const e=this.parser.fight.start_time,t=this.issues.sort((e,t)=>e.event.timestamp-t.event.timestamp).map(t=>{var n,s;const r=[...t.context||[],t.event],a=i()(r),c=o()(r),l=this.data.getAction(a.ability.guid),u=this.data.getAction(c.ability.guid);return{start:a.timestamp-e+(null!==(n=null==l?void 0:l.cooldown)&&void 0!==n?n:y),end:c.timestamp-e+(null!==(s=null==u?void 0:u.cooldown)&&void 0!==s?s:y),rotation:r,notesMap:{reason:p.a.createElement("span",{style:{whiteSpace:"nowrap"}},E[t.type])}}});return p.a.createElement(l.a,{notes:[{header:p.a.createElement(c.Trans,{id:"core.combos.rotationtable.header.reason"}),accessor:"reason"}],data:t,onGoto:this.timeline.show})}}w.handle="combos",w.title={id:"core.combos.title",defaults:"Combo Issues"},w.displayOrder=d.a.COMBOS,w.suggestionIcon="https://xivapi.com/i/000000/000405.png",Object(a.b)([u.d,Object(a.d)("design:type",g.a)],w.prototype,"data",void 0),Object(a.b)([u.d,Object(a.d)("design:type",h.d)],w.prototype,"suggestions",void 0),Object(a.b)([u.d,Object(a.d)("design:type",m.d)],w.prototype,"timeline",void 0)},1294:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var s=n(8),i=n(0),r=n.n(i),o=n(1474),a=n(1287),c=n(51),l=n(24),u=n(1285),d=n(37);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=2,p={0:2,1:1,2.5:0},g={1:u.a.MEDIUM,5:u.a.MAJOR};class O extends l.c{constructor(){super(...arguments),this._weaves=[],this._ongoingCastEvent=null,this._leadingGcdEvent=null,this._trailingGcdEvent=null,this._badWeaves=[],this.addHook("begincast",{by:"player"},this._onBeginCast),this.addHook("cast",{by:"player"},this._onCast),this.addHook("complete",this._onComplete)}_onBeginCast(e){this._ongoingCastEvent=e}_onCast(e){const t=this.data.getAction(e.ability.guid);t&&!t.autoAttack&&(this.isOgcd(t)?this._weaves.push(e):(this._ongoingCastEvent&&this._ongoingCastEvent.ability.guid===t.id?this._trailingGcdEvent=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{timestamp:this._ongoingCastEvent.timestamp}):this._trailingGcdEvent=e,this._ongoingCastEvent=null,this._saveIfBad(),this._leadingGcdEvent=this._trailingGcdEvent,this._weaves=[]))}_onComplete(){this._leadingGcdEvent&&this._saveIfBad();const e=this._badWeaves;this.suggestions.add(new u.c({icon:"https://xivapi.com/i/001000/001785.png",content:r.a.createElement(s.Trans,{id:"core.weaving.content",components:[r.a.createElement("a",{href:"javascript:void(0);",onClick:()=>this.parser.scrollTo(this.constructor.handle)}),r.a.createElement(c.a,{message:this.constructor.title})]}),why:r.a.createElement(s.Trans,{id:"core.weaving.why",values:{0:e.length}}),tiers:g,value:e.length}))}_saveIfBad(){const e=this._leadingGcdEvent||{timestamp:this.parser.fight.start_time},t=this._trailingGcdEvent.timestamp-e.timestamp-this.invuln.getUntargetableUptime("all",e.timestamp,this._trailingGcdEvent.timestamp),n={leadingGcdEvent:e,trailingGcdEvent:this._trailingGcdEvent,gcdTimeDiff:t,weaves:this._weaves};0!==n.weaves.length&&this.isBadWeave(n)&&this._badWeaves.push(n)}isOgcd(e){return!e.onGcd&&!e.autoAttack}isBadWeave(e,t){const n=e.weaves.filter(e=>!this.invuln.isUntargetable("all",e.timestamp)).length;if(!t)if(e.leadingGcdEvent.ability){const n=this.castTime.forEvent(e.leadingGcdEvent),s=Object(d.i)(p,n);t=void 0!==s?s:b}else t=b;const s=this.speedmod.get(this.parser.timestamp),i=this.gcd.getEstimate()*s;return e.gcdTimeDiff>i&&n>t}output(){const e=this._badWeaves;if(0===e.length)return!1;const t=e.map(e=>({key:e.leadingGcdEvent.timestamp,title:{content:r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,this.parser.formatTimestamp(e.leadingGcdEvent.timestamp))," - ",r.a.createElement(s.Trans,{id:"core.weaving.panel-count",values:{0:e.weaves.length}})," (",this.parser.formatDuration(e.gcdTimeDiff)," ",r.a.createElement(s.Trans,{id:"core.weaving.between-gcds"}),")")},content:{content:r.a.createElement(a.a,{events:[...e.leadingGcdEvent.ability?[e.leadingGcdEvent]:[],...e.weaves]})}}));return r.a.createElement(o.a,{exclusive:!1,panels:t,styled:!0,fluid:!0})}}O.handle="weaving",O.dependencies=["castTime","data","gcd","invuln","speedmod","suggestions"],O.title={id:"core.weaving.title",defaults:"Weaving Issues"}},1295:function(e,t,n){"use strict";var s=n(1473),i=n(1452),r=n(1477),o=n(1472);t.a=Object(s.a)({meanDependencies:i.a,modeDependencies:r.a,stdDependencies:o.a})},1300:function(e,t,n){e.exports={gcdSize:"40px",ogcdSize:"30px",container:"Rotation-module_container__32KS2",link:"Rotation-module_link__2T3fu",ogcd:"Rotation-module_ogcd__3oBO8"}},1301:function(e,t,n){e.exports={gutter:"20px",checkbox:"Suggestions-module_checkbox__1Z22N",items:"Suggestions-module_items__3sCkP",item:"Suggestions-module_item__1yy1-",extra:"Suggestions-module_extra__3WN2d"}},1306:function(e,t,n){e.exports={lg:"(min-width: 992px)",title:"Checklist-module_title__2ro7x",percent:"Checklist-module_percent__EKBdj",progress:"Checklist-module_progress__28lgp",description:"Checklist-module_description__3Bf5O"}},1462:function(e,t,n){"use strict";n.r(t);var s=n(1293),i=n(10);class r extends s.a{}r.suggestionIcon=i.b.SPINNING_EDGE.icon;var o=n(1290);class a extends o.a{}a.cooldownOrder=[i.b.KASSATSU.id,i.b.TEN_CHI_JIN.id,i.b.TRICK_ATTACK.id,i.b.DREAM_WITHIN_A_DREAM.id,i.b.ASSASSINATE.id,i.b.BUNSHIN.id,i.b.BHAVACAKRA.id,i.b.MUG.id,i.b.MEISUI.id,i.b.HELLFROG_MEDIUM.id,i.b.SHUKUCHI.id,i.b.SHADE_SHIFT.id];var c=n(8),l=n(0),u=n.n(l),d=n(1281),h=n(93),m=n(55),b=n(18),p=n(24),g=n(1286),O=n(1285),_={HUTON:1,SHADOW_FANG:2};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const w=7e4,v={high:65e3,low:59e3},T={[i.b.ARMOR_CRUSH.id]:3e4,[i.b.HAKKE_MUJINSATSU.id]:1e4},A=1e4,C={};class j extends p.c{constructor(){super(...arguments),this._currentDuration={high:v.high-(C[this.parser.fight.boss]||0),low:v.low-(C[this.parser.fight.boss]||0)},this._clippedDuration={high:0,low:0},this._downtime={high:0,low:0},this._futileArmorCrushes={high:0,low:0},this._lastEventTime=this.parser.fight.start_time,this.addHook("cast",{by:"player",abilityId:i.b.HUTON.id},this._onHutonCast),this.addHook("combo",{by:"player",abilityId:Object.keys(T).map(Number)},this._onHutonExtension),this.addHook("death",{to:"player"},this._onDeath),this.addHook("raise",{to:"player"},this._onRaise),this.addHook("complete",this._onComplete)}_handleHutonRecast(e,t){0===this._currentDuration[e]&&(this._downtime[e]+=t),this._currentDuration[e]=w}_onHutonCast(e){const t=e.timestamp-this._lastEventTime;this._handleHutonRecast("high",t),this._handleHutonRecast("low",t),this._lastEventTime=e.timestamp}_handleHutonExtension(e,t,n){let s=this._currentDuration[e]-n;s<=0?(this._currentDuration[e]=0,this._downtime[e]-=s,this._futileArmorCrushes[e]++):(s+=t,this._clippedDuration[e]+=Math.max(s-w,0),this._currentDuration[e]=Math.min(s,w))}_onHutonExtension(e){const t=e.timestamp-this._lastEventTime,n=T[Object(m.a)(i.b,"id",e.ability.guid)];this._handleHutonExtension("high",n,t),this._handleHutonExtension("low",n,t),this._lastEventTime=e.timestamp}_onDeath(){this._currentDuration.high=0,this._currentDuration.low=0}_onRaise(e){this._lastEventTime=e.timestamp}_getHutonAverages(){return this._downtime.low-this._downtime.high>A?{clippedDuration:this._clippedDuration.high,downtime:this._downtime.high,futileArmorCrushes:this._futileArmorCrushes.high}:{clippedDuration:Math.round((this._clippedDuration.high+this._clippedDuration.low)/2),downtime:Math.round((this._downtime.high+this._downtime.low)/2),futileArmorCrushes:Math.round((this._futileArmorCrushes.high+this._futileArmorCrushes.low)/2)}}_onComplete(){const{clippedDuration:e,downtime:t,futileArmorCrushes:n}=this._getHutonAverages(),s=this.parser.fightDuration-this.death.deadTime,r=(s-t)/s*100;this.checklist.add(new g.b({name:u.a.createElement(c.Trans,{id:"nin.huton.checklist.name"}),description:u.a.createElement(l.Fragment,null,u.a.createElement(c.Trans,{id:"nin.huton.checklist.description",components:[u.a.createElement(b.a,f({},i.b.HUTON)),u.a.createElement("em",null)]}),u.a.createElement(d.a,{warning:!0,icon:!0},u.a.createElement(h.a,{name:"warning sign"}),u.a.createElement(d.a.Content,null,u.a.createElement(c.Trans,{id:"nin.huton.checklist.description.warning"})))),displayOrder:_.HUTON,requirements:[new g.a({name:u.a.createElement(c.Trans,{id:"nin.huton.checklist.requirement.name",components:[u.a.createElement(b.a,f({},i.b.HUTON))]}),percent:()=>r})],target:99})),this.suggestions.add(new O.c({icon:i.b.HUTON.icon,content:u.a.createElement(c.Trans,{id:"nin.huton.suggestions.clipping.content",components:[u.a.createElement(b.a,f({},i.b.ARMOR_CRUSH)),u.a.createElement(b.a,f({},i.b.HUTON))]}),tiers:{5e3:O.a.MINOR,1e4:O.a.MEDIUM,2e4:O.a.MAJOR},value:e,why:u.a.createElement(c.Trans,{id:"nin.huton.suggestions.clipping.why",values:{0:this.parser.formatDuration(e)}})})),this.suggestions.add(new O.c({icon:i.b.ARMOR_CRUSH.icon,content:u.a.createElement(c.Trans,{id:"nin.huton.suggestions.futile-ac.content",components:[u.a.createElement(b.a,f({},i.b.ARMOR_CRUSH)),u.a.createElement(b.a,f({},i.b.HUTON))]}),tiers:{1:O.a.MINOR,2:O.a.MEDIUM},value:n,why:u.a.createElement(c.Trans,{id:"nin.huton.suggestions.futile-ac.why",values:{futileArmorCrushes:n}})}))}}j.handle="huton",j.dependencies=["checklist","death","suggestions"];var D=n(61);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class M extends p.c{constructor(){super(...arguments),this._kassatsuSpent=!1,this._kassatsuWastes=0,this._kassatsuUses={[i.b.FUMA_SHURIKEN.id]:0,[i.b.GOKA_MEKKYAKU.id]:0,[i.b.RAITON.id]:0,[i.b.HYOSHO_RANRYU.id]:0,[i.b.HUTON.id]:0,[i.b.DOTON.id]:0,[i.b.SUITON.id]:0,[i.b.RABBIT_MEDIUM.id]:0},this.addHook("cast",{by:"player",abilityId:Object.keys(this._kassatsuUses).map(Number)},this._onNinjutsuCast),this.addHook("removebuff",{by:"player",abilityId:D.b.KASSATSU.id},this._onRemoveKassatsu),this.addHook("complete",this._onComplete)}_onNinjutsuCast(e){const t=e.ability.guid;this.combatants.selected.hasStatus(D.b.KASSATSU.id)&&(this._kassatsuUses[t]++,this._kassatsuSpent=!0)}_onRemoveKassatsu(){this._kassatsuSpent||this._kassatsuWastes++,this._kassatsuSpent=!1}_onComplete(){this._kassatsuWastes>0&&this.suggestions.add(new O.b({icon:i.b.KASSATSU.icon,content:u.a.createElement(c.Trans,{id:"nin.kassatsu.suggestions.waste.content",components:[u.a.createElement(b.a,k({},i.b.KASSATSU))]}),severity:O.a.MEDIUM,why:u.a.createElement(c.Trans,{id:"nin.kassatsu.suggestions.waste.why",values:{0:this._kassatsuWastes}})})),this._kassatsuUses[i.b.HUTON.id]>0&&this.suggestions.add(new O.b({icon:i.b.HUTON.icon,content:u.a.createElement(c.Trans,{id:"nin.kassatsu.suggestions.huton.content",components:[u.a.createElement(b.a,k({},i.b.HUTON)),u.a.createElement(b.a,k({},i.b.KASSATSU))]}),severity:O.a.MAJOR,why:u.a.createElement(c.Trans,{id:"nin.kassatsu.suggestions.huton.why",values:{0:this._kassatsuUses[i.b.HUTON.id]}})}));const e=this._kassatsuUses[i.b.FUMA_SHURIKEN.id]+this._kassatsuUses[i.b.RAITON.id]+this._kassatsuUses[i.b.DOTON.id];e>0&&this.suggestions.add(new O.b({icon:i.b.FUMA_SHURIKEN.icon,content:u.a.createElement(c.Trans,{id:"nin.kassatsu.suggestions.generalbads.content",components:[u.a.createElement(b.a,k({},i.b.FUMA_SHURIKEN)),u.a.createElement(b.a,k({},i.b.RAITON)),u.a.createElement(b.a,k({},i.b.DOTON)),u.a.createElement(b.a,k({},i.b.KASSATSU)),u.a.createElement(b.a,k({},i.b.HYOSHO_RANRYU)),u.a.createElement(b.a,k({},i.b.GOKA_MEKKYAKU))]}),severity:O.a.MAJOR,why:u.a.createElement(c.Trans,{id:"nin.kassatsu.suggestions.generalbads.why",values:{generalBads:e}})})),this._kassatsuUses[i.b.SUITON.id]>0&&this.suggestions.add(new O.b({icon:i.b.SUITON.icon,content:u.a.createElement(c.Trans,{id:"nin.kassatsu.suggestions.suiton.content",components:[u.a.createElement(b.a,k({},i.b.SUITON)),u.a.createElement(b.a,k({},i.b.KASSATSU)),u.a.createElement(b.a,k({},i.b.TRICK_ATTACK)),u.a.createElement(b.a,k({},i.b.HYOSHO_RANRYU))]}),severity:O.a.MEDIUM,why:u.a.createElement(c.Trans,{id:"nin.kassatsu.suggestions.suiton.why",values:{0:this._kassatsuUses[i.b.SUITON.id]}})})),this._kassatsuUses[i.b.RABBIT_MEDIUM.id]>0&&this.suggestions.add(new O.b({icon:i.b.RABBIT_MEDIUM.icon,content:u.a.createElement(c.Trans,{id:"nin.kassatsu.suggestions.rabbit.content",components:[u.a.createElement(b.a,k({},i.b.KASSATSU)),u.a.createElement(b.a,k({},i.b.RABBIT_MEDIUM))]}),severity:O.a.MAJOR,why:u.a.createElement(c.Trans,{id:"nin.kassatsu.suggestions.rabbit.why",values:{0:this._kassatsuUses[i.b.RABBIT_MEDIUM.id]}})}))}}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}M.handle="kassatsu",M.dependencies=["combatants","suggestions"];const U=6,P=10;class G extends p.c{constructor(){super(...arguments),this._hyotonCount=0,this._rabbitCount=0,this._dotonCasts={current:null,history:[]},this.addHook("cast",{by:"player",abilityId:[i.b.HYOTON.id,i.b.HYOTON_TCJ.id]},()=>{this._hyotonCount++}),this.addHook("cast",{by:"player",abilityId:i.b.RABBIT_MEDIUM.id},()=>{this._rabbitCount++}),this.addHook("cast",{by:"player",abilityId:[i.b.DOTON.id,i.b.DOTON_TCJ.id]},this._onDotonCast),this.addHook("aoedamage",{by:"player",abilityId:D.b.DOTON.id},this._onDotonDamage),this.addHook("removebuff",{by:"player",abilityId:D.b.DOTON.id},this._finishDotonWindow),this.addHook("complete",this._onComplete)}_onDotonCast(){this._finishDotonWindow(),this._dotonCasts.current={tcj:this.combatants.selected.hasStatus(D.b.TEN_CHI_JIN.id),ticks:[]}}_onDotonDamage(e){this._dotonCasts.current||this._onDotonCast(),this._dotonCasts.current.ticks.push(e.hits.length)}_finishDotonWindow(){this._dotonCasts.current&&(this._dotonCasts.history.push(this._dotonCasts.current),this._dotonCasts.current=null)}_appraiseDotonCasts(){const e={badTcjs:0,badAoes:0,badStds:0};return this._dotonCasts.history.forEach(t=>{t.tcj&&t.ticks.every(e=>1===e)?e.badTcjs++:t.ticks.every(e=>e>1)?t.ticks.length<U&&e.badAoes++:t.ticks.reduce((e,t)=>e+t,0)<P&&e.badStds++}),e}_onComplete(){this._finishDotonWindow(),this.suggestions.add(new O.c({icon:i.b.HYOTON.icon,content:u.a.createElement(c.Trans,{id:"nin.ninjutsu.suggestions.hyoton.content",components:[u.a.createElement(b.a,N({},i.b.HYOTON))]}),tiers:{1:O.a.MINOR,2:O.a.MEDIUM},value:this._hyotonCount,why:u.a.createElement(c.Trans,{id:"nin.ninjutsu.suggestions.hyoton.why",values:{0:this._hyotonCount}})})),this.suggestions.add(new O.c({icon:i.b.RABBIT_MEDIUM.icon,content:u.a.createElement(c.Trans,{id:"nin.ninjutsu.suggestions.rabbit.content",components:[u.a.createElement(b.a,N({},i.b.RABBIT_MEDIUM)),u.a.createElement(b.a,N({},i.b.TRICK_ATTACK))]}),tiers:{1:O.a.MEDIUM,3:O.a.MAJOR},value:this._rabbitCount,why:u.a.createElement(c.Trans,{id:"nin.ninjutsu.suggestions.rabbit.why",values:{0:this._rabbitCount}})}));const{badTcjs:e,badAoes:t,badStds:n}=this._appraiseDotonCasts();this.suggestions.add(new O.c({icon:i.b.DOTON.icon,content:u.a.createElement(c.Trans,{id:"nin.ninjutsu.suggestions.tcj-doton.content",components:[u.a.createElement(b.a,N({},i.b.DOTON)),u.a.createElement(b.a,N({},i.b.TEN_CHI_JIN)),u.a.createElement(b.a,N({},i.b.SUITON)),u.a.createElement(b.a,N({},i.b.MEISUI))]}),tiers:{1:O.a.MEDIUM,2:O.a.MAJOR},value:e,why:u.a.createElement(c.Trans,{id:"nin.ninjutsu.suggestions.tcj-doton.why",values:{badTcjs:e}})})),t>0&&this.suggestions.add(new O.b({icon:i.b.DOTON.icon,content:u.a.createElement(c.Trans,{id:"nin.ninjutsu.suggestions.aoe-doton.content",values:{DOTON_TICK_TARGET:U},components:[u.a.createElement(b.a,N({},i.b.DOTON)),u.a.createElement(b.a,N({},i.b.KATON))]}),severity:O.a.MINOR,why:u.a.createElement(c.Trans,{id:"nin.ninjutsu.suggestions.aoe-doton.why",values:{badAoes:t}})})),this.suggestions.add(new O.c({icon:i.b.DOTON.icon,content:u.a.createElement(c.Trans,{id:"nin.ninjutsu.suggestions.st-doton.content",components:[u.a.createElement(b.a,N({},i.b.DOTON)),u.a.createElement(b.a,N({},i.b.RAITON))]}),tiers:{1:O.a.MINOR,2:O.a.MEDIUM,3:O.a.MAJOR},value:n,why:u.a.createElement(c.Trans,{id:"nin.ninjutsu.suggestions.st-doton.why",values:{badStds:n}})}))}}G.handle="ninjutsu",G.dependencies=["combatants","suggestions"];var x=n(124),K=n.n(x),B=n(14),F=n(1291);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Y=100,z={[i.b.SPINNING_EDGE.id]:5,[i.b.GUST_SLASH.id]:5,[i.b.DEATH_BLOSSOM.id]:5,[i.b.HAKKE_MUJINSATSU.id]:5,[i.b.THROWING_DAGGER.id]:5,[i.b.AEOLIAN_EDGE.id]:10,[i.b.ARMOR_CRUSH.id]:10,[i.b.SHADOW_FANG.id]:10},V={[i.b.MUG.id]:40,[i.b.MEISUI.id]:50},q=5,Z=50,Q=[i.b.SPINNING_EDGE.id,i.b.DEATH_BLOSSOM.id,i.b.THROWING_DAGGER.id,i.b.SHADOW_FANG.id],X=[i.b.GUST_SLASH.id,i.b.AEOLIAN_EDGE.id,i.b.ARMOR_CRUSH.id,i.b.HAKKE_MUJINSATSU.id],$=[i.b.MUG.id,i.b.MEISUI.id],ee=[i.b.HELLFROG_MEDIUM.id,i.b.BHAVACAKRA.id,i.b.BUNSHIN.id];class te extends p.c{constructor(){super(...arguments),this._ninki=0,this._ninkiHistory=[],this._wasteBySource={[i.b.MUG.id]:0,[i.b.MEISUI.id]:0,[i.b.SPINNING_EDGE.id]:0,[i.b.GUST_SLASH.id]:0,[i.b.AEOLIAN_EDGE.id]:0,[i.b.SHADOW_FANG.id]:0,[i.b.ARMOR_CRUSH.id]:0,[i.b.DEATH_BLOSSOM.id]:0,[i.b.HAKKE_MUJINSATSU.id]:0,[i.b.THROWING_DAGGER.id]:0},this._erroneousFrogs=0,this.addHook("cast",{by:"player",abilityId:Q},e=>this._addNinki(e,z[e.ability.guid])),this.addHook("combo",{by:"player",abilityId:X},e=>this._addNinki(e,z[e.ability.guid])),this.addHook("cast",{by:"player",abilityId:$},e=>this._addNinki(e,V[e.ability.guid])),this.addHook("cast",{by:"pet"},e=>this._addNinki(e,q)),this.addHook("cast",{by:"player",abilityId:ee},this._onSpenderCast),this.addHook("aoedamage",{by:"player",abilityId:i.b.HELLFROG_MEDIUM.id},this._onHellfrogAoe),this.addHook("death",{to:"player"},this._onDeath),this.addHook("complete",this._onComplete)}_addNinki(e,t){const n=e.ability.guid;if(this._ninki+=t,this._ninki>Y){const e=this._ninki-Y;this._wasteBySource[n]+=e,this._ninki=Y}this._pushToHistory()}_onSpenderCast(){this._ninki=Math.max(this._ninki-Z,0),this._pushToHistory()}_onHellfrogAoe(e){1===e.hits.length&&this._erroneousFrogs++}_onDeath(){this._ninki=0,this._pushToHistory()}_pushToHistory(){const e=this.parser.currentTimestamp-this.parser.fight.start_time;this._ninkiHistory.push({t:e,y:this._ninki})}_onComplete(){const e=Object.values(this._wasteBySource).reduce((e,t)=>e+t);this.suggestions.add(new O.c({icon:"https://xivapi.com/i/005000/005411.png",content:u.a.createElement(c.Trans,{id:"nin.ninki.suggestions.waste.content",components:[u.a.createElement(b.a,L({},i.b.MUG)),u.a.createElement(b.a,L({},i.b.MEISUI))]}),tiers:{20:O.a.MINOR,50:O.a.MAJOR},value:e,why:u.a.createElement(c.Trans,{id:"nin.ninki.suggestions.waste.why",values:{totalWaste:e}})})),this._erroneousFrogs>0&&this.suggestions.add(new O.b({icon:i.b.HELLFROG_MEDIUM.icon,content:u.a.createElement(c.Trans,{id:"nin.ninki.suggestions.frog.content",components:[u.a.createElement(b.a,L({},i.b.HELLFROG_MEDIUM)),u.a.createElement(b.a,L({},i.b.BHAVACAKRA))]}),severity:O.a.MEDIUM,why:u.a.createElement(c.Trans,{id:"nin.ninki.suggestions.frog.why",values:{0:this._erroneousFrogs}})}))}output(){const e=K()(B.b.NINJA.colour),t={datasets:[{label:"Ninki",steppedLine:!0,data:this._ninkiHistory,backgroundColor:e.fade(.8),borderColor:e.fade(.5)}]};return u.a.createElement(l.Fragment,null,u.a.createElement(F.a,{data:t}))}}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}te.handle="ninki",te.title={id:"nin.ninki.title",defaults:"Ninki Timeline"},te.displayMode=p.a.FULL,te.dependencies=["suggestions"];const re=1e3*i.b.TRICK_ATTACK.cooldown,oe=5;class ae extends p.c{constructor(){super(...arguments),this._taCasts=[],this._lostTime=0,this._gcdCount=0,this._castHook=null,this._castHook=this.addHook("cast",{by:"player"},this._onCast),this.addHook("cast",{by:"player",abilityId:i.b.TRICK_ATTACK.id},this._onTrickAttack),this.addHook("complete",this._onComplete)}_onCast(e){const t=Object(m.a)(i.b,"id",e.ability.guid);t&&t.onGcd&&t.id!==i.b.TEN.id&&t.id!==i.b.TEN_KASSATSU.id&&t.id!==i.b.CHI.id&&t.id!==i.b.JIN.id&&this._gcdCount++}_onTrickAttack(e){if(null!==this._castHook&&(this.removeHook(this._castHook),this._castHook=null),this._taCasts.length>0){const t=this._taCasts[this._taCasts.length-1]+re,n=this.downtime.getDowntime(t,e.timestamp);this._lostTime+=Math.max(e.timestamp-t-n,0)}this._taCasts.push(e.timestamp)}_onComplete(){if(this._taCasts.length>0){const e=this._taCasts[this._taCasts.length-1],t=Math.floor((this._lostTime+(this.parser.currentTimestamp-e))/re);this.suggestions.add(new O.c({icon:i.b.TRICK_ATTACK.icon,content:u.a.createElement(c.Trans,{id:"nin.ta-usage.suggestions.missed.content",components:[u.a.createElement(b.a,se({},i.b.TRICK_ATTACK))]}),value:t,tiers:{1:O.a.MEDIUM,2:O.a.MAJOR},why:u.a.createElement(c.Trans,{id:"nin.ta-usage.suggestions.missed.why",values:{0:this.parser.formatDuration(this._lostTime),lostCasts:t}})}));const n=Math.abs(oe-this._gcdCount);this.suggestions.add(new O.c({icon:i.b.TRICK_ATTACK.icon,content:u.a.createElement(c.Trans,{id:"nin.ta-usage.suggestions.opener.content",components:[u.a.createElement(b.a,se({},i.b.TRICK_ATTACK))]}),value:n,tiers:{1:O.a.MEDIUM,2:O.a.MAJOR},why:u.a.createElement(c.Trans,{id:"nin.ta-usage.suggestions.opener.why",values:{0:this._gcdCount}})}))}else this.suggestions.add(new O.b({icon:i.b.TRICK_ATTACK.icon,content:u.a.createElement(c.Trans,{id:"nin.ta-usage.suggestions.none.content",components:[u.a.createElement(b.a,se({},i.b.TRICK_ATTACK))]}),severity:O.a.MAJOR,why:u.a.createElement(c.Trans,{id:"nin.ta-usage.suggestions.none.why"})}))}}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ae.handle="taUsage",ae.dependencies=["downtime","suggestions"];class de extends p.c{constructor(){super(...arguments),this._dwadOutsideTa=0,this._assassinateOutsideTa=0,this._armorCrushInTa=0,this._dwadCast=!1,this.addHook("cast",{by:"player",abilityId:i.b.DREAM_WITHIN_A_DREAM.id},()=>this._dwadCast=!0),this.addHook("combo",{by:"player",abilityId:i.b.ARMOR_CRUSH.id},this._onArmorCrush),this.addHook("complete",this._onComplete),this.addHook("init",()=>{this.addHook(this.fflogsEvents.damageEventName,{by:"player",abilityId:i.b.DREAM_WITHIN_A_DREAM.id},this._onDwadHit),this.addHook(this.fflogsEvents.damageEventName,{by:"player",abilityId:i.b.ASSASSINATE.id},this._onAssassinate)})}_targetHasVuln(e){const t=this.enemies.getEntity(e);return t&&t.hasStatus(D.b.TRICK_ATTACK_VULNERABILITY_UP.id)}_onArmorCrush(e){this._targetHasVuln(e.targetID)&&this._armorCrushInTa++}_onDwadHit(e){this._dwadCast&&(this._dwadCast=!1,this._targetHasVuln(e.targetID)||this._dwadOutsideTa++)}_onAssassinate(e){this._targetHasVuln(e.targetID)||this._assassinateOutsideTa++}_onComplete(){this._dwadOutsideTa>0&&this.suggestions.add(new O.b({icon:i.b.DREAM_WITHIN_A_DREAM.icon,content:u.a.createElement(c.Trans,{id:"nin.ta-window.suggestions.dream.content",components:[u.a.createElement(b.a,le({},i.b.DREAM_WITHIN_A_DREAM))]}),severity:O.a.MEDIUM,why:u.a.createElement(c.Trans,{id:"nin.ta-window.suggestions.dream.why",values:{0:this._dwadOutsideTa}})})),this._assassinateOutsideTa>0&&this.suggestions.add(new O.b({icon:i.b.ASSASSINATE.icon,content:u.a.createElement(c.Trans,{id:"nin.ta-window.suggestions.assassinate.content",components:[u.a.createElement(b.a,le({},i.b.ASSASSINATE)),u.a.createElement(b.a,le({},i.b.DREAM_WITHIN_A_DREAM))]}),severity:O.a.MEDIUM,why:u.a.createElement(c.Trans,{id:"nin.ta-window.suggestions.assassinate.why",values:{0:this._assassinateOutsideTa}})})),this.suggestions.add(new O.c({icon:i.b.ARMOR_CRUSH.icon,content:u.a.createElement(c.Trans,{id:"nin.ta-window.suggestions.armor-crush.content",components:[u.a.createElement(b.a,le({},i.b.ARMOR_CRUSH)),u.a.createElement(b.a,le({},i.b.AEOLIAN_EDGE)),u.a.createElement(b.a,le({},i.b.SHADOW_FANG))]}),tiers:{1:O.a.MINOR,2:O.a.MEDIUM},value:this._armorCrushInTa,why:u.a.createElement(c.Trans,{id:"nin.ta-window.suggestions.armor-crush.why",values:{0:this._armorCrushInTa}})}))}}de.handle="taWindow",de.dependencies=["enemies","fflogsEvents","suggestions"];var he=n(1294);class me extends he.a{isBadWeave(e){let t=0;for(let n=0;n<e.weaves.length;n++)e.weaves[n].ability.guid===i.b.DREAM_WITHIN_A_DREAM.id&&t++;return t>1?e.weaves.length-(t-1)>2:super.isBadWeave(e,2)}}t.default=[r,a,j,M,G,te,ae,de,me]}}]);
//# sourceMappingURL=jobs-nin.cfcc0293.js.map
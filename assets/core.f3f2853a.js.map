{"version":3,"sources":["webpack:///./src/parser/core/modules/Suggestions/Suggestion.js","webpack:///./src/parser/core/modules/Suggestions/Component.js","webpack:///./src/parser/core/modules/Suggestions/Suggestions.js","webpack:///./src/parser/core/modules/Suggestions/index.js","webpack:///./src/parser/core/modules/Checklist/Rule.js","webpack:///./src/parser/core/modules/Checklist/Component.js","webpack:///./src/parser/core/modules/Checklist/Checklist.js","webpack:///./src/parser/core/modules/Checklist/Requirement.js","webpack:///./src/parser/core/modules/Checklist/index.js","webpack:///./src/components/ui/Rotation.tsx","webpack:///./src/parser/core/Combatant.js","webpack:///./src/parser/core/modules/Combatants.js","webpack:///./src/parser/core/modules/Cooldowns.js","webpack:///./src/parser/core/modules/Combos.tsx","webpack:///./src/mathjsCustom.js","webpack:///./src/components/ui/Rotation.module.css?31d9","webpack:///./src/parser/core/modules/Suggestions/Suggestions.module.css?3c09","webpack:///./src/parser/core/modules/Checklist/Checklist.module.css?cfc9","webpack:///./src/parser/core/modules/Statuses.js","webpack:///./src/parser/core/modules/Downtime.js","webpack:///./src/parser/core/modules/About.module.css?7e68","webpack:///./src/parser/core/modules/ChangeLog/ChangeLog.module.css?d7c0","webpack:///./node_modules/semantic-ui-react/dist/es/elements/Segment/SegmentGroup.js","webpack:///./node_modules/semantic-ui-react/dist/es/elements/Segment/SegmentInline.js","webpack:///./node_modules/semantic-ui-react/dist/es/elements/Segment/Segment.js","webpack:///./src/components/ui/ContributorLabel.js","webpack:///./src/parser/core/modules/About.js","webpack:///./src/parser/core/modules/AlwaysBeCasting.js","webpack:///./src/parser/core/modules/AoE.js","webpack:///./src/parser/core/modules/BrokenLog.tsx","webpack:///./src/parser/core/modules/ChangeLog/Component.js","webpack:///./src/parser/core/modules/ChangeLog/ChangeLog.js","webpack:///./src/parser/core/modules/Death.js","webpack:///./src/parser/core/modules/HitType.js","webpack:///./src/parser/core/modules/index.js"],"names":["SEVERITY","MORBID","MAJOR","MEDIUM","MINOR","IGNORE","undefined","Suggestion","constructor","options","this","icon","content","why","severity","Object","keys","forEach","key","TieredSuggestion","super","tiers","value","matcher","matchClosestLower","SEVERITY_LABEL_PROPS","id","color","Suggestions","React","Component","arguments","onToggleShowMinor","_","data","settingsStore","context","setShowMinorSuggestions","checked","render","showMinor","showMinorSuggestions","suggestions","props","filter","suggestion","hasMinor","some","Checkbox","toggle","label","defaultChecked","onChange","className","styles","checkbox","items","map","index","item","src","alt","extra","Label","horizontal","length","contextType","StoreContext","__decorate","observer","Module","_suggestions","add","push","console","error","output","sort","a","b","handle","displayOrder","DISPLAY_ORDER","SUGGESTIONS","displayMode","DISPLAY_MODE","FULL","title","TARGET","SUCCESS","WARN","FAIL","DEFAULT_TARGET","Rule","name","description","requirements","target","DEFAULT","percent","percents","requirement","math","mean","TieredRule","RULE_STYLES","text","autoExpand","Checklist","rules","expanded","panels","rule","ruleStyles","tier","Math","min","Icon","toFixed","Progress","progress","size","Accordion","exclusive","defaultActiveIndex","styled","fluid","_rules","sortedRules","CHECKLIST","Requirement","_percent","overrideDisplay","Rotation","events","container","event","action","getDataBy","ACTIONS","ability","guid","autoAttack","linkClassName","link","ogcd","onGcd","iconSize","gcdSize","ogcdSize","Link","ITEM_ID_OFFSET","ItemLink","ActionLink","cn","showName","Combatant","Entity","parser","info","type","Combatants","Entities","_players","getEntities","getEntity","actorId","player","report","friendlies","find","Cooldowns","_cooldownGroups","_currentAction","_cooldowns","_groups","actions","_buildGroups","cooldownOrder","addHook","by","_onBeginCast","_onCast","_onComplete","groups","i","order","getAction","_buildGroup","group","merge","nestedGroups","opts","ItemGroup","showNested","timeline","addGroup","cooldown","startCooldown","cooldownGroup","startCooldownGroup","finishingCast","actionId","_addToTimeline","parseInt","cd","current","history","use","shared","addItem","Item","start","timestamp","fight","start_time","getCooldown","originActionId","sharedCooldown","currentFightDuration","currentTimestamp","resetCooldown","invulnTime","reduceCooldown","reduction","setInvulnTime","previousEndTimestamp","previousCooldown","isFirst","downtime","getDowntime","getCooldownRemaining","getTimeOnCooldown","considerInvulnTime","extension","reduce","time","status","getAdjustedTimeOnCooldown","duration","maximumDuration","dependencies","DEFAULT_GCD","GCD_TIMEOUT_MILLIS","ISSUE_TYPENAMES","uncomboed","combobreak","failedcombo","Combos","lastGcdTime","currentComboChain","issues","init","onCast","onComplete","lastComboEvent","issue","fabricateComboEvent","combo","fabricateEvent","recordBrokenCombo","isAllowableComboBreak","recordUncomboedGcd","recordFailedCombo","checkCombo","lastAction","from","Array","isArray","includes","end","breaksCombo","successfulHit","addJobSpecificSuggestions","comboBreakers","uncomboedGcds","suggestionIcon","1","2","4","startTime","completeContext","startEvent","endEvent","startAction","endAction","rotation","notesMap","reason","style","whiteSpace","notes","header","accessor","onGoto","show","COMBOS","dependency","__metadata","Data","prototype","Timeline","create","meanDependencies","modeDependencies","stdDependencies","module","exports","STATUS_APPLY_ON_PARTY_THRESHOLD_MILLISECONDS","Statuses","_statuses","_statusToActionMap","_actionToMergeNameMap","byFilter","pets","p","_onApply","_onRefresh","_onRemove","cooldowns","ac","values","statusesApplied","statusKey","statuses","_isStatusAppliedToPet","_addStatus","_endPrevStatus","getStatus","statusEntry","prev","usages","it","abs","entry","_createGroupForStatus","st","stid","statusesStackMapping","attachToGroup","gcd","gcdGroupId","friendlyPets","targetID","Downtime","_internalDowntime","downtimePeriods","unableToAct","getDowntimes","invuln","getInvulns","finalDowntimes","shift","dt","last","isDowntime","when","uptime","max","minimumDowntimeLength","aggregator","getDowntimeWindows","minimumWindowSize","SegmentGroup","children","compact","piled","raised","stacked","classes","rest","getUnhandledProps","ElementType","getElementType","createElement","isNil","handledProps","propTypes","SegmentInline","Segment","attached","basic","circular","clearing","disabled","floated","inverted","loading","placeholder","padded","secondary","tertiary","textAlign","vertical","Group","Inline","ContributorLabel","PureComponent","contributor","detail","jobs","job","backgroundColor","colour","Color","isDark","image","avatar","Detail","About","Description","contributors","supportedPatches","field","meta","Message","warning","Content","Header","to","supported","patchSupported","languageToEdition","lang","parseDate","Grid","Column","mobile","computer","patch","as","user","role","NormalisedMessage","message","ABOUT","AlwaysBeCasting","gcds","fightDuration","checklist","getUptime","INTERNAL_EVENT_TYPE","Symbol","DEFAULT_AOE_THRESHOLD","STATUS_AOE_THRESHOLD","SUPPORTED_EVENTS","AoE","_onAoe","normalise","fflogsEvents","damageEventName","healEventName","trackers","getTracker","sourceID","source","abilityId","insertAfter","toAdd","addEvent","tracker","eventType","lastHitTimestamp","groupLastHit","AOE_THRESHOLD","sourceId","shouldCleanup","offset","splice","hitsByTarget","isValidHit","bind","carry","targetInstance","times","amount","instance","fabricatedEvent","replace","hits","total","hit","hasOwnProperty","sourceResources","validTarget","enemies","zeroAmount","overkill","EXPECTED_ABILITY_EVENTS","BrokenLog","triggers","Map","UNKNOWN","trigger","triggerKey","has","getReportPatch","branch","Sentry","scope","setTags","setExtras","code","set","Table","Row","HeaderCell","Body","Cell","i18n_id","BROKEN_LOG","RAW","ChangeLog","state","activeIndexes","Set","handleClick","newIndexes","delete","setState","changelog","dateString","date","toLocaleDateString","active","Fragment","Title","onClick","change","Changes","CHANGELOG","RAISE_STATUSES","Death","_count","_deadTime","_timestamp","raiseStatuses","_onDeath","_onRaise","checkLb3","shouldCountDeath","addDeathToTimeline","kill","end_time","RAISE","ACTION_EVENT_TYPES","FAILED_HITS","EventHitType","MISS","IMMUNE","HitType","criticalHit","hitType","CRITICAL","directHit","multistrike","AdditionalEvents","CastTime","Enemies","FFLogsEventNormaliser","GlobalCooldown","Invulnerability","PrecastAction","PrecastStatus","RaidBuffs","Speedmod","Statistics","UnableToAct","Weaving"],"mappings":"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","file":"assets/core.f3f2853a.js","sourcesContent":["import { matchClosestLower } from 'utilities';\nexport const SEVERITY = {\n    // NOTE: Don't use MORBID, It's for deaths. I _will_ block the PRs on this.\n    MORBID: 0,\n    MAJOR: 1,\n    MEDIUM: 2,\n    MINOR: 3,\n    // The matchClosest fall back to undefined, so let's use that for ignore too\n    IGNORE: undefined,\n};\nexport default class Suggestion {\n    constructor(options) {\n        this.icon = ''; // TODO: default image\n        this.content = '';\n        this.why = '';\n        this.severity = SEVERITY.MEDIUM;\n        Object.keys(options || {}).forEach(key => {\n            this[key] = options[key];\n        });\n    }\n}\nexport class TieredSuggestion extends Suggestion {\n    constructor(options) {\n        super({\n            tiers: {},\n            value: 0,\n            matcher: matchClosestLower,\n            ...options,\n        });\n    }\n    get severity() {\n        return this.matcher(this.tiers, this.value);\n    }\n    // noop setter so it doesn't die from the base class\n    set severity(value) { }\n}\n","import { __decorate } from \"tslib\";\nimport { Trans } from '@lingui/react';\nimport { observer } from 'mobx-react';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Checkbox, Label } from 'semantic-ui-react';\n// Direct path import 'cus it'll be a dep loop otherwise\nimport { SEVERITY } from 'parser/core/modules/Suggestions/Suggestion';\nimport { SettingsStore } from 'store/settings';\nimport styles from './Suggestions.module.css';\nimport { StoreContext } from 'store';\nconst SEVERITY_LABEL_PROPS = {\n    [SEVERITY.MORBID]: { content: <Trans id=\"core.suggestions.severity.morbid\">Morbid</Trans>, color: 'black', icon: 'times' },\n    [SEVERITY.MAJOR]: { content: <Trans id=\"core.suggestions.severity.major\">Major</Trans>, color: 'red', icon: 'arrow up' },\n    [SEVERITY.MEDIUM]: { content: <Trans id=\"core.suggestions.severity.medium\">Medium</Trans>, color: 'orange' },\n    [SEVERITY.MINOR]: { content: <Trans id=\"core.suggestions.severity.minor\">Minor</Trans>, color: 'blue', icon: 'arrow down' },\n};\nlet Suggestions = class Suggestions extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.onToggleShowMinor = (_, data) => {\n            const { settingsStore } = this.context;\n            settingsStore.setShowMinorSuggestions(data.checked);\n        };\n    }\n    render() {\n        const showMinor = this.context.settingsStore.showMinorSuggestions;\n        const suggestions = this.props.suggestions.filter(suggestion => showMinor || suggestion.severity !== SEVERITY.MINOR);\n        const hasMinor = this.props.suggestions.some(suggestion => suggestion.severity === SEVERITY.MINOR);\n        return <>\n\t\t\t{hasMinor && <Checkbox toggle label={<label><Trans id=\"core.suggestion.show-minor\">Show minor</Trans></label>} defaultChecked={showMinor} onChange={this.onToggleShowMinor} className={styles.checkbox}/>}\n\t\t\t<div className={styles.items}>\n\t\t\t\t{suggestions.map((suggestion, index) => <div key={index} className={styles.item}>\n\t\t\t\t\t<img src={suggestion.icon} alt=\"\"/>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{suggestion.content}\n\t\t\t\t\t\t<div className={styles.extra}>\n\t\t\t\t\t\t\t<Label horizontal {...SEVERITY_LABEL_PROPS[suggestion.severity]}/>\n\t\t\t\t\t\t\t{suggestion.why}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>)}\n\t\t\t\t{suggestions.length === 0 && <div className={styles.item}>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<strong><Trans id=\"core.suggestion.nothing\">There's nothing here!</Trans></strong><br />\n\t\t\t\t\t\t{hasMinor && <Trans id=\"core.suggestion.nothing-but-minor\">You can check over the minor suggestions by flicking the \"Show minor\" switch in the top right.</Trans>}\n\t\t\t\t\t</div>\n\t\t\t\t</div>}\n\t\t\t</div>\n\t\t</>;\n    }\n};\nSuggestions.propTypes = {\n    settingsStore: PropTypes.instanceOf(SettingsStore),\n    suggestions: PropTypes.arrayOf(PropTypes.shape({\n        icon: PropTypes.string.isRequired,\n        content: PropTypes.node.isRequired,\n        why: PropTypes.node.isRequired,\n        severity: PropTypes.number.isRequired,\n    })).isRequired,\n};\nSuggestions.contextType = StoreContext;\nSuggestions = __decorate([\n    observer\n], Suggestions);\nexport default Suggestions;\n","import { t } from '@lingui/macro';\nimport React from 'react';\nimport Suggestion, { SEVERITY } from './Suggestion';\nimport SuggestionsComponent from './Component';\nimport Module, { DISPLAY_MODE } from 'parser/core/Module';\nimport DISPLAY_ORDER from '../DISPLAY_ORDER';\nexport default class Suggestions extends Module {\n    constructor() {\n        super(...arguments);\n        this._suggestions = [];\n    }\n    add(suggestion) {\n        if (!(suggestion instanceof Suggestion)) {\n            console.error('TODO: Proper error message for passing a non-suggestion to the suggestion add handler');\n            return;\n        }\n        this._suggestions.push(suggestion);\n    }\n    output() {\n        // Only show the suggestions module if it's had things sent to it\n        if (this._suggestions.length === 0) {\n            return false;\n        }\n        // Sort suggestions with most important at the top, and remove ignored\n        const suggestions = this._suggestions\n            .filter(suggestion => suggestion.severity !== SEVERITY.IGNORE)\n            .sort((a, b) => a.severity - b.severity);\n        // Rendering is in a specialised component so it's got some state to work with\n        return <SuggestionsComponent suggestions={suggestions}/>;\n    }\n}\nSuggestions.handle = 'suggestions';\nSuggestions.displayOrder = DISPLAY_ORDER.SUGGESTIONS;\nSuggestions.displayMode = DISPLAY_MODE.FULL;\nSuggestions.title = t('core.suggestions.title') `Suggestions`;\n","export { default } from './Suggestions';\nexport { default as Suggestion } from './Suggestion';\nexport * from './Suggestion';\n","import math from 'mathjsCustom';\nimport { matchClosestLower } from 'utilities';\nimport { DISPLAY_ORDER } from 'parser/core/Module';\nexport const TARGET = {\n    SUCCESS: 2,\n    WARN: 1,\n    FAIL: undefined,\n};\nconst DEFAULT_TARGET = 95;\nexport default class Rule {\n    constructor(options) {\n        this.name = '';\n        this.description = null;\n        this.requirements = [];\n        this.target = DEFAULT_TARGET;\n        this.displayOrder = DISPLAY_ORDER.DEFAULT;\n        Object.keys(options || {}).forEach(key => {\n            this[key] = options[key];\n        });\n    }\n    get tier() {\n        return matchClosestLower({ [this.target]: TARGET.SUCCESS }, this.percent);\n    }\n    get percent() {\n        // WoWA has a bunch of different modes for this stuff, I'm just going to use mean for now. Because I'm mean. Hue.\n        // TODO: different requirement modes\n        const percents = this.requirements.map(requirement => requirement.percent);\n        return percents.length ? math.mean(percents) : 0;\n    }\n}\nexport class TieredRule extends Rule {\n    constructor(options) {\n        super({\n            tiers: {},\n            matcher: matchClosestLower,\n            ...options,\n        });\n    }\n    get tier() {\n        return this.matcher(this.tiers, this.percent);\n    }\n}\n","import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Accordion, Icon, Progress } from 'semantic-ui-react';\nimport { TARGET } from 'parser/core/modules/Checklist/Rule';\nimport styles from './Checklist.module.css';\nconst RULE_STYLES = {\n    [TARGET.SUCCESS]: { text: 'text-success', color: 'green', icon: 'checkmark', autoExpand: false },\n    [TARGET.WARN]: { text: 'text-warning', color: 'yellow', icon: 'warning sign', autoExpand: true },\n    [TARGET.FAIL]: { text: 'text-error', color: 'red', icon: 'remove', autoExpand: true },\n};\nclass Checklist extends Component {\n    render() {\n        const { rules } = this.props;\n        // If there's no rules, just stop now\n        if (!rules.length) {\n            return false;\n        }\n        const expanded = [];\n        const panels = rules.map((rule, index) => {\n            const ruleStyles = RULE_STYLES[rule.tier];\n            // We cap the percent @ 100 in production mode - calculations can always be a bit janky\n            let percent = rule.percent;\n            if (process.env.NODE_ENV === 'production') {\n                percent = Math.min(percent, 100);\n            }\n            if (ruleStyles.autoExpand) {\n                expanded.push(index);\n            }\n            return {\n                // This should be a handle of some sort\n                key: index,\n                title: {\n                    className: styles.title,\n                    content: <>\n\t\t\t\t\t\t<Icon name={ruleStyles.icon} className={ruleStyles.text}/>\n\t\t\t\t\t\t{rule.name}\n\t\t\t\t\t\t<div className={styles.percent + ' ' + ruleStyles.text}>\n\t\t\t\t\t\t\t{percent.toFixed(1)}%\n\t\t\t\t\t\t\t<Progress percent={percent} className={styles.progress} size=\"small\" color={ruleStyles.color}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</>,\n                },\n                content: {\n                    content: <>\n\t\t\t\t\t\t{rule.description && <div className={styles.description}>\n\t\t\t\t\t\t\t<Icon name=\"info\" size=\"large\"/>\n\t\t\t\t\t\t\t<p>{rule.description}</p>\n\t\t\t\t\t\t</div>}\n\t\t\t\t\t\t\n\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t{rule.requirements.map((requirement, index) => <li key={index}>\n\t\t\t\t\t\t\t\t\t{requirement.name}: {requirement.content}\n\t\t\t\t\t\t\t\t</li>)}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</>,\n                },\n            };\n        });\n        return <Accordion exclusive={false} panels={panels} defaultActiveIndex={expanded} styled fluid/>;\n    }\n}\nChecklist.propTypes = {\n    rules: PropTypes.arrayOf(PropTypes.shape({\n        percent: PropTypes.number.isRequired,\n        tier: PropTypes.oneOf(Object.values(TARGET)),\n        name: PropTypes.node.isRequired,\n        requirements: PropTypes.arrayOf(PropTypes.shape({\n            name: PropTypes.node.isRequired,\n            content: PropTypes.string.isRequired,\n        })),\n    })),\n};\nexport default (Checklist);\n","import { t } from '@lingui/macro';\nimport React from 'react';\nimport Rule from './Rule';\nimport ChecklistComponent from './Component';\nimport Module, { DISPLAY_MODE } from 'parser/core/Module';\nimport DISPLAY_ORDER from '../DISPLAY_ORDER';\nexport default class Checklist extends Module {\n    constructor() {\n        super(...arguments);\n        this._rules = [];\n    }\n    add(rule) {\n        if (!(rule instanceof Rule)) {\n            console.error('TODO: This error message');\n            return;\n        }\n        this._rules.push(rule);\n    }\n    output() {\n        const sortedRules = [...this._rules];\n        sortedRules.sort((a, b) => a.displayOrder - b.displayOrder);\n        return <ChecklistComponent rules={sortedRules}/>;\n    }\n}\nChecklist.handle = 'checklist';\nChecklist.title = t('core.checklist.title') `Checklist`;\nChecklist.displayOrder = DISPLAY_ORDER.CHECKLIST;\nChecklist.displayMode = DISPLAY_MODE.FULL;\n","export default class Requirement {\n    constructor(options) {\n        this.name = '';\n        this._percent = null;\n        this.value = null;\n        this.target = 100;\n        this.overrideDisplay = null;\n        Object.keys(options || {}).forEach(key => {\n            this[key] = options[key];\n        });\n    }\n    get content() {\n        if (this.overrideDisplay !== null) {\n            return this.overrideDisplay;\n        }\n        if (this._percent !== null || this.value === null) {\n            return `${this.percent.toFixed(2)}%`;\n        }\n        return `${this.value.toFixed(0)}/${this.target.toFixed(0)}`; //avoid weird floating point shit\n    }\n    get percent() {\n        if (this._percent === null) {\n            if (this.value === null) {\n                return 0;\n            }\n            return 100 * (((typeof this.value === 'function') ? this.value() : this.value) || 0) / this.target;\n        }\n        return ((typeof this._percent === 'function') ? this._percent() : this._percent) || 0;\n    }\n    set percent(value) {\n        this._percent = value;\n    }\n}\n","export { default } from './Checklist';\nexport { default as Rule, TieredRule, TARGET } from './Rule';\nexport { default as Requirement } from './Requirement';\n","import cn from 'classnames';\nimport { ActionLink, ItemLink } from 'components/ui/DbLink';\nimport { getDataBy } from 'data';\nimport ACTIONS, { ITEM_ID_OFFSET } from 'data/ACTIONS';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport styles from './Rotation.module.css';\nexport default class Rotation extends Component {\n    render() {\n        const { events } = this.props;\n        return <div className={styles.container}>\n\t\t\t{events.map((event, index) => {\n            const action = getDataBy(ACTIONS, 'id', event.ability.guid);\n            // Don't bother showing the icon for autos\n            if (!action || action.autoAttack) {\n                return;\n            }\n            // Stuff like the duty action doesn't have an icon mapping yet.\n            // TODO: Sort this out if it's a problem\n            if (!action.icon) {\n                console.error(event, 'event ability has no icon');\n                return false;\n            }\n            const linkClassName = [\n                styles.link,\n                { [styles.ogcd]: !action.onGcd },\n            ];\n            const iconSize = action.onGcd ? styles.gcdSize : styles.ogcdSize;\n            const isItem = action.id >= ITEM_ID_OFFSET;\n            const Link = isItem ? ItemLink : ActionLink;\n            return <div key={index} className={cn(...linkClassName)}>\n\t\t\t\t\t<Link showName={false} iconSize={iconSize} {...action}/>\n\t\t\t\t</div>;\n        })}\n\t\t</div>;\n    }\n}\nRotation.propTypes = {\n    events: PropTypes.arrayOf(PropTypes.shape({\n        ability: PropTypes.shape({\n            guid: PropTypes.number.isRequired,\n        }).isRequired,\n    })).isRequired,\n};\n","import Entity from './Entity';\n// This is basically a copy of Enemy - XIV doesn't really have as much on Combatants as WoW.\n// TODO: Should I just merge all this crap into the Entity handlers and call it a day?\nexport default class Combatant extends Entity {\n    constructor(parser, info) {\n        super(parser);\n        this.info = null;\n        this.info = info;\n    }\n    get name() { return this.info.name; }\n    get type() { return this.info.type; }\n    get guid() { return this.info.guid; }\n    get id() { return this.info.id; }\n}\n","import Entities from './Entities';\nimport Combatant from '../Combatant';\nexport default class Combatants extends Entities {\n    constructor() {\n        super(...arguments);\n        this._players = {};\n    }\n    getEntities() {\n        return this._players;\n    }\n    getEntity(actorId) {\n        let player = this._players[actorId];\n        if (!player) {\n            const info = this.parser.report.friendlies.find(player => player.id === actorId);\n            if (!info) {\n                return null;\n            }\n            this._players[actorId] = player = new Combatant(this.parser, info);\n        }\n        return player;\n    }\n    get selected() {\n        return this.getEntity(this.parser.player.id);\n    }\n}\nCombatants.handle = 'combatants';\n","import _ from 'lodash';\nimport Module from 'parser/core/Module';\nimport { ItemGroup, Item } from './Timeline';\nimport React from 'react';\n// Track the cooldowns on actions and shit\nexport default class Cooldowns extends Module {\n    constructor(...args) {\n        super(...args);\n        this._cooldownGroups = {};\n        this._currentAction = null;\n        this._cooldowns = {};\n        this._groups = {};\n        this._cooldownGroups = _.groupBy(this.data.actions, 'cooldownGroup');\n        // Pre-build groups for actions explicitly set by subclasses\n        this._buildGroups(this.constructor.cooldownOrder);\n        this.addHook('begincast', { by: 'player' }, this._onBeginCast);\n        this.addHook('cast', { by: 'player' }, this._onCast);\n        this.addHook('complete', this._onComplete);\n    }\n    _buildGroups(groups) {\n        // If there's no groups, noop\n        if (!groups) {\n            return;\n        }\n        const ids = groups.map((data, i) => {\n            const order = -(groups.length - i);\n            // If it's just an action id, build a group for it and stop\n            if (typeof data === 'number') {\n                const action = this.data.getAction(data);\n                this._buildGroup({\n                    id: data,\n                    content: action && action.name,\n                    order,\n                });\n                return data;\n            }\n            // Build the base group\n            const group = this._buildGroup({\n                id: data.name,\n                content: data.name,\n                order,\n            });\n            if (data.merge) {\n                // If it's a merge group, we only need to register our group for each of the IDs\n                data.actions.forEach(id => {\n                    this._groups[id] = group;\n                });\n            }\n            else {\n                // Otherwise, build nested groups for each action\n                group.nestedGroups = this._buildGroups(data.actions);\n            }\n            return data.name;\n        });\n        return ids;\n    }\n    _buildGroup(opts) {\n        const group = new ItemGroup({ showNested: false, ...opts });\n        this.timeline.addGroup(group);\n        this._groups[opts.id] = group;\n        return group;\n    }\n    // cooldown starts at the beginning of the casttime\n    // (though 99% of CD based abilities have no cast time)\n    // TODO: Should I be tracking pet CDs too? I mean, contagion/radiant are a thing.\n    _onBeginCast(event) {\n        const action = this.data.getAction(event.ability.guid);\n        if (!action || action.cooldown == null) {\n            return;\n        }\n        this._currentAction = action;\n        this.startCooldown(action.id);\n        if (!_.isNil(action.cooldownGroup)) {\n            this.startCooldownGroup(action.id, action.cooldownGroup);\n        }\n    }\n    _onCast(event) {\n        const action = this.data.getAction(event.ability.guid);\n        if (!action || action.cooldown == null) {\n            return;\n        }\n        const finishingCast = this._currentAction && this._currentAction.id === action.id;\n        this._currentAction = null;\n        if (finishingCast) {\n            return;\n        }\n        this.startCooldown(action.id);\n        if (!_.isNil(action.cooldownGroup)) {\n            this.startCooldownGroup(action.id, action.cooldownGroup);\n        }\n    }\n    _onComplete() {\n        Object.keys(this._cooldowns).forEach(actionId => {\n            this._addToTimeline(parseInt(actionId, 10));\n        });\n    }\n    _addToTimeline(actionId) {\n        const cd = this._cooldowns[actionId];\n        if (!cd) {\n            return false;\n        }\n        // Clean out any 'current' cooldowns into the history\n        if (cd.current) {\n            cd.history.push(cd.current);\n            cd.current = null;\n        }\n        const action = this.data.getAction(actionId);\n        // If the action is on the GCD, GlobalCooldown will be managing its own group\n        if (!action || action.onGcd) {\n            return false;\n        }\n        // Ensure we've got a group for this item\n        if (!this._groups[actionId]) {\n            this._buildGroup({\n                id: actionId,\n                content: action.name,\n                order: actionId,\n            });\n        }\n        // Add CD info to the timeline\n        cd.history\n            .forEach(use => {\n            if (!use.shared) {\n                this._groups[actionId].addItem(new Item({\n                    type: 'background',\n                    start: use.timestamp - this.parser.fight.start_time,\n                    length: use.length,\n                    content: <img src={action.icon} alt={action.name}/>,\n                }));\n            }\n        });\n        return true;\n    }\n    getCooldown(actionId) {\n        return this._cooldowns[actionId] || {\n            current: null,\n            history: [],\n        };\n    }\n    startCooldownGroup(originActionId, cooldownGroup) {\n        const sharedCooldownActions = _.get(this._cooldownGroups, cooldownGroup, []);\n        sharedCooldownActions\n            .map(action => action.id)\n            .filter(id => id !== originActionId)\n            .forEach(id => this.startCooldown(id, true));\n    }\n    startCooldown(actionId, sharedCooldown = false) {\n        // TODO: handle shared CDs\n        const action = this.data.getAction(actionId);\n        if (!action) {\n            return;\n        }\n        // Get the current cooldown status, falling back to a new cooldown\n        const cd = this.getCooldown(actionId);\n        // If there's a current object, move it into the history\n        // TODO: handle errors on CD overlap\n        if (cd.current) {\n            const currentFightDuration = this.parser.currentTimestamp - this.parser.fight.start_time;\n            if (cd.current.timestamp < this.parser.fight.start_time && cd.current.length > currentFightDuration) {\n                // Pre-pull usage, reset the cooldown to prevent overlap on timeline since we don't know exactly when cooldown was used pre-pull\n                this.resetCooldown(actionId);\n            }\n            else {\n                cd.history.push(cd.current);\n            }\n        }\n        cd.current = {\n            timestamp: this.parser.currentTimestamp,\n            length: action.cooldown * 1000,\n            shared: sharedCooldown,\n            invulnTime: 0,\n        };\n        // Save the info back out (to ensure propagation if we've got a new info)\n        this._cooldowns[actionId] = cd;\n    }\n    reduceCooldown(actionId, reduction) {\n        const cd = this.getCooldown(actionId);\n        const currentTimestamp = this.parser.currentTimestamp;\n        // Check if current isn't current\n        if (cd.current && cd.current.timestamp + cd.current.length < currentTimestamp) {\n            cd.history.push(cd.current);\n            cd.current = null;\n        }\n        // TODO: Do I need to warn if they're reducing cooldown on something _with_ no cooldown?\n        if (cd.current === null) {\n            return;\n        }\n        // Reduce the CD\n        cd.current.length -= reduction * 1000;\n        // If the reduction would have made it come off CD earlier than now, reset it - the extra time reduction should be lost.\n        if (cd.current.timestamp + cd.current.length < currentTimestamp) {\n            this.resetCooldown(actionId);\n        }\n    }\n    setInvulnTime(actionId) {\n        const cd = this.getCooldown(actionId);\n        let previousEndTimestamp = this.parser.fight.start_time;\n        let previousCooldown = {};\n        let isFirst = true;\n        for (const cooldown of cd.history) {\n            if (isFirst) {\n                previousEndTimestamp = (cooldown.timestamp + cooldown.length);\n                isFirst = false;\n                previousCooldown = cooldown;\n            }\n            //We invuln time is the time the boss was invuln from when the CD came off CD and when it was next executed\n            previousCooldown.invulnTime = this.downtime.getDowntime(previousEndTimestamp, cooldown.timestamp);\n            previousEndTimestamp = (cooldown.timestamp + cooldown.length);\n            previousCooldown = cooldown;\n        }\n    }\n    resetCooldown(actionId) {\n        const cd = this.getCooldown(actionId);\n        // If there's nothing running, we can just stop\n        // TODO: need to warn?\n        if (cd.current === null) {\n            return;\n        }\n        // Fix up the length\n        cd.current.length = this.parser.currentTimestamp - cd.current.timestamp;\n        // Move the CD into the history\n        cd.history.push(cd.current);\n        cd.current = null;\n    }\n    getCooldownRemaining(actionId) {\n        const current = this.getCooldown(actionId).current;\n        if (!current) {\n            return 0;\n        }\n        return current.length - (this.parser.currentTimestamp - current.timestamp);\n    }\n    // TODO: Should this be here?\n    getTimeOnCooldown(actionId, considerInvulnTime = false, extension = 0) {\n        const cd = this.getCooldown(actionId);\n        const currentTimestamp = this.parser.currentTimestamp;\n        if (considerInvulnTime) {\n            this.setInvulnTime(actionId);\n        }\n        else {\n            cd.history.map(cooldown => {\n                cooldown.invulnTime = 0;\n            });\n        }\n        return cd.history.reduce((time, status) => time + this.getAdjustedTimeOnCooldown(status, currentTimestamp, extension), cd.current ? this.getAdjustedTimeOnCooldown(cd.current, currentTimestamp, extension) : 0);\n    }\n    getAdjustedTimeOnCooldown(cooldown, currentTimestamp, extension) {\n        // Doesn't count time on CD outside the bounds of the current fight, it'll throw calcs off\n        // Add to the length of the cooldown any invuln time for the boss\n        // Additionally account for any extension the caller allowed to the CD Length\n        const duration = currentTimestamp - cooldown.timestamp;\n        const maximumDuration = cooldown.length + cooldown.invulnTime + extension;\n        return _.clamp(duration, 0, maximumDuration);\n    }\n    get used() {\n        return Object.keys(this._cooldowns);\n    }\n}\nCooldowns.handle = 'cooldowns';\nCooldowns.dependencies = [\n    'data',\n    'downtime',\n    'timeline',\n];\n// Array used to sort cooldowns in the timeline. Elements should be either IDs for\n// top-level groups, or objects of the format {name: string, actions: array} for\n// nested groups. Actions not specified here will be sorted by their ID below.\n// Check the NIN and SMN modules for examples.\nCooldowns.cooldownOrder = [];\n","// If you can make it through this entire file without hitting semantic saturation of the word \"combo\", hats off to you. IT DOESN'T LOOK REAL ANYMORE.\nimport { __decorate, __metadata } from \"tslib\";\nimport { t } from '@lingui/macro';\nimport { Plural, Trans } from '@lingui/react';\nimport { RotationTable } from 'components/ui/RotationTable';\nimport _ from 'lodash';\nimport Module, { dependency } from 'parser/core/Module';\nimport DISPLAY_ORDER from 'parser/core/modules/DISPLAY_ORDER';\nimport Suggestions, { SEVERITY, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport Timeline from 'parser/core/modules/Timeline';\nimport React from 'react';\nimport { Data } from './Data';\nconst DEFAULT_GCD = 2.5;\nconst GCD_TIMEOUT_MILLIS = 15000;\nconst ISSUE_TYPENAMES = {\n    uncomboed: <Trans id=\"core.combos.issuetypenames.uncomboed\">Uncomboed</Trans>,\n    combobreak: <Trans id=\"core.combos.issuetypenames.combobreak\">Broken Combo</Trans>,\n    failedcombo: <Trans id=\"core.combos.issuetypenames.failed\">Missed or Invulnerable</Trans>,\n};\nexport default class Combos extends Module {\n    constructor() {\n        super(...arguments);\n        this.lastGcdTime = this.parser.fight.start_time;\n        this.currentComboChain = [];\n        this.issues = [];\n    }\n    init() {\n        this.addHook('aoedamage', { by: 'player' }, this.onCast);\n        this.addHook('complete', this.onComplete);\n    }\n    get lastComboEvent() {\n        return _.last(this.currentComboChain) || null;\n    }\n    get lastAction() {\n        const lastComboEvent = this.lastComboEvent;\n        if (!lastComboEvent) {\n            return null;\n        }\n        return lastComboEvent.ability.guid;\n    }\n    get comboBreakers() {\n        return this.issues\n            .filter(issue => issue.type === 'combobreak')\n            .map(issue => issue.event);\n    }\n    get uncomboedGcds() {\n        return this.issues\n            .filter(issue => issue.type === 'uncomboed')\n            .map(issue => issue.event);\n    }\n    fabricateComboEvent(event) {\n        const combo = {\n            ...event,\n            type: 'combo',\n        };\n        delete combo.timestamp; // Since fabricateEvent adds that in anyway\n        this.parser.fabricateEvent(combo);\n    }\n    recordBrokenCombo(event, context) {\n        if (!this.isAllowableComboBreak(event, context)) {\n            this.issues.push({\n                type: 'combobreak',\n                event,\n                context,\n            });\n        }\n        this.currentComboChain = [];\n    }\n    recordUncomboedGcd(event) {\n        this.issues.push({\n            type: 'uncomboed',\n            event,\n            context: [],\n        });\n        this.currentComboChain = [];\n    }\n    recordFailedCombo(event, context) {\n        this.issues.push({\n            type: 'failedcombo',\n            event,\n            context,\n        });\n        this.currentComboChain = [];\n    }\n    /**\n     *\n     * @param combo\n     * @param event\n     * @return true if combo, false otherwise\n     */\n    checkCombo(combo /* Should be an Action type */, event) {\n        // Not in a combo\n        if (this.lastAction == null) {\n            // Combo starter, we good\n            if (combo.start) {\n                this.fabricateComboEvent(event);\n                return true;\n            }\n            // Combo action that isn't a starter, that's a paddlin'\n            if (combo.from) {\n                this.recordUncomboedGcd(event);\n                return false;\n            }\n        }\n        if (combo.start) {\n            // Broken combo - starting a new combo while in a current combo\n            this.recordBrokenCombo(event, this.currentComboChain);\n            return true; // Start a new combo\n        }\n        // Check if action continues existing combo\n        if (combo.from) {\n            const fromOptions = Array.isArray(combo.from) ? combo.from : [combo.from];\n            if (fromOptions.includes(this.lastAction)) {\n                // Combo continued correctly\n                this.fabricateComboEvent(event);\n                // If it's a finisher, reset the combo\n                return !combo.end;\n            }\n        }\n        // Action did not continue combo correctly and is not a new combo starter\n        this.recordBrokenCombo(event, this.currentComboChain);\n        return false;\n    }\n    onCast(event) {\n        const action = this.data.getAction(event.ability.guid);\n        if (!action) {\n            return;\n        }\n        // Only track GCDs that either progress or break combos so actions like Drill and Shadow Fang don't falsely extend the simulated combo timer\n        if (action.onGcd && (action.combo || action.breaksCombo)) {\n            if (event.timestamp - this.lastGcdTime > GCD_TIMEOUT_MILLIS) {\n                // If we've had enough downtime between GCDs to let the combo expire, reset the state so we don't count erroneous combo breaks\n                this.currentComboChain = [];\n            }\n            this.lastGcdTime = event.timestamp;\n        }\n        // If it's a combo action, run it through the combo checking logic\n        if (action.combo) {\n            if (!event.successfulHit) {\n                // Failed attacks break combo\n                this.recordFailedCombo(event, this.currentComboChain);\n                return;\n            }\n            const continueCombo = this.checkCombo(action.combo, event);\n            if (continueCombo) {\n                this.currentComboChain.push(event);\n            }\n            else {\n                this.currentComboChain = [];\n            }\n        }\n        if (action.breaksCombo && this.lastAction !== null) {\n            // Combo breaking action, that's a paddlin'\n            this.recordBrokenCombo(event, this.currentComboChain);\n        }\n    }\n    onComplete() {\n        if (this.addJobSpecificSuggestions(this.comboBreakers, this.uncomboedGcds)) {\n            return;\n        }\n        this.suggestions.add(new TieredSuggestion({\n            icon: this.constructor.suggestionIcon,\n            content: <Trans id=\"core.combos.content\">\n\t\t\t\t<p>Avoid breaking combos, as failing to complete combos costs you a significant amount of DPS and important secondary effects.</p>\n\t\t\t\t<p>Using a combo GCD at the wrong combo step, using non-combo GCDs while inside a combo, missing, or attacking a target that is invulnerable will cause your combo to break.</p>\n\t\t\t</Trans>,\n            tiers: {\n                1: SEVERITY.MINOR,\n                2: SEVERITY.MEDIUM,\n                4: SEVERITY.MAJOR,\n            },\n            value: this.issues.length,\n            why: <Plural id=\"core.combos.why\" value={this.issues.length} one=\"You misused # combo action.\" other=\"You misused # combo actions.\"/>,\n        }));\n    }\n    /**\n     * To be overridden by subclasses. This is called in _onComplete() and passed two arrays of event objects - one for events that\n     * broke combos, and one for combo GCDs used outside of combos. Subclassing modules can add job-specific suggestions based on\n     * what particular actions were misused and when in the fight.\n     * The overriding module should return true if the default suggestion is not wanted\n     */\n    addJobSpecificSuggestions(comboBreakers, uncomboedGcds) {\n        return false;\n    }\n    /**\n     * To be overridden by subclasses. This is called in recordBrokenCombo, and receives the event triggering the broken combo,\n     * and the context information for that break. Jobs can override this to indicate whether this broken combo is allowed. If so,\n     * the event and context will not be recorded, and the current combo will be cleared with no other side effects.\n     * Returning false will allow the break to be recorded, and displayed to the user\n     */\n    isAllowableComboBreak(event, context) {\n        return false;\n    }\n    output() {\n        if (this.issues.length <= 0) {\n            return false;\n        }\n        // Access Alias\n        const startTime = this.parser.fight.start_time;\n        const data = this.issues\n            .sort((a, b) => a.event.timestamp - b.event.timestamp)\n            .map(issue => {\n            const completeContext = [...(issue.context || []), issue.event];\n            const startEvent = _.first(completeContext);\n            const endEvent = _.last(completeContext);\n            const startAction = this.data.getAction(startEvent.ability.guid);\n            const endAction = this.data.getAction(endEvent.ability.guid);\n            return ({\n                start: startEvent.timestamp - startTime + (startAction?.cooldown ?? DEFAULT_GCD),\n                end: endEvent.timestamp - startTime + (endAction?.cooldown ?? DEFAULT_GCD),\n                rotation: completeContext,\n                notesMap: {\n                    reason: <span style={{ whiteSpace: 'nowrap' }}>{ISSUE_TYPENAMES[issue.type]}</span>,\n                },\n            });\n        });\n        return <RotationTable notes={[\n            {\n                header: <Trans id=\"core.combos.rotationtable.header.reason\">Reason</Trans>,\n                accessor: 'reason',\n            },\n        ]} data={data} onGoto={this.timeline.show}/>;\n    }\n}\nCombos.handle = 'combos';\nCombos.title = t('core.combos.title') `Combo Issues`;\nCombos.displayOrder = DISPLAY_ORDER.COMBOS;\n// This should be redefined by subclassing modules; the default is the basic 'Attack' icon\nCombos.suggestionIcon = 'https://xivapi.com/i/000000/000405.png';\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Data)\n], Combos.prototype, \"data\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], Combos.prototype, \"suggestions\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Timeline)\n], Combos.prototype, \"timeline\", void 0);\n","import { create, meanDependencies, modeDependencies, stdDependencies, } from 'mathjs/number';\nexport default create({\n    meanDependencies,\n    modeDependencies,\n    stdDependencies,\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gcdSize\":\"40px\",\"ogcdSize\":\"30px\",\"container\":\"Rotation-module_container__32KS2\",\"link\":\"Rotation-module_link__2T3fu\",\"ogcd\":\"Rotation-module_ogcd__3oBO8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gutter\":\"20px\",\"checkbox\":\"Suggestions-module_checkbox__1Z22N\",\"items\":\"Suggestions-module_items__3sCkP\",\"item\":\"Suggestions-module_item__1yy1-\",\"extra\":\"Suggestions-module_extra__3WN2d\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"lg\":\"(min-width: 992px)\",\"title\":\"Checklist-module_title__2ro7x\",\"percent\":\"Checklist-module_percent__EKBdj\",\"progress\":\"Checklist-module_progress__28lgp\",\"description\":\"Checklist-module_description__3Bf5O\"};","import Module from 'parser/core/Module';\nimport { ItemGroup, Item } from './Timeline';\nimport React from 'react';\nconst STATUS_APPLY_ON_PARTY_THRESHOLD_MILLISECONDS = 2 * 1000;\n// Track statuses applied by actions\nexport default class Statuses extends Module {\n    constructor(...args) {\n        super(...args);\n        this._statuses = {};\n        this._groups = {};\n        this._statusToActionMap = {};\n        this._actionToMergeNameMap = {};\n        const ids = [this.parser.player.id, ...this.parser.player.pets.map(p => p.id)];\n        const byFilter = { by: ids };\n        this.addHook('complete', this._onComplete);\n        this.addHook(['applybuff', 'applydebuff'], byFilter, this._onApply);\n        this.addHook(['refreshdebuff', 'refreshbuff'], byFilter, this._onRefresh);\n        this.addHook(['removebuff', 'removedebuff'], byFilter, this._onRemove);\n        this.cooldowns.constructor.cooldownOrder.forEach(cd => {\n            if (cd && typeof cd === 'object' && cd.merge) {\n                cd.actions.forEach(ac => {\n                    this._actionToMergeNameMap[ac] = cd.name;\n                });\n            }\n        });\n        // Map statuses to actions\n        Object.values(this.data.actions).forEach(action => {\n            if (!action.statusesApplied) {\n                return;\n            }\n            action.statusesApplied.forEach(statusKey => {\n                const status = this.data.statuses[statusKey];\n                this._statusToActionMap[status.id] = action;\n            });\n        });\n    }\n    _onApply(event) {\n        if (this._isStatusAppliedToPet(event)) {\n            return;\n        }\n        this._addStatus(event);\n    }\n    _onRefresh(event) {\n        if (this._isStatusAppliedToPet(event)) {\n            return;\n        }\n        this._endPrevStatus(event);\n        this._addStatus(event);\n    }\n    _onRemove(event) {\n        if (this._isStatusAppliedToPet(event)) {\n            return;\n        }\n        this._endPrevStatus(event);\n    }\n    _endPrevStatus(event) {\n        const status = this.data.getStatus(event.ability.guid);\n        if (!status) {\n            return;\n        }\n        const statusEntry = this._statuses[status.id];\n        if (statusEntry) {\n            const prev = statusEntry.usages[statusEntry.usages.length - 1];\n            if (!prev.end) {\n                prev.end = event.timestamp - this.parser.fight.start_time;\n            }\n        }\n    }\n    _addStatus(event) {\n        const status = this.data.getStatus(event.ability.guid);\n        if (!status) {\n            return;\n        }\n        let statusEntry = this._statuses[status.id];\n        if (!statusEntry) {\n            statusEntry = this._statuses[status.id] = {\n                status: status,\n                usages: [],\n            };\n        }\n        if (statusEntry.usages.some(it => {\n            const diff = Math.abs(event.timestamp - this.parser.fight.start_time - it.start);\n            return diff <= STATUS_APPLY_ON_PARTY_THRESHOLD_MILLISECONDS;\n        })) {\n            return;\n        }\n        statusEntry.usages.push({\n            start: event.timestamp - this.parser.fight.start_time,\n        });\n    }\n    _onComplete() {\n        Object.values(this._statuses).forEach(entry => {\n            const group = this._createGroupForStatus(entry.status);\n            if (!group) {\n                return;\n            }\n            entry.usages.forEach(st => {\n                group.addItem(new Item({\n                    type: 'background',\n                    start: st.start,\n                    end: st.end || st.start + entry.status.duration * 1000,\n                    content: <img src={entry.status.icon} alt={entry.status.name}/>,\n                }));\n            });\n        });\n    }\n    _createGroupForStatus(status) {\n        const stid = 'status-' + (this.constructor.statusesStackMapping[status.id] || status.id);\n        if (this._groups[stid]) {\n            return this._groups[stid];\n        }\n        // find action for status\n        const action = this._statusToActionMap[status.id];\n        if (!action) {\n            return undefined;\n        }\n        const group = new ItemGroup({\n            id: stid,\n            content: status.name,\n            showNested: false,\n        });\n        this._groups[stid] = group;\n        this.timeline.attachToGroup(action.onGcd ? this.gcd.gcdGroupId : (this._actionToMergeNameMap[action.id] || action.id), group);\n        return group;\n    }\n    _isStatusAppliedToPet(event) {\n        return (this.parser.report.friendlyPets.some(p => p.id === event.targetID));\n    }\n}\nStatuses.handle = 'statuses';\nStatuses.dependencies = [\n    'data',\n    'timeline',\n    'cooldowns',\n    'gcd',\n];\nStatuses.statusesStackMapping = {};\n","import Module from 'parser/core/Module';\nexport default class Downtime extends Module {\n    _internalDowntime(start = 0, end = this.parser.currentTimestamp) {\n        // Get all the downtime from both unableToAct and invuln, and sort it\n        const downtimePeriods = [\n            ...this.unableToAct.getDowntimes(start, end),\n            ...this.invuln.getInvulns('all', start, end, 'untargetable'),\n        ].sort((a, b) => a.start - b.start);\n        // If there's nothing, just stop now\n        if (!downtimePeriods.length) {\n            return [];\n        }\n        // Merge the downtimes that overlap\n        const finalDowntimes = [downtimePeriods.shift()];\n        downtimePeriods.forEach(dt => {\n            const last = finalDowntimes[finalDowntimes.length - 1];\n            if (dt.start <= last.end) {\n                if (dt.end > last.end) {\n                    last.end = dt.end;\n                }\n            }\n            else {\n                finalDowntimes.push(dt);\n            }\n        });\n        return finalDowntimes;\n    }\n    isDowntime(when = this.parser.currentTimestamp) {\n        return this._internalDowntime(when, when).length > 0;\n    }\n    getDowntime(start = 0, end = this.parser.currentTimestamp) {\n        // Return the final number\n        return this._internalDowntime(start, end).reduce((uptime, invuln) => uptime + Math.min(invuln.end, end) - Math.max(invuln.start, start), 0);\n    }\n    getDowntimes(start = 0, end = this.parser.currentTimestamp, minimumDowntimeLength = -1) {\n        return this._internalDowntime(start, end).reduce((aggregator, invuln) => {\n            if (Math.min(invuln.end, end) - Math.max(invuln.start, start) > Math.min(minimumDowntimeLength, 0)) {\n                aggregator.push(Math.min(invuln.end, end) - Math.max(invuln.start, start));\n            }\n            return aggregator;\n        }, []);\n    }\n    getDowntimeWindows(start = 0, end = this.parser.currentTimestamp, minimumWindowSize = -1) {\n        return this._internalDowntime(start, end).reduce((aggregator, invuln) => {\n            if (Math.min(invuln.end, end) - Math.max(invuln.start, start) > Math.min(minimumWindowSize, 0)) {\n                aggregator.push({ start: Math.max(invuln.start, start), end: Math.min(invuln.end, end) });\n            }\n            return aggregator;\n        }, []);\n    }\n}\nDowntime.handle = 'downtime';\nDowntime.dependencies = [\n    'invuln',\n    'unableToAct',\n];\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"meta\":\"About-module_meta__bVZ7F\",\"contributor\":\"About-module_contributor__2ELgI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"change\":\"ChangeLog-module_change__4IR3G\",\"date\":\"ChangeLog-module_date__3MEFU\",\"message\":\"ChangeLog-module_message__3Ns1X\",\"contributors\":\"ChangeLog-module_contributors__1tGd5\"};","import _extends from \"@babel/runtime/helpers/extends\";\nimport _without from \"lodash/without\";\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { childrenUtils, customPropTypes, getElementType, getUnhandledProps, SUI, useKeyOnly } from '../../lib';\n/**\n * A group of segments can be formatted to appear together.\n */\n\nfunction SegmentGroup(props) {\n  var children = props.children,\n      className = props.className,\n      compact = props.compact,\n      content = props.content,\n      horizontal = props.horizontal,\n      piled = props.piled,\n      raised = props.raised,\n      size = props.size,\n      stacked = props.stacked;\n  var classes = cx('ui', size, useKeyOnly(compact, 'compact'), useKeyOnly(horizontal, 'horizontal'), useKeyOnly(piled, 'piled'), useKeyOnly(raised, 'raised'), useKeyOnly(stacked, 'stacked'), 'segments', className);\n  var rest = getUnhandledProps(SegmentGroup, props);\n  var ElementType = getElementType(SegmentGroup, props);\n  return React.createElement(ElementType, _extends({}, rest, {\n    className: classes\n  }), childrenUtils.isNil(children) ? content : children);\n}\n\nSegmentGroup.handledProps = [\"as\", \"children\", \"className\", \"compact\", \"content\", \"horizontal\", \"piled\", \"raised\", \"size\", \"stacked\"];\nSegmentGroup.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /** An element type to render as (string or function). */\n  as: PropTypes.elementType,\n\n  /** Primary content. */\n  children: PropTypes.node,\n\n  /** Additional classes. */\n  className: PropTypes.string,\n\n  /** A segment may take up only as much space as is necessary. */\n  compact: PropTypes.bool,\n\n  /** Shorthand for primary content. */\n  content: customPropTypes.contentShorthand,\n\n  /** Formats content to be aligned horizontally. */\n  horizontal: PropTypes.bool,\n\n  /** Formatted to look like a pile of pages. */\n  piled: PropTypes.bool,\n\n  /** A segment group may be formatted to raise above the page. */\n  raised: PropTypes.bool,\n\n  /** A segment group can have different sizes. */\n  size: PropTypes.oneOf(_without(SUI.SIZES, 'medium')),\n\n  /** Formatted to show it contains multiple pages. */\n  stacked: PropTypes.bool\n} : {};\nexport default SegmentGroup;","import _extends from \"@babel/runtime/helpers/extends\";\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { childrenUtils, customPropTypes, getElementType, getUnhandledProps } from '../../lib';\n/**\n * A placeholder segment can be inline.\n */\n\nfunction SegmentInline(props) {\n  var children = props.children,\n      className = props.className,\n      content = props.content;\n  var classes = cx('inline', className);\n  var rest = getUnhandledProps(SegmentInline, props);\n  var ElementType = getElementType(SegmentInline, props);\n  return React.createElement(ElementType, _extends({}, rest, {\n    className: classes\n  }), childrenUtils.isNil(children) ? content : children);\n}\n\nSegmentInline.handledProps = [\"as\", \"children\", \"className\", \"content\"];\nSegmentInline.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /** An element type to render as (string or function). */\n  as: PropTypes.elementType,\n\n  /** Primary content. */\n  children: PropTypes.node,\n\n  /** Additional classes. */\n  className: PropTypes.string,\n\n  /** Shorthand for primary content. */\n  content: customPropTypes.contentShorthand\n} : {};\nexport default SegmentInline;","import _extends from \"@babel/runtime/helpers/extends\";\nimport _without from \"lodash/without\";\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { childrenUtils, customPropTypes, getElementType, getUnhandledProps, SUI, useKeyOnly, useKeyOrValueAndKey, useTextAlignProp, useValueAndKey } from '../../lib';\nimport SegmentGroup from './SegmentGroup';\nimport SegmentInline from './SegmentInline';\n/**\n * A segment is used to create a grouping of related content.\n */\n\nfunction Segment(props) {\n  var attached = props.attached,\n      basic = props.basic,\n      children = props.children,\n      circular = props.circular,\n      className = props.className,\n      clearing = props.clearing,\n      color = props.color,\n      compact = props.compact,\n      content = props.content,\n      disabled = props.disabled,\n      floated = props.floated,\n      inverted = props.inverted,\n      loading = props.loading,\n      placeholder = props.placeholder,\n      padded = props.padded,\n      piled = props.piled,\n      raised = props.raised,\n      secondary = props.secondary,\n      size = props.size,\n      stacked = props.stacked,\n      tertiary = props.tertiary,\n      textAlign = props.textAlign,\n      vertical = props.vertical;\n  var classes = cx('ui', color, size, useKeyOnly(basic, 'basic'), useKeyOnly(circular, 'circular'), useKeyOnly(clearing, 'clearing'), useKeyOnly(compact, 'compact'), useKeyOnly(disabled, 'disabled'), useKeyOnly(inverted, 'inverted'), useKeyOnly(loading, 'loading'), useKeyOnly(placeholder, 'placeholder'), useKeyOnly(piled, 'piled'), useKeyOnly(raised, 'raised'), useKeyOnly(secondary, 'secondary'), useKeyOnly(stacked, 'stacked'), useKeyOnly(tertiary, 'tertiary'), useKeyOnly(vertical, 'vertical'), useKeyOrValueAndKey(attached, 'attached'), useKeyOrValueAndKey(padded, 'padded'), useTextAlignProp(textAlign), useValueAndKey(floated, 'floated'), 'segment', className);\n  var rest = getUnhandledProps(Segment, props);\n  var ElementType = getElementType(Segment, props);\n  return React.createElement(ElementType, _extends({}, rest, {\n    className: classes\n  }), childrenUtils.isNil(children) ? content : children);\n}\n\nSegment.handledProps = [\"as\", \"attached\", \"basic\", \"children\", \"circular\", \"className\", \"clearing\", \"color\", \"compact\", \"content\", \"disabled\", \"floated\", \"inverted\", \"loading\", \"padded\", \"piled\", \"placeholder\", \"raised\", \"secondary\", \"size\", \"stacked\", \"tertiary\", \"textAlign\", \"vertical\"];\nSegment.Group = SegmentGroup;\nSegment.Inline = SegmentInline;\nSegment.propTypes = process.env.NODE_ENV !== \"production\" ? {\n  /** An element type to render as (string or function). */\n  as: PropTypes.elementType,\n\n  /** Attach segment to other content, like a header. */\n  attached: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['top', 'bottom'])]),\n\n  /** A basic segment has no special formatting. */\n  basic: PropTypes.bool,\n\n  /** Primary content. */\n  children: PropTypes.node,\n\n  /** A segment can be circular. */\n  circular: PropTypes.bool,\n\n  /** Additional classes. */\n  className: PropTypes.string,\n\n  /** A segment can clear floated content. */\n  clearing: PropTypes.bool,\n\n  /** Segment can be colored. */\n  color: PropTypes.oneOf(SUI.COLORS),\n\n  /** A segment may take up only as much space as is necessary. */\n  compact: PropTypes.bool,\n\n  /** Shorthand for primary content. */\n  content: customPropTypes.contentShorthand,\n\n  /** A segment may show its content is disabled. */\n  disabled: PropTypes.bool,\n\n  /** Segment content can be floated to the left or right. */\n  floated: PropTypes.oneOf(SUI.FLOATS),\n\n  /** A segment can have its colors inverted for contrast. */\n  inverted: PropTypes.bool,\n\n  /** A segment may show its content is being loaded. */\n  loading: PropTypes.bool,\n\n  /** A segment can increase its padding. */\n  padded: PropTypes.oneOfType([PropTypes.bool, PropTypes.oneOf(['very'])]),\n\n  /** A segment can be used to reserve space for conditionally displayed content. */\n  placeholder: PropTypes.bool,\n\n  /** Formatted to look like a pile of pages. */\n  piled: PropTypes.bool,\n\n  /** A segment may be formatted to raise above the page. */\n  raised: PropTypes.bool,\n\n  /** A segment can be formatted to appear less noticeable. */\n  secondary: PropTypes.bool,\n\n  /** A segment can have different sizes. */\n  size: PropTypes.oneOf(_without(SUI.SIZES, 'medium')),\n\n  /** Formatted to show it contains multiple pages. */\n  stacked: PropTypes.bool,\n\n  /** A segment can be formatted to appear even less noticeable. */\n  tertiary: PropTypes.bool,\n\n  /** Formats content to be aligned as part of a vertical group. */\n  textAlign: PropTypes.oneOf(_without(SUI.TEXT_ALIGNMENTS, 'justified')),\n\n  /** Formats content to be aligned vertically. */\n  vertical: PropTypes.bool\n} : {};\nexport default Segment;","import Color from 'color';\nimport PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { Label } from 'semantic-ui-react';\nexport default class ContributorLabel extends PureComponent {\n    render() {\n        const { contributor, detail } = this.props;\n        const name = typeof contributor === 'string' ? contributor : contributor.name;\n        const style = {};\n        if (contributor.jobs && contributor.jobs.length) {\n            // I'm assuming the first job they list is their 'main'\n            const job = contributor.jobs[0];\n            style.backgroundColor = job.colour;\n            const colour = Color(job.colour);\n            if (colour.isDark()) {\n                style.color = 'white';\n            }\n        }\n        return <Label image style={style}>\n\t\t\t{contributor.avatar && <img src={contributor.avatar} alt={name}/>}\n\t\t\t{name}\n\t\t\t{detail && <Label.Detail>{detail}</Label.Detail>}\n\t\t</Label>;\n    }\n}\nContributorLabel.propTypes = {\n    contributor: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.shape({\n            name: PropTypes.string.isRequired,\n            avatar: PropTypes.string,\n        }),\n    ]).isRequired,\n    detail: PropTypes.node,\n};\n","import { t } from '@lingui/macro';\nimport { Trans } from '@lingui/react';\nimport React from 'react';\nimport { Grid, Message, Icon, Segment } from 'semantic-ui-react';\nimport ContributorLabel from 'components/ui/ContributorLabel';\nimport NormalisedMessage from 'components/ui/NormalisedMessage';\nimport { patchSupported, languageToEdition } from 'data/PATCHES';\nimport Module, { DISPLAY_MODE } from 'parser/core/Module';\nimport DISPLAY_ORDER from './DISPLAY_ORDER';\nimport styles from './About.module.css';\nexport default class About extends Module {\n    constructor(...args) {\n        super(...args);\n        this.Description = null;\n        this.contributors = [];\n        this.supportedPatches = null;\n        // Merge the parser's metadata in\n        const fields = ['Description', 'contributors', 'supportedPatches'];\n        fields.forEach(field => {\n            this[field] = this.parser.meta[field];\n        });\n    }\n    // {\n    //\t\tfrom: ...,\n    //\t\tto: ...,\n    // }\n    set supportedPatch(value) {\n        // Warn the dev that they're using a deprecated prop\n        if (process.env.NODE_ENV === 'development') {\n            console.warn('About.suportedPatch has been deprecated. Please use the About.supportedPatches object instead.');\n        }\n        this.supportedPatches.from = value;\n    }\n    output() {\n        // If they've not set the supported patch range, we're assuming it's not supported at all\n        if (!this.supportedPatches) {\n            return <Message warning icon>\n\t\t\t\t<Icon name=\"warning sign\"/>\n\t\t\t\t<Message.Content>\n\t\t\t\t\t<Message.Header>\n\t\t\t\t\t\t<Trans id=\"core.about.unsupported.title\">This job is currently unsupported</Trans>\n\t\t\t\t\t</Message.Header>\n\t\t\t\t\t<Trans id=\"core.about.unsupported.description\">\n\t\t\t\t\t\tThe output shown below will not contain any job-specific analysis, and may be missing critical data required to generate an accurate result.\n\t\t\t\t\t</Trans>\n\t\t\t\t</Message.Content>\n\t\t\t</Message>;\n        }\n        // Work out the supported patch range (and if we're in it)\n        const { from, to = from } = this.supportedPatches;\n        const supported = patchSupported(languageToEdition(this.parser.report.lang), from, to, this.parser.parseDate);\n        return <Grid>\n\t\t\t<Grid.Column mobile={16} computer={10}>\n\t\t\t\t<this.Description />\n\t\t\t\t{!supported && <Message error icon>\n\t\t\t\t\t<Icon name=\"times circle outline\"/>\n\t\t\t\t\t<Message.Content>\n\t\t\t\t\t\t<Message.Header>\n\t\t\t\t\t\t\t<Trans id=\"core.about.patch-unsupported.title\">Report patch unsupported</Trans>\n\t\t\t\t\t\t</Message.Header>\n\t\t\t\t\t\t<Trans id=\"core.about.patch-unsupported.description\">\n\t\t\t\t\t\t\tThis report was logged during patch {this.parser.patch.key}, which is not supported by the analyser. Calculations and suggestions may be impacted by changes in the interim.\n\t\t\t\t\t\t</Trans>\n\t\t\t\t\t</Message.Content>\n\t\t\t\t</Message>}\n\t\t\t</Grid.Column>\n\n\t\t\t\n\t\t\t\n\t\t\t<Grid.Column mobile={16} computer={6}>\n\t\t\t\t<Segment as=\"dl\" className={styles.meta}>\n\t\t\t\t\t<dt><Trans id=\"core.about.supported-patches\">Supported Patches:</Trans></dt>\n\t\t\t\t\t<dd>{from}{from !== to && `${to}`}</dd>\n\n\t\t\t\t\t{this.contributors.length > 0 && <>\n\t\t\t\t\t\t<dt><Trans id=\"core.about.contributors\">Contributors:</Trans></dt>\n\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t{this.contributors.map(contributor => {\n            const { user, role } = contributor;\n            return <div key={typeof user === 'string' ? user : user.name} className={styles.contributor}>\n\t\t\t\t\t\t\t\t\t<ContributorLabel contributor={user} detail={role && <NormalisedMessage message={role.text}/>}/>\n\t\t\t\t\t\t\t\t</div>;\n        })}\n\t\t\t\t\t\t</dd>\n\t\t\t\t\t</>}\n\t\t\t\t</Segment>\n\t\t\t</Grid.Column>\n\t\t</Grid>;\n    }\n}\nAbout.handle = 'about';\nAbout.displayOrder = DISPLAY_ORDER.ABOUT;\nAbout.displayMode = DISPLAY_MODE.FULL;\nAbout.title = t('core.about.title') `About`;\n","import Module from 'parser/core/Module';\nimport { Rule, Requirement } from 'parser/core/modules/Checklist';\nimport React from 'react';\nimport { Trans } from '@lingui/react';\nexport default class AlwaysBeCasting extends Module {\n    constructor(...args) {\n        super(...args);\n        this.addHook('complete', this._onComplete);\n    }\n    // Just using this for the suggestion for now\n    _onComplete() {\n        const numGcds = this.gcd.gcds.length;\n        if (!numGcds) {\n            return;\n        }\n        const fightDuration = this.parser.fightDuration - this.downtime.getDowntime();\n        this.checklist.add(new Rule({\n            name: <Trans id=\"core.always-cast.title\">Always be casting</Trans>,\n            description: <Trans id=\"core.always-cast.description\">\n\t\t\t\tMake sure you're always doing something. It's often better to make small\n\t\t\t\tmistakes while keeping the GCD rolling than it is to perform the correct\n\t\t\t\trotation slowly.\n\t\t\t</Trans>,\n            requirements: [\n                new Requirement({\n                    name: <Trans id=\"core.always-cast.gcd-uptime\">GCD Uptime</Trans>,\n                    percent: this.gcd.getUptime() / fightDuration * 100,\n                }),\n            ],\n        }));\n    }\n}\nAlwaysBeCasting.handle = 'abc';\nAlwaysBeCasting.dependencies = [\n    'checklist',\n    'downtime',\n    'gcd',\n];\n","import Module from 'parser/core/Module';\n// Blame Meishu. No touchy.\nconst INTERNAL_EVENT_TYPE = Symbol('aoe');\n// Sequential damage events with more than this time diff (in ms) will be considered seperate damage pulses\n// Consecutive staus events seem to have a longer sequential gap\n// At the moment, 200ms threshold seems to parse it correctly\nconst DEFAULT_AOE_THRESHOLD = 20;\nconst STATUS_AOE_THRESHOLD = 200;\nconst SUPPORTED_EVENTS = [\n    'refreshbuff',\n    'applybuff',\n];\nexport default class AoE extends Module {\n    constructor(...args) {\n        super(...args);\n        // Listen to our own event from normalisation\n        this.addHook(INTERNAL_EVENT_TYPE, this._onAoe);\n    }\n    // Need to normalise so the final events can go out at the right time\n    normalise(events) {\n        // Determine which name to use for damage and heal events (calculated vs normal)\n        SUPPORTED_EVENTS.push(this.fflogsEvents.damageEventName, this.fflogsEvents.healEventName);\n        // Track hits by source\n        const trackers = {};\n        function getTracker(event) {\n            if (!event.ability) {\n                return {};\n            }\n            if (!trackers[event.sourceID]) {\n                trackers[event.sourceID] = {};\n            }\n            const source = trackers[event.sourceID];\n            const abilityId = event.ability.guid;\n            return source[abilityId] = source[abilityId] || {\n                events: {},\n                insertAfter: 0,\n                timestamp: null,\n            };\n        }\n        const toAdd = [];\n        function addEvent(tracker) {\n            // Set the timestamp to be the very first of all the events\n            for (const eventType in tracker.events) {\n                if (tracker.events[eventType].length !== 0) {\n                    tracker.timestamp = tracker.timestamp || tracker.events[eventType][0].timestamp;\n                    tracker.timestamp = tracker.timestamp < tracker.events[eventType][0].timestamp ? tracker.timestamp : tracker.events[eventType][0].timestamp;\n                }\n            }\n            toAdd.push({\n                ...tracker,\n                type: INTERNAL_EVENT_TYPE,\n            });\n        }\n        for (let i = 0; i < events.length; i++) {\n            const event = events[i];\n            if (!SUPPORTED_EVENTS.includes(event.type)) {\n                continue;\n            }\n            const tracker = getTracker(event);\n            // Get the timestamp of the last event\n            let lastHitTimestamp = null;\n            if (Object.keys(tracker.events).length) {\n                for (const eventType in tracker.events) {\n                    // compare all event groups for the absolute last hit\n                    const groupLastHit = tracker.events[eventType][tracker.events[eventType].length - 1];\n                    if (lastHitTimestamp < groupLastHit.timestamp) {\n                        lastHitTimestamp = groupLastHit.timestamp;\n                    }\n                }\n            }\n            // It seems to be that status events have a longer application gap\n            const AOE_THRESHOLD = event.type === 'refreshbuff' || event.type === 'applybuff' ? STATUS_AOE_THRESHOLD : DEFAULT_AOE_THRESHOLD;\n            // If the last event was too long ago, generate an event\n            if (lastHitTimestamp && event.timestamp - lastHitTimestamp > AOE_THRESHOLD) {\n                addEvent(tracker);\n                tracker.events = {};\n                tracker.timestamp = null;\n            }\n            // If this is the first event of it's type, make a new property for it\n            if (!tracker.events[event.type]) {\n                tracker.events[event.type] = [];\n            }\n            event.i = i;\n            tracker.events[event.type].push(event);\n            tracker.insertAfter = i;\n        }\n        // Run a cleanup\n        for (const sourceId in trackers) {\n            for (const abilityId in trackers[sourceId]) {\n                const tracker = trackers[sourceId][abilityId];\n                let shouldCleanup = false;\n                for (const eventType in tracker.events) {\n                    if (tracker.events[eventType].length !== 0) {\n                        shouldCleanup = true;\n                    }\n                }\n                if (shouldCleanup) {\n                    addEvent(tracker);\n                }\n            }\n        }\n        // Add all the events we gathered up in, in order\n        let offset = 0;\n        toAdd.sort((a, b) => a.insertAfter - b.insertAfter).forEach(event => {\n            events.splice(event.insertAfter + 1 + offset, 0, event);\n            offset++;\n        });\n        return events;\n    }\n    _onAoe(event) {\n        if (!Object.keys(event.events).length) {\n            return;\n        }\n        for (const eventType in event.events) {\n            // Filter out any damage events that don't pass muster\n            let hitsByTarget = event.events[eventType];\n            if (eventType === 'damage') {\n                hitsByTarget = hitsByTarget.filter(this.isValidHit.bind(this));\n            }\n            // Transform into a simplified format\n            hitsByTarget = hitsByTarget.reduce((carry, event) => {\n                const key = `${event.targetID}-${event.targetInstance}`;\n                if (carry[key]) {\n                    carry[key].times++;\n                    carry[key].amount += event.amount;\n                    carry[key].successfulHit = carry[key].successfulHit || event.successfulHit;\n                }\n                else {\n                    carry[key] = {\n                        id: event.targetID,\n                        instance: event.targetInstance,\n                        times: 1,\n                        amount: event.amount,\n                        successfulHit: event.successfulHit,\n                    };\n                }\n                return carry;\n            }, {});\n            const fabricatedEvent = {\n                type: 'aoe' + eventType.replace('calculated', ''),\n                timestamp: event.events[eventType][0].timestamp,\n                ability: event.events[eventType][0].ability,\n                hits: Object.values(hitsByTarget),\n                sourceID: event.events[eventType][0].sourceID,\n                amount: Object.values(hitsByTarget).reduce((total, hit) => total + hit.amount, 0),\n                successfulHit: Object.values(hitsByTarget).reduce((successfulHit, hit) => successfulHit || hit.successfulHit, false),\n            };\n            if (event.events[eventType][0].hasOwnProperty('sourceResources')) {\n                fabricatedEvent.sourceResources = event.events[eventType][0].sourceResources;\n            }\n            this.parser.fabricateEvent(fabricatedEvent);\n        }\n    }\n    isValidHit(event) {\n        // Checking the event's target - if we get a falsey value back, it's an invalid target\n        const validTarget = !!this.enemies.getEntity(event.targetID);\n        // If there's an amount key but it's 0, it was likely a hit on an invuln target\n        // Allow hits w/ overkill, as the fflogs algo for that shit is flakey\n        const zeroAmount = event.amount === 0 && !event.overkill;\n        return validTarget && !zeroAmount;\n    }\n}\nAoE.handle = 'aoe';\nAoE.dependencies = [\n    // Need the precasts to fire first so we've got full info for the aoe calcs\n    'precastAction',\n    'precastStatus',\n    'enemies',\n    'fflogsEvents',\n];\n","import { __decorate, __metadata } from \"tslib\";\nimport { t } from '@lingui/macro';\nimport { Trans } from '@lingui/react';\nimport * as Sentry from '@sentry/browser';\nimport { Message, Segment } from 'akkd';\nimport NormalisedMessage from 'components/ui/NormalisedMessage';\nimport { getReportPatch } from 'data/PATCHES';\nimport Module, { dependency, DISPLAY_MODE } from 'parser/core/Module';\nimport React from 'react';\nimport { Table } from 'semantic-ui-react';\nimport { Data } from './Data';\nimport DISPLAY_ORDER from './DISPLAY_ORDER';\nconst EXPECTED_ABILITY_EVENTS = [\n    'begincast',\n    'cast',\n    'damage',\n    'calculateddamage',\n    'heal',\n    'calculatedheal',\n    'applybuff',\n    'applydebuff',\n    'refreshbuff',\n    'refreshdebuff',\n    'removebuff',\n    'removedebuff',\n    'applybuffstack',\n    'applydebuffstack',\n    'removebuffstack',\n    'removedebuffstack',\n];\nexport default class BrokenLog extends Module {\n    constructor() {\n        super(...arguments);\n        this.triggers = new Map();\n    }\n    init() {\n        // Unknown actions are unparseable\n        this.addHook(EXPECTED_ABILITY_EVENTS, { by: 'player', abilityId: this.data.actions.UNKNOWN.id }, () => {\n            this.trigger(this, 'unknown action', (<Trans id=\"core.broken-log.trigger.unknown-action\">\n\t\t\t\t\t\tOne or more actions were recorded incorrectly, and could not be parsed.\n\t\t\t\t\t</Trans>));\n        });\n    }\n    /**\n     * Trigger the module to display the broken log error.\n     * @param key Unique key that represents the BL trigger\n     * @param module Module that is triggering BL\n     * @param reason Short description of why BL was triggered\n     */\n    trigger(module, key, reason) {\n        const constructor = module.constructor;\n        const { handle } = constructor;\n        const triggerKey = `${handle}.${key}`;\n        // If this is the first time this issue has been triggered, try and report it to Sentry\n        if (!this.triggers.has(triggerKey) &&\n            !getReportPatch(this.parser.report).branch) {\n            const job = this.parser.player.type;\n            Sentry.withScope(scope => {\n                scope.setTags({\n                    job,\n                    module: handle,\n                });\n                scope.setExtras({\n                    report: this.parser.report.code,\n                    fight: this.parser.fight.id,\n                    player: this.parser.player.id,\n                });\n                Sentry.captureMessage(`${job}.${triggerKey}`);\n            });\n        }\n        this.triggers.set(triggerKey, {\n            module: constructor,\n            reason,\n        });\n    }\n    output() {\n        if (this.triggers.size === 0) {\n            return false;\n        }\n        return <Segment>\n\t\t\t<Message error icon=\"times circle outline\">\n\t\t\t\t<Trans id=\"core.broken-log.broken-log.title\" render={<Message.Header />}>\n\t\t\t\t\tThis log is broken.\n\t\t\t\t</Trans>\n\t\t\t\t<Trans id=\"core.broken-log.broken-log.description\">\n\t\t\t\t\tOne or more modules have reported that this log contains inconsistencies that would suggest data is missing or incorrect. While the system does try to maintain sane results in this situation, some statistics may be inaccurate.\n\t\t\t\t</Trans>\n\t\t\t</Message>\n\n\t\t\t<Table basic=\"very\" compact=\"very\">\n\t\t\t\t<Table.Header>\n\t\t\t\t\t<Table.Row>\n\t\t\t\t\t\t<Trans id=\"core.broken-log.list.module\" render={<Table.HeaderCell />}>Module</Trans>\n\t\t\t\t\t\t<Trans id=\"core.broken-log.list.reason\" render={<Table.HeaderCell />}>Reason</Trans>\n\t\t\t\t\t</Table.Row>\n\t\t\t\t</Table.Header>\n\t\t\t\t<Table.Body>\n\t\t\t\t\t{Array.from(this.triggers.values()).map(({ module, reason }) => (<Table.Row>\n\t\t\t\t\t\t\t<Table.Cell><NormalisedMessage message={module.title} id={module.i18n_id}/></Table.Cell>\n\t\t\t\t\t\t\t<Table.Cell>{reason}</Table.Cell>\n\t\t\t\t\t\t</Table.Row>))}\n\t\t\t\t</Table.Body>\n\t\t\t</Table>\n\t\t</Segment>;\n    }\n}\nBrokenLog.handle = 'brokenLog';\nBrokenLog.title = t('core.broken-log.title') `Broken Log`;\nBrokenLog.displayOrder = DISPLAY_ORDER.BROKEN_LOG;\nBrokenLog.displayMode = DISPLAY_MODE.RAW;\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Data)\n], BrokenLog.prototype, \"data\", void 0);\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Accordion } from 'semantic-ui-react';\nimport ContributorLabel from 'components/ui/ContributorLabel';\nimport styles from './ChangeLog.module.css';\nexport default class ChangeLog extends React.PureComponent {\n    constructor() {\n        super(...arguments);\n        this.state = {\n            activeIndexes: new Set(),\n        };\n        this.handleClick = (event, props) => {\n            const { index } = props;\n            const { activeIndexes } = this.state;\n            const newIndexes = new Set(activeIndexes);\n            if (newIndexes.has(index)) {\n                newIndexes.delete(index);\n            }\n            else {\n                newIndexes.add(index);\n            }\n            this.setState({ activeIndexes: newIndexes });\n        };\n    }\n    render() {\n        const { activeIndexes } = this.state;\n        return <Accordion fluid styled>\n\t\t\t{this.props.changelog.map((item, index) => {\n            const dateString = item.date.toLocaleDateString();\n            const active = activeIndexes.has(index);\n            return <React.Fragment key={index}>\n\t\t\t\t\t<Accordion.Title index={index} active={active} onClick={this.handleClick} className={styles.change}>\n\t\t\t\t\t\t<strong className={styles.date}>{dateString}</strong>\n\n\t\t\t\t\t\t{!active && <span className={styles.message}><item.Changes /></span>}\n\n\t\t\t\t\t\t{item.contributors && item.contributors.length > 0 && (<div className={styles.contributors}>\n\t\t\t\t\t\t\t\t{item.contributors.map(contributor => (<ContributorLabel key={contributor.name} contributor={contributor}/>))}\n\t\t\t\t\t\t\t</div>)}\n\t\t\t\t\t</Accordion.Title>\n\n\t\t\t\t\t<Accordion.Content active={active}>\n\t\t\t\t\t\t<item.Changes />\n\t\t\t\t\t</Accordion.Content>\n\t\t\t\t</React.Fragment>;\n        })}\n\t\t</Accordion>;\n    }\n}\nChangeLog.propTypes = {\n    changelog: PropTypes.arrayOf(PropTypes.shape({\n        date: PropTypes.instanceOf(Date),\n        contributors: PropTypes.array,\n        changes: PropTypes.string,\n    })),\n};\n","import { t } from '@lingui/macro';\nimport React from 'react';\nimport { default as ChangelogComponent } from './Component';\nimport Module, { DISPLAY_MODE } from 'parser/core/Module';\nimport DISPLAY_ORDER from '../DISPLAY_ORDER';\nexport default class ChangeLog extends Module {\n    output() {\n        const { changelog } = this.parser.meta;\n        if (changelog.length === 0) {\n            return false;\n        }\n        // Sorts the changelog by date. New to old.\n        changelog.sort((a, b) => b.date - a.date);\n        return <ChangelogComponent changelog={changelog}/>;\n    }\n}\nChangeLog.handle = 'changelog';\nChangeLog.displayOrder = DISPLAY_ORDER.CHANGELOG;\nChangeLog.displayMode = DISPLAY_MODE.FULL;\nChangeLog.title = t('core.changelog.title') `Changelog`;\n","import React from 'react';\nimport { Plural, Trans } from '@lingui/react';\nimport Module from 'parser/core/Module';\nimport { Item } from 'parser/core/modules/Timeline';\nimport { Suggestion, SEVERITY } from 'parser/core/modules/Suggestions';\n// One of these being applied to an actor signifies they're back up\nconst RAISE_STATUSES = [\n    'WEAKNESS',\n    'BRINK_OF_DEATH',\n];\nexport default class Death extends Module {\n    constructor(...args) {\n        super(...args);\n        this._count = 0;\n        this._deadTime = 0;\n        this._timestamp = null;\n        const raiseStatuses = RAISE_STATUSES.map(key => this.data.statuses[key]);\n        this.addHook('death', { to: 'player' }, this._onDeath);\n        this.addHook('applydebuff', {\n            to: 'player',\n            abilityId: raiseStatuses,\n        }, this._onRaise);\n        this.addHook('complete', this._onComplete);\n        // If they (begin)cast, they were probably LB3'd, just mark end of death\n        // TODO: I mean there's an actual LB3 action cast, it's just not in the logs because of my filter. Look into it.\n        const checkLb3 = event => this._timestamp && this._onRaise(event);\n        this.addHook('begincast', { by: 'player' }, checkLb3);\n        this.addHook('cast', { by: 'player' }, checkLb3);\n    }\n    _onDeath(event) {\n        if (!this.shouldCountDeath(event)) {\n            return;\n        }\n        this._count++;\n        this._timestamp = event.timestamp;\n    }\n    _onRaise(event) {\n        this.addDeathToTimeline(event.timestamp);\n        this.parser.fabricateEvent({\n            type: 'raise',\n            targetID: event.targetID,\n        });\n    }\n    _onComplete() {\n        // If the parse was a wipe, and they didn't res after their last death, refund the death - the wipe itself is\n        // pretty meaningless to complain about.\n        // Max at 0 because dummy parses aren't counted as kills, though.\n        if (!this.parser.fight.kill &&\n            this._timestamp) {\n            this._count = Math.max(this._count - 1, 0);\n        }\n        if (this._timestamp) {\n            this.addDeathToTimeline(this.parser.fight.end_time);\n        }\n        if (!this._count) {\n            return;\n        }\n        // Deaths are always major\n        this.suggestions.add(new Suggestion({\n            icon: this.data.actions.RAISE.icon,\n            content: <Trans id=\"core.deaths.content\">\n\t\t\t\tDon't die. Between downtime, lost gauge resources, and resurrection debuffs, dying is absolutely <em>crippling</em> to damage output.\n\t\t\t</Trans>,\n            severity: SEVERITY.MORBID,\n            why: <Plural id=\"core.deaths.why\" value={this._count} _1=\"# death\" other=\"# deaths\"/>,\n        }));\n    }\n    // Override this if a fight mechanic is a forced death *cough*ucob*cough* and shouldn't be counted towards the player\n    shouldCountDeath( /* event */) {\n        return true;\n    }\n    addDeathToTimeline(end) {\n        const startTime = this.parser.fight.start_time;\n        this.timeline.addItem(new Item({\n            type: 'background',\n            style: 'background-color: #ce909085;',\n            start: this._timestamp - startTime,\n            end: end - startTime,\n        }));\n        this._deadTime += (end - this._timestamp);\n        this._timestamp = null;\n    }\n    get deadTime() { return this._deadTime; }\n}\nDeath.handle = 'death';\nDeath.dependencies = [\n    'data',\n    'suggestions',\n    'timeline',\n];\n","import Module from 'parser/core/Module';\nimport { HitType as EventHitType } from 'fflogs';\nconst ACTION_EVENT_TYPES = [\n    'damage',\n    'heal',\n    'calculateddamage',\n    'calculatedheal',\n];\nconst FAILED_HITS = [\n    EventHitType.MISS,\n    EventHitType.IMMUNE,\n];\nexport default class HitType extends Module {\n    normalise(events) {\n        for (let i = 0; i < events.length; i++) {\n            const event = events[i];\n            // Prune to only damage and heals since nothing else can crit/direct hit\n            if (!ACTION_EVENT_TYPES.includes(event.type)) {\n                continue;\n            }\n            event.criticalHit = event.hitType === EventHitType.CRITICAL;\n            event.directHit = event.multistrike === true;\n            event.successfulHit = !FAILED_HITS.includes(event.hitType);\n        }\n        return events;\n    }\n}\nHitType.handle = 'hitType';\n","import About from './About';\nimport AdditionalEvents from './AdditionalEvents';\nimport AlwaysBeCasting from './AlwaysBeCasting';\nimport AoE from './AoE';\nimport BrokenLog from './BrokenLog';\nimport ChangeLog from './ChangeLog';\nimport CastTime from './CastTime';\nimport Checklist from './Checklist';\nimport Combatants from './Combatants';\nimport Combos from './Combos';\nimport Cooldowns from './Cooldowns';\nimport { Data } from './Data';\nimport Death from './Death';\nimport Downtime from './Downtime';\nimport Enemies from './Enemies';\nimport { FFLogsEventNormaliser } from './FFLogsEventNormaliser';\nimport GlobalCooldown from './GlobalCooldown';\nimport HitType from './HitType';\nimport Invulnerability from './Invulnerability';\nimport PrecastAction from './PrecastAction';\nimport PrecastStatus from './PrecastStatus';\nimport RaidBuffs from './RaidBuffs';\nimport Speedmod from './Speedmod';\nimport { Statistics } from './Statistics';\nimport Statuses from './Statuses';\nimport Suggestions from './Suggestions';\nimport Timeline from './Timeline';\nimport UnableToAct from './UnableToAct';\nimport Weaving from './Weaving';\nexport default [\n    About,\n    AdditionalEvents,\n    AlwaysBeCasting,\n    AoE,\n    BrokenLog,\n    ChangeLog,\n    CastTime,\n    Checklist,\n    Combatants,\n    Combos,\n    Cooldowns,\n    Data,\n    Death,\n    Downtime,\n    Enemies,\n    FFLogsEventNormaliser,\n    GlobalCooldown,\n    HitType,\n    Invulnerability,\n    PrecastAction,\n    PrecastStatus,\n    RaidBuffs,\n    Speedmod,\n    Statistics,\n    Statuses,\n    Suggestions,\n    Timeline,\n    UnableToAct,\n    Weaving,\n];\n"],"sourceRoot":""}
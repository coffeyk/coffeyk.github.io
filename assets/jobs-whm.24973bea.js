(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{1285:function(e,t,n){"use strict";var s=n(0),i=n.n(s),r=n(37);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const c={MORBID:0,MAJOR:1,MEDIUM:2,MINOR:3,IGNORE:void 0};class l{constructor(e){this.icon="",this.content="",this.why="",this.severity=c.MEDIUM,Object.keys(e||{}).forEach(t=>{this[t]=e[t]})}}class d extends l{constructor(e){super(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({tiers:{},value:0,matcher:r.i},e))}get severity(){return this.matcher(this.tiers,this.value)}set severity(e){}}var u=n(2),h=n(8),m=n(25),p=n(1275),g=n(212),f=(n(128),n(1301)),b=n.n(f),y=n(28);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E={[c.MORBID]:{content:i.a.createElement(h.Trans,{id:"core.suggestions.severity.morbid"}),color:"black",icon:"times"},[c.MAJOR]:{content:i.a.createElement(h.Trans,{id:"core.suggestions.severity.major"}),color:"red",icon:"arrow up"},[c.MEDIUM]:{content:i.a.createElement(h.Trans,{id:"core.suggestions.severity.medium"}),color:"orange"},[c.MINOR]:{content:i.a.createElement(h.Trans,{id:"core.suggestions.severity.minor"}),color:"blue",icon:"arrow down"}};let v=class extends i.a.Component{constructor(){super(...arguments),this.onToggleShowMinor=(e,t)=>{const{settingsStore:n}=this.context;n.setShowMinorSuggestions(t.checked)}}render(){const e=this.context.settingsStore.showMinorSuggestions,t=this.props.suggestions.filter(t=>e||t.severity!==c.MINOR),n=this.props.suggestions.some(e=>e.severity===c.MINOR);return i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(p.a,{toggle:!0,label:i.a.createElement("label",null,i.a.createElement(h.Trans,{id:"core.suggestion.show-minor"})),defaultChecked:e,onChange:this.onToggleShowMinor,className:b.a.checkbox}),i.a.createElement("div",{className:b.a.items},t.map((e,t)=>i.a.createElement("div",{key:t,className:b.a.item},i.a.createElement("img",{src:e.icon,alt:""}),i.a.createElement("div",null,e.content,i.a.createElement("div",{className:b.a.extra},i.a.createElement(g.a,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({horizontal:!0},E[e.severity])),e.why)))),0===t.length&&i.a.createElement("div",{className:b.a.item},i.a.createElement("div",null,i.a.createElement("strong",null,i.a.createElement(h.Trans,{id:"core.suggestion.nothing"})),i.a.createElement("br",null),n&&i.a.createElement(h.Trans,{id:"core.suggestion.nothing-but-minor"})))))}};v.contextType=y.a,v=Object(u.b)([m.b],v);var _=v,j=n(23),C=n(217);class D extends j.c{constructor(){super(...arguments),this._suggestions=[]}add(e){e instanceof l?this._suggestions.push(e):console.error("TODO: Proper error message for passing a non-suggestion to the suggestion add handler")}output(){if(0===this._suggestions.length)return!1;const e=this._suggestions.filter(e=>e.severity!==c.IGNORE).sort((e,t)=>e.severity-t.severity);return i.a.createElement(_,{suggestions:e})}}D.handle="suggestions",D.displayOrder=C.a.SUGGESTIONS,D.displayMode=j.a.FULL,D.title={id:"core.suggestions.title",defaults:"Suggestions"},n.d(t,"d",(function(){return D})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return d}))},1286:function(e,t,n){"use strict";var s=n(0),i=n.n(s),r=n(1295),o=n(37),a=n(23);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d={SUCCESS:2,WARN:1,FAIL:void 0},u=95;class h{constructor(e){this.name="",this.description=null,this.requirements=[],this.target=u,this.displayOrder=a.b.DEFAULT,Object.keys(e||{}).forEach(t=>{this[t]=e[t]})}get tier(){return Object(o.i)({[this.target]:d.SUCCESS},this.percent)}get percent(){const e=this.requirements.map(e=>e.percent);return e.length?r.a.mean(e):0}}class m extends h{constructor(e){super(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({tiers:{},matcher:o.i},e))}get tier(){return this.matcher(this.tiers,this.percent)}}var p=n(93),g=n(1274),f=n(1474),b=n(1306),y=n.n(b);const O={[d.SUCCESS]:{text:"text-success",color:"green",icon:"checkmark",autoExpand:!1},[d.WARN]:{text:"text-warning",color:"yellow",icon:"warning sign",autoExpand:!0},[d.FAIL]:{text:"text-error",color:"red",icon:"remove",autoExpand:!0}};class w extends s.Component{render(){const{rules:e}=this.props;if(!e.length)return!1;const t=[],n=e.map((e,n)=>{const s=O[e.tier];let r=e.percent;return r=Math.min(r,100),s.autoExpand&&t.push(n),{key:n,title:{className:y.a.title,content:i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{name:s.icon,className:s.text}),e.name,i.a.createElement("div",{className:y.a.percent+" "+s.text},r.toFixed(1),"%",i.a.createElement(g.a,{percent:r,className:y.a.progress,size:"small",color:s.color})))},content:{content:i.a.createElement(i.a.Fragment,null,e.description&&i.a.createElement("div",{className:y.a.description},i.a.createElement(p.a,{name:"info",size:"large"}),i.a.createElement("p",null,e.description)),i.a.createElement("ul",null,e.requirements.map((e,t)=>i.a.createElement("li",{key:t},e.name,": ",e.content))))}}});return i.a.createElement(f.a,{exclusive:!1,panels:n,defaultActiveIndex:t,styled:!0,fluid:!0})}}var E=w,v=n(217);class _ extends a.c{constructor(){super(...arguments),this._rules=[]}add(e){e instanceof h?this._rules.push(e):console.error("TODO: This error message")}output(){const e=[...this._rules];return e.sort((e,t)=>e.displayOrder-t.displayOrder),i.a.createElement(E,{rules:e})}}_.handle="checklist",_.title={id:"core.checklist.title",defaults:"Checklist"},_.displayOrder=v.a.CHECKLIST,_.displayMode=a.a.FULL;class j{constructor(e){this.name="",this._percent=null,this.value=null,this.target=100,this.overrideDisplay=null,Object.keys(e||{}).forEach(t=>{this[t]=e[t]})}get content(){return null!==this.overrideDisplay?this.overrideDisplay:null!==this._percent||null===this.value?"".concat(this.percent.toFixed(2),"%"):"".concat(this.value.toFixed(0),"/").concat(this.target.toFixed(0))}get percent(){return null===this._percent?null===this.value?0:100*(("function"==typeof this.value?this.value():this.value)||0)/this.target:("function"==typeof this._percent?this._percent():this._percent)||0}set percent(e){this._percent=e}}n.d(t,"e",(function(){return _})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return j}))},1287:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var s=n(4),i=n.n(s),r=n(17),o=n(55),a=n(14),c=n(0),l=n.n(c),d=n(1300),u=n.n(d);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends c.Component{render(){const{events:e}=this.props;return l.a.createElement("div",{className:u.a.container},e.map((e,t)=>{const n=Object(o.a)(a.b,"id",e.ability.guid);if(!n||n.autoAttack)return;if(!n.icon)return console.error(e,"event ability has no icon"),!1;const s=[u.a.link,{[u.a.ogcd]:!n.onGcd}],c=n.onGcd?u.a.gcdSize:u.a.ogcdSize,d=n.id>=a.a?r.b:r.a;return l.a.createElement("div",{key:t,className:i()(...s)},l.a.createElement(d,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({showName:!1,iconSize:c},n)))}))}}},1288:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var s=n(8),i=n(1287),r=n(0),o=n.n(r),a=n(1470),c=n(1243),l=n(37);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class m extends o.a.Component{render(){const{targets:e,notes:t,data:n,onGoto:i,headerTitle:r}=this.props;return o.a.createElement(a.a,{compact:!0,unstackable:!0,celled:!0},o.a.createElement(a.a.Header,null,o.a.createElement(a.a.Row,null,o.a.createElement(a.a.HeaderCell,{collapsing:!0},o.a.createElement("strong",null,o.a.createElement(s.Trans,{id:"core.ui.rotation-table.header.time"}))),(e||[]).map((e,t)=>o.a.createElement(a.a.HeaderCell,{key:"target_header_".concat(t),textAlign:"center",collapsing:!0},o.a.createElement("strong",null,e.header))),o.a.createElement(a.a.HeaderCell,null,o.a.createElement("strong",null,r||o.a.createElement(s.Trans,{id:"core.ui.rotation-table.header.rotation"}))),(t||[]).map((e,t)=>o.a.createElement(a.a.HeaderCell,{key:"note_header_".concat(t),textAlign:"center",collapsing:!0},o.a.createElement("strong",null,e.header))))),o.a.createElement(a.a.Body,null,n.map(n=>o.a.createElement(m.Row,u({key:n.start,onGoto:i,targets:e||[],notes:t||[]},n)))))}}m.targetAccessorResolver=(e,t)=>"string"==typeof t.accessor&&null!=e.targetsData?e.targetsData[t.accessor]:"function"==typeof t.accessor?t.accessor(e):{actual:0,expected:0},m.notesAccessorResolver=(e,t)=>"string"==typeof t.accessor&&null!=e.notesMap?e.notesMap[t.accessor]:"function"==typeof t.accessor?t.accessor(e):null,m.TargetCell=e=>{let{actual:t,expected:n}=e;return o.a.createElement(a.a.Cell,{textAlign:"center",positive:void 0!==n&&t>=n,negative:void 0!==n&&t<n},t,"/",void 0===n?"-":n)},m.Row=e=>{let{onGoto:t,targets:n,notes:s,notesMap:r,start:d,end:h,targetsData:p,rotation:g}=e;return o.a.createElement(a.a.Row,null,o.a.createElement(a.a.Cell,{textAlign:"center"},o.a.createElement("span",{style:{marginRight:5}},Object(l.d)(d/1e3)),"function"==typeof t&&o.a.createElement(c.a,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:()=>t(d,h)})),n.map(e=>m.targetAccessorResolver({start:d,end:h,targetsData:p,rotation:g},e)).map((e,t)=>o.a.createElement(m.TargetCell,u({key:"target_".concat(t)},e))),o.a.createElement(a.a.Cell,null,o.a.createElement(i.a,{events:g})),s.map(e=>m.notesAccessorResolver({start:d,end:h,targetsData:p,notesMap:r,rotation:g},e)).map((e,t)=>o.a.createElement(a.a.Cell,{key:"notes_".concat(t),textAlign:"center"},e)))}},1295:function(e,t,n){"use strict";var s=n(1473),i=n(1452),r=n(1477),o=n(1472);t.a=Object(s.a)({meanDependencies:i.a,modeDependencies:r.a,stdDependencies:o.a})},1300:function(e,t,n){e.exports={gcdSize:"40px",ogcdSize:"30px",container:"Rotation-module_container__32KS2",link:"Rotation-module_link__2T3fu",ogcd:"Rotation-module_ogcd__3oBO8"}},1301:function(e,t,n){e.exports={gutter:"20px",checkbox:"Suggestions-module_checkbox__1Z22N",items:"Suggestions-module_items__3sCkP",item:"Suggestions-module_item__1yy1-",extra:"Suggestions-module_extra__3WN2d"}},1302:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var s=n(365),i=n.n(s),r=n(2),o=n(8),a=n(17),c=n(1288),l=n(23),d=n(1304),u=n(1285),h=n(80),m=n(0),p=n.n(m),g=n(366);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class O{constructor(e,t){this.rotation=[],this.data=e,this.start=t}get gcds(){return this.rotation.map(e=>this.data.getAction(e.ability.guid)).filter(e=>e&&e.onGcd).length}getActionCountByIds(e){return this.rotation.filter(t=>e.includes(t.ability.guid)).length}}class w extends l.c{constructor(){super(...arguments),this.buffWindows=[]}get activeBuffWindow(){const e=i()(this.buffWindows);if(e&&null==e.end)return e}init(){this.addHook("cast",{by:"player"},this.onCast),this.addHook("applybuff",{by:"player"},this.onApplyBuff),this.addHook("removebuff",{by:"player"},this.onRemoveBuff),this.addHook("complete",this.onComplete)}onCast(e){const t=this.data.getAction(e.ability.guid);t&&!t.autoAttack&&this.activeBuffWindow&&this.considerAction(t)&&this.activeBuffWindow.rotation.push(e)}considerAction(e){return!0}onApplyBuff(e){this.buffStatus&&e.ability.guid===this.buffStatus.id&&this.startNewBuffWindow(e.timestamp)}startNewBuffWindow(e){this.buffWindows.push(new O(this.data,e))}onRemoveBuff(e){this.buffStatus&&e.ability.guid===this.buffStatus.id&&this.activeBuffWindow&&(this.activeBuffWindow.end=e.timestamp)}getBaselineExpectedGCDs(e){return this.expectedGCDs?this.expectedGCDs.expectedPerWindow:0}changeExpectedGCDsClassLogic(e){return 0}reduceExpectedGCDsEndOfFight(e){if(this.buffStatus.duration){const t=1e3*this.buffStatus.duration,n=this.parser.fight.end_time-e.start;if(t>=n){const e=this.globalCooldown.getEstimate();return Math.ceil((t-n)/e)}}return 0}getBaselineExpectedTrackedAction(e,t){return t.expectedPerWindow||0}changeExpectedTrackedActionClassLogic(e,t){return 0}getBuffWindowExpectedGCDs(e){return this.getBaselineExpectedGCDs(e)+this.changeExpectedGCDsClassLogic(e)-this.reduceExpectedGCDsEndOfFight(e)}getBuffWindowRequiredGCDsUsed(e){if(!this.requiredGCDs)return 0;const t=this.requiredGCDs.actions.map(e=>e.id);return e.getActionCountByIds(t)}getBuffWindowExpectedTrackedActions(e,t){return this.getBaselineExpectedTrackedAction(e,t)+this.changeExpectedTrackedActionClassLogic(e,t)}getBuffWindowNotes(e){}onComplete(){if(this.expectedGCDs){const e=this.buffWindows.reduce((e,t)=>{const n=this.getBuffWindowExpectedGCDs(t);return e+Math.max(0,n-t.gcds)},0);this.suggestions.add(new u.c({icon:this.buffAction.icon,content:this.expectedGCDs.suggestionContent,tiers:this.expectedGCDs.severityTiers,value:e,why:p.a.createElement(o.Trans,{id:"core.buffwindow.suggestions.missedgcd.why",values:{0:this.buffAction.name,missedGCDs:e}})}))}if(this.requiredGCDs){const e=this.buffWindows.reduce((e,t)=>e+Math.max(0,t.gcds-this.getBuffWindowRequiredGCDsUsed(t)),0);this.suggestions.add(new u.c({icon:this.requiredGCDs.icon,content:this.requiredGCDs.suggestionContent,tiers:this.requiredGCDs.severityTiers,value:e,why:p.a.createElement(o.Trans,{id:"core.buffwindow.suggestions.badgcd.why",values:{0:this.buffAction.name,invalidGCDs:e}})}))}if(this.trackedActions){const e=this.trackedActions.actions.reduce((e,t)=>e+this.buffWindows.reduce((e,n)=>e+Math.max(0,t.expectedPerWindow-n.getActionCountByIds([t.action.id])),0),0);this.suggestions.add(new u.c({icon:this.trackedActions.icon,content:this.trackedActions.suggestionContent,tiers:this.trackedActions.severityTiers,value:e,why:p.a.createElement(o.Trans,{id:"core.buffwindow.suggestions.trackedaction.why",values:{0:this.buffAction.name,missedActions:e}})}))}if(this.trackedBadActions){const e=this.trackedBadActions.actions.reduce((e,t)=>e+this.buffWindows.reduce((e,n)=>e+Math.max(0,n.getActionCountByIds([t.action.id])-t.expectedPerWindow),0),0);this.suggestions.add(new u.c({icon:this.trackedBadActions.icon,content:this.trackedBadActions.suggestionContent,tiers:this.trackedBadActions.severityTiers,value:e,why:p.a.createElement(o.Trans,{id:"core.buffwindow.suggestions.trackedbadaction.why",values:{0:this.buffAction.name,badActions:e}})}))}}output(){const e=[],t=[];this.expectedGCDs&&e.push({header:p.a.createElement(o.Trans,{id:"core.buffwindow.table.header.gcds"}),accessor:"missedgcd"}),this.requiredGCDs&&e.push({header:p.a.createElement("img",{src:this.requiredGCDs.icon,alt:"",style:{height:"20px"}}),accessor:"badgcd"}),this.trackedActions&&this.trackedActions.actions.forEach(t=>{e.push({header:p.a.createElement(a.a,b({showName:!1},t.action)),accessor:t.action.name})}),this.rotationTableNotesColumnHeader&&t.push({header:this.rotationTableNotesColumnHeader,accessor:"notes"});const n=this.buffWindows.map(e=>{const t=e.start-this.parser.fight.start_time,n=(null!=e.end?e.end:e.start)-this.parser.fight.start_time,s={},i={};return this.expectedGCDs&&(s.missedgcd={actual:e.gcds,expected:this.getBuffWindowExpectedGCDs(e)}),this.requiredGCDs&&(s.badgcd={actual:this.getBuffWindowRequiredGCDsUsed(e),expected:this.getBuffWindowExpectedGCDs(e)}),this.trackedActions&&this.trackedActions.actions.forEach(t=>{s[t.action.name]={actual:e.getActionCountByIds([t.action.id]),expected:this.getBuffWindowExpectedTrackedActions(e,t)}}),this.rotationTableNotesColumnHeader&&(i.notes=this.getBuffWindowNotes(e)),{start:t,end:n,targetsData:s,rotation:e.rotation,notesMap:i}});return p.a.createElement(c.a,{targets:e,data:n,notes:t,onGoto:this.timeline.show,headerTitle:this.rotationTableHeader})}}w.handle="buffwindow",w.title={id:"core.buffwindow.title",defaults:"Buff Window"},Object(r.b)([l.d,Object(r.d)("design:type",g.a)],w.prototype,"data",void 0),Object(r.b)([l.d,Object(r.d)("design:type",u.d)],w.prototype,"suggestions",void 0),Object(r.b)([l.d,Object(r.d)("design:type",h.d)],w.prototype,"timeline",void 0),Object(r.b)([l.d,Object(r.d)("design:type",d.a)],w.prototype,"globalCooldown",void 0)},1304:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var s=n(8),i=n(1295),r=n(0),o=n.n(r),a=n(23),c=n(80),l=n(370);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const m=1500,p=2500,g=2500,f=100,b=!1;class y extends a.c{constructor(){super(...arguments),this._castingEvent=null,this._estimatedBaseGcd=null,this._estimateGcdCount=-1,this._lastGcd={isInstant:!1,event:null},this.gcds=[],this.gcdGroupId="gcd",this.addHook("complete",this._onComplete)}normalise(e){for(let t=0;t<e.length;t++){const n=e[t];if(!this.parser.byPlayer(n)||!n.ability)continue;const s=this.data.getAction(n.ability.guid);if(s&&s.onGcd)switch(n.type){case"begincast":this._castingEvent=n;break;case"cast":const e=null!==this._castingEvent&&this._castingEvent.ability.guid===s.id,t=e?this._castingEvent:n;this.saveGcd(u({},this._lastGcd),t.timestamp),this._lastGcd.isInstant=!e,this._lastGcd.event=t,this._castingEvent=null}}return e.length&&this.saveGcd(u({},this._lastGcd),e[e.length-1].timestamp),this._debugLogSavedGcds(),e}_debugLogSavedGcds(){b&&this.gcds.forEach(e=>{const t=this.parser.formatTimestamp(e.timestamp),n=this.data.getAction(e.actionId),s=e.isInstant?" Instant":"",i=e.casterTaxed?" CasterTaxed":"";console.log("".concat(t," ").concat(n.name,"[").concat(e.length,"|").concat(e.normalizedLength,"] Speedmod[").concat(e.speedMod,"]").concat(s).concat(i))})}_onComplete(){const e=this.parser.fight.start_time;this.timeline.addGroup(new c.a({id:this.gcdGroupId,content:"GCD",order:-99})),this.gcds.forEach(t=>{const n=this.data.getAction(t.actionId);n&&this.timeline.addItem(new c.b({type:"background",start:t.timestamp-e,length:this._getGcdLength(t),title:n.name,group:this.gcdGroupId,content:o.a.createElement("img",{src:n.icon,alt:n.name,title:n.name})}))});const t=this.getEstimate(!1);this.statistics.add(new l.b({title:o.a.createElement(s.Trans,{id:"core.gcd.estimated-gcd"}),icon:this.data.actions.ATTACK.icon,value:this.parser.formatDuration(t),info:o.a.createElement(s.Trans,{id:"core.gcd.no-statistics",components:[o.a.createElement("em",null),o.a.createElement("em",null)]})}))}saveGcd(e,t){if(!e.event)return;const n=this.data.getAction(e.event.ability.guid);if(!n||!n.id)return;let s=this.speedmod.get(e.event.timestamp),i=n.castTime;s<=.5&&(s/=.5,i*=.5);let r=!1,o=10*Math.round((t-e.event.timestamp)/10);!e.isInstant&&i>=n.cooldown&&(o-=f,r=!0);const a=null!=n.gcdRecast?n.gcdRecast:n.cooldown,c=e.isInstant||i<a?a:i,l=Math.round(o*(g/1e3/c)*(1/s));this.gcds.push({timestamp:e.event.timestamp,length:o,normalizedLength:l,speedMod:s,castTime:i,cooldown:a,casterTaxed:r,actionId:n.id,isInstant:e.isInstant})}getEstimate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.gcds.length;if(null===this._estimatedBaseGcd||t!==this._estimateGcdCount){const e=this.gcds.map(e=>e.normalizedLength);this._estimatedBaseGcd=e.length?i.a.mean(i.a.mode(e)):p,this._estimateGcdCount=t}return e&&(this._estimatedBaseGcd=Math.max(m,Math.min(p,this._estimatedBaseGcd))),this._estimatedBaseGcd}getUptime(){return this.gcds.reduce((e,t)=>{const n=this._getGcdLength(t);return e+n-this.downtime.getDowntime(t.timestamp,t.timestamp+n)},0)}_getGcdLength(e){let t=e.isInstant||e.castTime<=e.cooldown?e.cooldown:Math.max(e.castTime,e.cooldown);if(t*=1e3,t>m){const n=this.getEstimate()/p;t=Math.max(m,t*n*e.speedMod)}return Math.round(t+(e.casterTaxed?f:0))}}y.handle="gcd",y.dependencies=["precastAction","castTime","data","downtime","speedmod","statistics","timeline"],y.title={id:"core.gcd.title",defaults:"Global Cooldown"}},1306:function(e,t,n){e.exports={lg:"(min-width: 992px)",title:"Checklist-module_title__2ro7x",percent:"Checklist-module_percent__EKBdj",progress:"Checklist-module_progress__28lgp",description:"Checklist-module_description__3Bf5O"}},1469:function(e,t,n){"use strict";n.r(t);var s=n(0),i=n.n(s),r=n(17),o=n(14),a=n(61),c=n(23),l=n(1286),d=n(1285),u=n(8);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const g=3e4,f={90:l.c.WARN,95:l.c.SUCCESS},b={500:d.a.MINOR,9e3:d.a.MEDIUM,3e4:d.a.MAJOR},y=500;class O extends c.c{constructor(){super(...arguments),this._lastApplication={},this._clip=0;const e={by:"player",abilityId:[a.b.DIA.id]};this.addHook(["applydebuff","refreshdebuff"],e,this._onDotApply),this.addHook("complete",this._onComplete)}_onDotApply(e){const t="".concat(e.targetID,"|").concat(e.targetInstance);let n=this._lastApplication[t]=this._lastApplication[t]||0;if(!n)return void(n=e.timestamp);let s=g-(e.timestamp-n);s-=this.invuln.getInvulnerableUptime("all",e.timestamp,e.timestamp+g+s),this._clip+=Math.max(0,s),n=e.timestamp}_onComplete(){this.checklist.add(new l.d({name:i.a.createElement(u.Trans,{id:"whm.dots.rule.name"}),description:i.a.createElement(u.Trans,{id:"whm.dots.rule.description"}),tiers:f,requirements:[new l.a({name:i.a.createElement(u.Trans,{id:"whm.dots.requirement.uptime-dia.name",components:[i.a.createElement(r.a,m({},o.b.DIA))]}),percent:()=>this.getDotUptimePercent(a.b.DIA.id)})]})),this._clip>y&&this.suggestions.add(new d.c({icon:o.b.DIA.icon,content:i.a.createElement(u.Trans,{id:"whm.dots.suggestion.clip-dia.content"}),tiers:b,why:i.a.createElement(u.Trans,{id:"whm.dots.suggestion.clip-dia.why",values:{0:this.parser.formatDuration(this._clip),1:a.b.DIA.name}})}))}getDotUptimePercent(e){return this.enemies.getStatusUptime(e)/(this.parser.fightDuration-this.invuln.getInvulnerableUptime())*100}}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}O.handle="dots",O.dependencies=["checklist","enemies","invuln","suggestions"];const _=[o.b.AFFLATUS_SOLACE.id,o.b.AFFLATUS_RAPTURE.id],j=[o.b.AFFLATUS_MISERY.id],C=3e4,D=3,A=2;class P extends c.c{constructor(){super(...arguments),this._blooming=0,this._bloodLiliesGenerated=0,this._bloodLiliesConsumed=0,this._bloodLiliesWasted=0,this._liliesConsumed=0,this._liliesWasted=0,this._unused=0,this.addHook("cast",{by:"player"},this._onCast),this.addHook("complete",this._onComplete),this.addHook("death",{to:"player"},this._onDeath)}_onCast(e){const t=e.ability.guid;_.includes(t)&&(this._liliesConsumed++,this._blooming===D?this._liliesWasted++:++this._blooming===D&&this._bloodLiliesGenerated++),j.includes(t)&&(this._blooming=0,this._bloodLiliesConsumed++)}_onComplete(){this.checkBloodLilies(),this.checkLilyCapping()}_onDeath(){this._blooming=0}checkLilyCapping(){const e=this.parser.fight.end_time-this.parser.fight.start_time,t=Math.floor(e/C);this._unused=t-this._liliesConsumed,this._unused>0&&this.suggestions.add(new d.b({icon:o.b.AFFLATUS_SOLACE.icon,content:i.a.createElement(s.Fragment,null,i.a.createElement(u.Trans,{id:"whm.lily-cap.suggestion.content",components:[i.a.createElement(r.a,E({},o.b.AFFLATUS_SOLACE)),i.a.createElement(r.a,E({},o.b.AFFLATUS_RAPTURE))]})),severity:d.a.MINOR,why:i.a.createElement(s.Fragment,null,i.a.createElement(u.Trans,{id:"whm.lily-cap.suggestion.why",values:{0:this._unused}}))}))}checkBloodLilies(){this._bloodLiliesWasted=Math.floor(this._liliesWasted/D)+(this._blooming===D),this._bloodLiliesWasted>=1&&this.suggestions.add(new d.b({icon:o.b.AFFLATUS_MISERY.icon,content:i.a.createElement(s.Fragment,null,i.a.createElement(u.Trans,{id:"whm.lily-blood.suggestion.content",components:[i.a.createElement(r.a,E({},o.b.AFFLATUS_MISERY))]})),severity:this._bloodLiliesWasted>A?d.a.MAJOR:d.a.MEDIUM,why:i.a.createElement(s.Fragment,null,i.a.createElement(u.Trans,{id:"whm.lily-blood.suggestion.why",values:{0:this._bloodLiliesWasted}}))}))}}P.handle="lilies",P.dependencies=["suggestions"];var T=n(2);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const I=[o.b.ASSIZE,o.b.PRESENCE_OF_MIND],G=75,M=[o.b.ASYLUM,o.b.DIVINE_BENISON,o.b.PLENARY_INDULGENCE,o.b.TEMPERANCE],N={[o.b.ASYLUM.id]:{minor:2,medium:3,major:1/0,showHeld:!1,content:i.a.createElement(s.Fragment,null,i.a.createElement(u.Trans,{id:"whm.ogcds.suggestions.asylum.content",components:[i.a.createElement(r.a,x({},o.b.ASYLUM))]}))},[o.b.DIVINE_BENISON.id]:{minor:8,medium:12,major:0,showHeld:!0,content:i.a.createElement(s.Fragment,null,i.a.createElement(u.Trans,{id:"whm.ogcds.suggestions.divine_benison.content",components:[i.a.createElement(r.a,x({},o.b.DIVINE_BENISON))]}))},[o.b.PLENARY_INDULGENCE.id]:{minor:1,medium:0,major:0,showHeld:!1,content:i.a.createElement(s.Fragment,null,i.a.createElement(u.Trans,{id:"whm.ogcds.suggestions.plenary_indulgence.content",components:[i.a.createElement(r.a,x({},o.b.PLENARY_INDULGENCE))]}))},[o.b.TEMPERANCE.id]:{minor:2,medium:3,major:0,showHeld:!1,content:i.a.createElement(s.Fragment,null,i.a.createElement(u.Trans,{id:"whm.ogcds.suggestions.temperance.content",components:[i.a.createElement(r.a,x({},o.b.TEMPERANCE))]}))}};class U extends c.c{constructor(){super(...arguments),this.cooldownUsage={},this.castFilter=[],this.spellCooldowns={}}init(){this.initSpellCooldowns(),this.initCastFilter(),this.initCooldownUsage(),this.addHook("cast",{by:"player",abilityId:this.castFilter},this.onCast),this.addHook("complete",this.onComplete)}initSpellCooldowns(){this.spellCooldowns=[...I,...M].reduce((e,t)=>(e[t.id]=1e3*t.cooldown,e),this.spellCooldowns)}initCastFilter(){this.castFilter=[...I,...M].map(e=>e.id)}initCooldownUsage(){this.cooldownUsage=[...I,...M].reduce((e,t)=>(e[t.id]={held:0,lastUsed:0,uses:0},e),this.cooldownUsage)}onCast(e){const t=e.ability.guid;this.cooldownUsage[t].uses++,0===this.cooldownUsage[t].lastUsed&&(this.cooldownUsage[t].lastUsed=this.parser.fight.start_time);const n=e.timestamp-this.cooldownUsage[t].lastUsed-this.spellCooldowns[t];n>0&&(this.cooldownUsage[t].held+=n),this.cooldownUsage[t].lastUsed=e.timestamp}onComplete(){const e=I.map(e=>new l.a({name:i.a.createElement(r.a,x({},e)),value:this.cooldownUsage[e.id].uses,target:Math.ceil(this.parser.fightDuration/(1e3*e.cooldown))}));this.checklist.add(new l.b({name:i.a.createElement(u.Trans,{id:"whm.ogcds.checklist.name"}),description:i.a.createElement(u.Trans,{id:"whm.ogcds.content"}),target:G,requirements:e})),M.forEach(e=>{const t=Math.ceil(this.parser.fightDuration/(1e3*e.cooldown)),n=this.cooldownUsage[e.id].uses,r=this.cooldownUsage[e.id].held,o=N[e.id].showHeld,a=t-n,c=N[e.id];if(a>N[e.id].minor){let l=d.a.MINOR;c.major===1/0&&0===n?l=d.a.MAJOR:0!==c.major&&a>=c.major?l=d.a.MAJOR:0!==c.medium&&a>=c.medium&&(l=d.a.MEDIUM);const h=i.a.createElement(s.Fragment,null,i.a.createElement(u.Trans,{id:"whm.ogcds.suggestions.why",values:{missed:a,maxUses:t}})),m=i.a.createElement(s.Fragment,null,i.a.createElement(u.Trans,{id:"whm.ogcds.suggestions.whyHeld",values:{0:this.parser.formatDuration(r),missed:a,maxUses:t}}));this.suggestions.add(new d.b({icon:e.icon,content:N[e.id].content,why:o?m:h,severity:l}))}})}}U.handle="oGCDs",U.title={id:"whm.ogcds.title",defaults:"Off Global Cooldowns"},Object(T.b)([c.d,Object(T.d)("design:type",l.e)],U.prototype,"checklist",void 0),Object(T.b)([c.d,Object(T.d)("design:type",d.d)],U.prototype,"suggestions",void 0);const R=35,F=50;class B extends c.c{constructor(){super(...arguments),this.healOverTimeStatuses=[a.b.REGEN.id,a.b.MEDICA_II.id],this._healingDirect=0,this._overhealDirect=0,this._healingOverTime=0,this._overhealOverTime=0,this.addHook("heal",{by:"player"},this._onHeal),this.addHook("complete",this._onComplete)}_onHeal(e){const t=e.ability.guid;this.healOverTimeStatuses.includes(t)?(this._healingOverTime+=e.amount,this._overhealOverTime+=e.overheal||0):(this._healingDirect+=e.amount,this._overhealDirect+=e.overheal||0)}_onComplete(){this.checklist.add(new l.d({name:i.a.createElement(u.Trans,{id:"whm.overheal.rule.name"}),description:i.a.createElement(u.Trans,{id:"whm.overheal.rule.description"}),tiers:{[100-R]:l.c.SUCCESS,[100-F]:l.c.WARN},requirements:[new L({name:i.a.createElement(u.Trans,{id:"whm.overheal.requirement.nonhot"}),percent:100*this._healingDirect/(this._healingDirect+this._overhealDirect)}),new L({name:i.a.createElement(u.Trans,{id:"whm.overheal.requirement.hot"}),percent:100*this._healingOverTime/(this._healingOverTime+this._overhealOverTime)}),new L({name:i.a.createElement(u.Trans,{id:"whm.overheal.requirement.all"}),percent:100*(this._healingOverTime+this._healingDirect)/(this._healingDirect+this._overhealDirect+this._healingOverTime+this._overhealOverTime)})]}))}}B.handle="overheal",B.dependencies=["checklist"];class L extends l.a{constructor(e){super(e)}get percentInverted(){return 100-this.percent}get content(){return null!==this._percent||null===this.value?"".concat(this.percentInverted.toFixed(2),"%"):"".concat(this.value.toFixed(0),"/").concat(this.target.toFixed(0))}}var W=n(374);class H extends W.a{constructor(){super(...arguments),this.SPEED_BUFF_STATUS_IDS.push(a.b.PRESENCE_OF_MIND.id)}}var q=n(1302);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){Y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const K={1:d.a.MAJOR};class V extends q.a{constructor(){super(...arguments),this.buffAction=o.b.SWIFTCAST,this.buffStatus=a.b.SWIFTCAST,this.rotationTableHeader=i.a.createElement(u.Trans,{id:"whm.swiftcast.title"})}considerAction(e){return e.castTime}onComplete(){const e=this.buffWindows.reduce((e,t)=>e+t.rotation.length?0:1,0);this.suggestions.add(new d.c({icon:o.b.SWIFTCAST.icon,content:i.a.createElement(u.Trans,{id:"whm.swiftcast.missed.suggestion.content",components:[i.a.createElement(r.a,J({},o.b.SWIFTCAST)),i.a.createElement(r.a,J({},o.b.RAISE)),i.a.createElement(r.a,J({},o.b.GLARE))]}),tiers:K,value:e,why:i.a.createElement(u.Trans,{id:"whm.swiftcast.missed.suggestion.why",values:{missedSwifts:e}})}))}}V.displayOrder=99,V.handle="swiftcast",V.title={id:"whm.swiftcast.title",defaults:"Swiftcast Actions"};t.default=[O,P,U,B,H,V]}}]);
//# sourceMappingURL=jobs-whm.24973bea.js.map
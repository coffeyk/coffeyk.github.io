{"version":3,"sources":["webpack:///./src/parser/core/modules/Cooldowns.js","webpack:///./src/parser/core/modules/Statuses.js","webpack:///./src/parser/core/modules/DoTs.js","webpack:///./node_modules/lodash/findLastIndex.js","webpack:///./node_modules/lodash/replace.js","webpack:///./node_modules/lodash/forEachRight.js","webpack:///./node_modules/lodash/_arrayEachRight.js","webpack:///./node_modules/lodash/_baseEachRight.js","webpack:///./node_modules/lodash/_baseForOwnRight.js","webpack:///./node_modules/lodash/_baseForRight.js","webpack:///./node_modules/lodash/zipObject.js","webpack:///./node_modules/lodash/_baseZipObject.js","webpack:///./src/parser/jobs/ast/modules/ArcanaTracking/ArcanaSuggestions.module.css?2006","webpack:///./src/parser/jobs/ast/modules/ArcanaTracking/seal_celestial.png","webpack:///./src/parser/jobs/ast/modules/ArcanaTracking/seal_lunar.png","webpack:///./src/parser/jobs/ast/modules/ArcanaTracking/seal_solar.png","webpack:///./src/parser/jobs/ast/modules/Sect/SectStatistic.module.css?6def","webpack:///./src/parser/jobs/ast/modules/Combust.tsx","webpack:///./src/parser/jobs/ast/modules/ArcanaGroups.ts","webpack:///./src/parser/jobs/ast/modules/Cooldowns.tsx","webpack:///./src/parser/jobs/ast/modules/EarthlyStar.tsx","webpack:///./src/parser/jobs/ast/modules/DISPLAY_ORDER.js","webpack:///./src/parser/jobs/ast/modules/Lightspeed.js","webpack:///./src/parser/jobs/ast/modules/LucidDreaming.js","webpack:///./src/parser/jobs/ast/modules/ArcanaUndrawUsage.js","webpack:///./src/parser/jobs/ast/modules/Horoscope.tsx","webpack:///./src/parser/jobs/ast/modules/ArcanaTracking/ArcanaTracking.tsx","webpack:///./src/parser/jobs/ast/modules/ArcanaTracking/ArcanaSuggestions.tsx","webpack:///./src/parser/jobs/ast/modules/Sect/SectStatistic.tsx","webpack:///./src/parser/jobs/ast/modules/Sect/Sect.tsx","webpack:///./src/parser/jobs/ast/modules/CelestialIntersection.tsx","webpack:///./src/parser/jobs/ast/modules/Overheal.tsx","webpack:///./src/parser/jobs/ast/modules/Draw.tsx","webpack:///./src/parser/jobs/ast/modules/CelestialOpposition.tsx","webpack:///./src/parser/jobs/ast/modules/DivinationDowntime.tsx","webpack:///./src/parser/jobs/ast/modules/Statuses.js","webpack:///./src/parser/jobs/ast/modules/Synastry.tsx","webpack:///./src/parser/jobs/ast/modules/index.js"],"names":["Cooldowns","Module","constructor","super","this","_cooldownGroups","_currentAction","_cooldowns","_groups","data","actions","_buildGroups","cooldownOrder","addHook","by","_onBeginCast","_onCast","_onComplete","groups","map","i","order","length","action","getAction","_buildGroup","id","content","name","group","merge","forEach","nestedGroups","opts","ItemGroup","showNested","timeline","addGroup","event","ability","guid","cooldown","startCooldown","cooldownGroup","startCooldownGroup","finishingCast","Object","keys","actionId","_addToTimeline","parseInt","cd","current","history","push","onGcd","use","shared","addItem","Item","type","start","timestamp","parser","fight","start_time","src","icon","alt","getCooldown","originActionId","filter","sharedCooldown","currentFightDuration","currentTimestamp","resetCooldown","invulnTime","reduceCooldown","reduction","setInvulnTime","previousEndTimestamp","previousCooldown","isFirst","downtime","getDowntime","getCooldownRemaining","getTimeOnCooldown","considerInvulnTime","extension","reduce","time","status","getAdjustedTimeOnCooldown","duration","maximumDuration","handle","dependencies","STATUS_APPLY_ON_PARTY_THRESHOLD_MILLISECONDS","Statuses","_statuses","_statusToActionMap","_actionToMergeNameMap","byFilter","player","pets","p","_onApply","_onRefresh","_onRemove","cooldowns","ac","values","statusesApplied","statusKey","statuses","_isStatusAppliedToPet","_addStatus","_endPrevStatus","getStatus","statusEntry","prev","usages","end","some","it","Math","abs","entry","_createGroupForStatus","st","stid","statusesStackMapping","attachToGroup","gcd","gcdGroupId","report","friendlyPets","targetID","DEFAULT_DURATION_MILLIS","DoTs","_lastApplication","_clip","_statusDuration","statusesToTrack","statusId","hasOwnProperty","console","warn","abilityId","_onDotApply","excludeApplication","addChecklistRules","addClippingSuggestions","clip","applicationKey","targetInstance","lastApplication","invuln","getUntargetableUptime","getInvulnerableUptime","max","getUptimePercent","enemies","getStatusUptime","fightDuration","getClippingAmount","fightDurationMillis","round","baseFindIndex","baseIteratee","toInteger","nativeMax","nativeMin","min","module","exports","array","predicate","fromIndex","index","undefined","toString","args","arguments","string","replace","arrayEachRight","baseEachRight","castFunction","isArray","collection","iteratee","baseForOwnRight","createBaseEach","baseForRight","object","createBaseFor","assignValue","baseZipObject","props","assignFunc","valsLength","result","value","SEVERITIES","CLIPPING","2","SEVERITY","MINOR","4","MEDIUM","6","MAJOR","UPTIME","84","TARGET","WARN","91","SUCCESS","Combust","checklist","add","TieredRule","description","ACTIONS","DRAW","tiers","requirements","Requirement","COMBUST_III","percent","STATUSES","suggestions","TieredSuggestion","why","formatDuration","__decorate","dependency","__metadata","Checklist","prototype","Suggestions","PLAY","THE_BALANCE","THE_BOLE","THE_ARROW","THE_SPEAR","THE_EWER","THE_SPIRE","LORD_OF_CROWNS","LADY_OF_CROWNS","SOLAR_SEAL_ARCANA","LUNAR_SEAL_ARCANA","CELESTIAL_SEAL_ARCANA","DRAWN_ARCANA","BALANCE_DRAWN","BOLE_DRAWN","ARROW_DRAWN","SPEAR_DRAWN","EWER_DRAWN","SPIRE_DRAWN","LORD_OF_CROWNS_DRAWN","LADY_OF_CROWNS_DRAWN","ARCANA_STATUSES","CoreCooldowns","UNDRAW","REDRAW","MINOR_ARCANA","SLEEVE_DRAW","DIVINATION","LIGHTSPEED","ESSENTIAL_DIGNITY","CELESTIAL_INTERSECTION","SYNASTRY","EARTHLY_STAR","STELLAR_DETONATION","CELESTIAL_OPPOSITION","HOROSCOPE","HOROSCOPE_ACTIVATION","COLLECTIVE_UNCONSCIOUS","NEUTRAL_SECT","LUCID_DREAMING","SEVERETIES","UNCOOKED","1","USES_MISSED","PET_CASTS","STELLAR_BURST","STELLAR_EXPLOSION","EarthlyStar","_uses","_lastUse","_totalHeld","_earlyBurstCount","init","_onSet","_onPetCast","_held","earlyBurstCount","holdDuration","_usesMissed","floor","title","DRAW_CHECKLIST","ARCANA_TRACKING","LIGHTSPEED_CAST_TIME_MOD","_active","_lightspeed","_history","_ctIndex","_missedGcds","lsBuffFilter","_onApplyLightspeed","_onRemoveLightspeed","_startLightspeed","getDataBy","autoAttack","casts","_stopAndSave","castTime","set","endTime","reset","activeAt","lightspeed","output","noCastsMessage","className","panels","gcdActions","cast","numGcds","mpSavings","totalSavings","mpCost","key","formatTimestamp","Rotation","events","lightspeedDisplay","Accordion","exclusive","styled","fluid","ASCEND","displayOrder","DISPLAY_ORDER","WASTED_USES_MAX_MEDIUM","LucidDreaming","_extensions","_gcdCountHoldingLucid","_maxMP","_MP","_MPthresholdTime","_filter","_onCastLucid","to","_onRefreshLucid","Suggestion","severity","ArcanaUndrawUsage","_badUndraws","_saveIfBadUndraw","badUndraws","ACTIVATES_MISSED","HELIOS","ASPECTED_HELIOS","HOROSCOPE_HELIOS","Horoscope","uses","activations","onHoroscope","onActivate","onComplete","missedActivations","LINKED_EVENT_THRESHOLD","DEATH_EVENT_STATUS_DROP_DELAY","CARD_GRANTING_ABILITIES","CARD_ACTIONS","PLAY_TO_STATUS_LOOKUP","STATUS_TO_DRAWN_LOOKUP","STATUS_TO_PLAY_LOOKUP","DRAWN_TO_PLAY_LOOKUP","SealType","CLEAN_SEAL_STATE","NOTHING","DrawnType","SleeveType","ArcanaTracking","cardStateLog","lastEvent","targetIsFriendly","sourceIsFriendly","drawState","sealState","sleeveState","pullStateInitialized","pullIndex","prepullArcanas","isCastEvent","isBuffEvent","onCast","onPrepullArcana","offPrepullArcana","offDrawnStatus","onDeath","normalise","startTime","prepullSleeve","sleeveDrawLog","TWO_STACK","getCardState","find","artifact","getPullState","arcanaBuff","cardStateItem","arcanaAction","arcanaStatusToPlay","arcanaCastEvent","abilityIcon","sourceID","unshift","includes","retconSearch","arcanaDrawnToPlay","stateItem","NOCTURNAL_SECT","initPullState","sealObtained","SOLAR","LUNAR","CELESTIAL","addSeal","consumeSleeve","startSleeve","lastCardState","pop","lookupLog","slice","cardState","drawnStatus","arcanaActionToStatus","cardActionId","searchLatest","lastLog","latestActionId","searchLog","lastIndex","seal","shift","arcanaId","arcanaStatusToDrawn","PrecastStatus","TIMELINE_UPPER_MOD","SLEEVE_ICON","ONE_STACK","SEAL_ICON","sealSolar","sealLunar","sealCelestial","ArcanaSuggestions","cardLogs","partyComp","combatants","getEntities","combatant","entries","arcanaTracking","target","getEntity","selected","targetName","targetJob","Table","collapsing","unstackable","styles","cardActionTable","Header","Row","HeaderCell","width","Body","cardActionRow","Cell","Button","circular","compact","size","onClick","show","RenderSpreadState","formattedTime","style","marginRight","RenderAction","scrollTo","JOBS","JobIcon","job","drawnArcana","marginLeft","buffIcon","buffPlaceholder","sealIconContainer","sealType","sealIcon","Combatants","Timeline","SectStatstic","AbstractStatistic","Content","simpleStatistic","wrapper","NO_SECT_ICON","ASPECTED_ACTIONS","ASPECTED_BENEFIC","DIURNAL_SECT_STATUSES","DIURNAL_OPPOSITION","NOCTURNAL_INTERSECTION","NOCTURNAL_BALANCE","NOCTURNAL_SECT_STATUSES","NOCTURNAL_FIELD","NOCTURNAL_OPPOSITION","DIURNAL_INTERSECTION","DIURNAL_BALANCE","ACTION_STATUS_MAP","SECT_ACTIONS","DIURNAL_SECT","SECT_STATUSES","DIURNAL_SECT_BUFF_ABILITY","NOCTURNAL_SECT_BUFF_ABILITY","Sect","pullWithoutSect","activeSectId","gaveup","onApplySect","aspectedCast","mapCastToBuff","SECT_ABILITY","splice","sect","mapBuffToCast","withScholar","fightFriendlies","friendly","GALVANIZE","noSectValue","statistics","SectStatistic","info","Statistics","PrecastAction","SEVERITY_MOD","CelestialIntersection","lastUse","totalHeld","held","usesMissed","maxUses","end_time","WASTED_USE_TIERS","HOT_STATUSES","WHEEL_OF_FORTUNE","SEVERITY_TIERS","Overheal","healingDirect","overhealDirect","healingOverTime","overhealOverTime","healingPet","overhealPet","onHeal","onPetHeal","amount","overheal","nonHotOverhealPercent","petOverhealPercent","hotOverhealPercent","sourcesSum","sourcesSumOverheal","invertPercent","InvertedRequirement","toFixed","_percent","percentInverted","CARD_DURATION","SLEEVE_DRAW_PLAYS_GIVEN","WARN_TARGET_MAXPLAYS","FAIL_TARGET_MAXPLAYS","DRAW_HOLDING","3","SLEEVE_DRAW_HOLDING","Draw","lastDrawTimestamp","draws","drawDrift","drawTotalDrift","plays","prepullPrepped","lastSleeveTimestamp","sleeveUses","sleeveDrift","sleeveTotalDrift","onDraw","onSleeveDraw","onPlay","onSleeveBuff","onPlayBuff","playsFromSleeveDraw","playsFromDraw","theoreticalMaxPlays","totalCardsObtained","warnTarget","failTarget","FAIL","drawsMissed","sleevesMissed","CelestialOpposition","onSect","activeSect","suggestContentDiurnal","BENEFIC_II","suggestContentNoct","OGCDDowntime","CooldownDowntime","trackedCds","allowedAverageDowntime","firstUseOffset","checklistName","checklistDescription","CoreStatuses","GIANT_DOMINANCE","EARTHLY_DOMINANCE","WASTED_ST_HEAL_TIERS","10","GCD_ST_HEAL","BENEFIC","Synastry","nonSynastryHeals","onSingleTargetHealCast","Lightspeed","DivinationDowntime"],"mappings":"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","file":"assets/jobs-ast.133ee971.js","sourcesContent":["import _ from 'lodash';\nimport Module from 'parser/core/Module';\nimport { ItemGroup, Item } from './Timeline';\nimport React from 'react';\n// Track the cooldowns on actions and shit\nexport default class Cooldowns extends Module {\n    constructor(...args) {\n        super(...args);\n        this._cooldownGroups = {};\n        this._currentAction = null;\n        this._cooldowns = {};\n        this._groups = {};\n        this._cooldownGroups = _.groupBy(this.data.actions, 'cooldownGroup');\n        // Pre-build groups for actions explicitly set by subclasses\n        this._buildGroups(this.constructor.cooldownOrder);\n        this.addHook('begincast', { by: 'player' }, this._onBeginCast);\n        this.addHook('cast', { by: 'player' }, this._onCast);\n        this.addHook('complete', this._onComplete);\n    }\n    _buildGroups(groups) {\n        // If there's no groups, noop\n        if (!groups) {\n            return;\n        }\n        const ids = groups.map((data, i) => {\n            const order = -(groups.length - i);\n            // If it's just an action id, build a group for it and stop\n            if (typeof data === 'number') {\n                const action = this.data.getAction(data);\n                this._buildGroup({\n                    id: data,\n                    content: action && action.name,\n                    order,\n                });\n                return data;\n            }\n            // Build the base group\n            const group = this._buildGroup({\n                id: data.name,\n                content: data.name,\n                order,\n            });\n            if (data.merge) {\n                // If it's a merge group, we only need to register our group for each of the IDs\n                data.actions.forEach(id => {\n                    this._groups[id] = group;\n                });\n            }\n            else {\n                // Otherwise, build nested groups for each action\n                group.nestedGroups = this._buildGroups(data.actions);\n            }\n            return data.name;\n        });\n        return ids;\n    }\n    _buildGroup(opts) {\n        const group = new ItemGroup({ showNested: false, ...opts });\n        this.timeline.addGroup(group);\n        this._groups[opts.id] = group;\n        return group;\n    }\n    // cooldown starts at the beginning of the casttime\n    // (though 99% of CD based abilities have no cast time)\n    // TODO: Should I be tracking pet CDs too? I mean, contagion/radiant are a thing.\n    _onBeginCast(event) {\n        const action = this.data.getAction(event.ability.guid);\n        if (!action || action.cooldown == null) {\n            return;\n        }\n        this._currentAction = action;\n        this.startCooldown(action.id);\n        if (!_.isNil(action.cooldownGroup)) {\n            this.startCooldownGroup(action.id, action.cooldownGroup);\n        }\n    }\n    _onCast(event) {\n        const action = this.data.getAction(event.ability.guid);\n        if (!action || action.cooldown == null) {\n            return;\n        }\n        const finishingCast = this._currentAction && this._currentAction.id === action.id;\n        this._currentAction = null;\n        if (finishingCast) {\n            return;\n        }\n        this.startCooldown(action.id);\n        if (!_.isNil(action.cooldownGroup)) {\n            this.startCooldownGroup(action.id, action.cooldownGroup);\n        }\n    }\n    _onComplete() {\n        Object.keys(this._cooldowns).forEach(actionId => {\n            this._addToTimeline(parseInt(actionId, 10));\n        });\n    }\n    _addToTimeline(actionId) {\n        const cd = this._cooldowns[actionId];\n        if (!cd) {\n            return false;\n        }\n        // Clean out any 'current' cooldowns into the history\n        if (cd.current) {\n            cd.history.push(cd.current);\n            cd.current = null;\n        }\n        const action = this.data.getAction(actionId);\n        // If the action is on the GCD, GlobalCooldown will be managing its own group\n        if (!action || action.onGcd) {\n            return false;\n        }\n        // Ensure we've got a group for this item\n        if (!this._groups[actionId]) {\n            this._buildGroup({\n                id: actionId,\n                content: action.name,\n                order: actionId,\n            });\n        }\n        // Add CD info to the timeline\n        cd.history\n            .forEach(use => {\n            if (!use.shared) {\n                this._groups[actionId].addItem(new Item({\n                    type: 'background',\n                    start: use.timestamp - this.parser.fight.start_time,\n                    length: use.length,\n                    content: <img src={action.icon} alt={action.name}/>,\n                }));\n            }\n        });\n        return true;\n    }\n    getCooldown(actionId) {\n        return this._cooldowns[actionId] || {\n            current: null,\n            history: [],\n        };\n    }\n    startCooldownGroup(originActionId, cooldownGroup) {\n        const sharedCooldownActions = _.get(this._cooldownGroups, cooldownGroup, []);\n        sharedCooldownActions\n            .map(action => action.id)\n            .filter(id => id !== originActionId)\n            .forEach(id => this.startCooldown(id, true));\n    }\n    startCooldown(actionId, sharedCooldown = false) {\n        // TODO: handle shared CDs\n        const action = this.data.getAction(actionId);\n        if (!action) {\n            return;\n        }\n        // Get the current cooldown status, falling back to a new cooldown\n        const cd = this.getCooldown(actionId);\n        // If there's a current object, move it into the history\n        // TODO: handle errors on CD overlap\n        if (cd.current) {\n            const currentFightDuration = this.parser.currentTimestamp - this.parser.fight.start_time;\n            if (cd.current.timestamp < this.parser.fight.start_time && cd.current.length > currentFightDuration) {\n                // Pre-pull usage, reset the cooldown to prevent overlap on timeline since we don't know exactly when cooldown was used pre-pull\n                this.resetCooldown(actionId);\n            }\n            else {\n                cd.history.push(cd.current);\n            }\n        }\n        cd.current = {\n            timestamp: this.parser.currentTimestamp,\n            length: action.cooldown * 1000,\n            shared: sharedCooldown,\n            invulnTime: 0,\n        };\n        // Save the info back out (to ensure propagation if we've got a new info)\n        this._cooldowns[actionId] = cd;\n    }\n    reduceCooldown(actionId, reduction) {\n        const cd = this.getCooldown(actionId);\n        const currentTimestamp = this.parser.currentTimestamp;\n        // Check if current isn't current\n        if (cd.current && cd.current.timestamp + cd.current.length < currentTimestamp) {\n            cd.history.push(cd.current);\n            cd.current = null;\n        }\n        // TODO: Do I need to warn if they're reducing cooldown on something _with_ no cooldown?\n        if (cd.current === null) {\n            return;\n        }\n        // Reduce the CD\n        cd.current.length -= reduction * 1000;\n        // If the reduction would have made it come off CD earlier than now, reset it - the extra time reduction should be lost.\n        if (cd.current.timestamp + cd.current.length < currentTimestamp) {\n            this.resetCooldown(actionId);\n        }\n    }\n    setInvulnTime(actionId) {\n        const cd = this.getCooldown(actionId);\n        let previousEndTimestamp = this.parser.fight.start_time;\n        let previousCooldown = {};\n        let isFirst = true;\n        for (const cooldown of cd.history) {\n            if (isFirst) {\n                previousEndTimestamp = (cooldown.timestamp + cooldown.length);\n                isFirst = false;\n                previousCooldown = cooldown;\n            }\n            //We invuln time is the time the boss was invuln from when the CD came off CD and when it was next executed\n            previousCooldown.invulnTime = this.downtime.getDowntime(previousEndTimestamp, cooldown.timestamp);\n            previousEndTimestamp = (cooldown.timestamp + cooldown.length);\n            previousCooldown = cooldown;\n        }\n    }\n    resetCooldown(actionId) {\n        const cd = this.getCooldown(actionId);\n        // If there's nothing running, we can just stop\n        // TODO: need to warn?\n        if (cd.current === null) {\n            return;\n        }\n        // Fix up the length\n        cd.current.length = this.parser.currentTimestamp - cd.current.timestamp;\n        // Move the CD into the history\n        cd.history.push(cd.current);\n        cd.current = null;\n    }\n    getCooldownRemaining(actionId) {\n        const current = this.getCooldown(actionId).current;\n        if (!current) {\n            return 0;\n        }\n        return current.length - (this.parser.currentTimestamp - current.timestamp);\n    }\n    // TODO: Should this be here?\n    getTimeOnCooldown(actionId, considerInvulnTime = false, extension = 0) {\n        const cd = this.getCooldown(actionId);\n        const currentTimestamp = this.parser.currentTimestamp;\n        if (considerInvulnTime) {\n            this.setInvulnTime(actionId);\n        }\n        else {\n            cd.history.map(cooldown => {\n                cooldown.invulnTime = 0;\n            });\n        }\n        return cd.history.reduce((time, status) => time + this.getAdjustedTimeOnCooldown(status, currentTimestamp, extension), cd.current ? this.getAdjustedTimeOnCooldown(cd.current, currentTimestamp, extension) : 0);\n    }\n    getAdjustedTimeOnCooldown(cooldown, currentTimestamp, extension) {\n        // Doesn't count time on CD outside the bounds of the current fight, it'll throw calcs off\n        // Add to the length of the cooldown any invuln time for the boss\n        // Additionally account for any extension the caller allowed to the CD Length\n        const duration = currentTimestamp - cooldown.timestamp;\n        const maximumDuration = cooldown.length + cooldown.invulnTime + extension;\n        return _.clamp(duration, 0, maximumDuration);\n    }\n    get used() {\n        return Object.keys(this._cooldowns);\n    }\n}\nCooldowns.handle = 'cooldowns';\nCooldowns.dependencies = [\n    'data',\n    'downtime',\n    'timeline',\n];\n// Array used to sort cooldowns in the timeline. Elements should be either IDs for\n// top-level groups, or objects of the format {name: string, actions: array} for\n// nested groups. Actions not specified here will be sorted by their ID below.\n// Check the NIN and SMN modules for examples.\nCooldowns.cooldownOrder = [];\n","import Module from 'parser/core/Module';\nimport { ItemGroup, Item } from './Timeline';\nimport React from 'react';\nconst STATUS_APPLY_ON_PARTY_THRESHOLD_MILLISECONDS = 2 * 1000;\n// Track statuses applied by actions\nexport default class Statuses extends Module {\n    constructor(...args) {\n        super(...args);\n        this._statuses = {};\n        this._groups = {};\n        this._statusToActionMap = {};\n        this._actionToMergeNameMap = {};\n        const ids = [this.parser.player.id, ...this.parser.player.pets.map(p => p.id)];\n        const byFilter = { by: ids };\n        this.addHook('complete', this._onComplete);\n        this.addHook(['applybuff', 'applydebuff'], byFilter, this._onApply);\n        this.addHook(['refreshdebuff', 'refreshbuff'], byFilter, this._onRefresh);\n        this.addHook(['removebuff', 'removedebuff'], byFilter, this._onRemove);\n        this.cooldowns.constructor.cooldownOrder.forEach(cd => {\n            if (cd && typeof cd === 'object' && cd.merge) {\n                cd.actions.forEach(ac => {\n                    this._actionToMergeNameMap[ac] = cd.name;\n                });\n            }\n        });\n        // Map statuses to actions\n        Object.values(this.data.actions).forEach(action => {\n            if (!action.statusesApplied) {\n                return;\n            }\n            action.statusesApplied.forEach(statusKey => {\n                const status = this.data.statuses[statusKey];\n                this._statusToActionMap[status.id] = action;\n            });\n        });\n    }\n    _onApply(event) {\n        if (this._isStatusAppliedToPet(event)) {\n            return;\n        }\n        this._addStatus(event);\n    }\n    _onRefresh(event) {\n        if (this._isStatusAppliedToPet(event)) {\n            return;\n        }\n        this._endPrevStatus(event);\n        this._addStatus(event);\n    }\n    _onRemove(event) {\n        if (this._isStatusAppliedToPet(event)) {\n            return;\n        }\n        this._endPrevStatus(event);\n    }\n    _endPrevStatus(event) {\n        const status = this.data.getStatus(event.ability.guid);\n        if (!status) {\n            return;\n        }\n        const statusEntry = this._statuses[status.id];\n        if (statusEntry) {\n            const prev = statusEntry.usages[statusEntry.usages.length - 1];\n            if (!prev.end) {\n                prev.end = event.timestamp - this.parser.fight.start_time;\n            }\n        }\n    }\n    _addStatus(event) {\n        const status = this.data.getStatus(event.ability.guid);\n        if (!status) {\n            return;\n        }\n        let statusEntry = this._statuses[status.id];\n        if (!statusEntry) {\n            statusEntry = this._statuses[status.id] = {\n                status: status,\n                usages: [],\n            };\n        }\n        if (statusEntry.usages.some(it => {\n            const diff = Math.abs(event.timestamp - this.parser.fight.start_time - it.start);\n            return diff <= STATUS_APPLY_ON_PARTY_THRESHOLD_MILLISECONDS;\n        })) {\n            return;\n        }\n        statusEntry.usages.push({\n            start: event.timestamp - this.parser.fight.start_time,\n        });\n    }\n    _onComplete() {\n        Object.values(this._statuses).forEach(entry => {\n            const group = this._createGroupForStatus(entry.status);\n            if (!group) {\n                return;\n            }\n            entry.usages.forEach(st => {\n                group.addItem(new Item({\n                    type: 'background',\n                    start: st.start,\n                    end: st.end || st.start + entry.status.duration * 1000,\n                    content: <img src={entry.status.icon} alt={entry.status.name}/>,\n                }));\n            });\n        });\n    }\n    _createGroupForStatus(status) {\n        const stid = 'status-' + (this.constructor.statusesStackMapping[status.id] || status.id);\n        if (this._groups[stid]) {\n            return this._groups[stid];\n        }\n        // find action for status\n        const action = this._statusToActionMap[status.id];\n        if (!action) {\n            return undefined;\n        }\n        const group = new ItemGroup({\n            id: stid,\n            content: status.name,\n            showNested: false,\n        });\n        this._groups[stid] = group;\n        this.timeline.attachToGroup(action.onGcd ? this.gcd.gcdGroupId : (this._actionToMergeNameMap[action.id] || action.id), group);\n        return group;\n    }\n    _isStatusAppliedToPet(event) {\n        return (this.parser.report.friendlyPets.some(p => p.id === event.targetID));\n    }\n}\nStatuses.handle = 'statuses';\nStatuses.dependencies = [\n    'data',\n    'timeline',\n    'cooldowns',\n    'gcd',\n];\nStatuses.statusesStackMapping = {};\n","import Module from 'parser/core/Module';\n// Absurdly large fallback number, so missing duration properties will result in both a console warning and stupid suggestions\nconst DEFAULT_DURATION_MILLIS = 120000;\nexport default class DoTs extends Module {\n    constructor(...args) {\n        super(...args);\n        this._lastApplication = {};\n        this._clip = {};\n        this._statusDuration = {};\n        // NOTE: All statuses submodules track should include a duration property, otherwise the results this produces will be very fucky\n        this.constructor.statusesToTrack.forEach(statusId => {\n            const status = this.data.getStatus(statusId);\n            if (!status) {\n                return;\n            }\n            if (!status.hasOwnProperty('duration')) {\n                console.warn(`statusId ${statusId} is missing a duration property`);\n                this._statusDuration[statusId] = DEFAULT_DURATION_MILLIS;\n            }\n            else {\n                this._statusDuration[statusId] = status.duration * 1000;\n            }\n        });\n        this.addHook(['applydebuff', 'refreshdebuff'], { by: 'player', abilityId: this.constructor.statusesToTrack }, this._onDotApply);\n        this.addHook('complete', this._onComplete);\n    }\n    // *** FUNCTIONS TO OVERRIDE *** //\n    excludeApplication() {\n        // To be overridden by submodules that want to exclude certain applications from clipping calculations (e.g. SMN when rushing)\n        return false;\n    }\n    addChecklistRules() {\n        // To be overridden by submodules to display the checklist rules for their job. This should be handled on a job-by-job\n        // basis rather than generically, since the description text isn't one-size-fits-all, and some jobs may be tracking\n        // more than just DoTs with this module (e.g. DRG's Disembowel).\n    }\n    // Allow Typescript overrides using the parameter\n    // eslint-disable-next-line no-unused-vars\n    addClippingSuggestions(clip) {\n        // To be overridden by submodules to display any clipping suggestions. This should also be handled on a job-by-job\n        // basis, since different jobs have different thresholds for what constitutes bad clipping with varying explanations\n        // for why.\n    }\n    // ***************************** //\n    _onDotApply(event) {\n        const statusId = event.ability.guid;\n        // Make sure we're tracking for this target\n        const applicationKey = `${event.targetID}|${event.targetInstance}`;\n        const lastApplication = this._lastApplication[applicationKey] = this._lastApplication[applicationKey] || {};\n        // If it's not been applied yet or should be excluded per job-specific logic (if any), set it and skip out\n        if (!lastApplication[statusId] || this.excludeApplication()) {\n            lastApplication[statusId] = event.timestamp;\n            return;\n        }\n        // Base clip calc\n        let clip = this._statusDuration[statusId] - (event.timestamp - lastApplication[statusId]);\n        // Remove any untargetable time from the clip - often want to hardcast after an invuln phase, but refresh w/ 3D shortly after.\n        clip -= this.invuln.getUntargetableUptime('all', event.timestamp - this._statusDuration[statusId], event.timestamp);\n        // Also remove invuln time in the future that casting later would just push dots into\n        // TODO: This relies on a full set of invuln data ahead of time. Can this be trusted?\n        clip -= this.invuln.getInvulnerableUptime('all', event.timestamp, event.timestamp + this._statusDuration[statusId] + clip);\n        // Capping clip at 0 - less than that is downtime, which is handled by the checklist requirement\n        this._clip[statusId] = (this._clip[statusId] || 0) + Math.max(0, clip);\n        lastApplication[statusId] = event.timestamp;\n    }\n    _onComplete() {\n        this.addChecklistRules();\n        this.addClippingSuggestions(this._clip);\n    }\n    // These two functions are helpers for submodules and should be used but not overridden\n    getUptimePercent(statusId) {\n        const statusUptime = this.enemies.getStatusUptime(statusId);\n        const fightDuration = this.parser.fightDuration - this.invuln.getInvulnerableUptime();\n        return (statusUptime / fightDuration) * 100;\n    }\n    getClippingAmount(statusId) {\n        // This normalises clipping as seconds clipped per minute, since some level of clipping is expected and we need tiers that work for both long and short fights\n        const fightDurationMillis = (this.parser.fightDuration - this.invuln.getInvulnerableUptime());\n        // eslint-disable-next-line no-magic-numbers\n        const clipSecsPerMin = Math.round((this._clip[statusId] * 60) / fightDurationMillis);\n        return clipSecsPerMin;\n    }\n}\nDoTs.handle = 'dots';\nDoTs.dependencies = [\n    'data',\n    'enemies',\n    'invuln',\n];\n// To be overriden by submodules with an array of status IDs to track\nDoTs.statusesToTrack = [];\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * This method is like `_.findIndex` except that it iterates over elements\n * of `collection` from right to left.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=array.length-1] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': true },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': false }\n * ];\n *\n * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n * // => 2\n *\n * // The `_.matches` iteratee shorthand.\n * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n * // => 0\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findLastIndex(users, ['active', false]);\n * // => 2\n *\n * // The `_.property` iteratee shorthand.\n * _.findLastIndex(users, 'active');\n * // => 0\n */\nfunction findLastIndex(array, predicate, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = length - 1;\n  if (fromIndex !== undefined) {\n    index = toInteger(fromIndex);\n    index = fromIndex < 0\n      ? nativeMax(length + index, 0)\n      : nativeMin(index, length - 1);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index, true);\n}\n\nmodule.exports = findLastIndex;\n","var toString = require('./toString');\n\n/**\n * Replaces matches for `pattern` in `string` with `replacement`.\n *\n * **Note:** This method is based on\n * [`String#replace`](https://mdn.io/String/replace).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to modify.\n * @param {RegExp|string} pattern The pattern to replace.\n * @param {Function|string} replacement The match replacement.\n * @returns {string} Returns the modified string.\n * @example\n *\n * _.replace('Hi Fred', 'Fred', 'Barney');\n * // => 'Hi Barney'\n */\nfunction replace() {\n  var args = arguments,\n      string = toString(args[0]);\n\n  return args.length < 3 ? string : string.replace(args[1], args[2]);\n}\n\nmodule.exports = replace;\n","var arrayEachRight = require('./_arrayEachRight'),\n    baseEachRight = require('./_baseEachRight'),\n    castFunction = require('./_castFunction'),\n    isArray = require('./isArray');\n\n/**\n * This method is like `_.forEach` except that it iterates over elements of\n * `collection` from right to left.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @alias eachRight\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @see _.forEach\n * @example\n *\n * _.forEachRight([1, 2], function(value) {\n *   console.log(value);\n * });\n * // => Logs `2` then `1`.\n */\nfunction forEachRight(collection, iteratee) {\n  var func = isArray(collection) ? arrayEachRight : baseEachRight;\n  return func(collection, castFunction(iteratee));\n}\n\nmodule.exports = forEachRight;\n","/**\n * A specialized version of `_.forEachRight` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEachRight(array, iteratee) {\n  var length = array == null ? 0 : array.length;\n\n  while (length--) {\n    if (iteratee(array[length], length, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEachRight;\n","var baseForOwnRight = require('./_baseForOwnRight'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEachRight` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEachRight = createBaseEach(baseForOwnRight, true);\n\nmodule.exports = baseEachRight;\n","var baseForRight = require('./_baseForRight'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwnRight` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwnRight(object, iteratee) {\n  return object && baseForRight(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwnRight;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * This function is like `baseFor` except that it iterates over properties\n * in the opposite order.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseForRight = createBaseFor(true);\n\nmodule.exports = baseForRight;\n","var assignValue = require('./_assignValue'),\n    baseZipObject = require('./_baseZipObject');\n\n/**\n * This method is like `_.fromPairs` except that it accepts two arrays,\n * one of property identifiers and one of corresponding values.\n *\n * @static\n * @memberOf _\n * @since 0.4.0\n * @category Array\n * @param {Array} [props=[]] The property identifiers.\n * @param {Array} [values=[]] The property values.\n * @returns {Object} Returns the new object.\n * @example\n *\n * _.zipObject(['a', 'b'], [1, 2]);\n * // => { 'a': 1, 'b': 2 }\n */\nfunction zipObject(props, values) {\n  return baseZipObject(props || [], values || [], assignValue);\n}\n\nmodule.exports = zipObject;\n","/**\n * This base implementation of `_.zipObject` which assigns values using `assignFunc`.\n *\n * @private\n * @param {Array} props The property identifiers.\n * @param {Array} values The property values.\n * @param {Function} assignFunc The function to assign values.\n * @returns {Object} Returns the new object.\n */\nfunction baseZipObject(props, values, assignFunc) {\n  var index = -1,\n      length = props.length,\n      valsLength = values.length,\n      result = {};\n\n  while (++index < length) {\n    var value = index < valsLength ? values[index] : undefined;\n    assignFunc(result, props[index], value);\n  }\n  return result;\n}\n\nmodule.exports = baseZipObject;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"jobIcon\":\"ArcanaSuggestions-module_jobIcon__11BjB\",\"cardActionRow\":\"ArcanaSuggestions-module_cardActionRow__intyq\",\"cardActionTable\":\"ArcanaSuggestions-module_cardActionTable__n0w3M\",\"buffIcon\":\"ArcanaSuggestions-module_buffIcon__2CcPF\",\"buffPlaceholder\":\"ArcanaSuggestions-module_buffPlaceholder__apWUF\",\"buffUnknown\":\"ArcanaSuggestions-module_buffUnknown__1dQTy\",\"sealIconContainer\":\"ArcanaSuggestions-module_sealIconContainer__2zqCi\",\"sealIcon\":\"ArcanaSuggestions-module_sealIcon__1L2CN\"};","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gutter\":\"20px\",\"simpleStatistic\":\"SectStatistic-module_simpleStatistic__1XpFM\",\"wrapper\":\"SectStatistic-module_wrapper__2WuUu\",\"icon\":\"SectStatistic-module_icon__2g8Qm\",\"value\":\"SectStatistic-module_value__2YPEq\"};","import { __decorate, __metadata } from \"tslib\";\nimport { Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport { dependency } from 'parser/core/Module';\nimport Checklist, { Requirement, TARGET, TieredRule } from 'parser/core/modules/Checklist';\nimport DoTs from 'parser/core/modules/DoTs';\nimport Suggestions, { SEVERITY, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport React from 'react';\nconst SEVERITIES = {\n    CLIPPING: {\n        2: SEVERITY.MINOR,\n        4: SEVERITY.MEDIUM,\n        6: SEVERITY.MAJOR,\n    },\n    UPTIME: {\n        84: TARGET.WARN,\n        91: TARGET.SUCCESS,\n    },\n};\nexport default class Combust extends DoTs {\n    addChecklistRules() {\n        this.checklist.add(new TieredRule({\n            name: <Trans id=\"ast.dots.rule.name\">Keep your DoT up</Trans>,\n            description: <Trans id=\"ast.dots.rule.description\">\n\t\t\t\tCombust III makes up a good portion of your damage. Aim to keep this DoT up at all times. It also can be used to weave (<ActionLink {...ACTIONS.DRAW}/>) and manage cards, or maneuver around without dropping GCD uptime.\n\t\t\t\t</Trans>,\n            tiers: SEVERITIES.UPTIME,\n            requirements: [\n                new Requirement({\n                    name: <Trans id=\"ast.dots.requirement.uptime.name\"><ActionLink {...ACTIONS.COMBUST_III}/> uptime</Trans>,\n                    percent: () => this.getUptimePercent(STATUSES.COMBUST_III.id),\n                }),\n            ],\n        }));\n    }\n    addClippingSuggestions(clip) {\n        // Suggestion for DoT clipping\n        this.suggestions.add(new TieredSuggestion({\n            icon: ACTIONS.COMBUST_III.icon,\n            content: <Trans id=\"ast.dots.suggestion.clip.content\">\n\t\t\t\t\tAvoid refreshing <ActionLink {...ACTIONS.COMBUST_III}/> significantly before it expires.\n\t\t\t\t</Trans>,\n            why: <Trans id=\"ast.dots.suggestion.clip.why\">\n\t\t\t\t\t\tAn average of {this.parser.formatDuration(this.getClippingAmount(STATUSES.COMBUST_III.id) * 1000)} of Combust clipped every minute, for a total of {this.parser.formatDuration(clip[STATUSES.COMBUST_III.id])} lost to early refreshes.\n\t\t\t\t\t</Trans>,\n            tiers: SEVERITIES.CLIPPING,\n            value: this.getClippingAmount(STATUSES.COMBUST_III.id),\n        }));\n    }\n}\nCombust.handle = 'combust';\nCombust.statusesToTrack = [\n    STATUSES.COMBUST_III.id,\n];\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Checklist)\n], Combust.prototype, \"checklist\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], Combust.prototype, \"suggestions\", void 0);\n","import ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\n// Grouped cards for future convenience - whatever processing desired\n/* Grouped actions */\nexport const PLAY = [\n    ACTIONS.THE_BALANCE.id,\n    ACTIONS.THE_BOLE.id,\n    ACTIONS.THE_ARROW.id,\n    ACTIONS.THE_SPEAR.id,\n    ACTIONS.THE_EWER.id,\n    ACTIONS.THE_SPIRE.id,\n    ACTIONS.LORD_OF_CROWNS.id,\n    ACTIONS.LADY_OF_CROWNS.id,\n];\nexport const SOLAR_SEAL_ARCANA = [\n    ACTIONS.THE_BALANCE.id,\n    ACTIONS.THE_BOLE.id,\n];\nexport const LUNAR_SEAL_ARCANA = [\n    ACTIONS.THE_ARROW.id,\n    ACTIONS.THE_EWER.id,\n];\nexport const CELESTIAL_SEAL_ARCANA = [\n    ACTIONS.THE_SPEAR.id,\n    ACTIONS.THE_SPIRE.id,\n];\n/* Arcana spread states */\nexport const DRAWN_ARCANA = [\n    STATUSES.BALANCE_DRAWN.id,\n    STATUSES.BOLE_DRAWN.id,\n    STATUSES.ARROW_DRAWN.id,\n    STATUSES.SPEAR_DRAWN.id,\n    STATUSES.EWER_DRAWN.id,\n    STATUSES.SPIRE_DRAWN.id,\n    STATUSES.LORD_OF_CROWNS_DRAWN.id,\n    STATUSES.LADY_OF_CROWNS_DRAWN.id,\n];\nexport const ARCANA_STATUSES = [\n    STATUSES.THE_BALANCE.id,\n    STATUSES.THE_BOLE.id,\n    STATUSES.THE_ARROW.id,\n    STATUSES.THE_SPEAR.id,\n    STATUSES.THE_EWER.id,\n    STATUSES.THE_SPIRE.id,\n    STATUSES.LORD_OF_CROWNS.id,\n    STATUSES.LADY_OF_CROWNS.id,\n];\n","import ACTIONS from 'data/ACTIONS';\nimport CoreCooldowns from 'parser/core/modules/Cooldowns';\nimport { PLAY } from './ArcanaGroups';\nexport default class Cooldowns extends CoreCooldowns {\n}\nCooldowns.cooldownOrder = [\n    // Arcanum\n    {\n        name: 'Draw/Undraw',\n        merge: true,\n        actions: [\n            ACTIONS.DRAW.id,\n            ACTIONS.UNDRAW.id,\n        ],\n    },\n    {\n        name: 'Redraw/Minor Arcana',\n        merge: true,\n        actions: [\n            ACTIONS.REDRAW.id,\n            ACTIONS.MINOR_ARCANA.id,\n        ],\n    },\n    ACTIONS.SLEEVE_DRAW.id,\n    {\n        name: 'Play',\n        merge: true,\n        actions: [...PLAY],\n    },\n    ACTIONS.DIVINATION.id,\n    ACTIONS.LIGHTSPEED.id,\n    // oGCD ST heals\n    ACTIONS.ESSENTIAL_DIGNITY.id,\n    ACTIONS.CELESTIAL_INTERSECTION.id,\n    ACTIONS.SYNASTRY.id,\n    // oGCD AoE heals\n    {\n        name: 'Earthly Star',\n        merge: true,\n        actions: [\n            ACTIONS.EARTHLY_STAR.id,\n            ACTIONS.STELLAR_DETONATION.id,\n        ],\n    },\n    ACTIONS.CELESTIAL_OPPOSITION.id,\n    // Horoscope\n    {\n        name: 'Horoscope',\n        merge: true,\n        actions: [\n            ACTIONS.HOROSCOPE.id,\n            ACTIONS.HOROSCOPE_ACTIVATION.id,\n        ],\n    },\n    // Party mitigation\n    ACTIONS.COLLECTIVE_UNCONSCIOUS.id,\n    // Healing buff\n    ACTIONS.NEUTRAL_SECT.id,\n    // Role actions\n    ACTIONS.LUCID_DREAMING.id,\n];\n","import { __decorate, __metadata } from \"tslib\";\nimport { t } from '@lingui/macro';\nimport { Plural, Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport Module, { dependency } from 'parser/core/Module';\nimport Suggestions, { SEVERITY, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport React from 'react';\n// Tiny module to count the number of early detonations on Earthly Star.\n// TODO: Could expand to analyse Earthly Star usage, timing, overheal, etc - Sushi\nconst SEVERETIES = {\n    UNCOOKED: {\n        1: SEVERITY.MEDIUM,\n        2: SEVERITY.MAJOR,\n    },\n    USES_MISSED: {\n        1: SEVERITY.MEDIUM,\n        2: SEVERITY.MAJOR,\n    },\n};\n// const PLAYER_CASTS = [ACTIONS.EARTHLY_STAR.id, ACTIONS.STELLAR_DETONATION.id]\nconst PET_CASTS = [ACTIONS.STELLAR_BURST.id, ACTIONS.STELLAR_EXPLOSION.id];\n// const PLAYER_STATUSES = [STATUSES.EARTHLY_DOMINANCE.id, STATUSES.GIANT_DOMINANCE.id]\nexport default class EarthlyStar extends Module {\n    constructor() {\n        super(...arguments);\n        this._uses = 0;\n        this._lastUse = 0;\n        this._totalHeld = 0;\n        this._earlyBurstCount = 0;\n    }\n    init() {\n        this.addHook('cast', { abilityId: ACTIONS.EARTHLY_STAR.id, by: 'player' }, this._onSet);\n        this.addHook('cast', { abilityId: PET_CASTS, by: 'pet' }, this._onPetCast);\n        // this.addHook('applybuff', {abilityId: PLAYER_STATUSES, by: 'player'}, this._onDominance)\n        this.addHook('complete', this._onComplete);\n    }\n    _onSet(event) {\n        this._uses++;\n        // TODO: Instead determine how far back they used it prepull by checking explosion time.\n        if (this._lastUse === 0) {\n            this._lastUse = this.parser.fight.start_time;\n        }\n        const _held = event.timestamp - this._lastUse - (ACTIONS.EARTHLY_STAR.cooldown * 1000);\n        if (_held > 0) {\n            this._totalHeld += _held;\n        }\n        // update the last use\n        this._lastUse = event.timestamp;\n    }\n    _onPetCast(event) {\n        const actionID = event.ability.guid;\n        if (actionID === ACTIONS.STELLAR_BURST.id) {\n            this._earlyBurstCount++;\n        }\n    }\n    _onComplete() {\n        /*\n            SUGGESTION: Early detonations\n        */\n        const earlyBurstCount = this._earlyBurstCount;\n        if (earlyBurstCount > 0) {\n            this.suggestions.add(new TieredSuggestion({\n                icon: ACTIONS.STELLAR_DETONATION.icon,\n                content: <Trans id=\"ast.earthly-star.suggestion.uncooked.content\">\n\t\t\t\t\tPlan your <ActionLink {...ACTIONS.EARTHLY_STAR}/> placements so that it's always cooked enough for the full potency when you need it.\n\t\t\t\t</Trans>,\n                why: <Trans id=\"ast.earthly-star.suggestion.uncooked.why\">\n\t\t\t\t\t<Plural value={earlyBurstCount} one=\"# detonation\" other=\"# detonations\"/> of an uncooked Earthly Star.\n\t\t\t\t</Trans>,\n                tiers: SEVERETIES.UNCOOKED,\n                value: earlyBurstCount,\n            }));\n        }\n        /*\n            SUGGESTION: Missed uses\n        */\n        const holdDuration = this._uses === 0 ? this.parser.fightDuration : this._totalHeld;\n        const _usesMissed = Math.floor(holdDuration / (ACTIONS.EARTHLY_STAR.cooldown * 1000));\n        if (_usesMissed > 1 || this._uses === 0) {\n            this.suggestions.add(new TieredSuggestion({\n                icon: ACTIONS.EARTHLY_STAR.icon,\n                content: <Trans id=\"ast.earthyl-star.suggestion.missed-use.content\">\n\t\t\t\t\tUse <ActionLink {...ACTIONS.EARTHLY_STAR}/> more frequently. It may save a healing GCD and results in more damage output.\n\t\t\t\t</Trans>,\n                tiers: SEVERETIES.USES_MISSED,\n                value: this._uses === 0 ? 100 : _usesMissed,\n                why: <Trans id=\"ast.earthyl-star.suggestion.missed-use.why\">\n\t\t\t\t\tAbout {_usesMissed} uses of Earthly Star were missed by holding it for at least a total of {this.parser.formatDuration(holdDuration)}.\n\t\t\t\t</Trans>,\n            }));\n        }\n    }\n}\nEarthlyStar.handle = 'earthlystar';\nEarthlyStar.title = t('ast.earthly-star.title') `Earthly Star`;\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], EarthlyStar.prototype, \"suggestions\", void 0);\n","export default {\n    DRAW_CHECKLIST: 40,\n    LIGHTSPEED: 52,\n    ARCANA_TRACKING: 55,\n};\n","import { t } from '@lingui/macro';\nimport { Plural, Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport Rotation from 'components/ui/Rotation';\nimport { getDataBy } from 'data';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport Module from 'parser/core/Module';\nimport React, { Fragment } from 'react';\nimport { Accordion } from 'semantic-ui-react';\nimport DISPLAY_ORDER from './DISPLAY_ORDER';\nconst LIGHTSPEED_CAST_TIME_MOD = -2.5;\nexport default class LIGHTSPEED extends Module {\n    constructor(...args) {\n        super(...args);\n        this._active = false;\n        this._lightspeed = {};\n        this._history = [];\n        this._ctIndex = null;\n        this._missedGcds = 0;\n        this.addHook('cast', { by: 'player' }, this._onCast);\n        const lsBuffFilter = {\n            by: 'player',\n            abilityId: STATUSES.LIGHTSPEED.id,\n        };\n        this.addHook('applybuff', lsBuffFilter, this._onApplyLightspeed);\n        this.addHook('removebuff', lsBuffFilter, this._onRemoveLightspeed);\n        this.addHook('complete', this._onComplete);\n    }\n    _onCast(event) {\n        const actionId = event.ability.guid;\n        // If it's a LIGHTSPEED cast, start tracking\n        if (actionId === ACTIONS.LIGHTSPEED.id) {\n            this._startLightspeed(event.timestamp);\n        }\n        // Only going to save casts during LIGHTSPEED\n        const action = getDataBy(ACTIONS, 'id', actionId);\n        if (!this._active || !action || action.autoAttack) {\n            return;\n        }\n        // Save the event to the LIGHTSPEED casts\n        this._lightspeed.casts.push(event);\n    }\n    _onApplyLightspeed(event) {\n        // If we're not active at this point, they started the fight with LIGHTSPEED up. Clean up the mess.\n        if (this._active) {\n            return;\n        }\n        this._startLightspeed(event.timestamp);\n    }\n    _onRemoveLightspeed() {\n        this._stopAndSave();\n    }\n    _onComplete() {\n        // Clean up any existing casts\n        if (this._active) {\n            this._stopAndSave();\n        }\n    }\n    _startLightspeed(start) {\n        this._active = true;\n        this._lightspeed = {\n            start,\n            end: null,\n            casts: [],\n        };\n        this._ctIndex = this.castTime.set('all', LIGHTSPEED_CAST_TIME_MOD);\n    }\n    _stopAndSave(endTime = this.parser.currentTimestamp) {\n        // Make sure we've not already stopped this one\n        if (!this._active) {\n            return;\n        }\n        this._active = false;\n        this._lightspeed.end = endTime;\n        this._history.push(this._lightspeed);\n        this.castTime.reset(this._ctIndex);\n    }\n    activeAt(time) {\n        // If it's during the current one, easy way out\n        if (this._active && this._lightspeed.start <= time) {\n            return true;\n        }\n        return this._history.some(lightspeed => lightspeed.start <= time && lightspeed.end >= time);\n    }\n    output() {\n        const noCastsMessage = <Fragment>\n\t\t\t<p>\n\t\t\t\t<span className=\"text-error\"><Trans id=\"ast.lightspeed.messages.no-casts\">There were no casts recorded for <ActionLink {...ACTIONS.LIGHTSPEED}/></Trans></span>\n\t\t\t</p>\n\t\t</Fragment>;\n        const panels = this._history.map(lightspeed => {\n            const gcdActions = lightspeed.casts\n                .map(cast => getDataBy(ACTIONS, 'id', cast.ability.guid))\n                .filter(action => action && action.onGcd);\n            const numGcds = gcdActions.length;\n            const mpSavings = gcdActions\n                .reduce((totalSavings, action) => action.mpCost / 2 + totalSavings, 0);\n            // TODO: Use mpCostFactor instead of mpCost to be level agnostic\n            return {\n                key: lightspeed.start,\n                title: {\n                    content: <>\n\t\t\t\t\t\t{this.parser.formatTimestamp(lightspeed.start)}\n\t\t\t\t\t\t&nbsp;-&nbsp;<Trans id=\"ast.lightspeed.rotation.gcd\"><Plural value={numGcds} one=\"# GCD\" other=\"# GCDs\"/></Trans>\n\t\t\t\t\t\t&nbsp;-&nbsp;{mpSavings} <Trans id=\"ast.lightspeed.rotation.mp-saved\">MP saved</Trans>\n\t\t\t\t\t</>,\n                },\n                content: {\n                    content: <Rotation events={lightspeed.casts}/>,\n                },\n            };\n        });\n        const lightspeedDisplay = <Accordion exclusive={false} panels={panels} styled fluid/>;\n        return <Fragment>\n\t\t\t<p>\n\t\t\t\t<Trans id=\"ast.lightspeed.messages.explanation\">\n\t\t\t\tThe main use of <ActionLink {...ACTIONS.LIGHTSPEED}/> should be for weaving card actions during <ActionLink {...ACTIONS.DIVINATION}/> and <ActionLink {...ACTIONS.SLEEVE_DRAW}/> windows.<br />\n                It can also be used for MP savings on heavy healing segments, keeping casts up while on the move and other specific scenarios.<br />\n\t\t\t\tEach fight calls for a different strategy, but try to utilize it as much as possible.<br /><br />\n\t\t\t\tUnless it's being used for <ActionLink {...ACTIONS.ASCEND}/>, lightspeed should fit at least 6 GCDs.\n\t\t\t\t</Trans>\n\t\t\t</p>\n\t\t\t{panels.length === 0 && noCastsMessage}\n\t\t\t{panels.length > 0 && lightspeedDisplay}\n\n\t\t</Fragment>;\n    }\n}\nLIGHTSPEED.handle = 'lightspeed';\nLIGHTSPEED.dependencies = [\n    'castTime',\n];\nLIGHTSPEED.title = t('ast.lightspeed.title') `Lightspeed`;\nLIGHTSPEED.displayOrder = DISPLAY_ORDER.LIGHTSPEED;\n","import React, { Fragment } from 'react';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport Module from 'parser/core/Module';\nimport { Suggestion, SEVERITY } from 'parser/core/modules/Suggestions';\nimport { ActionLink } from 'components/ui/DbLink';\nimport { Plural, Trans } from '@lingui/react';\nconst WASTED_USES_MAX_MEDIUM = 2;\nexport default class LucidDreaming extends Module {\n    constructor(...args) {\n        super(...args);\n        this._lastUse = 0;\n        this._uses = 0;\n        this._totalHeld = 0;\n        this._extensions = 0;\n        this._gcdCountHoldingLucid = 0;\n        this._maxMP = null;\n        this._MP = null;\n        this._MPthresholdTime = null;\n        const _filter = {\n            by: 'player',\n            abilityId: [ACTIONS.LUCID_DREAMING.id],\n        };\n        this.addHook('cast', _filter, this._onCastLucid);\n        this.addHook('refreshbuff', { by: 'player', to: 'player' }, this._onRefreshLucid);\n        this.addHook('complete', this._onComplete);\n    }\n    _onCastLucid(event) {\n        this._uses++;\n        if (this._lastUse === 0) {\n            this._lastUse = this.parser.fight.start_time;\n        }\n        let _held = 0;\n        if (this._uses === 1) {\n            // The first use, take holding as from the first minute of the fight\n            _held = event.timestamp - this.parser.fight.start_time;\n        }\n        else {\n            // Take holding as from the time it comes off cooldown\n            _held = event.timestamp - this._lastUse - (ACTIONS.LUCID_DREAMING.cooldown * 1000);\n        }\n        if (_held > 0) {\n            this._totalHeld += _held;\n        }\n        //update the last use\n        this._lastUse = event.timestamp;\n    }\n    _onRefreshLucid(event) {\n        if (event.ability.guid === STATUSES.LUCID_DREAMING.id) {\n            this._extensions++;\n        }\n    }\n    _onComplete() {\n        //uses missed reported in 1 decimal\n        const holdDuration = this._uses === 0 ? this.parser.fightDuration : this._totalHeld;\n        const _usesMissed = Math.floor(holdDuration / (ACTIONS.LUCID_DREAMING.cooldown * 1000));\n        if (_usesMissed > 1 || this._uses === 0) {\n            this.suggestions.add(new Suggestion({\n                icon: ACTIONS.LUCID_DREAMING.icon,\n                content: <Fragment>\n\t\t\t\t\t<Trans id=\"ast.lucid-dreaming.suggestion.content\">\n\t\t\t\t\tKeep <ActionLink {...ACTIONS.LUCID_DREAMING}/> on cooldown for better MP management.\n\t\t\t\t\t</Trans>\n\t\t\t\t</Fragment>,\n                severity: this._uses === 0 || _usesMissed > WASTED_USES_MAX_MEDIUM ? SEVERITY.MAJOR : SEVERITY.MEDIUM,\n                why: <Fragment>\n\t\t\t\t\t<Trans id=\"ast.lucid-dreaming.suggestion.why\">\n\t\t\t\t\t\t<Plural value={_usesMissed} one=\"# use\" other=\"# uses\"/> of Lucid Dreaming were missed by holding it for at least a total of {this.parser.formatDuration(holdDuration)}.\n\t\t\t\t\t</Trans>\n\t\t\t\t</Fragment>,\n            }));\n        }\n    }\n}\nLucidDreaming.handle = 'lucid';\nLucidDreaming.dependencies = [\n    'suggestions',\n];\n","import { Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\n// import STATUSES from 'data/STATUSES'\nimport Module from 'parser/core/Module';\nimport { SEVERITY, Suggestion } from 'parser/core/modules/Suggestions';\nimport React, { Fragment } from 'react';\nexport default class ArcanaUndrawUsage extends Module {\n    constructor(...args) {\n        super(...args);\n        this.addHook('cast', { by: 'player' }, this._onCast);\n        this.addHook('complete', this._onComplete);\n        this._badUndraws = [];\n    }\n    _onCast(event) {\n        this._saveIfBadUndraw(event);\n    }\n    _saveIfBadUndraw(event) {\n        const actionId = event.ability.guid;\n        // It's a OGCD Arcana Undraw. GET IT.\n        if (actionId === ACTIONS.UNDRAW.id) {\n            this._badUndraws.push(event);\n        }\n    }\n    _onComplete() {\n        const badUndraws = this._badUndraws;\n        if (badUndraws > 0) {\n            this.suggestions.add(new Suggestion({\n                icon: 'https://xivapi.com/i/003000/003108.png',\n                content: <Fragment>\n\t\t\t\t\t<Trans id=\"ast.arcana-undraw-usage.suggestions.content\">\n                    Due to Draw starting its cooldown the moment it's used, there is no longer any reason to <ActionLink {...ACTIONS.UNDRAW}/> instead of playing it or converting it with <ActionLink {...ACTIONS.MINOR_ARCANA}/></Trans>\n\t\t\t\t</Fragment>,\n                severity: SEVERITY.MAJOR,\n                why: <Trans id=\"ast.arcana-undraw-usage.suggestions.why\">\n\t\t\t\t\t{badUndraws.length} instances of using undraw.</Trans>,\n            }));\n        }\n    }\n}\nArcanaUndrawUsage.handle = 'arcanaundraws';\nArcanaUndrawUsage.dependencies = [\n    'suggestions',\n];\n","import { __decorate, __metadata } from \"tslib\";\nimport { t } from '@lingui/macro';\nimport { Plural, Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport Module, { dependency } from 'parser/core/Module';\nimport Suggestions, { SEVERITY, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport React from 'react';\n// Things to track:\n// Did they forget to activate horoscope?\n// Did they cast a Helios/Aspected Helios without Horoscope despite having it up?\n// Maybe track how they used it?\nconst SEVERETIES = {\n    ACTIVATES_MISSED: {\n        1: SEVERITY.MINOR,\n        2: SEVERITY.MEDIUM,\n    },\n};\nconst HELIOS_CASTS = [\n    ACTIONS.HELIOS.id,\n    ACTIONS.ASPECTED_HELIOS.id,\n];\nconst HOROSCOPE_STATUSES = [\n    STATUSES.HOROSCOPE.id,\n    STATUSES.HOROSCOPE_HELIOS.id,\n];\nexport default class Horoscope extends Module {\n    constructor() {\n        super(...arguments);\n        this.uses = 0;\n        this.activations = 0;\n    }\n    init() {\n        this.addHook('cast', { abilityId: ACTIONS.HOROSCOPE.id, by: 'player' }, this.onHoroscope);\n        this.addHook('cast', { abilityId: ACTIONS.HOROSCOPE_ACTIVATION.id, by: 'player' }, this.onActivate);\n        this.addHook('complete', this.onComplete);\n    }\n    onHoroscope(event) {\n        this.uses++;\n    }\n    onActivate(event) {\n        this.activations++;\n    }\n    onComplete() {\n        /*\n            SUGGESTION: Didn't activate\n        */\n        const missedActivations = this.uses - this.activations;\n        this.suggestions.add(new TieredSuggestion({\n            icon: ACTIONS.HOROSCOPE_ACTIVATION.icon,\n            content: <Trans id=\"ast.horoscope.suggestion.expired.content\">\n\t\t\t\t<ActionLink {...ACTIONS.HOROSCOPE}/> does not activate by itself, so don't forget to use it again or it will expire for no potency.\n\t\t\t</Trans>,\n            why: <Trans id=\"ast.horoscope.suggestion.expired.why\">\n\t\t\t\t<Plural value={missedActivations} one=\"# expiration\" other=\"# expirations\"/>  of Horoscope without reading fortunes again.\n\t\t\t</Trans>,\n            tiers: SEVERETIES.ACTIVATES_MISSED,\n            value: missedActivations,\n        }));\n    }\n}\nHoroscope.handle = 'horoscope';\nHoroscope.title = t('ast.horoscope.title') `Horoscope`;\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], Horoscope.prototype, \"suggestions\", void 0);\n","import { __decorate, __metadata } from \"tslib\";\nimport { t } from '@lingui/macro';\nimport { getDataBy } from 'data';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport _ from 'lodash';\nimport Module, { dependency } from 'parser/core/Module';\nimport PrecastStatus from 'parser/core/modules/PrecastStatus';\nimport { ARCANA_STATUSES, CELESTIAL_SEAL_ARCANA, DRAWN_ARCANA, LUNAR_SEAL_ARCANA, PLAY, SOLAR_SEAL_ARCANA } from '../ArcanaGroups';\nimport DISPLAY_ORDER from '../DISPLAY_ORDER';\nconst LINKED_EVENT_THRESHOLD = 20;\nconst DEATH_EVENT_STATUS_DROP_DELAY = 2000;\nconst CARD_GRANTING_ABILITIES = [ACTIONS.DRAW.id, ACTIONS.REDRAW.id, ACTIONS.MINOR_ARCANA.id, ...PLAY, ACTIONS.SLEEVE_DRAW.id];\nconst CARD_ACTIONS = [\n    ACTIONS.DRAW.id,\n    ACTIONS.REDRAW.id,\n    ACTIONS.SLEEVE_DRAW.id,\n    ACTIONS.MINOR_ARCANA.id,\n    ACTIONS.UNDRAW.id,\n    ACTIONS.DIVINATION.id,\n    ...PLAY,\n];\nconst PLAY_TO_STATUS_LOOKUP = _.zipObject(PLAY, DRAWN_ARCANA);\nconst STATUS_TO_DRAWN_LOOKUP = _.zipObject(ARCANA_STATUSES, DRAWN_ARCANA);\nconst STATUS_TO_PLAY_LOOKUP = _.zipObject(ARCANA_STATUSES, PLAY);\nconst DRAWN_TO_PLAY_LOOKUP = _.zipObject(DRAWN_ARCANA, PLAY);\nexport var SealType;\n(function (SealType) {\n    SealType[SealType[\"NOTHING\"] = 0] = \"NOTHING\";\n    SealType[SealType[\"SOLAR\"] = 1] = \"SOLAR\";\n    SealType[SealType[\"LUNAR\"] = 2] = \"LUNAR\";\n    SealType[SealType[\"CELESTIAL\"] = 3] = \"CELESTIAL\";\n})(SealType || (SealType = {}));\nconst CLEAN_SEAL_STATE = [SealType.NOTHING, SealType.NOTHING, SealType.NOTHING];\nexport var DrawnType;\n(function (DrawnType) {\n    DrawnType[DrawnType[\"NOTHING\"] = 0] = \"NOTHING\";\n    DrawnType[DrawnType[\"BALANCE\"] = STATUSES.BALANCE_DRAWN.id] = \"BALANCE\";\n    DrawnType[DrawnType[\"BOLE\"] = STATUSES.BOLE_DRAWN.id] = \"BOLE\";\n    DrawnType[DrawnType[\"ARROW\"] = STATUSES.ARROW_DRAWN.id] = \"ARROW\";\n    DrawnType[DrawnType[\"SPEAR\"] = STATUSES.SPEAR_DRAWN.id] = \"SPEAR\";\n    DrawnType[DrawnType[\"EWER\"] = STATUSES.EWER_DRAWN.id] = \"EWER\";\n    DrawnType[DrawnType[\"SPIRE\"] = STATUSES.SPIRE_DRAWN.id] = \"SPIRE\";\n    DrawnType[DrawnType[\"LORD_OF_CROWNS\"] = STATUSES.LORD_OF_CROWNS_DRAWN.id] = \"LORD_OF_CROWNS\";\n    DrawnType[DrawnType[\"LADY_OF_CROWNS\"] = STATUSES.LADY_OF_CROWNS_DRAWN.id] = \"LADY_OF_CROWNS\";\n})(DrawnType || (DrawnType = {}));\nexport var SleeveType;\n(function (SleeveType) {\n    SleeveType[SleeveType[\"NOTHING\"] = 0] = \"NOTHING\";\n    SleeveType[SleeveType[\"ONE_STACK\"] = 1] = \"ONE_STACK\";\n    SleeveType[SleeveType[\"TWO_STACK\"] = 2] = \"TWO_STACK\";\n})(SleeveType || (SleeveType = {}));\n// TODO: Try to track for when a seal was not given on pull due to latency?\nexport default class ArcanaTracking extends Module {\n    constructor() {\n        super(...arguments);\n        this.cardStateLog = [{\n                lastEvent: {\n                    type: 'pull',\n                    timestamp: this.parser.fight.start_time,\n                    targetIsFriendly: true,\n                    sourceIsFriendly: true,\n                },\n                drawState: DrawnType.NOTHING,\n                sealState: CLEAN_SEAL_STATE,\n                sleeveState: SleeveType.NOTHING,\n            }];\n        this.pullStateInitialized = false;\n        this.pullIndex = 0;\n        this.prepullArcanas = [];\n        this.isCastEvent = (event) => event.type === 'cast';\n        this.isBuffEvent = (event) => event.type === 'buff';\n    }\n    init() {\n        this.addHook('cast', { abilityId: CARD_ACTIONS, by: 'player' }, this.onCast);\n        this.addHook('applybuff', { abilityId: ARCANA_STATUSES, by: 'player' }, this.onPrepullArcana);\n        this.addHook('removebuff', { abilityId: ARCANA_STATUSES, by: 'player' }, this.offPrepullArcana);\n        this.addHook('removebuff', { abilityId: DRAWN_ARCANA, by: 'player' }, this.offDrawnStatus);\n        this.addHook('death', { to: 'player' }, this.onDeath);\n    }\n    normalise(events) {\n        const startTime = this.parser.fight.start_time;\n        let prepullSleeve = true;\n        const sleeveDrawLog = [];\n        for (const event of events) {\n            if (event.timestamp - startTime >= (STATUSES.SLEEVE_DRAW.duration * 1000)) {\n                // End loop if: 1. Max duration of sleeve draw status passed\n                break;\n            }\n            else if (event.type === 'cast' && this.isCastEvent(event) && ACTIONS.SLEEVE_DRAW.id === event.ability.guid) {\n                // they used sleeve so it can't have been prepull\n                prepullSleeve = false;\n            }\n            else if (event.type === 'cast' && this.isCastEvent(event) && ACTIONS.DRAW.id === event.ability.guid) {\n                sleeveDrawLog.push(event);\n            }\n            else {\n                continue;\n            }\n        }\n        // if they drew 2-3 cards in the first 30 sec, we can assume they had a sleeve draw\n        if (prepullSleeve && _.inRange(sleeveDrawLog.length, SleeveType.TWO_STACK, SleeveType.TWO_STACK + 2)) {\n            this.cardStateLog[0].sleeveState = sleeveDrawLog.length - 1;\n        }\n        return events;\n    }\n    get cardLogs() {\n        return this.cardStateLog;\n    }\n    /**\n     * @param {number} timestamp - desired timestamp to get the state. Defaults to pull state.\n     * @returns {CardState} - object containing the card state and last event\n     */\n    getCardState(timestamp = this.parser.fight.start_time) {\n        const stateItem = this.cardStateLog.find(artifact => artifact.lastEvent && timestamp > artifact.lastEvent.timestamp);\n        return stateItem;\n    }\n    /**\n     * @returns {CardState} - object containing the card state of the pull\n     */\n    getPullState() {\n        const stateItem = this.cardStateLog.find(artifact => artifact.lastEvent && artifact.lastEvent.type === 'pull');\n        return stateItem;\n    }\n    /**\n     * Adds the Arcana Buff to _prepullArcanas if it was a precast status\n     */\n    onPrepullArcana(event) {\n        if (event.timestamp > this.parser.fight.start_time) {\n            return;\n        }\n        this.prepullArcanas.push(event);\n    }\n    /**\n     * Determine exactly when they casted their prepull arcana\n     * If they had overwritten this buff, it will falsly pull back the timestamp of their prepull cast, but since we are guessing, it may as well be the same.\n     */\n    offPrepullArcana(event) {\n        if (event.timestamp >= this.parser.fight.start_time + (STATUSES.THE_BALANCE.duration * 1000)) {\n            return;\n        }\n        this.prepullArcanas.forEach(arcanaBuff => {\n            if (!(arcanaBuff.ability.guid === event.ability.guid\n                && arcanaBuff.targetID === event.targetID)) {\n                return;\n            }\n            const cardStateItem = { ..._.last(this.cardStateLog) };\n            const arcanaAction = getDataBy(ACTIONS, 'id', this.arcanaStatusToPlay(event.ability.guid));\n            if (!arcanaAction) {\n                return;\n            }\n            const arcanaCastEvent = {\n                ability: {\n                    name: arcanaAction.name,\n                    guid: arcanaAction.id,\n                    type: 1,\n                    abilityIcon: _.replace(_.replace(arcanaAction.icon, 'https://xivapi.com/i/', ''), '/', '-'),\n                },\n                timestamp: event.timestamp - (STATUSES.THE_BALANCE.duration * 1000),\n                type: 'cast',\n                sourceIsFriendly: true,\n                targetIsFriendly: true,\n                sourceID: event.sourceID,\n                targetID: event.targetID,\n            };\n            cardStateItem.lastEvent = { ...arcanaCastEvent };\n            cardStateItem.drawState = DrawnType.NOTHING;\n            cardStateItem.sealState = CLEAN_SEAL_STATE;\n            this.cardStateLog.unshift(cardStateItem);\n            this.pullIndex++;\n        });\n    }\n    /**\n     * This will run on removebuff. It will look for the loss of Arcanas Drawn statuses\n     * 5.0: This was a lot more meaningful when we had multiple statuses to track like royal road, held, drawn, etc.\n     * it's still useful now as it helps mitigate out-of-order log events (if that's still a thing anyway..)\n     *\n     * a) If it can't find any clear reason why the player had lost the buff, let's do a retconsearch to figure out since when they had it\n     *\n     * b) If they lost the buff with no link to any timestamp, it could be a /statusoff macro.\n     *    Creates a new entry as this is technically also a card action.\n     *\n     */\n    offDrawnStatus(event) {\n        if (!DRAWN_ARCANA.includes(event.ability.guid)) {\n            return;\n        }\n        // a) check if this card was obtained legally, if not, retcon the logs\n        this.retconSearch(this.arcanaDrawnToPlay(event.ability.guid));\n        // b) check if this was a standalone statusoff/undraw, if so, fab undraw event and add to logs\n        const isPaired = this.cardStateLog.some(stateItem => stateItem.lastEvent\n            && _.inRange(event.timestamp, stateItem.lastEvent.timestamp - LINKED_EVENT_THRESHOLD, stateItem.lastEvent.timestamp + LINKED_EVENT_THRESHOLD));\n        if (!isPaired) {\n            const cardStateItem = { ..._.last(this.cardStateLog) };\n            // fabbing an undraw cast event\n            const lastEvent = {\n                ability: { name: ACTIONS.UNDRAW.name, guid: ACTIONS.UNDRAW.id, type: 1, abilityIcon: _.replace(_.replace(STATUSES.NOCTURNAL_SECT.icon, 'https://xivapi.com/i/', ''), '/', '-') },\n                timestamp: event.timestamp,\n                type: 'cast',\n                sourceIsFriendly: true,\n                targetIsFriendly: true,\n                sourceID: event.sourceID,\n                targetID: event.sourceID,\n            };\n            cardStateItem.lastEvent = lastEvent;\n            cardStateItem.drawState = DrawnType.NOTHING;\n            this.cardStateLog.push(cardStateItem);\n        }\n    }\n    /**\n     * MAIN DATA GATHERING LOOP\n     * Creates a CardState duplicated from the previous known state of the Astrologian's spread, then modifies it based on the current action.\n     * Adds the CardState to cardStateLog\n     *\n     */\n    onCast(event) {\n        // For now, we're not looking at any other precast action other than Plays, which is handled by offPrepullArcana() to check removebuff instead of cast for better estimation\n        if (event.timestamp < this.parser.fight.start_time) {\n            return;\n        }\n        const actionId = event.ability.guid;\n        // Piecing together what they have on prepull\n        if (!this.pullStateInitialized && PLAY.includes(actionId)) {\n            this.initPullState(event);\n        }\n        const cardStateItem = { ..._.last(this.cardStateLog) };\n        cardStateItem.lastEvent = event;\n        if (PLAY.includes(actionId)) {\n            cardStateItem.drawState = DrawnType.NOTHING;\n            // Make sure they have been holding onto this from the last instance of a DRAW/REDRAW/MINOR_ARCANA\n            this.retconSearch(actionId);\n            // Work out what seal they got\n            let sealObtained = SealType.NOTHING;\n            if (SOLAR_SEAL_ARCANA.includes(actionId)) {\n                sealObtained = SealType.SOLAR;\n            }\n            else if (LUNAR_SEAL_ARCANA.includes(actionId)) {\n                sealObtained = SealType.LUNAR;\n            }\n            else if (CELESTIAL_SEAL_ARCANA.includes(actionId)) {\n                sealObtained = SealType.CELESTIAL;\n            }\n            const sealState = [...cardStateItem.sealState];\n            cardStateItem.sealState = this.addSeal(sealObtained, sealState);\n            if (cardStateItem.sleeveState > SleeveType.NOTHING) {\n                cardStateItem.sleeveState = this.consumeSleeve(cardStateItem.sleeveState);\n            }\n        }\n        if (actionId === ACTIONS.DIVINATION.id) {\n            cardStateItem.sealState = CLEAN_SEAL_STATE;\n        }\n        if (actionId === ACTIONS.UNDRAW.id) {\n            cardStateItem.drawState = DrawnType.NOTHING;\n        }\n        if (actionId === ACTIONS.SLEEVE_DRAW.id) {\n            cardStateItem.sleeveState = this.startSleeve();\n        }\n        this.cardStateLog.push(cardStateItem);\n    }\n    /**\n     * Cards scattered all over the floor, covered with your blood\n     * Inserts a new event into _cardStateLogs\n     */\n    onDeath(event) {\n        // TODO: This is a duct tape fix\n        // Checks on the previous event - it may be an erroneous drawnArcana flagged by offDrawnArcana. Statuses SEEM to drop 2s + 20ms earlier than the Death event.\n        const lastCardState = { ..._.last(this.cardStateLog) };\n        if (lastCardState.lastEvent.type === 'cast' && lastCardState.lastEvent.ability.guid === ACTIONS.UNDRAW.id\n            && (event.timestamp - lastCardState.lastEvent.timestamp <= DEATH_EVENT_STATUS_DROP_DELAY + LINKED_EVENT_THRESHOLD)) {\n            this.cardStateLog.pop();\n        }\n        // Fab a death event\n        this.cardStateLog.push({\n            lastEvent: {\n                ...event,\n            },\n            drawState: DrawnType.NOTHING,\n            sealState: CLEAN_SEAL_STATE,\n            sleeveState: SleeveType.NOTHING,\n        });\n    }\n    /**\n     * Initializes _cardStateLog pull entry for the first ever PLAY\n     * Looks for a previous DRAW. If none, then DRAW was made prepull. Updates pull state.\n     *\n     */\n    initPullState(event) {\n        const actionId = event.ability.guid;\n        // First check that there's no DRAW between this and pullIndex\n        const lookupLog = this.cardStateLog.slice(this.pullIndex + 1);\n        if (lookupLog.length > 0) {\n            lookupLog.forEach(cardState => {\n                if (cardState.lastEvent.type === 'cast'\n                    && CARD_GRANTING_ABILITIES.includes(cardState.lastEvent.ability.guid)) {\n                    // We're done since they had a DRAW\n                    return this.pullStateInitialized = true;\n                }\n            });\n        }\n        if (!this.pullStateInitialized && PLAY.includes(actionId)) {\n            // They had something in the draw slot\n            const drawnStatus = this.arcanaActionToStatus(actionId);\n            this.cardStateLog.forEach((cardState, index) => {\n                if (cardState.lastEvent.type === 'pull') {\n                    this.cardStateLog[index].drawState = drawnStatus ? drawnStatus : DrawnType.NOTHING;\n                    return this.pullStateInitialized = true;\n                }\n            });\n        }\n    }\n    /**\n     * Loops back to see if the specified card was in possession without the possiblity of it being obtained via legal abilities.\n     * This is presumed to mean they had it prepull, or since that latest ability. This function will then retcon the history since we know they had it.\n     * The reason why this is necessary is because some logs come with draw/buff/play out of order.\n     * Would be done in normaliser except we won't\n     *\n     * 5.0: Haha we only have one card slot now.\n     *\n     * @param actionId{array} The specified card drawn id\n     * @return {void} null\n     */\n    retconSearch(cardActionId) {\n        let searchLatest = true;\n        const lastLog = _.last(this.cardStateLog);\n        let lastEvent = lastLog.lastEvent;\n        if (lastEvent.type === 'pull') {\n            return;\n        }\n        lastEvent = lastLog.lastEvent;\n        const latestActionId = lastEvent.ability.guid;\n        // We can skip search+replace for the latest card event if that was a way to lose a card in draw slot.\n        // 1. The standard ways of losing something in draw slot.\n        // 2. If they used Draw while holding a Minor Arcana or Draw\n        if ([ACTIONS.UNDRAW.id, ...PLAY, ACTIONS.MINOR_ARCANA.id, ACTIONS.REDRAW.id].includes(latestActionId)\n            || (ACTIONS.DRAW.id === latestActionId && DRAWN_ARCANA.includes(lastLog.drawState))) {\n            searchLatest = false;\n        }\n        const searchLog = searchLatest ? this.cardStateLog : this.cardStateLog.slice(0, this.cardStateLog.length - 1);\n        // Looking for those abilities in CARD_GRANTING_ABILITIES that could possibly get us this card\n        let lastIndex = _.findLastIndex(searchLog, stateItem => this.isCastEvent(stateItem.lastEvent) && CARD_GRANTING_ABILITIES.includes(stateItem.lastEvent.ability.guid));\n        // There were no finds of specified abilities, OR it wasn't logged.\n        if (lastIndex === -1 || this.cardStateLog[lastIndex].drawState === DrawnType.NOTHING) {\n            // If none were found, they had it prepull, so assume this is pullIndex\n            lastIndex = lastIndex < 0 ? this.pullIndex : lastIndex;\n            // Modify log, they were holding onto this card since index\n            // Differenciate depending on searchLatest\n            _.forEachRight(this.cardStateLog, (stateItem, index) => {\n                if (searchLatest && index >= lastIndex) {\n                    stateItem.drawState = this.arcanaActionToStatus(cardActionId);\n                }\n                else if (index >= lastIndex && index !== this.cardStateLog.length - 1) {\n                    stateItem.drawState = this.arcanaActionToStatus(cardActionId);\n                }\n            });\n        }\n    }\n    // Helpers\n    addSeal(seal, sealState) {\n        if (!seal) {\n            return sealState;\n        }\n        sealState.shift();\n        sealState.push(seal);\n        return sealState;\n    }\n    startSleeve() {\n        return SleeveType.TWO_STACK;\n    }\n    consumeSleeve(sleeveState) {\n        sleeveState--;\n        return _.clamp(sleeveState, SleeveType.NOTHING, SleeveType.TWO_STACK);\n    }\n    /**\n     * Flips an arcana action id to the matching arcana status id\n     *\n     * @param arcanaId{int} The ID of an arcana.\n     * @return {int} the ID of the arcana in status, or the same id received if it didn't match the flip lookup.\n     */\n    arcanaActionToStatus(arcanaId) {\n        if (PLAY.includes(arcanaId)) {\n            arcanaId = PLAY_TO_STATUS_LOOKUP[arcanaId];\n        }\n        return arcanaId;\n    }\n    /**\n     * Flips an arcana status id to the matching arcana drawn id\n     *\n     * @param arcanaId{int} The ID of an arcana status.\n     * @return {int} the ID of the arcana in drawn arcanas, or the same id received if it didn't match the flip lookup.\n     */\n    arcanaStatusToDrawn(arcanaId) {\n        if (ARCANA_STATUSES.includes(arcanaId)) {\n            arcanaId = STATUS_TO_DRAWN_LOOKUP[arcanaId];\n        }\n        return arcanaId;\n    }\n    /**\n     * Flips an arcana status id to the matching arcana action id\n     *\n     * @param arcanaId{int} The ID of an arcana status.\n     * @return {int} the ID of the arcana in play, or the same id received if it didn't match the flip lookup.\n     */\n    arcanaStatusToPlay(arcanaId) {\n        if (ARCANA_STATUSES.includes(arcanaId)) {\n            arcanaId = STATUS_TO_PLAY_LOOKUP[arcanaId];\n        }\n        return arcanaId;\n    }\n    /**\n     * Flips a drawn arcana status id to the matching arcana action id\n     *\n     * @param arcanaId{int} The ID of an arcana drawn status.\n     * @return {int} the ID of the arcana in play, or the same id received if it didn't match the flip lookup.\n     */\n    arcanaDrawnToPlay(arcanaId) {\n        if (DRAWN_ARCANA.includes(arcanaId)) {\n            arcanaId = DRAWN_TO_PLAY_LOOKUP[arcanaId];\n        }\n        return arcanaId;\n    }\n}\nArcanaTracking.handle = 'arcanaTracking';\nArcanaTracking.title = t('ast.arcana-tracking.title') `Arcana Tracking`;\nArcanaTracking.displayOrder = DISPLAY_ORDER.ARCANA_TRACKING;\n__decorate([\n    dependency,\n    __metadata(\"design:type\", PrecastStatus)\n], ArcanaTracking.prototype, \"precastStatus\", void 0);\n","import { __decorate, __metadata } from \"tslib\";\nimport { t } from '@lingui/macro';\nimport { Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport JobIcon from 'components/ui/JobIcon';\nimport { getDataBy } from 'data';\nimport ACTIONS from 'data/ACTIONS';\nimport JOBS from 'data/JOBS';\nimport STATUSES from 'data/STATUSES';\nimport Module, { dependency } from 'parser/core/Module';\nimport Combatants from 'parser/core/modules/Combatants';\nimport Timeline from 'parser/core/modules/Timeline';\nimport React from 'react';\nimport { Button, Table } from 'semantic-ui-react';\nimport { PLAY } from '../ArcanaGroups';\nimport DISPLAY_ORDER from '../DISPLAY_ORDER';\nimport styles from './ArcanaSuggestions.module.css';\nimport ArcanaTracking, { SealType, SleeveType } from './ArcanaTracking';\nimport sealCelestial from './seal_celestial.png';\nimport sealLunar from './seal_lunar.png';\nimport sealSolar from './seal_solar.png';\nconst TIMELINE_UPPER_MOD = 30000; // in ms\nconst SLEEVE_ICON = {\n    [SleeveType.NOTHING]: '',\n    [SleeveType.ONE_STACK]: STATUSES.SLEEVE_DRAW.icon,\n    [SleeveType.TWO_STACK]: 'https://xivapi.com/i/019000/019562.png',\n};\nconst SEAL_ICON = {\n    [SealType.NOTHING]: '',\n    [SealType.SOLAR]: sealSolar,\n    [SealType.LUNAR]: sealLunar,\n    [SealType.CELESTIAL]: sealCelestial,\n};\nexport default class ArcanaSuggestions extends Module {\n    constructor() {\n        super(...arguments);\n        this.cardLogs = [];\n        this.partyComp = [];\n    }\n    init() {\n        this.addHook('complete', this._onComplete);\n    }\n    _onComplete() {\n        const combatants = this.combatants.getEntities();\n        for (const [key, combatant] of Object.entries(combatants)) {\n            if (combatant.type === 'LimitBreak') {\n                continue;\n            }\n            this.partyComp.push(combatant.type);\n        }\n        this.cardLogs = this.arcanaTracking.cardLogs.map(artifact => {\n            const target = artifact.lastEvent.targetID !== this.parser.player.id ? this.combatants.getEntity(artifact.lastEvent.targetID) : this.combatants.selected;\n            const cardLog = {\n                ...artifact,\n                targetName: target ? target.name : null,\n                targetJob: target ? target.type : null,\n            };\n            return cardLog;\n        });\n    }\n    output() {\n        return <>\n\t\t<p>\n\t\t\t<Trans id=\"ast.arcana-suggestions.messages.explanation\">\n\t\t\t\tThis section keeps track of every card action made during the fight, and the state of the spread after each action.\n\t\t\t</Trans>\n\t\t</p>\n\t\t<p>\n\t\t\t<Trans id=\"ast.arcana-suggestions.messages.footnote\">\n\t\t\t\t* No pre-pull actions are being represented aside from <ActionLink {...ACTIONS.PLAY}/>, and this is only an approximation based on the buff duration.\n\t\t\t</Trans>\n\t\t</p>\n\t\t<Table collapsing unstackable className={styles.cardActionTable}>\n\t\t\t\t\t<Table.Header>\n\t\t\t\t\t\t<Table.Row>\n\t\t\t\t\t\t\t<Table.HeaderCell width={1}>\n\t\t\t\t\t\t\t\t<Trans id=\"ast.arcana-suggestions.messages.time\">\n\t\t\t\t\t\t\t\t\t\t\tTime\n\t\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t\t</Table.HeaderCell>\n\t\t\t\t\t\t\t<Table.HeaderCell width={1}>\n\t\t\t\t\t\t\t\t<Trans id=\"ast.arcana-suggestions.messages.latest-action\">Lastest Action</Trans>\n\t\t\t\t\t\t\t</Table.HeaderCell>\n\t\t\t\t\t\t\t<Table.HeaderCell width={2}>\n\t\t\t\t\t\t\t\t<Trans id=\"ast.arcana-suggestions.messages.target\">Target</Trans>\n\t\t\t\t\t\t\t</Table.HeaderCell>\n\t\t\t\t\t\t\t<Table.HeaderCell width={2}>\n\t\t\t\t\t\t\t\t<Trans id=\"ast.arcana-suggestions.messages.spread-state\">Spread State</Trans>\n\t\t\t\t\t\t\t</Table.HeaderCell>\n\t\t\t\t\t\t</Table.Row>\n\t\t\t\t\t</Table.Header>\n\t\t\t\t\t<Table.Body>\n\t\t\t\t\t\t{this.cardLogs.map(artifact => {\n            if (artifact.lastEvent.type === 'pull') {\n                return <Table.Row key={artifact.lastEvent.timestamp} className={styles.cardActionRow}>\n\t\t\t\t\t\t\t\t\t\t<Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t<Button circular compact size=\"mini\" icon=\"time\" onClick={() => this.timeline.show(0, TIMELINE_UPPER_MOD)}/>\n\t\t\t\t\t\t\t\t\t\t{this.parser.formatTimestamp(artifact.lastEvent.timestamp)}</Table.Cell>\n\t\t\t\t\t\t\t\t\t\t<Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t<Trans id=\"ast.arcana-suggestions.messages.pull\">\n\t\t\t\t\t\t\t\t\t\t\t\tPull\n\t\t\t\t\t\t\t\t\t\t\t</Trans>\n\t\t\t\t\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t\t\t\t\t<Table.Cell>\n\t\t\t\t\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t\t\t\t\t{this.RenderSpreadState(artifact)}\n\t\t\t\t\t\t\t\t\t</Table.Row>;\n            }\n            else {\n                const start = artifact.lastEvent.timestamp - this.parser.fight.start_time;\n                const end = start + TIMELINE_UPPER_MOD;\n                const formattedTime = this.parser.formatTimestamp(artifact.lastEvent.timestamp);\n                return <Table.Row key={artifact.lastEvent.timestamp} className={styles.cardActionRow}>\n\t\t\t\t\t\t\t\t\t\t<Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t{start >= 0 && <Button circular compact size=\"mini\" icon=\"time\" onClick={() => this.timeline.show(start, end)}/>}\n\t\t\t\t\t\t\t\t\t\t\t<span style={{ marginRight: 10 }}>{formattedTime}</span>\n\t\t\t\t\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t\t\t\t\t{this.RenderAction(artifact)}\n\t\t\t\t\t\t\t\t\t\t{this.RenderSpreadState(artifact)}\n\t\t\t\t\t\t\t\t\t</Table.Row>;\n            }\n        })}\n\t\t\t\t\t</Table.Body>\n\t\t\t\t</Table>\n\t\t\t\t<Button onClick={() => this.parser.scrollTo(ArcanaSuggestions.handle)}>\n\t\t\t\t\t<Trans id=\"ast.arcana-suggestions.scroll-to-top-button\">Jump to start of Arcana Logs</Trans>\n\t\t\t\t</Button>\n\t\t</>;\n    }\n    // Helper for output()\n    RenderAction(artifact) {\n        if (artifact.lastEvent.type === 'cast' && PLAY.includes(artifact.lastEvent.ability.guid)) {\n            const targetJob = getDataBy(JOBS, 'logType', artifact.targetJob);\n            return <>\n\t\t\t<Table.Cell>\n\t\t\t\t<ActionLink {...getDataBy(ACTIONS, 'id', artifact.lastEvent.ability.guid)}/>\n\t\t\t</Table.Cell>\n\t\t\t<Table.Cell>\n\t\t\t\t{targetJob && <JobIcon job={targetJob}/>}\n\t\t\t\t{artifact.targetName}\n\t\t\t</Table.Cell>\n\t\t\t</>;\n        }\n        else if (artifact.lastEvent.type === 'cast') {\n            return <>\n\t\t\t\t<Table.Cell>\n\t\t\t\t\t<ActionLink {...getDataBy(ACTIONS, 'id', artifact.lastEvent.ability.guid)}/>\n\t\t\t\t</Table.Cell>\n\t\t\t\t<Table.Cell>\n\t\t\t\t</Table.Cell>\n\t\t\t</>;\n        }\n        else if (artifact.lastEvent.type === 'death') {\n            return <><Table.Cell>\n\t\t\t\t<Trans id=\"ast.arcana-tracking.messages.death\">Death</Trans>\n\t\t\t</Table.Cell>\n\t\t\t<Table.Cell>\n\t\t\t</Table.Cell>\n\t\t\t</>;\n        }\n        else {\n            return <>\n\t\t\t\t<Table.Cell>\n\t\t\t\t</Table.Cell>\n\t\t\t\t<Table.Cell>\n\t\t\t\t</Table.Cell>\n\t\t\t</>;\n        }\n    }\n    // Helper for output()\n    RenderSpreadState(artifact) {\n        const drawnArcana = getDataBy(STATUSES, 'id', artifact.drawState);\n        return <Table.Cell>\n\t\t\t<span style={{ marginRight: 10, marginLeft: 0 }}>\n\t\t\t{drawnArcana && <img src={drawnArcana.icon} className={styles.buffIcon} alt={drawnArcana.name}/>}\n\t\t\t{!drawnArcana && <span className={styles.buffPlaceholder}/>}\n\t\t\t</span>\n\t\t\t<span className={styles.sealIconContainer}>\n\t\t\t{artifact.sealState.map(sealType => {\n            if (sealType > 0) {\n                return <img src={SEAL_ICON[sealType]} className={styles.sealIcon} alt=\"Seal icon\"/>;\n            }\n            else {\n                return <span className={styles.sealIcon}></span>;\n            }\n        })}\n\t\t\t</span>\n\t\t\t<span style={{ marginLeft: 5 }}>\n\t\t\t{artifact.sleeveState > 0 && <img src={SLEEVE_ICON[artifact.sleeveState]} className={styles.buffIcon} alt={ACTIONS.SLEEVE_DRAW.name}/>}\n\t\t\t</span>\n\t\t</Table.Cell>;\n    }\n}\nArcanaSuggestions.handle = 'arcanaSuggestions';\nArcanaSuggestions.title = t('ast.arcana-suggestions.title') `Arcana Logs`;\nArcanaSuggestions.displayOrder = DISPLAY_ORDER.ARCANA_TRACKING;\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Combatants)\n], ArcanaSuggestions.prototype, \"combatants\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", ArcanaTracking)\n], ArcanaSuggestions.prototype, \"arcanaTracking\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Timeline)\n], ArcanaSuggestions.prototype, \"timeline\", void 0);\n","import { AbstractStatistic } from 'parser/core/modules/Statistics/AbstractStatistic';\nimport React from 'react';\nimport styles from './SectStatistic.module.css';\nexport default class SectStatstic extends AbstractStatistic {\n    constructor(opts) {\n        super(opts);\n        this.Content = () => (<div className={styles.simpleStatistic}>\r\n\t\t\t<div className={styles.wrapper}>\r\n\t\t\t\t{this.icon && <img src={this.icon} className={styles.icon}/>}\r\n\t\t\t\t<div className={styles.value}>{this.value}</div>\r\n\t\t\t</div>\r\n\t\t</div>);\n        this.icon = opts.icon;\n        this.value = opts.value;\n    }\n}\n","import { __decorate, __metadata } from \"tslib\";\nimport { Trans } from '@lingui/react';\nimport { ActionLink, StatusLink } from 'components/ui/DbLink';\nimport { getDataBy } from 'data';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport _ from 'lodash';\nimport Module, { dependency } from 'parser/core/Module';\nimport PrecastAction from 'parser/core/modules/PrecastAction';\nimport { Statistics } from 'parser/core/modules/Statistics';\nimport Suggestions, { SEVERITY, Suggestion } from 'parser/core/modules/Suggestions';\nimport React from 'react';\nimport SectStatistic from './SectStatistic';\nconst NO_SECT_ICON = 'https://xivapi.com/i/064000/064017.png';\nconst ASPECTED_ACTIONS = [\n    ACTIONS.ASPECTED_BENEFIC.id,\n    ACTIONS.ASPECTED_HELIOS.id,\n    ACTIONS.CELESTIAL_INTERSECTION.id,\n    ACTIONS.CELESTIAL_OPPOSITION.id,\n];\nconst DIURNAL_SECT_STATUSES = [\n    STATUSES.ASPECTED_BENEFIC.id,\n    STATUSES.ASPECTED_HELIOS.id,\n    STATUSES.DIURNAL_OPPOSITION.id,\n    STATUSES.NOCTURNAL_INTERSECTION.id,\n    STATUSES.NOCTURNAL_BALANCE.id,\n];\nconst NOCTURNAL_SECT_STATUSES = [\n    STATUSES.NOCTURNAL_FIELD.id,\n    STATUSES.NOCTURNAL_OPPOSITION.id,\n    STATUSES.DIURNAL_INTERSECTION.id,\n    STATUSES.DIURNAL_BALANCE.id,\n];\nconst ACTION_STATUS_MAP = {\n    [ACTIONS.ASPECTED_BENEFIC.id]: [\n        STATUSES.ASPECTED_BENEFIC.id,\n        STATUSES.NOCTURNAL_FIELD.id,\n    ],\n    [ACTIONS.ASPECTED_HELIOS.id]: [\n        STATUSES.ASPECTED_HELIOS.id,\n        STATUSES.NOCTURNAL_FIELD.id,\n    ],\n    [ACTIONS.CELESTIAL_INTERSECTION.id]: [\n        STATUSES.DIURNAL_INTERSECTION.id,\n        STATUSES.NOCTURNAL_INTERSECTION.id,\n    ],\n    [ACTIONS.CELESTIAL_OPPOSITION.id]: [\n        STATUSES.DIURNAL_OPPOSITION.id,\n        STATUSES.NOCTURNAL_OPPOSITION.id,\n    ],\n};\nconst SECT_ACTIONS = [\n    ACTIONS.DIURNAL_SECT.id,\n    ACTIONS.NOCTURNAL_SECT.id,\n];\nconst SECT_STATUSES = [\n    STATUSES.DIURNAL_SECT.id,\n    STATUSES.NOCTURNAL_SECT.id,\n];\nconst DIURNAL_SECT_BUFF_ABILITY = {\n    name: STATUSES.DIURNAL_SECT.name,\n    guid: STATUSES.DIURNAL_SECT.id,\n    type: 1,\n    abilityIcon: _.replace(_.replace(STATUSES.DIURNAL_SECT.icon, 'https://xivapi.com/i/', ''), '/', '-'),\n};\nconst NOCTURNAL_SECT_BUFF_ABILITY = {\n    name: STATUSES.NOCTURNAL_SECT.name,\n    guid: STATUSES.NOCTURNAL_SECT.id,\n    type: 1,\n    abilityIcon: _.replace(_.replace(STATUSES.NOCTURNAL_SECT.icon, 'https://xivapi.com/i/', ''), '/', '-'),\n};\n// Determine sect by checking the result of an aspected spell/ability\nexport default class Sect extends Module {\n    constructor() {\n        super(...arguments);\n        this.pullWithoutSect = false;\n        this.activeSectId = undefined;\n        this.gaveup = false;\n    }\n    init() {\n        this.addHook('cast', { abilityId: [...SECT_ACTIONS], by: 'player' }, this.onCast);\n        this.addHook('applybuff', { abilityId: [...SECT_STATUSES], by: 'player' }, this.onApplySect);\n        this.addHook('complete', this.onComplete);\n    }\n    normalise(events) {\n        const startTime = this.parser.fight.start_time;\n        let aspectedCast = null;\n        for (const event of events) {\n            if (event.type === 'applybuff' && SECT_STATUSES.includes(event.ability.guid)) {\n                // They started the fight without a sect and switched it on mid-fight :blobsweat: we gud here\n                break;\n            }\n            if (!aspectedCast && event.type === 'cast' && ASPECTED_ACTIONS.includes(event.ability.guid)) {\n                // Detecting a cast of an aspected action, so now we examine what comes out of it\n                aspectedCast = event;\n            }\n            else if (aspectedCast\n                && (event.type === 'applybuff' || event.type === 'refreshbuff') && [...NOCTURNAL_SECT_STATUSES, ...DIURNAL_SECT_STATUSES].includes(event.ability.guid)) {\n                // This is an applybuff event of a sect buff that came after an aspected action\n                if (this.mapCastToBuff(aspectedCast.ability.guid).includes(event.ability.guid)\n                    && [...DIURNAL_SECT_STATUSES, ...NOCTURNAL_SECT_STATUSES].includes(event.ability.guid)) {\n                    const SECT_ABILITY = DIURNAL_SECT_STATUSES.includes(event.ability.guid) ? DIURNAL_SECT_BUFF_ABILITY : NOCTURNAL_SECT_BUFF_ABILITY;\n                    // Fab a sect buff event at the start of the fight\n                    events.splice(0, 0, {\n                        ...event,\n                        timestamp: startTime - 1,\n                        type: 'applybuff',\n                        ability: SECT_ABILITY,\n                        targetID: event.sourceID,\n                        targetIsFriendly: true,\n                    });\n                    break;\n                }\n            }\n            else {\n                continue;\n            }\n        }\n        return events;\n    }\n    onCast(event) {\n        // If they casted a sect at anytime it means they pulled without one on\n        this.pullWithoutSect = true;\n        const sect = getDataBy(ACTIONS, 'id', event.ability.guid);\n        if (sect) {\n            this.activeSectId = sect.id;\n        }\n    }\n    // Looking for the sect buff that we fabricated, but if they switched it on mid-fight that'll get picked up too\n    onApplySect(event) {\n        if (!this.activeSectId) {\n            const sect = getDataBy(ACTIONS, 'id', this.mapBuffToCast(event.ability.guid));\n            if (sect) {\n                this.activeSectId = sect.id;\n            }\n        }\n    }\n    onComplete() {\n        /*\n            SUGGESTION: Pulled without Sect\n        */\n        if (!this.gaveup && (this.pullWithoutSect || !this.activeSectId)) {\n            this.suggestions.add(new Suggestion({\n                icon: !this.activeSectId || ACTIONS.DIURNAL_SECT.id === this.activeSectId ? ACTIONS.DIURNAL_SECT.icon : ACTIONS.NOCTURNAL_SECT.icon,\n                content: <Trans id=\"ast.sect.suggestions.no-sect.content\">\n\t\t\t\t\tDon't start without <ActionLink {...ACTIONS.DIURNAL_SECT}/> or <ActionLink {...ACTIONS.NOCTURNAL_SECT}/>. There are several abilities that can't be used without one of these stances.\n\t\t\t\t</Trans>,\n                why: <Trans id=\"ast.sect.suggestions.no-sect.why\">\n\t\t\t\t\tThere was no sect detected at the start of the fight.\n\t\t\t\t</Trans>,\n                severity: SEVERITY.MAJOR,\n            }));\n        }\n        /*\n            SUGGESTION: Noct with Scholar\n        */\n        const withScholar = this.parser.fightFriendlies.some(friendly => friendly.type === 'Scholar');\n        if (this.activeSectId === ACTIONS.NOCTURNAL_SECT.id && withScholar) {\n            this.suggestions.add(new Suggestion({\n                icon: ACTIONS.NOCTURNAL_SECT.icon,\n                content: <Trans id=\"ast.sect.suggestions.noct-with-sch.content\">\n\t\t\t\t\tIt is counter-productive to use this Sect with this composition. The main shields <StatusLink {...STATUSES.NOCTURNAL_FIELD}/> from <ActionLink {...ACTIONS.NOCTURNAL_SECT}/> do not stack with Scholar's main shield <StatusLink {...STATUSES.GALVANIZE}/>.\n\t\t\t\t</Trans>,\n                why: <Trans id=\"ast.sect.suggestions.noct-with-sch.why\">\n\t\t\t\t\tNocturnal Sect was used with a Scholar in the party.\n\t\t\t\t</Trans>,\n                severity: SEVERITY.MAJOR,\n            }));\n        }\n        // Statistic box\n        const icon = !this.activeSectId ? NO_SECT_ICON\n            : ACTIONS.DIURNAL_SECT.id === this.activeSectId ? ACTIONS.DIURNAL_SECT.icon\n                : ACTIONS.NOCTURNAL_SECT.icon;\n        const noSectValue = <Trans id=\"ast.sect.info.no-sect-detected\">No sect detected</Trans>;\n        const value = !this.activeSectId ? noSectValue :\n            ACTIONS.DIURNAL_SECT.id === this.activeSectId ? ACTIONS.DIURNAL_SECT.name\n                : ACTIONS.NOCTURNAL_SECT.name;\n        this.statistics.add(new SectStatistic({\n            icon,\n            value,\n            info: (<Trans id=\"ast.sect.info\">\n\t\t\t\tThe choice of Sect boils down to the content being played, group composition and player preference.<br />\n\t\t\t\t<ActionLink {...ACTIONS.DIURNAL_SECT}/> provides more potency per heal from regens, and is most effective in dungeons and 8-man content if damage taken does not exceed maximum HP.<br />\n\t\t\t\t<ActionLink {...ACTIONS.NOCTURNAL_SECT}/> is essential if shields are necessary for survival that <ActionLink {...ACTIONS.NEUTRAL_SECT}/> cannot cover. Noct shields cannot be stacked with Scholar's and is not recommended when healing alongside one.\n\t\t\t</Trans>),\n        }));\n    }\n    // Helpers\n    mapCastToBuff(actionId) {\n        if (ASPECTED_ACTIONS.includes(actionId)) {\n            return ACTION_STATUS_MAP[actionId];\n        }\n        return [];\n    }\n    mapBuffToCast(statusId) {\n        switch (statusId) {\n            case STATUSES.NOCTURNAL_SECT.id:\n                return ACTIONS.NOCTURNAL_SECT.id;\n            case STATUSES.DIURNAL_SECT.id:\n                return ACTIONS.DIURNAL_SECT.id;\n            default:\n                return -1;\n        }\n    }\n}\nSect.handle = 'sect';\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Statistics)\n], Sect.prototype, \"statistics\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", PrecastAction)\n], Sect.prototype, \"precastAction\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], Sect.prototype, \"suggestions\", void 0);\n","import { __decorate, __metadata } from \"tslib\";\nimport { Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport Module, { dependency } from 'parser/core/Module';\nimport Suggestions, { SEVERITY, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport React from 'react';\nconst SEVERITY_MOD = {\n    MINOR: 0.15,\n    MEDIUM: 0.5,\n    MAJOR: 0.8,\n};\n// Lifted from WHM benison and adapted to AST and TSX\nexport default class CelestialIntersection extends Module {\n    constructor() {\n        super(...arguments);\n        this.lastUse = 0;\n        this.uses = 0;\n        this.totalHeld = 0;\n    }\n    init() {\n        this.addHook('cast', { abilityId: ACTIONS.CELESTIAL_INTERSECTION.id, by: 'player' }, this.onCast);\n        this.addHook('complete', this.onComplete);\n    }\n    onCast(event) {\n        this.uses++;\n        if (this.lastUse === 0) {\n            this.lastUse = this.parser.fight.start_time;\n        }\n        const held = event.timestamp - this.lastUse - (ACTIONS.CELESTIAL_INTERSECTION.cooldown * 1000);\n        if (held > 0) {\n            this.totalHeld += held;\n        }\n        // update the last use\n        this.lastUse = event.timestamp;\n    }\n    onComplete() {\n        const holdDuration = this.uses === 0 ? this.parser.fightDuration : this.totalHeld;\n        const usesMissed = Math.floor(holdDuration / (ACTIONS.CELESTIAL_INTERSECTION.cooldown * 1000));\n        const fightDuration = this.parser.fight.end_time - this.parser.fight.start_time;\n        const maxUses = (fightDuration / (ACTIONS.CELESTIAL_INTERSECTION.cooldown * 1000)) - 1;\n        const WASTED_USE_TIERS = {\n            [maxUses * SEVERITY_MOD.MINOR]: SEVERITY.MINOR,\n            [maxUses * SEVERITY_MOD.MEDIUM]: SEVERITY.MEDIUM,\n            [maxUses * SEVERITY_MOD.MAJOR]: SEVERITY.MAJOR,\n        };\n        if (usesMissed > 1 || this.uses === 0) {\n            this.suggestions.add(new TieredSuggestion({\n                icon: ACTIONS.CELESTIAL_INTERSECTION.icon,\n                content: <Trans id=\"ast.celestial-intersection.suggestion.content\">\r\n\t\t\t\t\tUse <ActionLink {...ACTIONS.CELESTIAL_INTERSECTION}/> more frequently. Frequent uses can heal or mitigate a large amount of damage over the course of a fight, potentially resulting in fewer required healing GCDs.\r\n\t\t\t\t</Trans>,\n                tiers: WASTED_USE_TIERS,\n                value: this.uses === 0 ? 100 : usesMissed,\n                why: <Trans id=\"ast.celestial-intersection.suggestion.why\">\r\n\t\t\t\t\tAbout {usesMissed} uses of <ActionLink {...ACTIONS.CELESTIAL_INTERSECTION}/> were missed by holding it for at least a total of {this.parser.formatDuration(holdDuration)}.\r\n\t\t\t\t</Trans>,\n            }));\n        }\n    }\n}\nCelestialIntersection.handle = 'celestialintersection';\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], CelestialIntersection.prototype, \"suggestions\", void 0);\n","import { __decorate, __metadata } from \"tslib\";\nimport { Trans } from '@lingui/react';\nimport STATUSES from 'data/STATUSES';\nimport Module, { dependency } from 'parser/core/Module';\nimport { Requirement, TARGET, TieredRule } from 'parser/core/modules/Checklist';\nimport Checklist from 'parser/core/modules/Checklist';\nimport React from 'react';\nconst HOT_STATUSES = [\n    STATUSES.ASPECTED_HELIOS.id,\n    STATUSES.WHEEL_OF_FORTUNE.id,\n    STATUSES.ASPECTED_BENEFIC.id,\n    STATUSES.DIURNAL_OPPOSITION.id,\n    STATUSES.DIURNAL_INTERSECTION.id,\n    STATUSES.DIURNAL_BALANCE.id,\n];\n// doing 100-x where x is the overheal % for clarity\nconst SEVERITY_TIERS = {\n    // tslint:disable-next-line: no-magic-numbers\n    [100 - 35]: TARGET.SUCCESS,\n    // tslint:disable-next-line: no-magic-numbers\n    [100 - 50]: TARGET.WARN,\n};\n// Adapted from whm Overheal\nexport default class Overheal extends Module {\n    constructor() {\n        super(...arguments);\n        this.healingDirect = 0;\n        this.overhealDirect = 0;\n        this.healingOverTime = 0;\n        this.overhealOverTime = 0;\n        this.healingPet = 0;\n        this.overhealPet = 0;\n    }\n    init() {\n        this.addHook('heal', { by: 'player' }, this.onHeal);\n        this.addHook('heal', { by: 'pet' }, this.onPetHeal);\n        this.addHook('complete', this.onComplete);\n    }\n    onHeal(event) {\n        const guid = event.ability.guid;\n        if (HOT_STATUSES.includes(guid)) {\n            this.healingOverTime += event.amount;\n            this.overhealOverTime += event.overheal || 0;\n        }\n        else {\n            this.healingDirect += event.amount;\n            this.overhealDirect += event.overheal || 0;\n        }\n    }\n    onPetHeal(event) {\n        this.healingPet += event.amount;\n        this.overhealPet += event.overheal || 0;\n    }\n    onComplete() {\n        const nonHotOverhealPercent = 100 * this.healingDirect / (this.healingDirect + this.overhealDirect);\n        const petOverhealPercent = 100 * this.healingPet / (this.healingPet + this.overhealPet);\n        const hotOverhealPercent = 100 * this.healingOverTime / (this.healingOverTime + this.overhealOverTime);\n        const sourcesSum = this.healingOverTime + this.healingDirect + this.healingPet;\n        const sourcesSumOverheal = this.overhealOverTime + this.overhealPet + this.healingOverTime;\n        this.checklist.add(new TieredRule({\n            name: <Trans id=\"ast.overheal.rule.name\">Avoid overheal</Trans>,\n            description: <><Trans id=\"ast.overheal.rule.description\">\n\t\t\t\tAvoid wasting heals by healing for more than required to fill a target's HP bar. While some overheal is inevitable, overheal only serves to generate more enmity, for no gain. Being efficient with healing additionally helps with your MP management.\n\t\t\t</Trans>\n\t\t\t<ul>\n\t\t\t\t<li><Trans id=\"ast.overheal.requirement.nonhot\"> Overheal (non-HoT): </Trans>{this.invertPercent(nonHotOverhealPercent)}%</li>\n\t\t\t\t{petOverhealPercent > 0 && <li><Trans id=\"ast.overheal.requirement.earthly-star\"> Overheal (Earthly Star): </Trans>{this.invertPercent(petOverhealPercent)}%</li>}\n\t\t\t\t<li><Trans id=\"ast.overheal.requirement.hot\"> Overheal (HoT): </Trans>{this.invertPercent(hotOverhealPercent)}%</li>\n\t\t\t</ul></>,\n            tiers: SEVERITY_TIERS,\n            requirements: [\n                new InvertedRequirement({\n                    name: <Trans id=\"ast.overheal.requirement.all\"> Overheal (all sources)</Trans>,\n                    percent: (100 * sourcesSum / (sourcesSum + sourcesSumOverheal)),\n                }),\n            ],\n        }));\n    }\n    invertPercent(value) {\n        const invertedValue = 100 - value;\n        return invertedValue.toFixed(2);\n    }\n}\nOverheal.handle = 'overheal';\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Checklist)\n], Overheal.prototype, \"checklist\", void 0);\n// yeh, I'm not doing this in core, but I really want to show overheal as overheal, since that's what the community understands\nexport class InvertedRequirement extends Requirement {\n    get percentInverted() {\n        return 100 - this.percent;\n    }\n    get content() {\n        if (this._percent !== null || this.value === null) {\n            return `${this.percentInverted.toFixed(2)}%`;\n        }\n        return `${this.value.toFixed(0)}/${this.target.toFixed(0)}`; // avoid weird floating point shit\n    }\n}\n","import { __decorate, __metadata } from \"tslib\";\nimport { t } from '@lingui/macro';\nimport { Plural, Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport Module, { dependency } from 'parser/core/Module';\nimport Checklist, { Requirement, TARGET, TieredRule } from 'parser/core/modules/Checklist';\nimport Suggestions, { SEVERITY, Suggestion, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport DISPLAY_ORDER from 'parser/jobs/ast/modules/DISPLAY_ORDER';\nimport React from 'react';\nimport { ARCANA_STATUSES, PLAY } from './ArcanaGroups';\nimport ArcanaTracking from './ArcanaTracking/ArcanaTracking';\n// TODO THINGS TO TRACK:\n// Track them using Draw when they still have a minor arcana (oopsie) or a card in the spread\nconst CARD_DURATION = 15000;\nconst SLEEVE_DRAW_PLAYS_GIVEN = 3;\nconst WARN_TARGET_MAXPLAYS = 2;\nconst FAIL_TARGET_MAXPLAYS = 3;\nconst SEVERITIES = {\n    DRAW_HOLDING: {\n        1: SEVERITY.MINOR,\n        3: SEVERITY.MEDIUM,\n        6: SEVERITY.MAJOR,\n    },\n    SLEEVE_DRAW_HOLDING: {\n        1: SEVERITY.MEDIUM,\n        2: SEVERITY.MAJOR,\n    },\n};\nexport default class Draw extends Module {\n    constructor() {\n        super(...arguments);\n        this.lastDrawTimestamp = 0;\n        this.draws = 0;\n        this.drawDrift = 0;\n        this.drawTotalDrift = 0;\n        this.plays = 0;\n        this.prepullPrepped = false;\n        this.lastSleeveTimestamp = 0;\n        this.sleeveUses = 0;\n        this.sleeveDrift = 0;\n        this.sleeveTotalDrift = 0;\n        this.prepullSleeve = false;\n    }\n    init() {\n        this.addHook('cast', { abilityId: ACTIONS.DRAW.id, by: 'player' }, this.onDraw);\n        this.addHook('cast', { abilityId: ACTIONS.SLEEVE_DRAW.id, by: 'player' }, this.onSleeveDraw);\n        this.addHook('cast', { abilityId: PLAY, by: 'player' }, this.onPlay);\n        this.addHook('applybuff', { abilityId: STATUSES.SLEEVE_DRAW.id, by: 'player' }, this.onSleeveBuff);\n        this.addHook('applybuff', { abilityId: ARCANA_STATUSES, by: 'player' }, this.onPlayBuff);\n        this.addHook('complete', this._onComplete);\n    }\n    onDraw(event) {\n        this.draws++;\n        if (this.draws === 1) {\n            // The first use, take holding as from the start of the fight\n            this.drawDrift = event.timestamp - this.parser.fight.start_time;\n        }\n        else {\n            // Take holding as from the time it comes off cooldown\n            this.drawDrift = event.timestamp - this.lastDrawTimestamp - (ACTIONS.DRAW.cooldown * 1000);\n        }\n        // Keep track of total drift time not using Draw\n        if (this.drawDrift > 0) {\n            this.drawTotalDrift += this.drawDrift;\n        }\n        // update the last use\n        this.lastDrawTimestamp = event.timestamp;\n    }\n    onPlay() {\n        this.plays++;\n    }\n    onPlayBuff(event) {\n        if (event.timestamp > this.parser.fight.start_time) {\n            return;\n        }\n        this.prepullPrepped = true;\n        this.plays++;\n    }\n    onSleeveDraw(event) {\n        this.sleeveUses++;\n        if (this.sleeveUses === 1 && !this.prepullSleeve) {\n            // The first use, take holding as from the start of the fight\n            this.sleeveDrift = event.timestamp - this.parser.fight.start_time;\n        }\n        else {\n            // Take holding as from the time it comes off cooldown\n            this.sleeveDrift = event.timestamp - this.lastSleeveTimestamp - (ACTIONS.SLEEVE_DRAW.cooldown * 1000);\n        }\n        // Keep track of total drift time not using sleeve\n        if (this.sleeveDrift > 0) {\n            this.sleeveTotalDrift += this.sleeveDrift;\n        }\n        // update the last use\n        this.lastSleeveTimestamp = event.timestamp;\n    }\n    onSleeveBuff(event) {\n        if (event.timestamp > this.parser.fight.start_time) {\n            return;\n        }\n        this.prepullSleeve = true;\n        this.sleeveUses++;\n        this.lastSleeveTimestamp = this.parser.fight.start_time;\n    }\n    _onComplete() {\n        // If they stopped using Sleeve at any point in the fight, this'll calculate the drift \"accurately\"\n        if (this.parser.fight.end_time - this.lastSleeveTimestamp > (ACTIONS.SLEEVE_DRAW.cooldown * 1000)) {\n            this.sleeveTotalDrift += (this.parser.fight.end_time - (this.lastSleeveTimestamp + (ACTIONS.SLEEVE_DRAW.cooldown * 1000)));\n        }\n        // If they stopped using Draw at any point in the fight, this'll calculate the drift \"accurately\"\n        if (this.parser.fight.end_time - this.lastDrawTimestamp > (ACTIONS.DRAW.cooldown * 1000)) {\n            this.drawTotalDrift += (this.parser.fight.end_time - ((this.lastDrawTimestamp + ACTIONS.DRAW.cooldown * 1000)));\n        }\n        // Max plays:\n        // [(fight time / 30s draw time + 1) - 1 if fight time doesn't end between xx:05-xx:29s, and xx:45-xx:60s]\n        // eg 7:00: 14 -1 = 13  draws by default. 7:17 fight time would mean 14 draws, since they can play the last card at least.\n        // in otherwords, fightDuration - 15s (for the buff @ CARD_DURATION)\n        // SleeveDraw consideration:\n        // fight time / 180s sleeve time + 1: each sleeve gives an extra 3 plays 7:00 = 9 extra plays.\n        // Prepull consideration: + 1 play\n        // Begin Theoretical Max Plays calc\n        const fightDuration = this.parser.fight.end_time - this.parser.fight.start_time;\n        const maxSleeveUses = Math.floor((fightDuration - (CARD_DURATION * 2)) / (ACTIONS.SLEEVE_DRAW.cooldown * 1000)) + 1;\n        const playsFromSleeveDraw = maxSleeveUses * SLEEVE_DRAW_PLAYS_GIVEN;\n        const playsFromDraw = Math.floor((fightDuration - CARD_DURATION) / (ACTIONS.DRAW.cooldown * 1000)) + 1;\n        const theoreticalMaxPlays = playsFromDraw + playsFromSleeveDraw + 1;\n        // TODO: Include downtime calculation for each fight??\n        // TODO: Suggest how to redraw effectively (maybe in ArcanaSuggestions)\n        // Confirm they had preprepped a card on pull\n        const pullState = this.arcanaTracking.getPullState();\n        if (pullState.drawState > 0) {\n            this.prepullPrepped = true;\n        }\n        const totalCardsObtained = (this.prepullPrepped ? 1 : 0) + this.draws + (this.sleeveUses * SLEEVE_DRAW_PLAYS_GIVEN);\n        /*\n            CHECKLIST: Number of cards played\n        */\n        const warnTarget = Math.floor(((theoreticalMaxPlays - WARN_TARGET_MAXPLAYS) / theoreticalMaxPlays) * 100);\n        const failTarget = Math.floor(((theoreticalMaxPlays - FAIL_TARGET_MAXPLAYS) / theoreticalMaxPlays) * 100);\n        this.checklist.add(new TieredRule({\n            displayOrder: DISPLAY_ORDER.DRAW_CHECKLIST,\n            name: <Trans id=\"ast.draw.checklist.name\">\n\t\t\t\tPlay as many cards as possible\n\t\t\t</Trans>,\n            description: <><Trans id=\"ast.draw.checklist.description\">\n\t\t\t\tPlaying cards will let you collect seals for <ActionLink {...ACTIONS.DIVINATION}/> and contribute to party damage.\n\t\t\t</Trans>\n\t\t\t<ul>\n\t\t\t\t<li><Trans id=\"ast.draw.checklist.description.prepull\">Prepared before pull:</Trans>&nbsp;{this.prepullPrepped ? 1 : 0}/1</li>\n\t\t\t\t<li><Trans id=\"ast.draw.checklist.description.draws\">Obtained from <ActionLink {...ACTIONS.DRAW}/>:</Trans>&nbsp;{this.draws}/{playsFromDraw}</li>\n\t\t\t\t<li><Trans id=\"ast.draw.checklist.description.sleeve-draws\">Obtained from <ActionLink {...ACTIONS.SLEEVE_DRAW}/>:</Trans>&nbsp;{this.sleeveUses * SLEEVE_DRAW_PLAYS_GIVEN}/{playsFromSleeveDraw}</li>\n\t\t\t\t<li><Trans id=\"ast.draw.checklist.description.total\">Total cards obtained:</Trans>&nbsp;{totalCardsObtained}/{theoreticalMaxPlays}</li>\n\t\t\t</ul></>,\n            tiers: { [warnTarget]: TARGET.WARN, [failTarget]: TARGET.FAIL, [100]: TARGET.SUCCESS },\n            requirements: [\n                new Requirement({\n                    name: <Trans id=\"ast.draw.checklist.requirement.name\">\n\t\t\t\t\t\t<ActionLink {...ACTIONS.PLAY}/> uses\n\t\t\t\t\t</Trans>,\n                    value: this.plays,\n                    target: theoreticalMaxPlays,\n                }),\n            ],\n        }));\n        /*\n            SUGGESTION: Didn't use draw enough\n        */\n        const drawsMissed = Math.floor(this.drawTotalDrift / (ACTIONS.DRAW.cooldown * 1000));\n        if (this.draws > 0 && drawsMissed > 0) {\n            this.suggestions.add(new TieredSuggestion({\n                icon: ACTIONS.DRAW.icon,\n                content: <Trans id=\"ast.draw.suggestions.draw-uses.content\">\n\t\t\t\t\t\tUse <ActionLink {...ACTIONS.DRAW}/> as soon as its available to maximize the number of cards played.\n\t\t\t\t</Trans>,\n                tiers: SEVERITIES.DRAW_HOLDING,\n                value: drawsMissed,\n                why: <Trans id=\"ast.draw.suggestions.draw-uses.why\">\n\t\t\t\t\tAbout <Plural value={drawsMissed} one=\" # use\" other=\"# uses\"/> of <ActionLink {...ACTIONS.DRAW}/> were missed by holding it for at least a total of {this.parser.formatDuration(this.drawTotalDrift)}.\n\t\t\t\t</Trans>,\n            }));\n        }\n        /*\n            SUGGESTION: Didn't use draw at all\n        */\n        if (this.draws === 0) {\n            this.suggestions.add(new Suggestion({\n                icon: ACTIONS.DRAW.icon,\n                content: <Trans id=\"ast.draw.suggestions.draw-no-usage.content\">\n\t\t\t\t\t\tNo uses of <ActionLink {...ACTIONS.DRAW}/> at all.\n\t\t\t\t</Trans>,\n                why: <Trans id=\"ast.draw.suggestions.draw-no-usage.why\">\n\t\t\t\t\tNo draws used.\n\t\t\t\t</Trans>,\n                severity: SEVERITY.MAJOR,\n            }));\n        }\n        /*\n            SUGGESTION: Didn't use sleeve draw enough\n        */\n        const sleevesMissed = Math.floor(this.sleeveTotalDrift / (ACTIONS.SLEEVE_DRAW.cooldown * 1000));\n        if (this.sleeveUses > 0 && sleevesMissed > 0) {\n            this.suggestions.add(new TieredSuggestion({\n                icon: ACTIONS.SLEEVE_DRAW.icon,\n                content: <Trans id=\"ast.draw.suggestions.sleeve-uses.content\">\n\t\t\t\t\t\tUse <ActionLink {...ACTIONS.SLEEVE_DRAW}/> more frequently. It should be paired with every other <ActionLink {...ACTIONS.DIVINATION}/> to stack buffs at the same time. <ActionLink {...ACTIONS.LIGHTSPEED}/> can be used to weave card abilities.\n\t\t\t\t</Trans>,\n                tiers: SEVERITIES.SLEEVE_DRAW_HOLDING,\n                value: sleevesMissed,\n                why: <Trans id=\"ast.draw.suggestions.sleeve-uses.why\">\n\t\t\t\t\tAbout <Plural value={sleevesMissed} one=\" # use\" other=\"# uses\"/> of <ActionLink {...ACTIONS.SLEEVE_DRAW}/> were missed by holding it for at least a total of {this.parser.formatDuration(this.sleeveTotalDrift)}.\n\t\t\t\t</Trans>,\n            }));\n        }\n        /*\n            SUGGESTION: Didn't use sleeve draw at all\n        */\n        if (this.sleeveUses === 0) {\n            this.suggestions.add(new Suggestion({\n                icon: ACTIONS.SLEEVE_DRAW.icon,\n                content: <Trans id=\"ast.draw.suggestions.sleeve-no-usage.content\">\n\t\t\t\t\t\tNo uses of <ActionLink {...ACTIONS.SLEEVE_DRAW}/> at all.\n\t\t\t\t\t\tIt should be paired with every other <ActionLink {...ACTIONS.DIVINATION}/> to stack buffs at the same time. <ActionLink {...ACTIONS.LIGHTSPEED}/> can be used to weave card abilities.\n\t\t\t\t</Trans>,\n                why: <Trans id=\"ast.draw.suggestions.sleeve-no-usage.why\">\n\t\t\t\t\tNo sleeve draws used.\n\t\t\t\t</Trans>,\n                severity: SEVERITY.MAJOR,\n            }));\n        }\n    }\n}\nDraw.handle = 'draw';\nDraw.title = t('ast.draw.title') `Draw`;\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Checklist)\n], Draw.prototype, \"checklist\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], Draw.prototype, \"suggestions\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", ArcanaTracking)\n], Draw.prototype, \"arcanaTracking\", void 0);\n","import { __decorate, __metadata } from \"tslib\";\nimport { Trans } from '@lingui/react';\nimport { ActionLink, StatusLink } from 'components/ui/DbLink';\nimport { getDataBy } from 'data';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport Module, { dependency } from 'parser/core/Module';\nimport Suggestions, { SEVERITY, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport React from 'react';\nimport Sect from './Sect';\nconst SEVERITY_MOD = {\n    MINOR: 0.1,\n    MEDIUM: 0.3,\n    MAJOR: 0.5,\n};\n// Lifted from WHM benison and adapted to AST and TSX\nexport default class CelestialOpposition extends Module {\n    constructor() {\n        super(...arguments);\n        this.lastUse = 0;\n        this.uses = 0;\n        this.totalHeld = 0;\n    }\n    init() {\n        this.addHook('cast', { abilityId: ACTIONS.CELESTIAL_OPPOSITION.id, by: 'player' }, this.onCast);\n        this.addHook('applybuff', { abilityId: [STATUSES.DIURNAL_SECT.id, STATUSES.NOCTURNAL_SECT.id], by: 'player' }, this.onSect);\n        this.addHook('complete', this.onComplete);\n    }\n    onCast(event) {\n        this.uses++;\n        if (this.lastUse === 0) {\n            this.lastUse = this.parser.fight.start_time;\n        }\n        const held = event.timestamp - this.lastUse - (ACTIONS.CELESTIAL_OPPOSITION.cooldown * 1000);\n        if (held > 0) {\n            this.totalHeld += held;\n        }\n        // update the last use\n        this.lastUse = event.timestamp;\n    }\n    onSect(event) {\n        this.activeSect = getDataBy(STATUSES, 'id', event.ability.guid);\n    }\n    onComplete() {\n        const holdDuration = this.uses === 0 ? this.parser.fightDuration : this.totalHeld;\n        const usesMissed = Math.floor(holdDuration / (ACTIONS.CELESTIAL_OPPOSITION.cooldown * 1000));\n        const fightDuration = this.parser.fight.end_time - this.parser.fight.start_time;\n        const maxUses = (fightDuration / (ACTIONS.CELESTIAL_OPPOSITION.cooldown * 1000)) - 1;\n        const WASTED_USE_TIERS = {\n            [maxUses * SEVERITY_MOD.MINOR]: SEVERITY.MINOR,\n            [maxUses * SEVERITY_MOD.MEDIUM]: SEVERITY.MEDIUM,\n            [maxUses * SEVERITY_MOD.MAJOR]: SEVERITY.MAJOR,\n        };\n        const suggestContentDiurnal = <Trans id=\"ast.celestial-opposition.suggestion.content.diurnal\">\n\t\t\t\tUse <ActionLink {...ACTIONS.CELESTIAL_OPPOSITION}/> more frequently. In <StatusLink {...STATUSES.DIURNAL_SECT}/>, the heal and regen combined add up to the same potency of a <ActionLink {...ACTIONS.BENEFIC_II}/> on each player it reaches.\n\t\t\t\tTrusting the regens to top off the party HP will save MP and GCDs on healing.\n\t\t\t</Trans>;\n        const suggestContentNoct = <Trans id=\"ast.celestial-opposition.suggestion.content.noct\">\n\t\t\t\tUse <ActionLink {...ACTIONS.CELESTIAL_OPPOSITION}/> more frequently. In <StatusLink {...STATUSES.NOCTURNAL_SECT}/>, the shield is the same potency as from <ActionLink {...ACTIONS.ASPECTED_HELIOS}/>,\n\t\t\t\tso it can save MP and GCDs casting it. Since shields last 30 seconds it can be cast much earlier than incoming damage and allow the cooldown to refresh sooner.\n\t\t\t</Trans>;\n        const content = this.activeSect && this.activeSect.id === STATUSES.NOCTURNAL_SECT.id ? suggestContentNoct : suggestContentDiurnal;\n        if (usesMissed > 1 || this.uses === 0) {\n            this.suggestions.add(new TieredSuggestion({\n                icon: ACTIONS.CELESTIAL_OPPOSITION.icon,\n                content,\n                tiers: WASTED_USE_TIERS,\n                value: this.uses === 0 ? 100 : usesMissed,\n                why: <Trans id=\"ast.celestial-opposition.suggestion.why\">\n\t\t\t\t\tAbout {usesMissed} uses of <ActionLink {...ACTIONS.CELESTIAL_OPPOSITION}/> were missed by holding it for at least a total of {this.parser.formatDuration(holdDuration)}.\n\t\t\t\t</Trans>,\n            }));\n        }\n    }\n}\nCelestialOpposition.handle = 'celestialopposition';\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], CelestialOpposition.prototype, \"suggestions\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Sect)\n], CelestialOpposition.prototype, \"sect\", void 0);\n","import { Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport { CooldownDowntime } from 'parser/core/modules/CooldownDowntime';\nimport React from 'react';\nexport default class OGCDDowntime extends CooldownDowntime {\n    constructor() {\n        super(...arguments);\n        this.trackedCds = [\n            {\n                cooldowns: [ACTIONS.DIVINATION],\n                allowedAverageDowntime: 2500,\n                firstUseOffset: 12500,\n            },\n        ];\n        this.target = 100;\n        this.checklistName = <Trans id=\"ast.ogcd-downtime.divination.name\">Use Divination</Trans>;\n        this.checklistDescription = <Trans id=\"ast.ogcd-downtime.divination.description\"><ActionLink {...ACTIONS.DIVINATION}/> provides Astrologian with a strong amount of raid DPS when stacked together with arcanum.\n\t\t\tDamage percentage bonuses stack multiplicatively, so it's most optimal to stack it with cards from <ActionLink {...ACTIONS.MINOR_ARCANA}/>.\n\t\t\tTry to time the usage to match raid buffs and high output phases of other party members - it's more important to use it on time rather than hold it in an attempt to have 3 different seals.\n\t</Trans>;\n    }\n}\n","import CoreStatuses from 'parser/core/modules/Statuses';\nimport STATUSES from 'data/STATUSES';\nexport default class Statuses extends CoreStatuses {\n}\nStatuses.statusesStackMapping = {\n    [STATUSES.GIANT_DOMINANCE.id]: STATUSES.EARTHLY_DOMINANCE.id,\n};\n","import { __decorate, __metadata } from \"tslib\";\nimport { Plural, Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport Module, { dependency } from 'parser/core/Module';\nimport Combatants from 'parser/core/modules/Combatants';\nimport Cooldowns from 'parser/core/modules/Cooldowns';\nimport Suggestions, { SEVERITY, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport React from 'react';\nconst SEVERITIES = {\n    WASTED_ST_HEAL_TIERS: {\n        1: SEVERITY.MINOR,\n        10: SEVERITY.MEDIUM,\n    },\n};\nconst GCD_ST_HEAL = [\n    ACTIONS.BENEFIC.id,\n    ACTIONS.BENEFIC_II.id,\n];\n// Ripped off from WHM and converted to TSX\nexport default class Synastry extends Module {\n    constructor() {\n        super(...arguments);\n        this.nonSynastryHeals = 0;\n    }\n    init() {\n        this.addHook('cast', { abilityId: GCD_ST_HEAL, by: 'player' }, this.onSingleTargetHealCast);\n        this.addHook('complete', this.onComplete);\n    }\n    onSingleTargetHealCast(event) {\n        // Ignore if Synastry is still on CD or we already have it up\n        if (this.cooldowns.getCooldownRemaining(ACTIONS.SYNASTRY.id) > 0) {\n            return;\n        }\n        this.nonSynastryHeals++;\n    }\n    onComplete() {\n        this.suggestions.add(new TieredSuggestion({\n            icon: ACTIONS.SYNASTRY.icon,\n            content: <Trans id=\"ast.synastry.suggestion.content\">\r\n\t\t\t\tTry to use <ActionLink {...ACTIONS.SYNASTRY}/> if you need to cast a single-target GCD heal. The GCD heal itself is already an efficiency loss, so it's better to make it as strong as possible if Synastry is not needed soon.\r\n\t\t\t</Trans>,\n            tiers: SEVERITIES.WASTED_ST_HEAL_TIERS,\n            value: this.nonSynastryHeals,\n            why: <Trans id=\"ast.synastry.suggestion.why\">\r\n\t\t\t\t<Plural value={this.nonSynastryHeals} one=\"# single-target GCD heal was cast\" other=\"# single-target GCD heals were cast\"/> without synastry even though it was available.\r\n\t\t\t</Trans>,\n        }));\n    }\n}\nSynastry.handle = 'synastry';\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Combatants)\n], Synastry.prototype, \"combatants\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], Synastry.prototype, \"suggestions\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Cooldowns)\n], Synastry.prototype, \"cooldowns\", void 0);\n","import Combust from './Combust';\nimport Cooldowns from './Cooldowns';\n// import Draw from './Draw'\nimport EarthlyStar from './EarthlyStar';\nimport Lightspeed from './Lightspeed';\nimport LucidDreaming from './LucidDreaming';\nimport ArcanaUndrawUsage from './ArcanaUndrawUsage';\nimport Horoscope from './Horoscope';\nimport { ArcanaTracking, ArcanaSuggestions } from './ArcanaTracking';\nimport Sect from './Sect';\nimport CelestialIntersection from './CelestialIntersection';\nimport Overheal from './Overheal';\nimport Draw from './Draw';\nimport CelestialOpposition from './CelestialOpposition';\nimport DivinationDowntime from './DivinationDowntime';\nimport Statuses from './Statuses';\nimport Synastry from './Synastry';\nexport default [\n    Cooldowns,\n    Combust,\n    Lightspeed,\n    EarthlyStar,\n    LucidDreaming,\n    Draw,\n    ArcanaUndrawUsage,\n    Horoscope,\n    ArcanaTracking,\n    ArcanaSuggestions,\n    Sect,\n    CelestialIntersection,\n    Overheal,\n    DivinationDowntime,\n    CelestialOpposition,\n    Statuses,\n    Synastry,\n];\n"],"sourceRoot":""}
(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{1291:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i(125),n=i.n(s),a=i(0),r=i.n(a),o=i(369);const c={aspectRatio:3,scales:{xAxes:[{type:"time",time:{displayFormats:{minute:"m:ss",second:"m:ss",millisecond:"m:ss.SS"},tooltipFormat:"mm:ss.SSS"}}]}};class l extends a.PureComponent{render(){const e=n()({},c,this.props.options||{});return r.a.createElement(o.a,{data:this.props.data,options:e,width:e.aspectRatio,height:1})}}},1302:function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var s=i(365),n=i.n(s),a=i(2),r=i(8),o=i(18),c=i(1288),l=i(24),d=i(1304),u=i(1285),h=i(80),p=i(0),m=i.n(p),f=i(366);function b(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function g(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?b(Object(i),!0).forEach((function(t){y(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class O{constructor(e,t){this.rotation=[],this.data=e,this.start=t}get gcds(){return this.rotation.map(e=>this.data.getAction(e.ability.guid)).filter(e=>e&&e.onGcd).length}getActionCountByIds(e){return this.rotation.filter(t=>e.includes(t.ability.guid)).length}}class w extends l.c{constructor(){super(...arguments),this.buffWindows=[]}get activeBuffWindow(){const e=n()(this.buffWindows);if(e&&null==e.end)return e}init(){this.addHook("cast",{by:"player"},this.onCast),this.addHook("applybuff",{by:"player"},this.onApplyBuff),this.addHook("removebuff",{by:"player"},this.onRemoveBuff),this.addHook("complete",this.onComplete)}onCast(e){const t=this.data.getAction(e.ability.guid);t&&!t.autoAttack&&this.activeBuffWindow&&this.considerAction(t)&&this.activeBuffWindow.rotation.push(e)}considerAction(e){return!0}onApplyBuff(e){this.buffStatus&&e.ability.guid===this.buffStatus.id&&this.startNewBuffWindow(e.timestamp)}startNewBuffWindow(e){this.buffWindows.push(new O(this.data,e))}onRemoveBuff(e){this.buffStatus&&e.ability.guid===this.buffStatus.id&&this.activeBuffWindow&&(this.activeBuffWindow.end=e.timestamp)}getBaselineExpectedGCDs(e){return this.expectedGCDs?this.expectedGCDs.expectedPerWindow:0}changeExpectedGCDsClassLogic(e){return 0}reduceExpectedGCDsEndOfFight(e){if(this.buffStatus.duration){const t=1e3*this.buffStatus.duration,i=this.parser.fight.end_time-e.start;if(t>=i){const e=this.globalCooldown.getEstimate();return Math.ceil((t-i)/e)}}return 0}getBaselineExpectedTrackedAction(e,t){return t.expectedPerWindow||0}changeExpectedTrackedActionClassLogic(e,t){return 0}getBuffWindowExpectedGCDs(e){return this.getBaselineExpectedGCDs(e)+this.changeExpectedGCDsClassLogic(e)-this.reduceExpectedGCDsEndOfFight(e)}getBuffWindowRequiredGCDsUsed(e){if(!this.requiredGCDs)return 0;const t=this.requiredGCDs.actions.map(e=>e.id);return e.getActionCountByIds(t)}getBuffWindowExpectedTrackedActions(e,t){return this.getBaselineExpectedTrackedAction(e,t)+this.changeExpectedTrackedActionClassLogic(e,t)}getBuffWindowNotes(e){}onComplete(){if(this.expectedGCDs){const e=this.buffWindows.reduce((e,t)=>{const i=this.getBuffWindowExpectedGCDs(t);return e+Math.max(0,i-t.gcds)},0);this.suggestions.add(new u.c({icon:this.buffAction.icon,content:this.expectedGCDs.suggestionContent,tiers:this.expectedGCDs.severityTiers,value:e,why:m.a.createElement(r.Trans,{id:"core.buffwindow.suggestions.missedgcd.why",values:{0:this.buffAction.name,missedGCDs:e}})}))}if(this.requiredGCDs){const e=this.buffWindows.reduce((e,t)=>e+Math.max(0,t.gcds-this.getBuffWindowRequiredGCDsUsed(t)),0);this.suggestions.add(new u.c({icon:this.requiredGCDs.icon,content:this.requiredGCDs.suggestionContent,tiers:this.requiredGCDs.severityTiers,value:e,why:m.a.createElement(r.Trans,{id:"core.buffwindow.suggestions.badgcd.why",values:{0:this.buffAction.name,invalidGCDs:e}})}))}if(this.trackedActions){const e=this.trackedActions.actions.reduce((e,t)=>e+this.buffWindows.reduce((e,i)=>e+Math.max(0,t.expectedPerWindow-i.getActionCountByIds([t.action.id])),0),0);this.suggestions.add(new u.c({icon:this.trackedActions.icon,content:this.trackedActions.suggestionContent,tiers:this.trackedActions.severityTiers,value:e,why:m.a.createElement(r.Trans,{id:"core.buffwindow.suggestions.trackedaction.why",values:{0:this.buffAction.name,missedActions:e}})}))}if(this.trackedBadActions){const e=this.trackedBadActions.actions.reduce((e,t)=>e+this.buffWindows.reduce((e,i)=>e+Math.max(0,i.getActionCountByIds([t.action.id])-t.expectedPerWindow),0),0);this.suggestions.add(new u.c({icon:this.trackedBadActions.icon,content:this.trackedBadActions.suggestionContent,tiers:this.trackedBadActions.severityTiers,value:e,why:m.a.createElement(r.Trans,{id:"core.buffwindow.suggestions.trackedbadaction.why",values:{0:this.buffAction.name,badActions:e}})}))}}output(){const e=[],t=[];this.expectedGCDs&&e.push({header:m.a.createElement(r.Trans,{id:"core.buffwindow.table.header.gcds"}),accessor:"missedgcd"}),this.requiredGCDs&&e.push({header:m.a.createElement("img",{src:this.requiredGCDs.icon,alt:"",style:{height:"20px"}}),accessor:"badgcd"}),this.trackedActions&&this.trackedActions.actions.forEach(t=>{e.push({header:m.a.createElement(o.a,g({showName:!1},t.action)),accessor:t.action.name})}),this.rotationTableNotesColumnHeader&&t.push({header:this.rotationTableNotesColumnHeader,accessor:"notes"});const i=this.buffWindows.map(e=>{const t=e.start-this.parser.fight.start_time,i=(null!=e.end?e.end:e.start)-this.parser.fight.start_time,s={},n={};return this.expectedGCDs&&(s.missedgcd={actual:e.gcds,expected:this.getBuffWindowExpectedGCDs(e)}),this.requiredGCDs&&(s.badgcd={actual:this.getBuffWindowRequiredGCDsUsed(e),expected:this.getBuffWindowExpectedGCDs(e)}),this.trackedActions&&this.trackedActions.actions.forEach(t=>{s[t.action.name]={actual:e.getActionCountByIds([t.action.id]),expected:this.getBuffWindowExpectedTrackedActions(e,t)}}),this.rotationTableNotesColumnHeader&&(n.notes=this.getBuffWindowNotes(e)),{start:t,end:i,targetsData:s,rotation:e.rotation,notesMap:n}});return m.a.createElement(c.a,{targets:e,data:i,notes:t,onGoto:this.timeline.show,headerTitle:this.rotationTableHeader})}}w.handle="buffwindow",w.title={id:"core.buffwindow.title",defaults:"Buff Window"},Object(a.b)([l.d,Object(a.d)("design:type",f.a)],w.prototype,"data",void 0),Object(a.b)([l.d,Object(a.d)("design:type",u.d)],w.prototype,"suggestions",void 0),Object(a.b)([l.d,Object(a.d)("design:type",h.d)],w.prototype,"timeline",void 0),Object(a.b)([l.d,Object(a.d)("design:type",d.a)],w.prototype,"globalCooldown",void 0)},1308:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i(24);const n=12e4;class a extends s.c{constructor(){super(...arguments),this._lastApplication={},this._clip={},this._statusDuration={},this.constructor.statusesToTrack.forEach(e=>{const t=this.data.getStatus(e);t&&(t.hasOwnProperty("duration")?this._statusDuration[e]=1e3*t.duration:(console.warn("statusId ".concat(e," is missing a duration property")),this._statusDuration[e]=n))}),this.addHook(["applydebuff","refreshdebuff"],{by:"player",abilityId:this.constructor.statusesToTrack},this._onDotApply),this.addHook("complete",this._onComplete)}excludeApplication(){return!1}addChecklistRules(){}addClippingSuggestions(e){}_onDotApply(e){const t=e.ability.guid,i="".concat(e.targetID,"|").concat(e.targetInstance),s=this._lastApplication[i]=this._lastApplication[i]||{};if(!s[t]||this.excludeApplication())return void(s[t]=e.timestamp);let n=this._statusDuration[t]-(e.timestamp-s[t]);n-=this.invuln.getUntargetableUptime("all",e.timestamp-this._statusDuration[t],e.timestamp),n-=this.invuln.getInvulnerableUptime("all",e.timestamp,e.timestamp+this._statusDuration[t]+n),this._clip[t]=(this._clip[t]||0)+Math.max(0,n),s[t]=e.timestamp}_onComplete(){this.addChecklistRules(),this.addClippingSuggestions(this._clip)}getUptimePercent(e){return this.enemies.getStatusUptime(e)/(this.parser.fightDuration-this.invuln.getInvulnerableUptime())*100}getClippingAmount(e){const t=this.parser.fightDuration-this.invuln.getInvulnerableUptime();return Math.round(60*this._clip[e]/t)}}a.handle="dots",a.dependencies=["data","enemies","invuln"],a.statusesToTrack=[]},1467:function(e,t,i){"use strict";i.r(t);var s=i(0),n=i.n(s),a=i(1470),r=i(1476),o=i(8),c=i(18),l=i(55),d=i(10),u=i(61),h=i(24),p=i(1286),m=51,f=52,b=54,g=99;function y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function O(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?y(Object(i),!0).forEach((function(t){w(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function w(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const E=[d.b.LUSTRATE.id,d.b.EXCOGITATION.id,d.b.INDOMITABILITY.id,d.b.SACRED_SOIL.id,d.b.SCH_ENERGY_DRAIN.id],C=[d.b.EXCOGITATION.id,d.b.INDOMITABILITY.id,d.b.ADLOQUIUM.id,d.b.SUCCOR.id],_=3,v=6e4,A=1e4;class T extends h.c{constructor(){super(...arguments),this._totalAetherflowCasts=0,this._extraAetherflows=_,this._recitationActive=!1,this._uses=[],this.addEventHook("cast",{by:"player"},this._onCast),this.addEventHook("applybuff",{by:"player",abilityId:u.b.RECITATION.id},this._onGainRecitation),this.addEventHook("removebuff",{by:"player",abilityId:u.b.RECITATION.id},this._removeRecitation),this.addEventHook("death",{to:"player"},this._removeRecitation),this.addEventHook("complete",this._onComplete)}_onGainRecitation(){this._recitationActive=!0}_removeRecitation(){this._recitationActive=!1}_durationWithAetherflowOnCooldown(){return this.parser.fightDuration-A}_possibleAetherflowCasts(){return this._extraAetherflows+Math.floor(this._durationWithAetherflowOnCooldown()/v)*_}_updateAetherflowUses(e,t){this._totalAetherflowCasts++,this._uses.push({timestamp:e,debit:1,id:[t]})}_onCast(e){const t=e.ability.guid;E.includes(t)&&(this._recitationActive&&C.includes(t)||this._updateAetherflowUses(e.timestamp,t)),t===d.b.DISSIPATION.id&&(this._extraAetherflows+=_)}_onComplete(){this.checklist.add(new p.b({name:n.a.createElement(s.Fragment,null,n.a.createElement(o.Trans,{id:"sch.aetherflow.checklist.name",components:[n.a.createElement(c.a,O({},d.b.AETHERFLOW))]})),description:n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement(o.Trans,{id:"sch.aetherflow.checklist.description-1"}))),requirements:[new p.a({name:n.a.createElement(s.Fragment,null,n.a.createElement(o.Trans,{id:"sch.aetherflow.checklist.requirement.uptime.name",components:[n.a.createElement(c.a,O({},d.b.AETHERFLOW))]})),percent:this.cooldowns.getTimeOnCooldown(d.b.AETHERFLOW.id)/this._durationWithAetherflowOnCooldown()*100}),new p.a({name:n.a.createElement(s.Fragment,null,n.a.createElement(o.Trans,{id:"sch.aetherflow.checklist.requirement.uses.name",values:{0:this._totalAetherflowCasts,1:this._possibleAetherflowCasts()},components:[n.a.createElement(c.a,O({},d.b.AETHERFLOW))]})),percent:this._totalAetherflowCasts/this._possibleAetherflowCasts()*100})]}))}output(){const e=this.cooldowns.getCooldown(d.b.AETHERFLOW.id).history.map(e=>({timestamp:[e.timestamp],id:[d.b.AETHERFLOW.id]})),t=this.cooldowns.getCooldown(d.b.DISSIPATION.id).history.map(e=>({timestamp:[e.timestamp],id:[d.b.DISSIPATION.id]})),i=this._uses;let s=0,u=0;return n.a.createElement(a.a,{collapsing:!0,unstackable:!0},n.a.createElement(a.a.Header,null,n.a.createElement(a.a.Row,null,n.a.createElement(a.a.HeaderCell,null,n.a.createElement(o.Trans,{id:"sch.aetherflow.cast-time"})),n.a.createElement(a.a.HeaderCell,null,n.a.createElement(o.Trans,{id:"sch.aetherflow.cooldown"})),n.a.createElement(a.a.HeaderCell,null,n.a.createElement(o.Trans,{id:"sch.aetherflow.drift"})),n.a.createElement(a.a.HeaderCell,null,n.a.createElement(o.Trans,{id:"sch.aetherflow.abilities-used"})),n.a.createElement(a.a.HeaderCell,null,n.a.createElement(o.Trans,{id:"sch.aetherflow.stacks-wasted"})))),n.a.createElement(a.a.Body,null,[].concat(e,t,i).sort((e,t)=>e.timestamp-t.timestamp).reduce((e,t)=>{if(0===e.length)return[t];const{id:i,debit:s,timestamp:n}=e[e.length-1];return t.debit?(e[e.length-1]={debit:(s||0)+t.debit,id:[].concat(i,t.id),timestamp:[].concat(n,t.timestamp)},e):[...e,t]},[]).map((e,t,i)=>{let{timestamp:o,debit:h=0,id:p}=e,m=0,f=0;if(p.includes(d.b.AETHERFLOW.id)){let e;const s=i[t+1],n=i[t+2];s&&s.id[0]===d.b.AETHERFLOW.id?e=s.timestamp[0]:n&&n.id[0]===d.b.AETHERFLOW.id?(e=n.timestamp[0],f+=1e3*_):e=this.parser.currentTimestamp,m=e-o[0]}f+=m,f-=v,f>0&&(s+=f);let b=0;return m>v&&(b=_-h||0,u+=b),Array.isArray(o)||(o=[o]),n.a.createElement(a.a.Row,{key:o},n.a.createElement(a.a.Cell,null,o.map(e=>this.parser.formatTimestamp(e)).join(", ")),n.a.createElement(a.a.Cell,null,m>0&&this.parser.formatDuration(m)),n.a.createElement(a.a.Cell,null,f>0&&this.parser.formatDuration(f)),n.a.createElement(a.a.Cell,null,n.a.createElement(r.a,null,p.map((e,t)=>n.a.createElement(r.a.Column,{key:t,width:4},n.a.createElement(c.a,O({},Object(l.a)(d.b,"id",e))))))),n.a.createElement(a.a.Cell,null,b||"-"))}),n.a.createElement(a.a.Row,null,n.a.createElement(a.a.Cell,{colSpan:"2",textAlign:"right",col:!0},"Total Drift"),n.a.createElement(a.a.Cell,null,this.parser.formatDuration(s)),n.a.createElement(a.a.Cell,{textAlign:"right"},"Total Stacks Wasted"),n.a.createElement(a.a.Cell,null,u||"-"))))}}T.displayOrder=m,T.handle="aetherflow",T.dependencies=["checklist","cooldowns"];var S=i(1308),I=i(1285);function j(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function D(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?j(Object(i),!0).forEach((function(t){P(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):j(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function P(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const k={CLIPPING:{6:I.a.MINOR,9:I.a.MEDIUM,12:I.a.MAJOR},UPTIME:{84:p.c.WARN,94:p.c.SUCCESS}};class R extends S.a{addChecklistRules(){this.checklist.add(new p.d({name:n.a.createElement(o.Trans,{id:"sch.dots.checklist.name"}),description:n.a.createElement(o.Trans,{id:"sch.dots.checklist.description"}),tiers:k.UPTIME,requirements:[new p.a({name:n.a.createElement(o.Trans,{id:"sch.dots.checklist.requirement.bio-ii.name",components:[n.a.createElement(c.a,D({},d.b.BIOLYSIS))]}),percent:()=>this.getUptimePercent(u.b.BIOLYSIS.id)})]}))}addClippingSuggestions(e){const t=this.getClippingAmount(u.b.BIOLYSIS.id);this.suggestions.add(new I.c({icon:d.b.BIOLYSIS.icon,content:n.a.createElement(o.Trans,{id:"sch.dots.suggestions.clipping.content"}),tiers:k.CLIPPING,value:t,why:n.a.createElement(o.Trans,{id:"sch.dots.suggestions.clipping.why",values:{0:this.parser.formatDuration(1e3*t),1:this.parser.formatDuration(e[u.b.BIOLYSIS.id])},components:[n.a.createElement(c.d,D({},u.b.BIOLYSIS))]})}))}}R.handle="biolysis",R.displayOrder=f,R.dependencies=[...R.dependencies,"checklist","suggestions"],R.statusesToTrack=[u.b.BIOLYSIS.id];var B=i(51),G=i(1294);function H(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function x(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?H(Object(i),!0).forEach((function(t){W(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):H(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function W(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const N={1:I.a.MINOR,5:I.a.MEDIUM,10:I.a.MAJOR};class M extends G.a{_onComplete(){this._leadingGcdEvent&&this._saveIfBad();const e=this._badWeaves.length;this.suggestions.add(new I.c({icon:d.b.SCH_RUIN_II.icon,content:n.a.createElement(o.Trans,{id:"sch.weaving.content",components:[n.a.createElement(c.a,x({},d.b.SCH_RUIN_II)),n.a.createElement(c.a,x({},d.b.BIOLYSIS)),n.a.createElement("a",{href:"javascript:void(0);",onClick:()=>this.parser.scrollTo(this.constructor.handle)}),n.a.createElement(B.a,{message:this.constructor.title})]}),why:n.a.createElement(o.Trans,{id:"sch.weaving.why",values:{badWeavesCount:e}}),tiers:N,value:e}))}}M.displayOrder=b;var L=i(1298);function U(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function F(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?U(Object(i),!0).forEach((function(t){Y(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):U(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class q extends L.a{constructor(){super(...arguments),this.trackedCds=[{cooldowns:[d.b.CHAIN_STRATAGEM],allowedAverageDowntime:7500,firstUseOffset:1e4}],this.checklistDescription=n.a.createElement(o.Trans,{id:"sch.chainstrat.cooldown.description",components:[n.a.createElement(c.a,F({},d.b.CHAIN_STRATAGEM))]})}}var J=i(124),X=i.n(J),z=i(14),Q=i(1291);function K(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function V(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?K(Object(i),!0).forEach((function(t){Z(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):K(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Z(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const $=[d.b.SUMMON_EOS.id,d.b.SUMMON_SELENE.id],ee=[d.b.SCH_ENERGY_DRAIN.id,d.b.LUSTRATE.id,d.b.INDOMITABILITY.id,d.b.SACRED_SOIL.id,d.b.EXCOGITATION.id],te=100,ie=0,se=10,ne=X()(z.b.SCHOLAR.colour),ae=.8,re=.5,oe={50:I.a.MINOR};class ce extends h.c{constructor(){super(...arguments),this._gauge=ie,this._waste=0,this._history=[],this._fairyOut=!1,this._noFairyAtStart=!1,this.addEventHook("heal",{by:"pet",abilityId:u.b.FEY_UNION.id},this._onGaugeSpend),this.addEventHook("cast",{by:"player",abilityId:d.b.SCH_FEY_BLESSING.id},this._onGaugeSpend),this.addEventHook("death",{to:"player"},this._onDeath),this.addEventHook("cast",{by:"player",abilityId:ee},this._onGaugeGenerate),this.addEventHook("complete",this._onComplete),this.addEventHook("cast",{by:"player",abilityId:$},this._onSummon)}normalise(e){for(const t of e){if(!t.ability)continue;const e=Object(l.a)(d.b,"id",t.ability.guid);if(!e)continue;if(e.id&&$.includes(e.id)){this._noFairyAtStart=!0;break}const i=this.parser.report.friendlyPets.find(e=>e.id===t.sourceID)||{petOwner:-1};if("cast"===t.type&&t.sourceIsFriendly&&i.petOwner===this.parser.player.id&&e.pet){this._fairyOut=!0;break}}return e}_onSummon(){this._fairyOut=!0}_onGaugeSpend(){this._gauge-=se,this._updateHistory()}_onGaugeGenerate(){!this.combatants.selected.hasStatus(u.b.DISSIPATION.id)&&this._fairyOut&&(this._gauge+=se,this._gauge>te&&(this._gauge=te,this._waste+=se),this._updateHistory())}_onDeath(){this._fairyOut=!1,this._gauge=0,this._updateHistory()}_updateHistory(){const e=this.parser.currentTimestamp-this.parser.fight.start_time;this._history.push({t:e,y:this._gauge})}_onComplete(){this._noFairyAtStart&&this.suggestions.add(new I.b({icon:d.b.SUMMON_SERAPH.icon,severity:I.a.MEDIUM,content:n.a.createElement(o.Trans,{id:"sch.gauge.nofairyatstart.content",components:[n.a.createElement(c.a,V({},d.b.SUMMON_EOS)),n.a.createElement(c.a,V({},d.b.SUMMON_SELENE))]}),why:n.a.createElement(o.Trans,{id:"sch.gauge.nofairyatstart.why"})})),this.suggestions.add(new I.c({icon:d.b.FEY_BLESSING.icon,tiers:oe,value:this._waste,content:n.a.createElement(o.Trans,{id:"sch.gauge.waste.suggestion.content",components:[n.a.createElement(c.a,V({},d.b.FEY_UNION)),n.a.createElement(c.a,V({},d.b.FEY_BLESSING))]}),why:n.a.createElement(o.Trans,{id:"sch.gauge.waste.suggestion.why",values:{0:this._waste}})}))}output(){const e={datasets:[{label:"Faerie Gauge",steppedLine:!0,data:this._history,backgroundColor:ne.fade(ae),borderColor:ne.fade(re)}]};return n.a.createElement(s.Fragment,null,n.a.createElement(Q.a,{data:e}),n.a.createElement(o.Trans,{id:"sch.gauge.waste",values:{0:this._waste}}))}}ce.handle="fairieGauge",ce.title={id:"sch.gauge.title",defaults:"Faerie Gauge Usage"},ce.dependencies=["combatants","suggestions"];var le=i(1302),de=i(376);function ue(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function he(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(i),!0).forEach((function(t){pe(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ue(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function pe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const me={1:I.a.MAJOR};class fe extends le.a{constructor(){super(...arguments),this.buffAction=d.b.SWIFTCAST,this.buffStatus=u.b.SWIFTCAST,this.rotationTableHeader=n.a.createElement(o.Trans,{id:"sch.swiftcast.title"})}onCast(e){const t=Object(de.a)(d.b,"id",e.ability.guid);t&&!t.autoAttack&&t.castTime&&this.activeBuffWindow&&this.activeBuffWindow.rotation.push(e)}onComplete(){const e=this.buffWindows.reduce((e,t)=>e+t.rotation.length?0:1,0);this.suggestions.add(new I.c({icon:d.b.SWIFTCAST.icon,content:n.a.createElement(o.Trans,{id:"sch.swiftcast.missed.suggestion.content",components:[n.a.createElement(c.a,he({},d.b.SWIFTCAST)),n.a.createElement(c.a,he({},d.b.RESURRECTION)),n.a.createElement(c.a,he({},d.b.BROIL_III))]}),tiers:me,value:e,why:n.a.createElement(o.Trans,{id:"sch.swiftcast.missed.suggestion.why",values:{missedSwifts:e}})}))}}fe.displayOrder=g,fe.handle="swiftcast",fe.title={id:"sch.swiftcast.title",defaults:"Swiftcast Actions"};var be=i(1243);function ge(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function ye(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(i),!0).forEach((function(t){Oe(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ge(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Oe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const we=3e4,Ee={2:I.a.MEDIUM,5:I.a.MAJOR};class Ce extends h.c{constructor(){super(...arguments),this._currentCast=null,this._droppedCasts=[],this._missedTimeMS=0,this.addEventHook("begincast",{by:"player"},this._onBeginCast),this.addEventHook("cast",{by:"player"},this._onCast),this.addEventHook("complete",this._onComplete)}_onBeginCast(e){this._currentCast&&this._pushDropCasts(e),this._currentCast=e}_onCast(e){const t=e.ability.guid;this._currentCast&&t!==this._currentCast.ability.guid&&this._pushDropCasts(e),this._currentCast=null}_pushDropCasts(e){this._missedTimeMS+=Math.min(this.gcd.getEstimate(),e.timestamp-this._currentCast.timestamp),this._droppedCasts.push({action:Object(l.a)(d.b,"id",this._currentCast.ability.guid),timestamp:this._currentCast.timestamp})}_onComplete(){this.suggestions.add(new I.c({icon:d.b.INTERJECT.icon,tiers:Ee,value:this._droppedCasts.length,content:n.a.createElement(o.Trans,{id:"sch.interrupts.suggestion.content",components:[n.a.createElement(c.a,ye({},d.b.SCH_RUIN_II))]}),why:n.a.createElement(o.Trans,{id:"sch.interrupts.suggestion.why",values:{0:this._droppedCasts.length,1:this.parser.formatDuration(this._missedTimeMS)}})}))}output(){return n.a.createElement(a.a,{compact:!0,unstackable:!0,celled:!0},n.a.createElement(a.a.Header,null,n.a.createElement(a.a.Row,null,n.a.createElement(a.a.HeaderCell,{collapsing:!0},n.a.createElement("strong",null,n.a.createElement(o.Trans,{id:"sch.interrupts.table.time"}))),n.a.createElement(a.a.HeaderCell,null,n.a.createElement("strong",null,n.a.createElement(o.Trans,{id:"sch.interrupts.table.cast"}))))),n.a.createElement(a.a.Body,null,this._droppedCasts.map(e=>n.a.createElement(a.a.Row,{key:e.timestamp},n.a.createElement(a.a.Cell,{textAlign:"center"},n.a.createElement("span",{style:{marginRight:5}},this.parser.formatTimestamp(e.timestamp)),n.a.createElement(be.a,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:()=>this.timeline.show(e.timestamp-this.parser.fight.start_time,e.timestamp-this.parser.fight.start_time+we)})),n.a.createElement(a.a.Cell,null,n.a.createElement(c.a,ye({},e.action)))))))}}Ce.handle="interrupts",Ce.title={id:"sch.interrupts.title",defaults:"Interrupted Casts"},Ce.dependencies=["timeline","gcd","suggestions"];t.default=[M,T,R,q,ce,fe,Ce]}}]);
//# sourceMappingURL=jobs-sch.acb94890.js.map
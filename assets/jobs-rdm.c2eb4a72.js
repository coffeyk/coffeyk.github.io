(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{1288:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var s=a(8),n=a(1287),i=a(0),r=a.n(i),o=a(1470),c=a(1243),l=a(37);function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class u extends r.a.Component{render(){const{targets:e,notes:t,data:a,onGoto:n,headerTitle:i}=this.props;return r.a.createElement(o.a,{compact:!0,unstackable:!0,celled:!0},r.a.createElement(o.a.Header,null,r.a.createElement(o.a.Row,null,r.a.createElement(o.a.HeaderCell,{collapsing:!0},r.a.createElement("strong",null,r.a.createElement(s.Trans,{id:"core.ui.rotation-table.header.time"}))),(e||[]).map((e,t)=>r.a.createElement(o.a.HeaderCell,{key:"target_header_".concat(t),textAlign:"center",collapsing:!0},r.a.createElement("strong",null,e.header))),r.a.createElement(o.a.HeaderCell,null,r.a.createElement("strong",null,i||r.a.createElement(s.Trans,{id:"core.ui.rotation-table.header.rotation"}))),(t||[]).map((e,t)=>r.a.createElement(o.a.HeaderCell,{key:"note_header_".concat(t),textAlign:"center",collapsing:!0},r.a.createElement("strong",null,e.header))))),r.a.createElement(o.a.Body,null,a.map(a=>r.a.createElement(u.Row,h({key:a.start,onGoto:n,targets:e||[],notes:t||[]},a)))))}}u.targetAccessorResolver=(e,t)=>"string"==typeof t.accessor&&null!=e.targetsData?e.targetsData[t.accessor]:"function"==typeof t.accessor?t.accessor(e):{actual:0,expected:0},u.notesAccessorResolver=(e,t)=>"string"==typeof t.accessor&&null!=e.notesMap?e.notesMap[t.accessor]:"function"==typeof t.accessor?t.accessor(e):null,u.TargetCell=e=>{let{actual:t,expected:a}=e;return r.a.createElement(o.a.Cell,{textAlign:"center",positive:void 0!==a&&t>=a,negative:void 0!==a&&t<a},t,"/",void 0===a?"-":a)},u.Row=e=>{let{onGoto:t,targets:a,notes:s,notesMap:i,start:m,end:d,targetsData:b,rotation:E}=e;return r.a.createElement(o.a.Row,null,r.a.createElement(o.a.Cell,{textAlign:"center"},r.a.createElement("span",{style:{marginRight:5}},Object(l.d)(m/1e3)),"function"==typeof t&&r.a.createElement(c.a,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:()=>t(m,d)})),a.map(e=>u.targetAccessorResolver({start:m,end:d,targetsData:b,rotation:E},e)).map((e,t)=>r.a.createElement(u.TargetCell,h({key:"target_".concat(t)},e))),r.a.createElement(o.a.Cell,null,r.a.createElement(n.a,{events:E})),s.map(e=>u.notesAccessorResolver({start:m,end:d,targetsData:b,notesMap:i,rotation:E},e)).map((e,t)=>r.a.createElement(o.a.Cell,{key:"notes_".concat(t),textAlign:"center"},e)))}},1291:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var s=a(125),n=a.n(s),i=a(0),r=a.n(i),o=a(369);const c={aspectRatio:3,scales:{xAxes:[{type:"time",time:{displayFormats:{minute:"m:ss",second:"m:ss",millisecond:"m:ss.SS"},tooltipFormat:"mm:ss.SSS"}}]}};class l extends i.PureComponent{render(){const e=n()({},c,this.props.options||{});return r.a.createElement(o.a,{data:this.props.data,options:e,width:e.aspectRatio,height:1})}}},1293:function(e,t,a){"use strict";a.d(t,"a",(function(){return w}));var s=a(368),n=a.n(s),i=a(365),r=a.n(i),o=a(2),c=a(8),l=a(1288),m=a(24),h=a(217),d=a(1285),u=a(80),b=a(0),E=a.n(b),p=a(366);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const _=2.5,y=15e3,C={uncomboed:E.a.createElement(c.Trans,{id:"core.combos.issuetypenames.uncomboed"}),combobreak:E.a.createElement(c.Trans,{id:"core.combos.issuetypenames.combobreak"}),failedcombo:E.a.createElement(c.Trans,{id:"core.combos.issuetypenames.failed"})};class w extends m.c{constructor(){super(...arguments),this.lastGcdTime=this.parser.fight.start_time,this.currentComboChain=[],this.issues=[]}init(){this.addHook("aoedamage",{by:"player"},this.onCast),this.addHook("complete",this.onComplete)}get lastComboEvent(){return r()(this.currentComboChain)||null}get lastAction(){const e=this.lastComboEvent;return e?e.ability.guid:null}get comboBreakers(){return this.issues.filter(e=>"combobreak"===e.type).map(e=>e.event)}get uncomboedGcds(){return this.issues.filter(e=>"uncomboed"===e.type).map(e=>e.event)}fabricateComboEvent(e){const t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{type:"combo"});delete t.timestamp,this.parser.fabricateEvent(t)}recordBrokenCombo(e,t){this.isAllowableComboBreak(e,t)||this.issues.push({type:"combobreak",event:e,context:t}),this.currentComboChain=[]}recordUncomboedGcd(e){this.issues.push({type:"uncomboed",event:e,context:[]}),this.currentComboChain=[]}recordFailedCombo(e,t){this.issues.push({type:"failedcombo",event:e,context:t}),this.currentComboChain=[]}checkCombo(e,t){if(null==this.lastAction){if(e.start)return this.fabricateComboEvent(t),!0;if(e.from)return this.recordUncomboedGcd(t),!1}if(e.start)return this.recordBrokenCombo(t,this.currentComboChain),!0;if(e.from){if((Array.isArray(e.from)?e.from:[e.from]).includes(this.lastAction))return this.fabricateComboEvent(t),!e.end}return this.recordBrokenCombo(t,this.currentComboChain),!1}onCast(e){const t=this.data.getAction(e.ability.guid);if(t){if(t.onGcd&&(t.combo||t.breaksCombo)&&(e.timestamp-this.lastGcdTime>y&&(this.currentComboChain=[]),this.lastGcdTime=e.timestamp),t.combo){if(!e.successfulHit)return void this.recordFailedCombo(e,this.currentComboChain);this.checkCombo(t.combo,e)?this.currentComboChain.push(e):this.currentComboChain=[]}t.breaksCombo&&null!==this.lastAction&&this.recordBrokenCombo(e,this.currentComboChain)}}onComplete(){this.addJobSpecificSuggestions(this.comboBreakers,this.uncomboedGcds)||this.suggestions.add(new d.c({icon:this.constructor.suggestionIcon,content:E.a.createElement(c.Trans,{id:"core.combos.content",components:[E.a.createElement("p",null),E.a.createElement("p",null)]}),tiers:{1:d.a.MINOR,2:d.a.MEDIUM,4:d.a.MAJOR},value:this.issues.length,why:E.a.createElement(c.Trans,{id:"core.combos.why",values:{0:this.issues.length}})}))}addJobSpecificSuggestions(e,t){return!1}isAllowableComboBreak(e,t){return!1}output(){if(this.issues.length<=0)return!1;const e=this.parser.fight.start_time,t=this.issues.sort((e,t)=>e.event.timestamp-t.event.timestamp).map(t=>{var a,s;const i=[...t.context||[],t.event],o=n()(i),c=r()(i),l=this.data.getAction(o.ability.guid),m=this.data.getAction(c.ability.guid);return{start:o.timestamp-e+(null!==(a=null==l?void 0:l.cooldown)&&void 0!==a?a:_),end:c.timestamp-e+(null!==(s=null==m?void 0:m.cooldown)&&void 0!==s?s:_),rotation:i,notesMap:{reason:E.a.createElement("span",{style:{whiteSpace:"nowrap"}},C[t.type])}}});return E.a.createElement(l.a,{notes:[{header:E.a.createElement(c.Trans,{id:"core.combos.rotationtable.header.reason"}),accessor:"reason"}],data:t,onGoto:this.timeline.show})}}w.handle="combos",w.title={id:"core.combos.title",defaults:"Combo Issues"},w.displayOrder=h.a.COMBOS,w.suggestionIcon="https://xivapi.com/i/000000/000405.png",Object(o.b)([m.d,Object(o.d)("design:type",p.a)],w.prototype,"data",void 0),Object(o.b)([m.d,Object(o.d)("design:type",d.d)],w.prototype,"suggestions",void 0),Object(o.b)([m.d,Object(o.d)("design:type",u.d)],w.prototype,"timeline",void 0)},1445:function(e,t,a){e.exports={gutter:"20px",dualStatistic:"DualStatistic-module_dualStatistic__oUsEH",titleWrapper:"DualStatistic-module_titleWrapper__1RmR8",icon:"DualStatistic-module_icon__1bhx6",title:"DualStatistic-module_title__2W808",value:"DualStatistic-module_value__1lthp"}},1463:function(e,t,a){"use strict";a.r(t);var s=a(8),n=a(124),i=a.n(n),r=a(0),o=a.n(r),c=a(1291),l=a(10),m=a(14),h=a(24),d=a(1285),u=a(262),b=a(1445),E=a.n(b);class p extends u.a{constructor(e){super(e),this.Content=()=>o.a.createElement("div",{className:E.a.dualStatistic},this.label,o.a.createElement("div",{className:E.a.titleWrapper},this.icon&&o.a.createElement("img",{src:this.icon,className:E.a.icon}),o.a.createElement("div",{className:E.a.title},this.title),o.a.createElement("div",{className:E.a.value},this.value)),o.a.createElement("div",{className:E.a.titleWrapper},this.icon&&o.a.createElement("img",{src:this.icon2,className:E.a.icon}),o.a.createElement("div",{className:E.a.title},this.title2),o.a.createElement("div",{className:E.a.value},this.value2))),this.label=e.label,this.title=e.title,this.title2=e.title2,this.icon=e.icon,this.icon2=e.icon2,this.value=e.value,this.value2=e.value2}}function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const _={[l.b.VERSTONE.id]:{white:9,black:0},[l.b.VERFIRE.id]:{white:0,black:9},[l.b.VERAERO.id]:{white:11,black:0},[l.b.VERTHUNDER.id]:{white:0,black:11},[l.b.VERHOLY.id]:{white:21,black:0},[l.b.VERFLARE.id]:{white:0,black:21},[l.b.JOLT.id]:{white:3,black:3},[l.b.JOLT_II.id]:{white:3,black:3},[l.b.VERAERO_II.id]:{white:7,black:0},[l.b.VERTHUNDER_II.id]:{white:0,black:7},[l.b.IMPACT.id]:{white:3,black:3},[l.b.ENCHANTED_RIPOSTE.id]:{white:-30,black:-30},[l.b.ENCHANTED_ZWERCHHAU.id]:{white:-25,black:-25},[l.b.ENCHANTED_REDOUBLEMENT.id]:{white:-25,black:-25},[l.b.ENCHANTED_MOULINET.id]:{white:-20,black:-20},[l.b.ENCHANTED_REPRISE.id]:{white:-5,black:-5},[l.b.SCORCH.id]:{white:7,black:7}},y={1:d.a.MINOR,20:d.a.MEDIUM,80:d.a.MAJOR},C={1:d.a.MINOR,20:d.a.MEDIUM,80:d.a.MAJOR},w=30,O=2,R=100,v=2,T=0;class M{constructor(e,t){this.mana={white:{beforeCast:0,afterCast:0,overCapLoss:0,imbalanceLoss:0,invulnLoss:0,manaficationLoss:0},black:{beforeCast:0,afterCast:0,overCapLoss:0,imbalanceLoss:0,invulnLoss:0,manaficationLoss:0}},this.mana.white.beforeCast=e,this.mana.black.beforeCast=t,this.mana.white.afterCast=e,this.mana.black.afterCast=t}calculateManaFicationManaGained(){this.mana.white.afterCast=this.mana.white.beforeCast*v,this.mana.black.afterCast=this.mana.black.beforeCast*v,this.calculateManaOvercap(!0)}calculateCastManaGained(e){const t=e.ability.guid,{white:a,black:s}=_[t]||{};if(a||s){if(!e.successfulHit&&(this.missOrInvuln=!0,a>0||s>0))return this.mana.white.invulnLoss=a,void(this.mana.black.invulnLoss=s);this.mana.white.afterCast=this.mana.white.beforeCast+a,this.mana.black.afterCast=this.mana.black.beforeCast+s,this.calculateManaImbalance(a,s),this.calculateManaOvercap(!1)}}calculateManaImbalance(e,t){e&&this.mana.black.beforeCast-this.mana.white.beforeCast>w&&(this.mana.white.imbalanceLoss=Math.ceil(e/O),this.mana.white.afterCast-=this.mana.white.imbalanceLoss),t&&this.mana.white.beforeCast-this.mana.black.beforeCast>w&&(this.mana.black.imbalanceLoss=Math.ceil(t/O),this.mana.black.afterCast-=this.mana.black.imbalanceLoss)}calculateManaOvercap(e){this.mana.white.afterCast>R&&(e?this.mana.white.manaficationLoss=this.mana.white.afterCast-R:this.mana.white.overCapLoss=this.mana.white.afterCast-R,this.mana.white.afterCast=R),this.mana.black.afterCast>R&&(e?this.mana.black.manaficationLoss=this.mana.black.afterCast-R:this.mana.black.overCapLoss=this.mana.black.afterCast-R,this.mana.black.afterCast=R)}}class A extends h.c{constructor(){super(...arguments),this._whiteMana=0,this._blackMana=0,this._whiteManaWasted=0,this._blackManaWasted=0,this._whiteManaLostToImbalance=0,this._blackManaLostToImbalance=0,this._whiteManaLostToInvulnerable=0,this._blackManaLostToInvulnerable=0,this._whiteManaLostToManafication=0,this._blackManaLostToManafication=0,this._history={white:[],black:[]},this.addHook("cast",{by:"player",abilityId:l.b.MANAFICATION.id},this._gaugeEvent),this.addHook("aoedamage",{by:"player"},this._gaugeEvent),this.addHook("death",{to:"player"},this._onDeath),this.addHook("complete",this._onComplete)}_pushToGraph(){const e=this.parser.currentTimestamp-this.parser.fight.start_time;this._history.white.push({t:e,y:this._whiteMana}),this._history.black.push({t:e,y:this._blackMana})}_gaugeEvent(e){this._whiteMana&&this._whiteMana<T&&(this._whiteMana=T),this._blackMana&&this._blackMana<T&&(this._blackMana=T);const t=new M(this._whiteMana,this._blackMana),a=e.ability.guid;a===l.b.MANAFICATION.id?(t.calculateManaFicationManaGained(),this.cooldowns.resetCooldown(l.b.CORPS_A_CORPS.id),this.cooldowns.resetCooldown(l.b.DISPLACEMENT.id)):t.calculateCastManaGained(e),this._whiteMana=t.mana.white.afterCast,this._blackMana=t.mana.black.afterCast,this._whiteManaWasted+=t.mana.white.overCapLoss,this._blackManaWasted+=t.mana.black.overCapLoss,this._whiteManaLostToImbalance+=t.mana.white.imbalanceLoss,this._blackManaLostToImbalance+=t.mana.black.imbalanceLoss,this._whiteManaLostToInvulnerable+=t.mana.white.invulnLoss,this._blackManaLostToInvulnerable+=t.mana.black.invulnLoss,this._whiteManaLostToManafication+=t.mana.white.manaficationLoss,this._blackManaLostToManafication+=t.mana.black.manaficationLoss,(a in _||a===l.b.MANAFICATION.id)&&this._pushToGraph();const s=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{type:"rdmcast",mana:t.mana,missOrInvlun:t.missOrInvuln});this.parser.fabricateEvent(s)}_onDeath(){this._whiteMana=0,this._blackMana=0,this._pushToGraph()}_onComplete(){this.suggestions.add(new d.c({icon:l.b.VERHOLY.icon,content:o.a.createElement(r.Fragment,null,o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.white-mana-wasted-content"})),tiers:y,value:this._whiteManaWasted,why:o.a.createElement(r.Fragment,null,o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.white-mana-wasted-why",values:{0:this._whiteManaWasted}}))})),this.suggestions.add(new d.c({icon:l.b.VERHOLY.icon,content:o.a.createElement(r.Fragment,null,o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.white-mana-lost-content"})),tiers:C,value:this._whiteManaLostToImbalance,why:o.a.createElement(r.Fragment,null,o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.white-mana-lost-why",values:{0:this._whiteManaLostToImbalance}}))})),this.suggestions.add(new d.c({icon:l.b.VERHOLY.icon,content:o.a.createElement(r.Fragment,null,o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.white-mana-invuln-content"})),tiers:C,value:this._whiteManaLostToInvulnerable,why:o.a.createElement(r.Fragment,null,o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.white-mana-invuln-why",values:{0:this._whiteManaLostToInvulnerable}}))})),this.suggestions.add(new d.c({icon:l.b.VERFLARE.icon,content:o.a.createElement(r.Fragment,null,o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.black-mana-wasted-content"})),tiers:y,value:this._blackManaWasted,why:o.a.createElement(r.Fragment,null,o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.black-mana-wasted-why",values:{0:this._blackManaWasted}}))})),this.suggestions.add(new d.c({icon:l.b.VERFLARE.icon,content:o.a.createElement(r.Fragment,null,o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.black-mana-lost-content"})),tiers:C,value:this._blackManaLostToImbalance,why:o.a.createElement(r.Fragment,null,o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.black-mana-lost-why",values:{0:this._blackManaLostToImbalance}}))})),this.suggestions.add(new d.c({icon:l.b.VERFLARE.icon,content:o.a.createElement(r.Fragment,null,o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.black-mana-invuln-content"})),tiers:C,value:this._blackManaLostToInvulnerable,why:o.a.createElement(r.Fragment,null,o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.black-mana-invuln-why",values:{0:this._blackManaLostToInvulnerable}}))})),this.statistics.add(new p({label:o.a.createElement(s.Trans,{id:"rdm.gauge.title-mana-lost-to-manafication"}),title:o.a.createElement(s.Trans,{id:"rdm.gauge.white-mana-lost-to-manafication"}),title2:o.a.createElement(s.Trans,{id:"rdm.gauge.black-mana-lost-to-manafication"}),icon:l.b.VERHOLY.icon,icon2:l.b.VERFLARE.icon,value:this._whiteManaLostToManafication,value2:this._blackManaLostToManafication,info:o.a.createElement(s.Trans,{id:"rdm.gauge.white-mana-lost-to-manafication-statistics"})}))}output(){const e=i()(m.b.WHITE_MAGE.colour),t=i()(m.b.BLACK_MAGE.colour),a={datasets:[{label:"White Mana",data:this._history.white,backgroundColor:e.fade(.5),borderColor:e.fade(.2),steppedLine:!0},{label:"Black Mana",data:this._history.black,backgroundColor:t.fade(.5),borderColor:t.fade(.2),steppedLine:!0}]};return o.a.createElement(c.a,{data:a})}get whiteMana(){return this._whiteMana}get blackMana(){return this._blackMana}}A.handle="gauge",A.title={id:"rdm.gauge.title",defaults:"Gauge"},A.dependencies=["cooldowns","suggestions","statistics"];var k=a(1474),I=a(18),D=a(1287),L=a(55),N=a(61),S=a(37);const j={NA:0,HardCast:1,SwiftCast:2},P=[l.b.VERAERO.id,l.b.VERTHUNDER.id,l.b.VERRAISE.id,l.b.SCATTER.id,l.b.IMPACT.id];function F(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function H(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){V(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function V(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object(S.b)(j);class x extends h.c{constructor(){super(...arguments),this._castType=j.HardCast,this._ctIndex=null,this._usedCast=!1,this._history=[],this._missedDualCasts=0,this._wastedDualCasts=0,this._castTypeLastChanged=null,this._severityMissedDualcast={1:d.a.MINOR,2:d.a.MEDIUM,3:d.a.MAJOR},this._severityWastedDualcast={1:d.a.MINOR,3:d.a.MEDIUM,5:d.a.MAJOR},this.addHook("cast",{by:"player"},this._onCast),this.addHook("applybuff",{to:"player",abilityId:N.b.DUALCAST.id},this._onGain),this.addHook("removebuff",{to:"player",abilityId:N.b.DUALCAST.id},this._onRemove),this.addHook("complete",this._onComplete)}_onCast(e){const t=e.ability.guid,a=Object(L.a)(l.b,"id",t),s=a?a.castTime:0,n=this.downtime.getDowntime(this._castTypeLastChanged||0,e.timestamp);if(s>0&&this._castType===j.DualCast){if(this._ctIndex=this.castTime.set("all",0),!P.includes(t)&&0===n){this._wastedDualCasts+=1;const a={id:t,timestamp:e.timestamp,name:e.ability.name,casttype:this._castType,events:[]};a.events.push(e),this._history.push(a)}this._usedCast=!0}}_onGain(e){this._castType=j.DualCast,this._usedCast=!1,this._castTypeLastChanged=e.timestamp}_onRemove(e){if(!this._usedCast){0===this.downtime.getDowntime(this._castTypeLastChanged||0,e.timestamp)&&(this._missedDualCasts+=1)}this._castType=j.HardCast,null!=this._ctIndex&&this.castTime.reset(this._ctIndex),this._ctIndex=null,this._castTypeLastChanged=e.timestamp}_onComplete(){this._castType===j.DualCast&&(this._castType=j.HardCast),this._wastedDualCasts&&this.suggestions.add(new d.c({icon:N.b.DUALCAST.icon,content:o.a.createElement(s.Trans,{id:"rdm.dualcast.suggestions.wasted.content",components:[o.a.createElement(I.d,H({},N.b.DUALCAST)),o.a.createElement(I.a,H({},l.b.VERAERO)),o.a.createElement(I.a,H({},l.b.VERTHUNDER)),o.a.createElement(I.a,H({},l.b.VERRAISE))]}),tiers:this._severityWastedDualcast,value:this._wastedDualCasts,why:o.a.createElement(s.Trans,{id:"rdm.dualcast.suggestions.wasted.why",values:{0:this._wastedDualCasts,1:this._wastedDualCasts}})})),this._missedDualCasts&&this.suggestions.add(new d.c({icon:N.b.DUALCAST.icon,content:o.a.createElement(s.Trans,{id:"rdm.dualcast.suggestions.missed.content"}),tiers:this._severityMissedDualcast,value:this._missedDualCasts,why:o.a.createElement(s.Trans,{id:"rdm.dualcast.suggestions.missed.why",values:{0:this._missedDualCasts,1:this._missedDualCasts}})}))}output(){if(0===this._history.length)return!1;const e=this._history.map(e=>({key:e.timestamp,title:{content:o.a.createElement(r.Fragment,null,this.parser.formatTimestamp(e.timestamp)," - ",e.name)},content:{content:o.a.createElement(D.a,{events:e.events})}}));return o.a.createElement(k.a,{exclusive:!1,panels:e,styled:!0,fluid:!0})}}x.handle="dualCast",x.dependencies=["castTime","downtime","suggestions"],x.title={id:"rdm.dualcast.title",defaults:"Dualcast"};var U=a(1298);const Y=4e3;class W extends U.a{constructor(){super(...arguments),this.defaultAllowedAverageDowntime=Y,this.trackedCds=[{cooldowns:[l.b.ACCELERATION],allowedAverageDowntime:2e4},{cooldowns:[l.b.SWIFTCAST],firstUseOffset:15e3},{cooldowns:[l.b.MANAFICATION],firstUseOffset:25e3},{cooldowns:[l.b.EMBOLDEN],firstUseOffset:15e3},{cooldowns:[l.b.FLECHE]},{cooldowns:[l.b.CONTRE_SIXTE]}]}}d.a.MINOR,d.a.MEDIUM,d.a.MAJOR;const G={1:d.a.MINOR,2:d.a.MEDIUM,5:d.a.MAJOR},B={1:d.a.MINOR,2:d.a.MEDIUM,3:d.a.MAJOR},J={1:d.a.MINOR,2:d.a.MEDIUM,7:d.a.MAJOR},z=[N.b.VERSTONE_READY.id,N.b.VERFIRE_READY.id];function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach((function(t){K(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function K(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class X extends h.c{constructor(){super(...arguments),this._history={},this._invulnCasts=[],this._castStateMap={[N.b.VERSTONE_READY.id]:l.b.VERSTONE,[N.b.VERFIRE_READY.id]:l.b.VERFIRE},this._doNotCastMap={[N.b.VERSTONE_READY.id]:l.b.VERAERO,[N.b.VERFIRE_READY.id]:l.b.VERTHUNDER},this._currentProcs={},this._castState=null,this._previousCast=null,this._targetWasInvuln=!1,this._playerWasInDowntime=!1,this._lastTargetID=0,this.addHook("cast",{by:"player"},this._onCast),this.addHook("applybuff",{to:"player",abilityId:z},this._onGain),this.addHook("removebuff",{to:"player",abilityId:z},this._onRemove),this.addHook("refreshbuff",{to:"player",abilityId:z},this._onRefresh),this.addHook("complete",this._onComplete),this._initializeHistory()}_onCast(e){const t=e.ability.guid,a=this.downtime.getDowntime(this._previousCast||0,e.timestamp);this._previousCast=e.timestamp,this._playerWasInDowntime=a>0,this._targetWasInvuln=this.invuln.isInvulnerable(e.targetID,e.timestamp),this._lastTargetID=e.targetID,this._castState=t}_initializeHistory(){N.b.VERFIRE_READY in this._history||(this._history[N.b.VERFIRE_READY.id]={overWritten:0,invuln:0,missed:0,wasted:0}),N.b.VERSTONE_READY in this._history||(this._history[N.b.VERSTONE_READY.id]={overWritten:0,invuln:0,missed:0,wasted:0})}_onGain(e){const t=e.ability.guid;t in this._history||(this._history[t]={overWritten:0,invuln:0,missed:0,wasted:0}),t in this._currentProcs||(this._currentProcs[t]=0),this._currentProcs[t]=e.timestamp}_onRefresh(e){const t=e.ability.guid;this._currentProcs[t]>0&&this._history[t].overWritten++,this._currentProcs[t]=e.timestamp}_onRemove(e){const t=e.ability.guid,a=e.timestamp,s=e.timestamp-this.parser.fight.start_time;if(this._targetWasInvuln){this._history[t].invuln++;let e="Unavailable";const n=this.enemies.getEntity(this._lastTargetID);n&&(e=n.name);const i={statusID:t,gcdTimeDiff:s,timestamp:a,lastTargetName:e};this._invulnCasts.push(i)}else this._castState===this._castStateMap[t].id||this._playerWasInDowntime||this._history[t].missed++;this._castState===this._castStateMap[t].id&&(this._currentProcs[t]=0)}_onComplete(){const e=this._history[N.b.VERFIRE_READY.id].missed||0,t=this._history[N.b.VERFIRE_READY.id].invuln||0,a=this._history[N.b.VERFIRE_READY.id].overWritten||0,n=this._history[N.b.VERSTONE_READY.id].missed||0,i=this._history[N.b.VERSTONE_READY.id].invuln||0,r=this._history[N.b.VERSTONE_READY.id].overWritten||0;this.suggestions.add(new d.c({icon:e>n?l.b.VERFIRE.icon:l.b.VERSTONE.icon,content:o.a.createElement(s.Trans,{id:"rdm.procs.suggestions.missed.content",components:[o.a.createElement(I.a,q({},l.b.VERFIRE)),o.a.createElement(I.d,q({},N.b.VERFIRE_READY)),o.a.createElement(I.a,q({},l.b.VERSTONE)),o.a.createElement(I.d,q({},N.b.VERSTONE_READY))]}),tiers:J,value:e+n,why:o.a.createElement(s.Trans,{id:"rdm.procs.suggestions.missed.why",values:{missedFire:e,missedStone:n}})})),this.suggestions.add(new d.c({icon:a>r?l.b.VERFIRE.icon:l.b.VERSTONE.icon,content:o.a.createElement(s.Trans,{id:"rdm.procs.suggestions.overwritten.content",components:[o.a.createElement(I.a,q({},l.b.VERTHUNDER)),o.a.createElement(I.d,q({},N.b.VERFIRE_READY)),o.a.createElement(I.a,q({},l.b.VERAERO)),o.a.createElement(I.d,q({},N.b.VERSTONE_READY))]}),tiers:G,value:a+r,why:o.a.createElement(s.Trans,{id:"rdm.procs.suggestions.overwritten.why",values:{overWrittenFire:a,overWrittenStone:r}})})),this.suggestions.add(new d.c({icon:t>i?l.b.VERFIRE.icon:l.b.VERSTONE.icon,content:o.a.createElement(s.Trans,{id:"rdm.procs.suggestions.invuln.content",components:[o.a.createElement(I.a,q({},l.b.VERFIRE)),o.a.createElement(I.a,q({},l.b.VERSTONE))]}),tiers:B,value:t+i,why:o.a.createElement(s.Trans,{id:"rdm.procs.suggestions.invuln.why",values:{invulnFire:t,invulnStone:i}})}))}output(){const e=this._invulnCasts;return 0!==e.length&&o.a.createElement(r.Fragment,null,o.a.createElement(s.Trans,{id:"rdm.procs.invulnlist.preface"}),o.a.createElement("ul",null,e.map(e=>o.a.createElement("li",{key:e.timestamp},o.a.createElement("strong",null,this.parser.formatTimestamp(e.timestamp)),": ",this._castStateMap[e.statusID].name," - ",o.a.createElement("strong",null,o.a.createElement(s.Trans,{id:"rdm.procs.invuln.target"})),": ",e.lastTargetName))))}}X.handle="procs",X.title={id:"rdm.procs.title",defaults:"Proc Issues"},X.dependencies=["downtime","invuln","suggestions","enemies"];var Q=a(1293);class $ extends Q.a{constructor(){super(...arguments),this._derpComboActions=[l.b.ENCHANTED_RIPOSTE.id,l.b.ENCHANTED_ZWERCHHAU.id,l.b.ENCHANTED_REDOUBLEMENT.id],this._severityDerpComboActions={1:d.a.MINOR,2:d.a.MEDIUM,3:d.a.MAJOR},this._notEnoughManaActions=[l.b.RIPOSTE.id,l.b.ZWERCHHAU.id,l.b.REDOUBLEMENT.id],this._severityNotEnoughManaActions={1:d.a.MINOR,2:d.a.MEDIUM,3:d.a.MAJOR},this._severityGenericActions={1:d.a.MINOR,2:d.a.MEDIUM,4:d.a.MAJOR}}addJobSpecificSuggestions(e,t){if(0===e.length&&0===t.length)return!1;let a=0,n=0;e.length>0&&e.map(e=>{this._derpComboActions.includes(e.ability.guid)&&a++,this._notEnoughManaActions.includes(e.ability.guid)&&n++}),a>0&&this.suggestions.add(new d.c({icon:l.b.ENCHANTED_REDOUBLEMENT.icon,why:o.a.createElement(s.Trans,{id:"rdm.combos.suggestions.derpcombos.why",values:{derpComboCount:a}}),content:o.a.createElement(s.Trans,{id:"rdm.combos.suggestions.derpcombos.content"}),tiers:this._severityDerpComboActions,value:a})),n>0&&this.suggestions.add(new d.c({icon:l.b.SCORCH.icon,why:o.a.createElement(s.Trans,{id:"rdm.combos.suggestions.notenoughmanacombos.why",values:{notEnoughManaCount:n}}),content:o.a.createElement(s.Trans,{id:"rdm.combos.suggestions.notenoughmanacombos.content"}),tiers:this._severityNotEnoughManaActions,value:n}));const i=e.length+t.length-a-n;return i>0&&this.suggestions.add(new d.c({icon:l.b.ENCHANTED_REDOUBLEMENT.icon,why:o.a.createElement(s.Trans,{id:"rdm.combos.suggestions.therestcombos.why",values:{theRest:i}}),content:o.a.createElement(s.Trans,{id:"rdm.combos.suggestions.therestcombos.content"}),tiers:this._severityGenericActions,value:i})),!0}}$.suggestionIcon=l.b.ENCHANTED_REDOUBLEMENT.icon;var ee=a(1470),te=a(1243);function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(a),!0).forEach((function(t){ne(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ne(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ie=[l.b.VERHOLY,l.b.VERFLARE],re={1:d.a.MINOR,2:d.a.MEDIUM,3:d.a.MAJOR},oe=4,ce={proc:l.b.VERSTONE,dualcast:l.b.VERAERO,finisher:l.b.VERHOLY},le={proc:l.b.VERFIRE,dualcast:l.b.VERTHUNDER,finisher:l.b.VERFLARE},me=4;class he extends h.c{constructor(){super(...arguments),this._meleeCombos={},this._incorrectFinishers={verholy:0,verflare:0,delay:0},this.addHook("cast",{by:"player",abilityId:l.b.ACCELERATION.id},this._onCast),this.addHook("rdmcast",{by:"player"},this._onCast),this.addHook("death",{to:"player"},this._onDeath),this.addHook("complete",this._onComplete)}_startCombo(e){this._currentCombo={start:e.timestamp,startMana:{white:e.mana.white.beforeCast,black:e.mana.black.beforeCast},startProcs:{verstone:this.combatants.selected.hasStatus(N.b.VERSTONE_READY.id),verfire:this.combatants.selected.hasStatus(N.b.VERFIRE_READY.id),acceleration:this.combatants.selected.hasStatus(N.b.ACCELERATION.id)},events:[e],lastAction:e}}_breakComboIfExists(){this._currentCombo&&(this._currentCombo.broken=!0,this._endCombo())}_endCombo(){this._meleeCombos[this._currentCombo.start]=this._currentCombo,delete this._currentCombo}_handleFinisher(){const e=this._currentCombo;e.finisher.recommendedActions=[],e.finisher.recommendation="";const t={amount:e.startMana.white,procReady:e.startProcs.verstone,actions:ce},a={amount:e.startMana.black,procReady:e.startProcs.verfire,actions:le};let n=null;n=e.startMana.white<e.startMana.black?this._outOfBalanceFinisher(t,a):e.startMana.black<e.startMana.white?this._outOfBalanceFinisher(a,t):this._inBalanceFinisher(a,t),n instanceof Array?n===ie?e.finisher.recommendedActions.push(Object(L.a)(l.b,"id",e.finisher.used.guid)||{}):(Array.prototype.push.apply(e.finisher.recommendedActions,n),this._incorrectFinishers.delay++,e.finisher.recommendation=o.a.createElement(s.Trans,{id:"rdm.meleecombos.recommendation.delay",values:{IGNORE_FINISHER_PROCS_MANA_LOSS_THRESHOLD:oe}})):(e.finisher.recommendedActions.push(n),e.finisher.used.guid!==n.id&&(e.finisher.used.guid===l.b.VERHOLY.id&&this._incorrectFinishers.verholy++,e.finisher.used.guid===l.b.VERFLARE.id&&this._incorrectFinishers.verflare++,e.finisher.recommendation=o.a.createElement(s.Trans,{id:"rdm.meleecombos.recommendation.incorrect"})))}_outOfBalanceFinisher(e,t){const a=this.combatants.selected.hasStatus(N.b.ACCELERATION.id);if(!e.procReady)return e.actions.finisher;const s=this._manaLossToDelayCombo(e,t);if(!t.procReady){const n=_[t.actions.finisher.id].white||_[t.actions.finisher.id].black;return t.amount-e.amount+n>w?null!==s&&s.manaLoss<=oe?s.finisher:e.actions.finisher:a?t.actions.finisher:null!==s&&s.manaLoss<=oe?s.finisher:t.actions.finisher}return null!==s&&s.manaLoss<=oe?s.finisher:ie}_inBalanceFinisher(e,t){if(!this.combatants.selected.hasStatus(N.b.ACCELERATION.id)||e.procReady&&t.procReady){const a=this._manaLossToDelayCombo(e,t);if(null!==a&&a.manaLoss<=oe)return a.finisher}return e.procReady||t.procReady?e.procReady?t.procReady?ie:t.actions.finisher:e.actions.finisher:ie}_manaLossToDelayCombo(e,t){const a=[];if(e.procReady){let s=e.amount+(_[e.actions.proc.id].white||_[e.actions.proc.id].black),n=t.amount+(_[t.actions.dualcast.id].white||_[t.actions.dualcast.id].black);const i=Math.max(s-R,0)+Math.max(n-R,0);if(s=Math.min(s,R),n=Math.min(n,R),s<n)a.push({finisher:[e.actions.proc,t.actions.dualcast,e.actions.finisher],manaLoss:i});else{if(!(s+(_[e.actions.finisher.id].white||_[e.actions.finisher.id].black)-n)>w){(this.combatants.selected.hasStatus(N.b.ACCELERATION.id)||this.cooldowns.getCooldownRemaining(l.b.ACCELERATION.id)<=me)&&a.push({finisher:[e.actions.proc,t.actions.dualcast,l.b.ACCELERATION,e.actions.finisher],manaLoss:i})}}if(!t.procReady){let s=e.amount+(_[e.actions.proc.id].white||_[e.actions.proc.id].black)+(_[e.actions.dualcast.id].white||_[e.actions.dualcast.id].black),n=t.amount;const i=Math.max(s-R,0)+Math.max(n-R,0);if(s=Math.min(s,R),n=Math.min(n,R),n<s)a.push({finisher:[e.actions.proc,e.actions.dualcast,t.actions.finisher],manaLoss:i});else{n+(_[t.actions.finisher.id].white||_[t.actions.finisher.id].black)-s>w||a.push({finisher:[e.actions.proc,e.actions.dualcast,l.b.ACCELERATION,t.actions.finisher],manaLoss:i})}}}else if(t.procReady){let s=e.amount+(_[e.actions.dualcast.id].white||_[e.actions.dualcast.id].black),n=t.amount+(_[t.actions.proc.id].white||_[t.actions.proc.id].black);const i=Math.max(s-R,0)+Math.max(n-R,0);s=Math.min(s,R),n=Math.min(n,R),n<s&&a.push({finisher:[t.actions.proc,e.actions.dualcast,t.actions.finisher],manaLoss:i})}else{let s=e.amount+_[l.b.JOLT_II.id].white,n=t.amount+_[l.b.JOLT_II.id].black+(_[t.actions.dualcast.id].white||_[t.actions.dualcast.id].black);const i=l.b.JOLT_II,r=Math.max(s-R,0)+Math.max(n-R,0);if(s=Math.min(s,R),n=Math.min(n,R),s<n)a.push({finisher:[i,e.actions.dualcast,t.actions.finisher],manaLoss:r});else{let s=e.amount+_[l.b.JOLT_II.id].white+(_[e.actions.dualcast.id].white||_[e.actions.dualcast.id].black),n=t.amount+_[l.b.JOLT_II.id].black;const i=l.b.JOLT_II,r=Math.max(s-R,0)+Math.max(n-R,0);s=Math.min(s,R),n=Math.min(n,R),n<s&&a.push({finisher:[i,e.actions.dualcast,t.actions.finisher],manaLoss:r})}}return a.length>0?(a.sort((e,t)=>e.manaLoss>t.manaLoss?1:e.manaLoss<t.manaLoss?-1:0),a[0]):null}_onCast(e){const t=Object(L.a)(l.b,"id",e.ability.guid);if(t){if(t.combo)if(t.combo.start)this._breakComboIfExists(),this._startCombo(e);else{if(!this._currentCombo)return;if(t.combo.from){(Array.isArray(t.combo.from)?t.combo.from:[t.combo.from]).includes(this._currentCombo.lastAction.ability.guid)?(this._currentCombo.events.push(e),this._currentCombo.lastAction=e,t.combo.end&&(this._currentCombo.finisher={used:e.ability},this._handleFinisher(),this._endCombo())):(this._currentCombo.broken=!0,this._endCombo())}}t.id===l.b.ACCELERATION.id&&this._currentCombo&&this._currentCombo.events.push(e),t.breaksCombo&&this._breakComboIfExists()}}_onDeath(){this._breakComboIfExists()}_onComplete(){this._breakComboIfExists(),this.suggestions.add(new d.c({icon:l.b.VERHOLY.icon,content:o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.wastedverholy.content",components:[o.a.createElement(I.a,se({},l.b.VERHOLY)),o.a.createElement(I.a,se({},l.b.VERFLARE)),o.a.createElement("ol",null),o.a.createElement("li",null),o.a.createElement("li",null),o.a.createElement(I.d,se({},N.b.VERFIRE_READY)),o.a.createElement(I.a,se({},l.b.ACCELERATION)),o.a.createElement("li",null),o.a.createElement(I.a,se({},l.b.ACCELERATION)),o.a.createElement(I.d,se({},N.b.VERFIRE_READY))]}),why:o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.wastedverholy.why",values:{0:this._incorrectFinishers.verflare}}),tiers:re,value:this._incorrectFinishers.verflare})),this.suggestions.add(new d.c({icon:l.b.VERFLARE.icon,content:o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.wastedverflare.content",components:[o.a.createElement(I.a,se({},l.b.VERFLARE)),o.a.createElement(I.a,se({},l.b.VERHOLY)),o.a.createElement("ol",null),o.a.createElement("li",null),o.a.createElement("li",null),o.a.createElement(I.d,se({},N.b.VERSTONE_READY)),o.a.createElement(I.a,se({},l.b.ACCELERATION)),o.a.createElement("li",null),o.a.createElement(I.a,se({},l.b.ACCELERATION)),o.a.createElement(I.d,se({},N.b.VERSTONE_READY))]}),why:o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.wastedverflare.why",values:{0:this._incorrectFinishers.verholy}}),tiers:re,value:this._incorrectFinishers.verholy})),this.suggestions.add(new d.c({icon:l.b.VERSTONE.icon,content:o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.wastedprocs.content",components:[o.a.createElement(I.a,se({},l.b.ACCELERATION))]}),why:o.a.createElement(s.Trans,{id:"rdm.gauge.suggestions.wastedprocs.why",values:{0:this._incorrectFinishers.delay}}),tiers:re,value:this._incorrectFinishers.delay}))}output(){return o.a.createElement(ee.a,{compact:!0,unstackable:!0,celled:!0},o.a.createElement(ee.a.Header,null,o.a.createElement(ee.a.Row,null,o.a.createElement(ee.a.HeaderCell,{collapsing:!0},o.a.createElement("strong",null,o.a.createElement(s.Trans,{id:"rdm.meleecombos.table.header.time"}))),o.a.createElement(ee.a.HeaderCell,{collapsing:!0},o.a.createElement("strong",null,o.a.createElement(s.Trans,{id:"rdm.meleecombos.table.header.starting-mana"}))),o.a.createElement(ee.a.HeaderCell,{collapsing:!0},o.a.createElement("strong",null,o.a.createElement(s.Trans,{id:"rdm.meleecombos.table.header.starting-procs"}))),o.a.createElement(ee.a.HeaderCell,{collapsing:!0},o.a.createElement("strong",null,o.a.createElement(s.Trans,{id:"rdm.meleecombos.table.header.rotation"}))),o.a.createElement(ee.a.HeaderCell,null,o.a.createElement("strong",null,o.a.createElement(s.Trans,{id:"rdm.meleecombos.table.header.recommended"}))))),o.a.createElement(ee.a.Body,null,Object.keys(this._meleeCombos).map(e=>{const t=this._meleeCombos[e],a=t.startMana.white,s=t.startMana.black,n=t.events,i=e-this.parser.fight.start_time,r=n[n.length-1].timestamp-this.parser.fight.start_time,c=t.finisher?t.finisher.recommendedActions:[],l=t.finisher?t.finisher.recommendation:"";return o.a.createElement(ee.a.Row,{key:e},o.a.createElement(ee.a.Cell,{textAlign:"center"},o.a.createElement("span",{style:{marginRight:5}},Object(S.d)(i/1e3)),o.a.createElement(te.a,{circular:!0,compact:!0,size:"mini",icon:"time",onClick:()=>this.timeline.show(i,r)})),o.a.createElement(ee.a.Cell,null,o.a.createElement("span",{style:{whiteSpace:"nowrap"}},a," White | ",s," Black")),o.a.createElement(ee.a.Cell,{textAlign:"center"},o.a.createElement("span",null,Object.keys(t.startProcs).map(e=>{if(t.startProcs[e])switch(e){case"verstone":return o.a.createElement(I.d,se({key:"verstone",showName:!1},N.b.VERSTONE_READY));case"verfire":return o.a.createElement(I.d,se({key:"verfire",showName:!1},N.b.VERFIRE_READY));case"acceleration":return o.a.createElement(I.d,se({key:"acceleration",showName:!1},N.b.ACCELERATION))}}))),o.a.createElement(ee.a.Cell,null,o.a.createElement("span",{style:{whiteSpace:"nowrap"}},o.a.createElement(D.a,{events:n}))),o.a.createElement(ee.a.Cell,null,c.map(e=>o.a.createElement(I.a,se({key:e.id,showName:!1},e))),o.a.createElement("br",null),l))})))}}he.handle="meleecombos",he.dependencies=["combatants","suggestions","cooldowns","timeline"],he.title="Melee Combos";var de=a(1281),ue=a(1286);function be(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?be(Object(a),!0).forEach((function(t){pe(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):be(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function pe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const ge=3,fe=3,_e=4,ye=2;class Ce extends h.c{constructor(){super(...arguments),this._history=[],this._lastManafic={timestamp:0,cac:0,disp:0,engagement:0,events:[]},this.addHook("cast",{by:"player",abilityId:[l.b.MANAFICATION.id,l.b.CORPS_A_CORPS.id,l.b.DISPLACEMENT.id,l.b.ENGAGEMENT.id]},this._onCast),this.addHook("complete",this._onComplete),this._lastManafic.timestamp=this.parser.fight.start_time}_onCast(e){const t=e.ability.guid;switch(null===this._lastManafic&&(this._lastManafic={timestamp:e.timestamp,cac:0,disp:0,engagement:0,events:[]}),t){case l.b.MANAFICATION.id:return this._history.push(this._lastManafic),void(this._lastManafic={timestamp:e.timestamp,cac:0,disp:0,engagement:0,events:[]});case l.b.DISPLACEMENT.id:this._lastManafic.disp++;break;case l.b.ENGAGEMENT.id:this._lastManafic.engagement++;break;case l.b.CORPS_A_CORPS.id:this._lastManafic.cac++}this._lastManafic.events.push(e)}_onComplete(){const e=[],t=o.a.createElement(s.Trans,{id:"rdm.movementskills.description",components:[o.a.createElement(I.a,Ee({},Object(L.a)(l.b,"id",l.b.CORPS_A_CORPS.id))),o.a.createElement(I.a,Ee({},Object(L.a)(l.b,"id",l.b.DISPLACEMENT.id))),o.a.createElement(I.a,Ee({},Object(L.a)(l.b,"id",l.b.ENGAGEMENT.id))),o.a.createElement(I.a,Ee({},Object(L.a)(l.b,"id",l.b.MANAFICATION.id)))]});this._history.push(this._lastManafic);const a=this._history.reduce((e,t)=>({manafics:e.manafics+1,cacs:e.cacs+t.cac,disp:e.disp+t.disp,engagement:e.engagement+t.engagement}),{cacs:0,disp:0,engagement:0,manafics:0});a.manafics=a.manafics-2,e.push(this._checkCac(a.cacs,a.manafics,l.b.CORPS_A_CORPS.id)),e.push(this._checkDisp(a.disp,a.engagement,l.b.DISPLACEMENT.id,a.manafics)),this.checklist.add(new ue.b({name:o.a.createElement(s.Trans,{id:"rdm.movementSkills.use-movement-cds"}),description:t,requirements:e,target:95}))}_checkCac(e,t,a){let s=t*ge,n=0;return s-=ye,n=e>s?100:e/s*100,new ue.a({name:o.a.createElement(I.a,Ee({},Object(L.a)(l.b,"id",a))),percent:n})}_checkDisp(e,t,a,s){let n=0;if(e||(e=0),e/fe===s||t/_e===s)return new ue.a({name:o.a.createElement(I.a,Ee({},Object(L.a)(l.b,"id",a))),percent:100});const i=e%fe,r=(s-(e-i)/fe)*_e-i+e;return n=Math.max(Math.min((e+t)/r*100,100),0),new ue.a({name:o.a.createElement(I.a,Ee({},Object(L.a)(l.b,"id",a))),percent:n})}output(){const e=this._history.map(e=>({key:e.timestamp,title:{key:"title-"+e.timestamp,content:o.a.createElement(r.Fragment,null,this.parser.formatTimestamp(e.timestamp),o.a.createElement("span",null," - "),e.events.length," ",o.a.createElement(s.Trans,{id:"rdm.movementskills.panels.content"}))},content:{key:"content-"+e.timestamp,content:o.a.createElement(D.a,{events:e.events})}}));return o.a.createElement(r.Fragment,null,o.a.createElement(de.a,null,o.a.createElement(s.Trans,{id:"rdm.movementskills.accordion.message",components:[o.a.createElement(I.a,Ee({},Object(L.a)(l.b,"id",l.b.MANAFICATION.id)))]})),o.a.createElement(k.a,{exclusive:!1,panels:e,styled:!0,fluid:!0}))}}Ce.handle="movementSkills",Ce.title={id:"rdm.movementskills.title",defaults:"Movement Skills"},Ce.dependencies=["checklist"],a.d(t,"DualStatistic",(function(){return p}));t.default=[A,x,W,X,$,he,Ce]}}]);
//# sourceMappingURL=jobs-rdm.c2eb4a72.js.map
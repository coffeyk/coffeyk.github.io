{"version":3,"sources":["webpack:///./src/components/ui/RotationTable.tsx","webpack:///./src/parser/core/Combatant.js","webpack:///./src/parser/core/modules/Combatants.js","webpack:///./src/components/ui/TimeLineChart.js","webpack:///./src/parser/core/modules/Combos.tsx","webpack:///./src/parser/core/modules/GlobalCooldown.js","webpack:///./src/parser/core/modules/BuffWindow.tsx","webpack:///./src/parser/core/modules/Statuses.js","webpack:///./src/parser/jobs/sam/modules/kenki.png","webpack:///./src/parser/jobs/sam/modules/Kenki.module.css?9c4d","webpack:///./src/parser/jobs/sam/modules/AoeChecker.js","webpack:///./src/parser/jobs/sam/modules/Buffs.js","webpack:///./src/parser/jobs/sam/modules/Combos.ts","webpack:///./src/parser/jobs/sam/modules/Higanbana.js","webpack:///./src/parser/jobs/sam/modules/Kaiten.js","webpack:///./src/parser/jobs/sam/modules/Kenki.js","webpack:///./src/parser/jobs/sam/modules/Sen.tsx","webpack:///./src/parser/jobs/sam/modules/Speedmod.js","webpack:///./src/parser/jobs/sam/modules/Meikyo.tsx","webpack:///./src/parser/jobs/sam/modules/ThirdEye.js","webpack:///./src/parser/jobs/sam/modules/Tsubame.js","webpack:///./src/parser/jobs/sam/modules/OGCDDowntime.ts","webpack:///./src/parser/jobs/sam/modules/Shoha.tsx","webpack:///./src/parser/jobs/sam/modules/Statuses.js","webpack:///./src/parser/jobs/sam/modules/index.js"],"names":["RotationTable","React","Component","render","targets","notes","data","onGoto","headerTitle","this","props","compact","unstackable","celled","Header","Row","HeaderCell","collapsing","id","map","target","i","key","textAlign","header","note","Body","entry","start","targetAccessorResolver","accessor","targetsData","actual","expected","notesAccessorResolver","notesMap","TargetCell","Cell","positive","undefined","negative","end","rotation","style","marginRight","formatDuration","circular","size","icon","onClick","targetEntry","events","noteEntry","Combatant","Entity","constructor","parser","info","super","name","type","guid","Combatants","Entities","arguments","_players","getEntities","getEntity","actorId","player","report","friendlies","find","handle","DEFAULT_OPTIONS","aspectRatio","scales","xAxes","time","displayFormats","minute","second","millisecond","tooltipFormat","TimeLineChart","PureComponent","options","width","height","DEFAULT_GCD","GCD_TIMEOUT_MILLIS","ISSUE_TYPENAMES","uncomboed","combobreak","failedcombo","Combos","Module","lastGcdTime","fight","start_time","currentComboChain","issues","init","addHook","by","onCast","onComplete","lastComboEvent","ability","filter","issue","event","fabricateComboEvent","combo","timestamp","fabricateEvent","recordBrokenCombo","context","isAllowableComboBreak","push","recordUncomboedGcd","recordFailedCombo","checkCombo","lastAction","from","Array","isArray","includes","action","getAction","onGcd","breaksCombo","successfulHit","addJobSpecificSuggestions","comboBreakers","uncomboedGcds","suggestions","add","TieredSuggestion","suggestionIcon","content","tiers","1","SEVERITY","MINOR","2","MEDIUM","4","MAJOR","value","length","why","output","startTime","sort","a","b","completeContext","startEvent","endEvent","startAction","endAction","cooldown","reason","whiteSpace","timeline","show","title","displayOrder","DISPLAY_ORDER","COMBOS","__decorate","dependency","__metadata","Data","prototype","Suggestions","Timeline","MIN_GCD","MAX_GCD","BASE_GCD","CASTER_TAX","DEBUG_LOG_SAVED_GCDS","GlobalCooldown","_castingEvent","_estimatedBaseGcd","_estimateGcdCount","_lastGcd","isInstant","gcds","gcdGroupId","_onComplete","normalise","byPlayer","hasBeginCast","relevantEvent","saveGcd","_debugLogSavedGcds","forEach","gcd","formatTimestamp","actionId","instant","taxed","casterTaxed","console","log","normalizedLength","speedMod","addGroup","Group","order","addItem","Item","_getGcdLength","group","src","alt","estimate","getEstimate","statistics","SimpleStatistic","actions","ATTACK","gcdInfo","speedmod","get","castTime","isCasterTaxed","gcdLength","Math","round","correctedCooldown","gcdRecast","normaliseWith","normalizedGcd","bound","lengths","math","mean","mode","max","min","getUptime","reduce","carry","duration","downtime","getDowntime","cooldownRatio","dependencies","BuffWindowState","e","getActionCountByIds","actionsById","BuffWindowModule","buffWindows","lastBuffWindow","onApplyBuff","onRemoveBuff","autoAttack","activeBuffWindow","considerAction","buffStatus","startNewBuffWindow","getBaselineExpectedGCDs","buffWindow","expectedGCDs","expectedPerWindow","changeExpectedGCDsClassLogic","reduceExpectedGCDsEndOfFight","windowDurationMillis","fightTimeRemaining","end_time","gcdEstimate","globalCooldown","ceil","getBaselineExpectedTrackedAction","changeExpectedTrackedActionClassLogic","getBuffWindowExpectedGCDs","getBuffWindowRequiredGCDsUsed","requiredGCDs","allowedGCDsById","getBuffWindowExpectedTrackedActions","getBuffWindowNotes","missedGCDs","sum","buffAction","suggestionContent","severityTiers","invalidGCDs","trackedActions","missedActions","trackedAction","trackedBadActions","badActions","rotationTargets","notesData","showName","rotationTableNotesColumnHeader","rotationData","windowStart","windowEnd","missedgcd","badgcd","rotationTableHeader","STATUS_APPLY_ON_PARTY_THRESHOLD_MILLISECONDS","Statuses","_statuses","_groups","_statusToActionMap","_actionToMergeNameMap","byFilter","pets","p","_onApply","_onRefresh","_onRemove","cooldowns","cooldownOrder","cd","merge","ac","Object","values","statusesApplied","statusKey","status","statuses","_isStatusAppliedToPet","_addStatus","_endPrevStatus","getStatus","statusEntry","prev","usages","some","it","abs","_createGroupForStatus","st","stid","statusesStackMapping","ItemGroup","showNested","attachToGroup","friendlyPets","targetID","module","exports","AOE_GCDS","Set","ACTIONS","FUGA","OKA","MANGETSU","AOE_SENS","TENKA_GOKEN","KAESHI_GOKEN","AOE_KENKI","HISSATSU_KYUTEN","HISSATSU_GUREN","GAIN_AT_3","GAIN_AT_2","GAIN3","GAIN2","AoeChecker","_badAoeGCDs","_badSenCasts","_badKenkiCasts","_onAoe","has","hits","3","5","Buffs","checklist","Rule","description","JINPU","SHIFU","requirements","Requirement","percent","getUptimePercent","STATUSES","StatusId","combatants","getStatusUptime","fightDuration","invuln","getInvulnerableUptime","CoreCombos","selected","hasStatus","MEIKYO_SHISUI","HAKAZE","STATUS_DURATION","HIGANBANA","CLIPPING_SEVERITY","1000","30000","60000","Higanbana","_lastApplication","_clip","abilityId","_onDotApply","statusId","applicationKey","targetInstance","lastApplication","clip","getUntargetableUptime","getDotUptimePercent","maxClip","enemies","KAITEN_GCDS","ENPI","GEKKO","KASHA","YUKIKAZE","MIDARE_SETSUGEKKA","Kaiten","_badKaitenCasts","_missedKaitenCasts","_onCast","KAITEN","hasOwnProperty","HISSATSU_KAITEN","IAIJUTSU","MAX_KENKI","KENKI_ACTIONS","cast","positional","IKISHOTEN","HISSATSU_GYOTEN","HISSATSU_YATEN","HISSATSU_SEIGAN","HISSATSU_SHINTEN","HISSATSU_SENEI","KENKI_PER_MEDITATE_TICK","MEDITATE_TICK_FREQUENCY","MAX_MEDITATE_TICKS","Kenki","_kenki","_history","_wasted","transfer","_badGuren","keys","Number","_onAction","MEDITATE","_onApplyMeditate","_onRemoveMeditate","to","_set","modify","known","potential","newMaxWaste","t","currentTimestamp","y","meditateStart","diff","ticks","floor","kenkiIcon","20","35","_badGurens","sam","Color","JOBS","SAMURAI","colour","datasets","label","steppedLine","fill","borderColor","pointRadius","pointHitRadius","backgroundColor","fade","className","styles","helpText","legend","tooltips","displayColors","SEN","SEN_ACTIONS","SETSU","GETSU","KA","KENKI_PER_SEN","KAESHI_HIGANBANA","KAESHI_SETSUGEKKA","Sen","sen","allowoverwrite","wasted","onAction","remove","HAGAKURE","onHagakure","activeSen","active","kenki","Speedmod","CoreSpeedmod","SPEED_BUFF_STATUS_IDS","ONLY_SHOW","MeikyoShisui","ThirdEye","_thirdEyes","_openEyes","_seiganEyes","_badEyes","MERCIFUL_EYES","_onBadSpend","_onSpend","THIRD_EYE","_onEye","EYES_OPEN","_onGain","unopenedEyes","unspentEyes","Suggestion","severity","Tsubame","_kaeshiFailures","_kaeshiMidare","_onBadTsubame","_onDoubleMidare","totalUses","badUses","TSUBAME_GAESHI","_badUses","FIRSTUSEOFFSET_MEIKYO","FIRSTUSEOFFSET_TSUBAME","DEFAULT_ALLOWED_DOWNTIME","MEIKYO_ALLOWED_DOWNTIME","OGCDDowntime","CooldownDowntime","defaultAllowedAverageDowntime","trackedCds","firstUseOffset","allowedAverageDowntime","GENERATORS","SPENDERS","SHOHA","MAX_STACKS","Shoha","stacks","shohaUses","stackHistory","wasteBySource","RAISE","leftoverStacks","totalGeneratedStacks","pushToHistory","onGenerate","onSpend","addEventHook","MEDITATION","onMeditateGain","onDeath","generatedStacks","addWaste","waste","dumpRemainingResources","convertWasteMapToTable","rows","convertWasteEntryToRow","actionName","margin","padding","meditationWastePanels","stackColor","chartData","yAxes","beginAtZero","callback","Accordion","exclusive","panels","styled","fluid","displayMode","DISPLAY_MODE","FULL","Checklist","CoreStatuses","Meikyo"],"mappings":"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","file":"assets/jobs-sam.03a62a3c.js","sourcesContent":["import { Trans } from '@lingui/react';\nimport Rotation from 'components/ui/Rotation';\nimport React from 'react';\nimport { Button, Table } from 'semantic-ui-react';\nimport { formatDuration } from 'utilities';\nexport class RotationTable extends React.Component {\n    render() {\n        const { targets, notes, data, onGoto, headerTitle, } = this.props;\n        return <Table compact unstackable celled>\n\t\t\t<Table.Header>\n\t\t\t\t<Table.Row>\n\t\t\t\t\t<Table.HeaderCell collapsing>\n\t\t\t\t\t\t<strong><Trans id=\"core.ui.rotation-table.header.time\">Time</Trans></strong>\n\t\t\t\t\t</Table.HeaderCell>\n\t\t\t\t\t{(targets || []).map((target, i) => <Table.HeaderCell key={`target_header_${i}`} textAlign=\"center\" collapsing>\n\t\t\t\t\t\t\t\t<strong>{target.header}</strong>\n\t\t\t\t\t\t\t</Table.HeaderCell>)}\n\t\t\t\t\t<Table.HeaderCell>\n\t\t\t\t\t\t<strong>{(headerTitle) ? headerTitle : <Trans id=\"core.ui.rotation-table.header.rotation\">Rotation</Trans>}</strong>\n\t\t\t\t\t</Table.HeaderCell>\n\t\t\t\t\t{(notes || []).map((note, i) => <Table.HeaderCell key={`note_header_${i}`} textAlign=\"center\" collapsing>\n\t\t\t\t\t\t\t\t<strong>{note.header}</strong>\n\t\t\t\t\t\t\t</Table.HeaderCell>)}\n\t\t\t\t</Table.Row>\n\t\t\t</Table.Header>\n\t\t\t<Table.Body>\n\t\t\t\t{data.map((entry) => <RotationTable.Row key={entry.start} onGoto={onGoto} targets={targets || []} notes={notes || []} {...entry}/>)}\n\t\t\t</Table.Body>\n\t\t</Table>;\n    }\n}\nRotationTable.targetAccessorResolver = (entry, target) => {\n    if (typeof target.accessor === 'string' && entry.targetsData != null) {\n        return entry.targetsData[target.accessor];\n    }\n    else if (typeof target.accessor === 'function') {\n        return target.accessor(entry);\n    }\n    else {\n        return {\n            actual: 0,\n            expected: 0,\n        };\n    }\n};\nRotationTable.notesAccessorResolver = (entry, note) => {\n    if (typeof note.accessor === 'string' && entry.notesMap != null) {\n        return entry.notesMap[note.accessor];\n    }\n    else if (typeof note.accessor === 'function') {\n        return note.accessor(entry);\n    }\n    else {\n        return null;\n    }\n};\nRotationTable.TargetCell = ({ actual, expected }) => <Table.Cell textAlign=\"center\" positive={expected === undefined ? false : actual >= expected} negative={expected === undefined ? false : actual < expected}>\n\t\t\t{actual}/{expected === undefined ? '-' : expected}\n\t\t</Table.Cell>;\nRotationTable.Row = ({ onGoto, targets, notes, notesMap, start, end, targetsData, rotation }) => <Table.Row>\n\t\t\t<Table.Cell textAlign=\"center\">\n\t\t\t\t<span style={{ marginRight: 5 }}>{formatDuration(start / 1000)}</span>\n\t\t\t\t{typeof onGoto === 'function' && <Button circular compact size=\"mini\" icon=\"time\" onClick={() => onGoto(start, end)}/>}\n\t\t\t</Table.Cell>\n\t\t\t{targets\n    .map(target => RotationTable.targetAccessorResolver({ start, end, targetsData, rotation }, target))\n    .map((targetEntry, i) => <RotationTable.TargetCell key={`target_${i}`} {...targetEntry}/>)}\n\t\t\t<Table.Cell>\n\t\t\t\t<Rotation events={rotation}/>\n\t\t\t</Table.Cell>\n\t\t\t{notes\n    .map(note => RotationTable.notesAccessorResolver({ start, end, targetsData, notesMap, rotation }, note))\n    .map((noteEntry, i) => <Table.Cell key={`notes_${i}`} textAlign=\"center\">\n\t\t\t\t\t\t\t{noteEntry}\n\t\t\t\t\t\t</Table.Cell>)}\n\t\t</Table.Row>;\n","import Entity from './Entity';\n// This is basically a copy of Enemy - XIV doesn't really have as much on Combatants as WoW.\n// TODO: Should I just merge all this crap into the Entity handlers and call it a day?\nexport default class Combatant extends Entity {\n    constructor(parser, info) {\n        super(parser);\n        this.info = null;\n        this.info = info;\n    }\n    get name() { return this.info.name; }\n    get type() { return this.info.type; }\n    get guid() { return this.info.guid; }\n    get id() { return this.info.id; }\n}\n","import Entities from './Entities';\nimport Combatant from '../Combatant';\nexport default class Combatants extends Entities {\n    constructor() {\n        super(...arguments);\n        this._players = {};\n    }\n    getEntities() {\n        return this._players;\n    }\n    getEntity(actorId) {\n        let player = this._players[actorId];\n        if (!player) {\n            const info = this.parser.report.friendlies.find(player => player.id === actorId);\n            if (!info) {\n                return null;\n            }\n            this._players[actorId] = player = new Combatant(this.parser, info);\n        }\n        return player;\n    }\n    get selected() {\n        return this.getEntity(this.parser.player.id);\n    }\n}\nCombatants.handle = 'combatants';\n","import _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\nimport { Line } from 'react-chartjs-2';\nconst DEFAULT_OPTIONS = {\n    aspectRatio: 3,\n    scales: {\n        xAxes: [{\n                type: 'time',\n                time: {\n                    displayFormats: {\n                        minute: 'm:ss',\n                        second: 'm:ss',\n                        millisecond: 'm:ss.SS',\n                    },\n                    // This tooltip format displays similar to a \"relative\" timestamp,\n                    // since react assumes UNIX epoch timestamps for the data.\n                    tooltipFormat: 'mm:ss.SSS',\n                },\n            }],\n    },\n};\nexport default class TimeLineChart extends PureComponent {\n    render() {\n        const options = _.merge({}, DEFAULT_OPTIONS, this.props.options || {});\n        return <Line data={this.props.data} options={options} \n        // Using this trash 'cus aspectRatio doesn't work with the react wrapper\n        width={options.aspectRatio} height={1}/>;\n    }\n}\nTimeLineChart.propTypes = {\n    data: PropTypes.object.isRequired,\n    options: PropTypes.object,\n};\n","// If you can make it through this entire file without hitting semantic saturation of the word \"combo\", hats off to you. IT DOESN'T LOOK REAL ANYMORE.\nimport { __decorate, __metadata } from \"tslib\";\nimport { t } from '@lingui/macro';\nimport { Plural, Trans } from '@lingui/react';\nimport { RotationTable } from 'components/ui/RotationTable';\nimport _ from 'lodash';\nimport Module, { dependency } from 'parser/core/Module';\nimport DISPLAY_ORDER from 'parser/core/modules/DISPLAY_ORDER';\nimport Suggestions, { SEVERITY, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport Timeline from 'parser/core/modules/Timeline';\nimport React from 'react';\nimport { Data } from './Data';\nconst DEFAULT_GCD = 2.5;\nconst GCD_TIMEOUT_MILLIS = 15000;\nconst ISSUE_TYPENAMES = {\n    uncomboed: <Trans id=\"core.combos.issuetypenames.uncomboed\">Uncomboed</Trans>,\n    combobreak: <Trans id=\"core.combos.issuetypenames.combobreak\">Broken Combo</Trans>,\n    failedcombo: <Trans id=\"core.combos.issuetypenames.failed\">Missed or Invulnerable</Trans>,\n};\nexport default class Combos extends Module {\n    constructor() {\n        super(...arguments);\n        this.lastGcdTime = this.parser.fight.start_time;\n        this.currentComboChain = [];\n        this.issues = [];\n    }\n    init() {\n        this.addHook('aoedamage', { by: 'player' }, this.onCast);\n        this.addHook('complete', this.onComplete);\n    }\n    get lastComboEvent() {\n        return _.last(this.currentComboChain) || null;\n    }\n    get lastAction() {\n        const lastComboEvent = this.lastComboEvent;\n        if (!lastComboEvent) {\n            return null;\n        }\n        return lastComboEvent.ability.guid;\n    }\n    get comboBreakers() {\n        return this.issues\n            .filter(issue => issue.type === 'combobreak')\n            .map(issue => issue.event);\n    }\n    get uncomboedGcds() {\n        return this.issues\n            .filter(issue => issue.type === 'uncomboed')\n            .map(issue => issue.event);\n    }\n    fabricateComboEvent(event) {\n        const combo = {\n            ...event,\n            type: 'combo',\n        };\n        delete combo.timestamp; // Since fabricateEvent adds that in anyway\n        this.parser.fabricateEvent(combo);\n    }\n    recordBrokenCombo(event, context) {\n        if (!this.isAllowableComboBreak(event, context)) {\n            this.issues.push({\n                type: 'combobreak',\n                event,\n                context,\n            });\n        }\n        this.currentComboChain = [];\n    }\n    recordUncomboedGcd(event) {\n        this.issues.push({\n            type: 'uncomboed',\n            event,\n            context: [],\n        });\n        this.currentComboChain = [];\n    }\n    recordFailedCombo(event, context) {\n        this.issues.push({\n            type: 'failedcombo',\n            event,\n            context,\n        });\n        this.currentComboChain = [];\n    }\n    /**\n     *\n     * @param combo\n     * @param event\n     * @return true if combo, false otherwise\n     */\n    checkCombo(combo /* Should be an Action type */, event) {\n        // Not in a combo\n        if (this.lastAction == null) {\n            // Combo starter, we good\n            if (combo.start) {\n                this.fabricateComboEvent(event);\n                return true;\n            }\n            // Combo action that isn't a starter, that's a paddlin'\n            if (combo.from) {\n                this.recordUncomboedGcd(event);\n                return false;\n            }\n        }\n        if (combo.start) {\n            // Broken combo - starting a new combo while in a current combo\n            this.recordBrokenCombo(event, this.currentComboChain);\n            return true; // Start a new combo\n        }\n        // Check if action continues existing combo\n        if (combo.from) {\n            const fromOptions = Array.isArray(combo.from) ? combo.from : [combo.from];\n            if (fromOptions.includes(this.lastAction)) {\n                // Combo continued correctly\n                this.fabricateComboEvent(event);\n                // If it's a finisher, reset the combo\n                return !combo.end;\n            }\n        }\n        // Action did not continue combo correctly and is not a new combo starter\n        this.recordBrokenCombo(event, this.currentComboChain);\n        return false;\n    }\n    onCast(event) {\n        const action = this.data.getAction(event.ability.guid);\n        if (!action) {\n            return;\n        }\n        // Only track GCDs that either progress or break combos so actions like Drill and Shadow Fang don't falsely extend the simulated combo timer\n        if (action.onGcd && (action.combo || action.breaksCombo)) {\n            if (event.timestamp - this.lastGcdTime > GCD_TIMEOUT_MILLIS) {\n                // If we've had enough downtime between GCDs to let the combo expire, reset the state so we don't count erroneous combo breaks\n                this.currentComboChain = [];\n            }\n            this.lastGcdTime = event.timestamp;\n        }\n        // If it's a combo action, run it through the combo checking logic\n        if (action.combo) {\n            if (!event.successfulHit) {\n                // Failed attacks break combo\n                this.recordFailedCombo(event, this.currentComboChain);\n                return;\n            }\n            const continueCombo = this.checkCombo(action.combo, event);\n            if (continueCombo) {\n                this.currentComboChain.push(event);\n            }\n            else {\n                this.currentComboChain = [];\n            }\n        }\n        if (action.breaksCombo && this.lastAction !== null) {\n            // Combo breaking action, that's a paddlin'\n            this.recordBrokenCombo(event, this.currentComboChain);\n        }\n    }\n    onComplete() {\n        if (this.addJobSpecificSuggestions(this.comboBreakers, this.uncomboedGcds)) {\n            return;\n        }\n        this.suggestions.add(new TieredSuggestion({\n            icon: this.constructor.suggestionIcon,\n            content: <Trans id=\"core.combos.content\">\n\t\t\t\t<p>Avoid breaking combos, as failing to complete combos costs you a significant amount of DPS and important secondary effects.</p>\n\t\t\t\t<p>Using a combo GCD at the wrong combo step, using non-combo GCDs while inside a combo, missing, or attacking a target that is invulnerable will cause your combo to break.</p>\n\t\t\t</Trans>,\n            tiers: {\n                1: SEVERITY.MINOR,\n                2: SEVERITY.MEDIUM,\n                4: SEVERITY.MAJOR,\n            },\n            value: this.issues.length,\n            why: <Plural id=\"core.combos.why\" value={this.issues.length} one=\"You misused # combo action.\" other=\"You misused # combo actions.\"/>,\n        }));\n    }\n    /**\n     * To be overridden by subclasses. This is called in _onComplete() and passed two arrays of event objects - one for events that\n     * broke combos, and one for combo GCDs used outside of combos. Subclassing modules can add job-specific suggestions based on\n     * what particular actions were misused and when in the fight.\n     * The overriding module should return true if the default suggestion is not wanted\n     */\n    addJobSpecificSuggestions(comboBreakers, uncomboedGcds) {\n        return false;\n    }\n    /**\n     * To be overridden by subclasses. This is called in recordBrokenCombo, and receives the event triggering the broken combo,\n     * and the context information for that break. Jobs can override this to indicate whether this broken combo is allowed. If so,\n     * the event and context will not be recorded, and the current combo will be cleared with no other side effects.\n     * Returning false will allow the break to be recorded, and displayed to the user\n     */\n    isAllowableComboBreak(event, context) {\n        return false;\n    }\n    output() {\n        if (this.issues.length <= 0) {\n            return false;\n        }\n        // Access Alias\n        const startTime = this.parser.fight.start_time;\n        const data = this.issues\n            .sort((a, b) => a.event.timestamp - b.event.timestamp)\n            .map(issue => {\n            const completeContext = [...(issue.context || []), issue.event];\n            const startEvent = _.first(completeContext);\n            const endEvent = _.last(completeContext);\n            const startAction = this.data.getAction(startEvent.ability.guid);\n            const endAction = this.data.getAction(endEvent.ability.guid);\n            return ({\n                start: startEvent.timestamp - startTime + (startAction?.cooldown ?? DEFAULT_GCD),\n                end: endEvent.timestamp - startTime + (endAction?.cooldown ?? DEFAULT_GCD),\n                rotation: completeContext,\n                notesMap: {\n                    reason: <span style={{ whiteSpace: 'nowrap' }}>{ISSUE_TYPENAMES[issue.type]}</span>,\n                },\n            });\n        });\n        return <RotationTable notes={[\n            {\n                header: <Trans id=\"core.combos.rotationtable.header.reason\">Reason</Trans>,\n                accessor: 'reason',\n            },\n        ]} data={data} onGoto={this.timeline.show}/>;\n    }\n}\nCombos.handle = 'combos';\nCombos.title = t('core.combos.title') `Combo Issues`;\nCombos.displayOrder = DISPLAY_ORDER.COMBOS;\n// This should be redefined by subclassing modules; the default is the basic 'Attack' icon\nCombos.suggestionIcon = 'https://xivapi.com/i/000000/000405.png';\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Data)\n], Combos.prototype, \"data\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], Combos.prototype, \"suggestions\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Timeline)\n], Combos.prototype, \"timeline\", void 0);\n","import { t } from '@lingui/macro';\nimport { Trans } from '@lingui/react';\nimport math from 'mathjsCustom';\nimport React from 'react';\nimport Module from 'parser/core/Module';\nimport { Group, Item } from './Timeline';\nimport { SimpleStatistic } from './Statistics';\nconst MIN_GCD = 1500;\nconst MAX_GCD = 2500;\nconst BASE_GCD = 2500;\nconst CASTER_TAX = 100;\nconst DEBUG_LOG_SAVED_GCDS = false && process.env.NODE_ENV !== 'production';\n// NOTE: Caster tax refers to spells taking 0.1s longer than their tooltip claims if their cast time is at least as long as their recast time.\n// See https://www.reddit.com/r/ffxiv/comments/8s05rn/the_recast_time_on_your_tooltip_can_be_up_to_85/, specifically:\n//    There is also another issue that influences how long recast times actually take that isnt as heavily influenced by fps but is still affected,\n//    which is animation delay that happen between casts, this means that if you have a spell with a cast time that is equal to or\n//    greater than the recast time you will end up taking longer between casts than the (re)cast time. The delay is around 100 ms at 100+ fps\nexport default class GlobalCooldown extends Module {\n    constructor(...args) {\n        super(...args);\n        this._castingEvent = null;\n        this._estimatedBaseGcd = null;\n        this._estimateGcdCount = -1;\n        this._lastGcd = {\n            isInstant: false,\n            event: null,\n        };\n        this.gcds = [];\n        this.gcdGroupId = 'gcd';\n        this.addHook('complete', this._onComplete);\n    }\n    // Using normalise so the estimate can be used throughout the parse\n    normalise(events) {\n        for (let i = 0; i < events.length; i++) {\n            const event = events[i];\n            // Only care about player GCDs\n            if (!this.parser.byPlayer(event) || !event.ability) {\n                continue;\n            }\n            const action = this.data.getAction(event.ability.guid);\n            if (!action || !action.onGcd) {\n                continue;\n            }\n            // eslint-disable-next-line default-case\n            switch (event.type) {\n                // wowa uses beginchannel for this...? need info for flamethrower/that ast skill/passage of arms\n                case 'begincast':\n                    // Can I check for cancels?\n                    this._castingEvent = event;\n                    break;\n                case 'cast':\n                    const hasBeginCast = this._castingEvent !== null && this._castingEvent.ability.guid === action.id;\n                    const relevantEvent = hasBeginCast ? this._castingEvent : event;\n                    this.saveGcd({ ...this._lastGcd }, relevantEvent.timestamp); // Save last gcd with current timestamp\n                    this._lastGcd.isInstant = !hasBeginCast;\n                    this._lastGcd.event = relevantEvent;\n                    this._castingEvent = null;\n                    break;\n            }\n        }\n        if (events.length) {\n            this.saveGcd({ ...this._lastGcd }, events[events.length - 1].timestamp);\n        }\n        this._debugLogSavedGcds();\n        return events;\n    }\n    _debugLogSavedGcds() {\n        if (!DEBUG_LOG_SAVED_GCDS) {\n            return;\n        }\n        // NOTE: Please sanity-check results when changing normalise or saveGcd. Good test cases include:\n        // - Attributing 1.5s and 2.2s to correct RDM melee gcds\n        // - Sub-0.5s speedmod for BLM fast-casts and correct Instant/CasterTaxed flagging\n        // - Correct timestamp for last event before long gaps (ie: Kefka normal)\n        this.gcds.forEach((gcd) => {\n            const timestamp = this.parser.formatTimestamp(gcd.timestamp);\n            const action = this.data.getAction(gcd.actionId);\n            const instant = gcd.isInstant ? ' Instant' : '';\n            const taxed = gcd.casterTaxed ? ' CasterTaxed' : '';\n            console.log(`${timestamp} ${action.name}[${gcd.length}|${gcd.normalizedLength}] Speedmod[${gcd.speedMod}]${instant}${taxed}`);\n        });\n    }\n    _onComplete() {\n        const startTime = this.parser.fight.start_time;\n        // Timeline output\n        // TODO: Look into adding items to groups? Maybe?\n        this.timeline.addGroup(new Group({\n            id: this.gcdGroupId,\n            content: 'GCD',\n            order: -99,\n        }));\n        this.gcds.forEach(gcd => {\n            const action = this.data.getAction(gcd.actionId);\n            if (!action) {\n                return;\n            }\n            this.timeline.addItem(new Item({\n                type: 'background',\n                start: gcd.timestamp - startTime,\n                length: this._getGcdLength(gcd),\n                title: action.name,\n                group: this.gcdGroupId,\n                content: <img src={action.icon} alt={action.name} title={action.name}/>,\n            }));\n        });\n        // Statistic box\n        const estimate = this.getEstimate(false);\n        this.statistics.add(new SimpleStatistic({\n            title: <Trans id=\"core.gcd.estimated-gcd\">Estimated GCD</Trans>,\n            icon: this.data.actions.ATTACK.icon,\n            value: this.parser.formatDuration(estimate),\n            info: (<Trans id=\"core.gcd.no-statistics\">\n\t\t\t\t\tUnfortunately, player statistics are not available from FF Logs. As such, the calculated GCD length is an <em>estimate</em>, and may well be incorrect. If it is reporting a GCD length <em>longer</em> than reality, you likely need to focus on keeping your GCD rolling.\n\t\t\t\t</Trans>),\n        }));\n    }\n    //saveGcd(event, isInstant) {\n    saveGcd(gcdInfo, timestamp) {\n        if (!gcdInfo.event) {\n            return;\n        }\n        const action = this.data.getAction(gcdInfo.event.ability.guid);\n        if (!action || !action.id) {\n            return;\n        }\n        let speedMod = this.speedmod.get(gcdInfo.event.timestamp);\n        let castTime = action.castTime;\n        // HACK NOTE TODO: Need to properly account for abilities that alter only the cast or recast of attacks.\n        // Thinking of moving this into a module like speedmod, that can be called with a timestamp to grab modified base castTime/cooldown values\n        const HACK_ASTRAL_UMBRAL_SPEED_SCALAR = 0.5;\n        if (speedMod <= HACK_ASTRAL_UMBRAL_SPEED_SCALAR) {\n            speedMod /= HACK_ASTRAL_UMBRAL_SPEED_SCALAR;\n            castTime *= HACK_ASTRAL_UMBRAL_SPEED_SCALAR;\n        }\n        let isCasterTaxed = false;\n        // GCD is only to two decimal places, so round it there. Storing in Ms.\n        // eslint-disable-next-line no-magic-numbers\n        let gcdLength = Math.round((timestamp - gcdInfo.event.timestamp) / 10) * 10;\n        if (!gcdInfo.isInstant && castTime >= action.cooldown) {\n            gcdLength -= CASTER_TAX;\n            isCasterTaxed = true;\n        }\n        const correctedCooldown = action.gcdRecast != null\n            ? action.gcdRecast\n            : action.cooldown;\n        const normaliseWith = gcdInfo.isInstant || castTime < correctedCooldown\n            ? correctedCooldown\n            : castTime;\n        const normalizedGcd = Math.round(gcdLength\n            * ((BASE_GCD / 1000) / normaliseWith)\n            * (1 / speedMod));\n        this.gcds.push({\n            timestamp: gcdInfo.event.timestamp,\n            length: gcdLength,\n            normalizedLength: normalizedGcd,\n            speedMod,\n            castTime,\n            cooldown: correctedCooldown,\n            casterTaxed: isCasterTaxed,\n            actionId: action.id,\n            isInstant: gcdInfo.isInstant,\n        });\n    }\n    getEstimate(bound = true) {\n        const gcdLength = this.gcds.length;\n        // If we don't have cache, need to recaculate it\n        if (this._estimatedBaseGcd === null || gcdLength !== this._estimateGcdCount) {\n            // Calculate the lengths of the GCD\n            const lengths = this.gcds.map(gcd => gcd.normalizedLength);\n            // Mode seems to get best results. Using mean in case there's multiple modes.\n            this._estimatedBaseGcd = lengths.length ? math.mean(math.mode(lengths)) : MAX_GCD;\n            this._estimateGcdCount = gcdLength;\n        }\n        // Bound the result if requested\n        if (bound) {\n            this._estimatedBaseGcd = Math.max(MIN_GCD, Math.min(MAX_GCD, this._estimatedBaseGcd));\n        }\n        return this._estimatedBaseGcd;\n    }\n    getUptime() {\n        return this.gcds.reduce((carry, gcd) => {\n            const duration = this._getGcdLength(gcd);\n            const downtime = this.downtime.getDowntime(gcd.timestamp, gcd.timestamp + duration);\n            return carry + duration - downtime;\n        }, 0);\n    }\n    _getGcdLength(gcd) {\n        let cooldown = (gcd.isInstant || gcd.castTime <= gcd.cooldown)\n            ? gcd.cooldown\n            : Math.max(gcd.castTime, gcd.cooldown);\n        cooldown *= 1000;\n        // Some actions are lower than or equal to min gcd, only adjust with ratios when they are not\n        if (cooldown > MIN_GCD) {\n            const cooldownRatio = this.getEstimate() / MAX_GCD;\n            cooldown = Math.max(MIN_GCD, cooldown * cooldownRatio * gcd.speedMod);\n        }\n        const duration = Math.round(cooldown + (gcd.casterTaxed ? CASTER_TAX : 0));\n        return duration;\n    }\n}\nGlobalCooldown.handle = 'gcd';\nGlobalCooldown.dependencies = [\n    // We need this to normalise before us\n    'precastAction',\n    'castTime',\n    'data',\n    'downtime',\n    'speedmod',\n    'statistics',\n    'timeline',\n];\nGlobalCooldown.title = t('core.gcd.title') `Global Cooldown`;\n","import { __decorate, __metadata } from \"tslib\";\nimport { t } from '@lingui/macro';\nimport { Plural, Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport { RotationTable } from 'components/ui/RotationTable';\nimport _ from 'lodash';\nimport Module, { dependency } from 'parser/core/Module';\nimport GlobalCooldown from 'parser/core/modules/GlobalCooldown';\nimport Suggestions, { TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport Timeline from 'parser/core/modules/Timeline';\nimport React from 'react';\nimport { Data } from './Data';\nexport class BuffWindowState {\n    constructor(data, start) {\n        this.rotation = [];\n        this.data = data;\n        this.start = start;\n    }\n    get gcds() {\n        // TODO: Investigate removing the reliance on data here.\n        return this.rotation\n            .map(e => this.data.getAction(e.ability.guid))\n            .filter(a => a && a.onGcd)\n            .length;\n    }\n    getActionCountByIds(actionsById) {\n        return this.rotation\n            .filter(e => actionsById.includes(e.ability.guid))\n            .length;\n    }\n}\nexport class BuffWindowModule extends Module {\n    constructor() {\n        super(...arguments);\n        this.buffWindows = [];\n    }\n    get activeBuffWindow() {\n        const lastBuffWindow = _.last(this.buffWindows);\n        if (lastBuffWindow && lastBuffWindow.end == null) {\n            return lastBuffWindow;\n        }\n        return undefined;\n    }\n    init() {\n        this.addHook('cast', { by: 'player' }, this.onCast);\n        this.addHook('applybuff', { by: 'player' }, this.onApplyBuff);\n        this.addHook('removebuff', { by: 'player' }, this.onRemoveBuff);\n        this.addHook('complete', this.onComplete);\n    }\n    onCast(event) {\n        const action = this.data.getAction(event.ability.guid);\n        if (!action || action.autoAttack) {\n            // Disregard auto attacks for tracking rotations / events during buff windows\n            return;\n        }\n        if (this.activeBuffWindow && this.considerAction(action)) {\n            this.activeBuffWindow.rotation.push(event);\n        }\n    }\n    /**\n     * This method MAY be overridden to return true or false, indicating whether or not this action should be considered within the buff window\n     * If false is returned, the action will not be tracked AT ALL within the buff window, and will NOT appear within the Rotation column\n     * @param action\n     */\n    considerAction(action) {\n        return true;\n    }\n    onApplyBuff(event) {\n        if (!this.buffStatus || event.ability.guid !== this.buffStatus.id) {\n            return;\n        }\n        this.startNewBuffWindow(event.timestamp);\n    }\n    startNewBuffWindow(startTime) {\n        this.buffWindows.push(new BuffWindowState(this.data, startTime));\n    }\n    onRemoveBuff(event) {\n        if (!this.buffStatus || event.ability.guid !== this.buffStatus.id) {\n            return;\n        }\n        if (this.activeBuffWindow) {\n            this.activeBuffWindow.end = event.timestamp;\n        }\n    }\n    /**\n     * For consumers that have the same number of expected GCDs per window, this will use the expectedPerWindow property\n     *   on expectedGCDs as the baseline\n     * This method MAY be overridden if the logic of expected GCDs per window is variable\n     * @param buffWindow\n     */\n    getBaselineExpectedGCDs(buffWindow) {\n        if (this.expectedGCDs) {\n            return this.expectedGCDs.expectedPerWindow;\n        }\n        return 0;\n    }\n    /**\n     * This method MAY be overridden to provide class-specific rushing logic per BuffWindow - default is no effect\n     * Return a positive number to INCREASE expected GCDs for this window, or a negative number to DECREASE\n     * @param buffWindow\n     */\n    changeExpectedGCDsClassLogic(buffWindow) {\n        return 0;\n    }\n    /**\n     * Handles rushing logic to reduce expected GCDs in a window for end of fight rushing\n     * This method MAY be overridden if class rules for end of fight rushing vary\n     * @param buffWindow\n     */\n    reduceExpectedGCDsEndOfFight(buffWindow) {\n        if (this.buffStatus.duration) {\n            // Check to see if this window is rushing due to end of fight - reduce expected GCDs accordingly\n            const windowDurationMillis = this.buffStatus.duration * 1000;\n            const fightTimeRemaining = this.parser.fight.end_time - buffWindow.start;\n            if (windowDurationMillis >= fightTimeRemaining) {\n                const gcdEstimate = this.globalCooldown.getEstimate();\n                return Math.ceil((windowDurationMillis - fightTimeRemaining) / gcdEstimate);\n            }\n        }\n        // Default: no rushing reduction\n        return 0;\n    }\n    /**\n     * For consumers that have tracked actions that expect the same number of usages per window, this will use the\n     *   expectedPerWindow property on that action as the baseline\n     * This method MAY be overridden if the logic of expected tracked actions per window is variable\n     * @param buffWindow\n     * @param action\n     */\n    getBaselineExpectedTrackedAction(buffWindow, action) {\n        return action.expectedPerWindow || 0;\n    }\n    /**\n     * This method MAY be overridden to provide class-specific logic to change expected uses of a tracked action per BuffWindow - default no effect\n     * Return a positive number to INCREASE expected tracked action usages for this window, or a negative number to DECREASE\n     * @param buffWindow\n     * @param action\n     */\n    changeExpectedTrackedActionClassLogic(buffWindow, action) {\n        return 0;\n    }\n    getBuffWindowExpectedGCDs(buffWindow) {\n        return this.getBaselineExpectedGCDs(buffWindow) + this.changeExpectedGCDsClassLogic(buffWindow) - this.reduceExpectedGCDsEndOfFight(buffWindow);\n    }\n    /**\n     * This method MAY be overridden to provide class-specific logic to determine if the required GCD(s) were used during a given BuffWindow\n     * Classes whose required GCD list vary per window should override this function.\n     * Function MUST return a number of CORRECT GCDs used within the window\n     * @param buffWindow\n     */\n    getBuffWindowRequiredGCDsUsed(buffWindow) {\n        if (!this.requiredGCDs) {\n            return 0;\n        }\n        const allowedGCDsById = this.requiredGCDs.actions.map(a => a.id);\n        return buffWindow.getActionCountByIds(allowedGCDsById);\n    }\n    getBuffWindowExpectedTrackedActions(buffWindow, action) {\n        return this.getBaselineExpectedTrackedAction(buffWindow, action) + this.changeExpectedTrackedActionClassLogic(buffWindow, action);\n    }\n    /**\n     * This method will be called if and only if the rotationTableNotesColumnHeader property is set, to add a notes field for each buff window\n     * Implementing classes MUST define their logic to determine what note to display for each buff window within this method\n     * @param buffWindow\n     */\n    getBuffWindowNotes(buffWindow) {\n        return undefined;\n    }\n    onComplete() {\n        if (this.expectedGCDs) {\n            const missedGCDs = this.buffWindows\n                .reduce((sum, buffWindow) => {\n                const expectedGCDs = this.getBuffWindowExpectedGCDs(buffWindow);\n                return sum + Math.max(0, expectedGCDs - buffWindow.gcds);\n            }, 0);\n            this.suggestions.add(new TieredSuggestion({\n                icon: this.buffAction.icon,\n                content: this.expectedGCDs.suggestionContent,\n                tiers: this.expectedGCDs.severityTiers,\n                value: missedGCDs,\n                why: <Trans id=\"core.buffwindow.suggestions.missedgcd.why\">\n\t\t\t\t\t{missedGCDs} <Plural value={missedGCDs} one=\"GCD was\" other=\"GCDs were\"/> missed during {this.buffAction.name} windows.\n\t\t\t\t</Trans>,\n            }));\n        }\n        if (this.requiredGCDs) {\n            const invalidGCDs = this.buffWindows\n                .reduce((sum, buffWindow) => sum + Math.max(0, buffWindow.gcds - this.getBuffWindowRequiredGCDsUsed(buffWindow)), 0);\n            this.suggestions.add(new TieredSuggestion({\n                icon: this.requiredGCDs.icon,\n                content: this.requiredGCDs.suggestionContent,\n                tiers: this.requiredGCDs.severityTiers,\n                value: invalidGCDs,\n                why: <Trans id=\"core.buffwindow.suggestions.badgcd.why\">\n\t\t\t\t\t{invalidGCDs} incorrect <Plural value={invalidGCDs} one=\"GCD was\" other=\"GCDs were\"/> used during {this.buffAction.name} windows.\n\t\t\t\t</Trans>,\n            }));\n        }\n        if (this.trackedActions) {\n            const missedActions = this.trackedActions.actions\n                .reduce((sum, trackedAction) => sum + this.buffWindows\n                .reduce((sum, buffWindow) => sum + Math.max(0, trackedAction.expectedPerWindow - buffWindow.getActionCountByIds([trackedAction.action.id])), 0), 0);\n            this.suggestions.add(new TieredSuggestion({\n                icon: this.trackedActions.icon,\n                content: this.trackedActions.suggestionContent,\n                tiers: this.trackedActions.severityTiers,\n                value: missedActions,\n                why: <Trans id=\"core.buffwindow.suggestions.trackedaction.why\">\n\t\t\t\t\t<Plural value={missedActions} one=\"# use of a recommended cooldown was\" other=\"# uses of recommended cooldowns were\"/> missed during {this.buffAction.name} windows.\n\t\t\t\t</Trans>,\n            }));\n        }\n        if (this.trackedBadActions) {\n            const badActions = this.trackedBadActions.actions\n                .reduce((sum, trackedAction) => sum + this.buffWindows\n                .reduce((sum, buffWindow) => sum + Math.max(0, buffWindow.getActionCountByIds([trackedAction.action.id]) - trackedAction.expectedPerWindow), 0), 0);\n            this.suggestions.add(new TieredSuggestion({\n                icon: this.trackedBadActions.icon,\n                content: this.trackedBadActions.suggestionContent,\n                tiers: this.trackedBadActions.severityTiers,\n                value: badActions,\n                why: <Trans id=\"core.buffwindow.suggestions.trackedbadaction.why\">\n\t\t\t\t\t<Plural value={badActions} one=\"# use of\" other=\"# uses of\"/> cooldowns that should be avoided during {this.buffAction.name} windows.\n\t\t\t\t</Trans>,\n            }));\n        }\n    }\n    output() {\n        const rotationTargets = [];\n        const notesData = [];\n        if (this.expectedGCDs) {\n            rotationTargets.push({\n                header: <Trans id=\"core.buffwindow.table.header.gcds\">GCDs</Trans>,\n                accessor: 'missedgcd',\n            });\n        }\n        if (this.requiredGCDs) {\n            rotationTargets.push({\n                header: <img src={this.requiredGCDs.icon} alt=\"\" style={{ height: '20px' }}/>,\n                accessor: 'badgcd',\n            });\n        }\n        if (this.trackedActions) {\n            this.trackedActions.actions.forEach((trackedAction) => {\n                rotationTargets.push({\n                    header: <ActionLink showName={false} {...trackedAction.action}/>,\n                    accessor: trackedAction.action.name,\n                });\n            });\n        }\n        if (this.rotationTableNotesColumnHeader) {\n            notesData.push({\n                header: this.rotationTableNotesColumnHeader,\n                accessor: 'notes',\n            });\n        }\n        const rotationData = this.buffWindows\n            .map(buffWindow => {\n            const windowStart = buffWindow.start - this.parser.fight.start_time;\n            const windowEnd = (buffWindow.end != null ? buffWindow.end : buffWindow.start) - this.parser.fight.start_time;\n            const targetsData = {};\n            const notesMap = {};\n            if (this.expectedGCDs) {\n                targetsData.missedgcd = {\n                    actual: buffWindow.gcds,\n                    expected: this.getBuffWindowExpectedGCDs(buffWindow),\n                };\n            }\n            if (this.requiredGCDs) {\n                targetsData.badgcd = {\n                    actual: this.getBuffWindowRequiredGCDsUsed(buffWindow),\n                    expected: this.getBuffWindowExpectedGCDs(buffWindow),\n                };\n            }\n            if (this.trackedActions) {\n                this.trackedActions.actions.forEach((trackedAction) => {\n                    targetsData[trackedAction.action.name] = {\n                        actual: buffWindow.getActionCountByIds([trackedAction.action.id]),\n                        expected: this.getBuffWindowExpectedTrackedActions(buffWindow, trackedAction),\n                    };\n                });\n            }\n            if (this.rotationTableNotesColumnHeader) {\n                notesMap.notes = this.getBuffWindowNotes(buffWindow);\n            }\n            return {\n                start: windowStart,\n                end: windowEnd,\n                targetsData,\n                rotation: buffWindow.rotation,\n                notesMap,\n            };\n        });\n        return <RotationTable targets={rotationTargets} data={rotationData} notes={notesData} onGoto={this.timeline.show} headerTitle={this.rotationTableHeader}/>;\n    }\n}\nBuffWindowModule.handle = 'buffwindow';\nBuffWindowModule.title = t('core.buffwindow.title') `Buff Window`;\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Data)\n], BuffWindowModule.prototype, \"data\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], BuffWindowModule.prototype, \"suggestions\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Timeline)\n], BuffWindowModule.prototype, \"timeline\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", GlobalCooldown)\n], BuffWindowModule.prototype, \"globalCooldown\", void 0);\n","import Module from 'parser/core/Module';\nimport { ItemGroup, Item } from './Timeline';\nimport React from 'react';\nconst STATUS_APPLY_ON_PARTY_THRESHOLD_MILLISECONDS = 2 * 1000;\n// Track statuses applied by actions\nexport default class Statuses extends Module {\n    constructor(...args) {\n        super(...args);\n        this._statuses = {};\n        this._groups = {};\n        this._statusToActionMap = {};\n        this._actionToMergeNameMap = {};\n        const ids = [this.parser.player.id, ...this.parser.player.pets.map(p => p.id)];\n        const byFilter = { by: ids };\n        this.addHook('complete', this._onComplete);\n        this.addHook(['applybuff', 'applydebuff'], byFilter, this._onApply);\n        this.addHook(['refreshdebuff', 'refreshbuff'], byFilter, this._onRefresh);\n        this.addHook(['removebuff', 'removedebuff'], byFilter, this._onRemove);\n        this.cooldowns.constructor.cooldownOrder.forEach(cd => {\n            if (cd && typeof cd === 'object' && cd.merge) {\n                cd.actions.forEach(ac => {\n                    this._actionToMergeNameMap[ac] = cd.name;\n                });\n            }\n        });\n        // Map statuses to actions\n        Object.values(this.data.actions).forEach(action => {\n            if (!action.statusesApplied) {\n                return;\n            }\n            action.statusesApplied.forEach(statusKey => {\n                const status = this.data.statuses[statusKey];\n                this._statusToActionMap[status.id] = action;\n            });\n        });\n    }\n    _onApply(event) {\n        if (this._isStatusAppliedToPet(event)) {\n            return;\n        }\n        this._addStatus(event);\n    }\n    _onRefresh(event) {\n        if (this._isStatusAppliedToPet(event)) {\n            return;\n        }\n        this._endPrevStatus(event);\n        this._addStatus(event);\n    }\n    _onRemove(event) {\n        if (this._isStatusAppliedToPet(event)) {\n            return;\n        }\n        this._endPrevStatus(event);\n    }\n    _endPrevStatus(event) {\n        const status = this.data.getStatus(event.ability.guid);\n        if (!status) {\n            return;\n        }\n        const statusEntry = this._statuses[status.id];\n        if (statusEntry) {\n            const prev = statusEntry.usages[statusEntry.usages.length - 1];\n            if (!prev.end) {\n                prev.end = event.timestamp - this.parser.fight.start_time;\n            }\n        }\n    }\n    _addStatus(event) {\n        const status = this.data.getStatus(event.ability.guid);\n        if (!status) {\n            return;\n        }\n        let statusEntry = this._statuses[status.id];\n        if (!statusEntry) {\n            statusEntry = this._statuses[status.id] = {\n                status: status,\n                usages: [],\n            };\n        }\n        if (statusEntry.usages.some(it => {\n            const diff = Math.abs(event.timestamp - this.parser.fight.start_time - it.start);\n            return diff <= STATUS_APPLY_ON_PARTY_THRESHOLD_MILLISECONDS;\n        })) {\n            return;\n        }\n        statusEntry.usages.push({\n            start: event.timestamp - this.parser.fight.start_time,\n        });\n    }\n    _onComplete() {\n        Object.values(this._statuses).forEach(entry => {\n            const group = this._createGroupForStatus(entry.status);\n            if (!group) {\n                return;\n            }\n            entry.usages.forEach(st => {\n                group.addItem(new Item({\n                    type: 'background',\n                    start: st.start,\n                    end: st.end || st.start + entry.status.duration * 1000,\n                    content: <img src={entry.status.icon} alt={entry.status.name}/>,\n                }));\n            });\n        });\n    }\n    _createGroupForStatus(status) {\n        const stid = 'status-' + (this.constructor.statusesStackMapping[status.id] || status.id);\n        if (this._groups[stid]) {\n            return this._groups[stid];\n        }\n        // find action for status\n        const action = this._statusToActionMap[status.id];\n        if (!action) {\n            return undefined;\n        }\n        const group = new ItemGroup({\n            id: stid,\n            content: status.name,\n            showNested: false,\n        });\n        this._groups[stid] = group;\n        this.timeline.attachToGroup(action.onGcd ? this.gcd.gcdGroupId : (this._actionToMergeNameMap[action.id] || action.id), group);\n        return group;\n    }\n    _isStatusAppliedToPet(event) {\n        return (this.parser.report.friendlyPets.some(p => p.id === event.targetID));\n    }\n}\nStatuses.handle = 'statuses';\nStatuses.dependencies = [\n    'data',\n    'timeline',\n    'cooldowns',\n    'gcd',\n];\nStatuses.statusesStackMapping = {};\n","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"helpText\":\"Kenki-module_helpText__3r8gJ\"};","import { t } from '@lingui/macro';\nimport { Trans, Plural } from '@lingui/react';\nimport React from 'react';\nimport ACTIONS from 'data/ACTIONS';\nimport Module from 'parser/core/Module';\nimport { TieredSuggestion, SEVERITY } from 'parser/core/modules/Suggestions';\n//All sets contain AoE moves to be checked, grouped by type (GCD, SEN, KENKI)\nconst AOE_GCDS = new Set([ACTIONS.FUGA.id, ACTIONS.OKA.id, ACTIONS.MANGETSU.id]);\nconst AOE_SENS = new Set([ACTIONS.TENKA_GOKEN.id, ACTIONS.KAESHI_GOKEN.id]);\nconst AOE_KENKI = new Set([ACTIONS.HISSATSU_KYUTEN.id, ACTIONS.HISSATSU_GUREN.id]);\n//These sets are based on break Points, and not type of resource used\nconst GAIN_AT_3 = new Set([ACTIONS.FUGA.id, ACTIONS.OKA.id, ACTIONS.MANGETSU.id, ACTIONS.HISSATSU_KYUTEN.id]);\nconst GAIN_AT_2 = new Set([ACTIONS.HISSATSU_GUREN.id, ACTIONS.TENKA_GOKEN.id, ACTIONS.KAESHI_GOKEN.id]);\n//saying const # don't work so screw it\nconst GAIN3 = 3;\nconst GAIN2 = 2;\nexport default class AoeChecker extends Module {\n    constructor(...args) {\n        super(...args);\n        this._badAoeGCDs = 0; //amount of aoe GCDs that didn't hit their break point for a gain\n        this._badSenCasts = 0; //amount of Goken/Tsubame Goken that didn't hit the break point for damage gain\n        this._badKenkiCasts = 0; //amount of Kenki Casts that didn't break the damage gain threshold\n        this.addHook('aoedamage', { by: 'player' }, this._onAoe);\n        this.addHook('complete', this._onComplete);\n    }\n    _onAoe(event) {\n        const action = event.ability.guid;\n        //Step 1: Find break point\n        if (GAIN_AT_2.has(action)) {\n            //Step 2: Check break point\n            if (event.hits.length < GAIN2) {\n                //Step 3: Check type of resource used and increment\n                if (AOE_GCDS.has(action)) {\n                    this._badAoeGCDs++;\n                }\n                else if (AOE_SENS.has(action)) {\n                    this._badSenCasts++;\n                }\n                else if (AOE_KENKI.has(action)) {\n                    this._badKenkiCasts++;\n                }\n            }\n        }\n        else if (GAIN_AT_3.has(action)) {\n            //Step 2: Check break point\n            if (event.hits.length < GAIN3) {\n                //Step 3: Check type of resource used and increment\n                if (AOE_GCDS.has(action)) {\n                    this._badAoeGCDs++;\n                }\n                else if (AOE_SENS.has(action)) {\n                    this._badSenCasts++;\n                }\n                else if (AOE_KENKI.has(action)) {\n                    this._badKenkiCasts++;\n                }\n            }\n        }\n    }\n    _onComplete() {\n        //SUGGESTION TIME!\n        this.suggestions.add(new TieredSuggestion({\n            icon: ACTIONS.HISSATSU_GUREN.icon,\n            content: <Trans id=\"sam.aoechecker.suggestions.badkenki.content\">\n\t\t\tUsing aoe moves when you don't reach the target threshold for it to be a gain is a loss.\n\t\t\t</Trans>,\n            tiers: {\n                1: SEVERITY.MINOR,\n                3: SEVERITY.MEDIUM,\n                5: SEVERITY.MAJOR,\n            },\n            value: this._badKenkiCasts,\n            why: <Trans id=\"sam.aoechecker.suggestions.aoekenki.why\">\n\t\t\t\t\tYou misused kenki moves <Plural value={this._badKenkiCasts} one=\"# time\" other=\"# times\"/> during the fight.\n\t\t\t</Trans>,\n        }));\n        this.suggestions.add(new TieredSuggestion({\n            icon: ACTIONS.TENKA_GOKEN.icon,\n            content: <Trans id=\"sam.aoechecker.suggestions.badsen.content\">\n                        Using aoe moves when you don't reach the target threshold for it to be a gain is a loss.\n\t\t\t</Trans>,\n            tiers: {\n                1: SEVERITY.MINOR,\n                3: SEVERITY.MEDIUM,\n                5: SEVERITY.MAJOR,\n            },\n            value: this._badSenCasts,\n            why: <Trans id=\"sam.aoechecker.suggestions.badsen.why\">\n                                        You misused sen moves <Plural value={this._badSenCasts} one=\"# time\" other=\"# times\"/> during the fight.\n\t\t\t</Trans>,\n        }));\n        this.suggestions.add(new TieredSuggestion({\n            icon: ACTIONS.FUGA.icon,\n            content: <Trans id=\"sam.aoechecker.suggestions.badgcd.content\">\n                        Using aoe moves when you don't reach the target threshold for it to be a gain is a loss.\n\t\t\t</Trans>,\n            tiers: {\n                1: SEVERITY.MINOR,\n                3: SEVERITY.MEDIUM,\n                5: SEVERITY.MAJOR,\n            },\n            value: this._badAoeGCDs,\n            why: <Trans id=\"sam.aoechecker.suggestions.badgcd.why\">\n                                        You misused aoe GCDs <Plural value={this._badAoeGCDs} one=\"# time\" other=\"# times\"/> during the fight.\n\t\t\t</Trans>,\n        }));\n    }\n}\nAoeChecker.handle = 'aoechecker';\nAoeChecker.title = t('sam.aoechecker.title') `AoeChecker`;\nAoeChecker.dependencies = [\n    'suggestions',\n];\n","import { t } from '@lingui/macro';\nimport { Trans } from '@lingui/react';\nimport React from 'react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport Module from 'parser/core/Module';\nimport { Rule, Requirement } from 'parser/core/modules/Checklist';\nexport default class Buffs extends Module {\n    constructor(...args) {\n        super(...args);\n        this.addHook('complete', this._onComplete);\n    }\n    _onComplete() {\n        this.checklist.add(new Rule({\n            name: <Trans id=\"sam.buffs.checklist.name\"> Keep Shifu and Jinpu up </Trans>,\n            description: <Trans id=\"sam.buffs.description\"> <ActionLink {...ACTIONS.JINPU}/> and <ActionLink {...ACTIONS.SHIFU}/> increases your damage and speed by 13%. Both buffs are key part of Samurai's damage.</Trans>,\n            target: 95,\n            requirements: [\n                new Requirement({\n                    name: <Trans id=\"sam.buffs.checklist.requirement.jinpu.name\"> <ActionLink {...ACTIONS.JINPU}/> uptime </Trans>,\n                    percent: () => this.getUptimePercent(STATUSES.JINPU.id),\n                }),\n                new Requirement({\n                    name: <Trans id=\"sam.buffs.checklist.requirement.shifu.name\"> <ActionLink {...ACTIONS.SHIFU}/> uptime </Trans>,\n                    percent: () => this.getUptimePercent(STATUSES.SHIFU.id),\n                }),\n            ],\n        }));\n    }\n    getUptimePercent(StatusId) {\n        const statusUptime = this.combatants.getStatusUptime((StatusId), this.parser.player.id);\n        const fightUptime = this.parser.fightDuration - this.invuln.getInvulnerableUptime();\n        return (statusUptime / fightUptime) * 100;\n    }\n}\nBuffs.handle = 'buffs';\nBuffs.title = t('sam.buffs.title') `Buffs`;\nBuffs.dependencies = [\n    'checklist',\n    'combatants',\n    'invuln',\n];\n","import { __decorate, __metadata } from \"tslib\";\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport { dependency } from 'parser/core/Module';\nimport Combatants from 'parser/core/modules/Combatants';\nimport CoreCombos from 'parser/core/modules/Combos';\nexport default class Combos extends CoreCombos {\n    checkCombo(combo, event) {\n        // If they've got Meikyo Shisui up, all combos are correct, and nothing combos together\n        if (this.combatants.selected.hasStatus(STATUSES.MEIKYO_SHISUI.id) && (event.ability.guid !== ACTIONS.HAKAZE.id)) {\n            this.fabricateComboEvent(event);\n            return false;\n        }\n        return super.checkCombo(combo, event);\n    }\n}\nCombos.suggestionIcon = ACTIONS.HAKAZE.icon;\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Combatants)\n], Combos.prototype, \"combatants\", void 0);\n","import { t } from '@lingui/macro';\nimport { Trans } from '@lingui/react';\nimport React from 'react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport Module from 'parser/core/Module';\nimport { Rule, Requirement } from 'parser/core/modules/Checklist';\nimport { TieredSuggestion, SEVERITY } from 'parser/core/modules/Suggestions';\nconst STATUS_DURATION = {\n    [STATUSES.HIGANBANA.id]: 60000,\n};\nconst CLIPPING_SEVERITY = {\n    1000: SEVERITY.MINOR,\n    30000: SEVERITY.MEDIUM,\n    60000: SEVERITY.MAJOR,\n};\nexport default class Higanbana extends Module {\n    constructor(...args) {\n        super(...args);\n        this._lastApplication = {};\n        this._clip = {\n            [STATUSES.HIGANBANA.id]: 0,\n        };\n        const filter = {\n            by: 'player',\n            abilityId: [STATUSES.HIGANBANA.id],\n        };\n        this.addHook(['applydebuff', 'refreshdebuff'], filter, this._onDotApply);\n        this.addHook('complete', this._onComplete);\n    }\n    _onDotApply(event) {\n        const statusId = event.ability.guid;\n        // Make sure we're tracking for this target\n        const applicationKey = `${event.targetID}|${event.targetInstance}`;\n        const lastApplication = this._lastApplication[applicationKey] = this._lastApplication[applicationKey] || {};\n        // If it's not been applied yet, or we're rushing, set it and skip out\n        if (!lastApplication[statusId]) {\n            lastApplication[statusId] = event.timestamp;\n            return;\n        }\n        // Base clip calc\n        let clip = STATUS_DURATION[statusId] - (event.timestamp - lastApplication[statusId]);\n        // Remove any untargetable time from the clip - often want to hardcast after an invuln phase, but refresh w/ 3D shortly after.\n        clip -= this.invuln.getUntargetableUptime('all', event.timestamp - STATUS_DURATION[statusId], event.timestamp);\n        // Also remove invuln time in the future that casting later would just push dots into\n        // TODO: This relies on a full set of invuln data ahead of time. Can this be trusted?\n        clip -= this.invuln.getInvulnerableUptime('all', event.timestamp, event.timestamp + STATUS_DURATION[statusId] + clip);\n        // Capping clip at 0 - less than that is downtime, which is handled by the checklist requirement\n        this._clip[statusId] += Math.max(0, clip);\n        lastApplication[statusId] = event.timestamp;\n    }\n    _onComplete() {\n        // Checklist rule for dot uptime\n        this.checklist.add(new Rule({\n            name: <Trans id=\"sam.higanbana.checklist.name\"> Keep <ActionLink {...ACTIONS.HIGANBANA}/> up </Trans>,\n            description: <Trans id=\"sam.higanbana.checklist.description\">\n\t\t\tAs a Samurai, <ActionLink {...ACTIONS.HIGANBANA}/> is a significant portion of your sustained damage, and is required to kept up for as much as possible, for the best damage output.\n\t\t\t</Trans>,\n            target: 90,\n            requirements: [\n                new Requirement({\n                    name: <Trans id=\"sam.higanbana.checklist.requirement\"><ActionLink {...ACTIONS.HIGANBANA}/> uptime </Trans>,\n                    percent: () => this.getDotUptimePercent(STATUSES.HIGANBANA.id),\n                }),\n            ],\n        }));\n        // Suggestion for DoT clipping\n        const maxClip = Math.max(...Object.values(this._clip));\n        this.suggestions.add(new TieredSuggestion({\n            icon: ACTIONS.HIGANBANA.icon,\n            content: <Trans id=\"sam.higanbana.suggestion.content\">\n\t\t\t\tAvoid refreshing <ActionLink {...ACTIONS.HIGANBANA}/> significantly before it expires.\n\t\t\t</Trans>,\n            why: <Trans id=\"sam.higanbana.suggestion.why\">\n\t\t\t\t{this.parser.formatDuration(this._clip[STATUSES.HIGANBANA.id])} of {STATUSES.HIGANBANA.name} lost to early refreshes.\n\t\t\t</Trans>,\n            tiers: CLIPPING_SEVERITY,\n            value: maxClip,\n        }));\n    }\n    getDotUptimePercent(statusId) {\n        const statusUptime = this.enemies.getStatusUptime(statusId);\n        const fightDuration = this.parser.fightDuration - this.invuln.getInvulnerableUptime();\n        return (statusUptime / fightDuration) * 100;\n    }\n}\nHiganbana.handle = 'higanbana';\nHiganbana.title = t('sam.higanbana.title') `Higanbana`;\nHiganbana.dependencies = [\n    'checklist',\n    'enemies',\n    'invuln',\n    'suggestions',\n];\n","import { t } from '@lingui/macro';\nimport { Trans, Plural } from '@lingui/react';\nimport React from 'react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport Module from 'parser/core/Module';\nimport { TieredSuggestion, SEVERITY } from 'parser/core/modules/Suggestions';\nconst KAITEN_GCDS = {\n    //These actions are bad to use kaiten under, however end of fight rushing may cause exceptions\n    [ACTIONS.HAKAZE.id]: 1,\n    [ACTIONS.JINPU.id]: 1,\n    [ACTIONS.ENPI.id]: 1,\n    [ACTIONS.SHIFU.id]: 1,\n    [ACTIONS.FUGA.id]: 1,\n    [ACTIONS.GEKKO.id]: 1,\n    [ACTIONS.MANGETSU.id]: 1,\n    [ACTIONS.KASHA.id]: 1,\n    [ACTIONS.OKA.id]: 1,\n    [ACTIONS.YUKIKAZE.id]: 1,\n    [ACTIONS.HIGANBANA.id]: 0,\n    [ACTIONS.TENKA_GOKEN.id]: 0,\n    [ACTIONS.MIDARE_SETSUGEKKA.id]: 0,\n};\nexport default class Kaiten extends Module {\n    constructor(...args) {\n        super(...args);\n        this._badKaitenCasts = 0;\n        this._missedKaitenCasts = 0;\n        this.addHook('cast', { by: 'player' }, this._onCast);\n        this.addHook('complete', this._onComplete);\n    }\n    _onCast(event) {\n        const abilityId = event.ability.guid;\n        if (this.combatants.selected.hasStatus(STATUSES.KAITEN.id) && KAITEN_GCDS.hasOwnProperty(abilityId)) {\n            this._badKaitenCasts += KAITEN_GCDS[abilityId]; // Sen moves won't increment this, everything else will\n        }\n        if ((abilityId === ACTIONS.MIDARE_SETSUGEKKA.id || abilityId === ACTIONS.HIGANBANA.id) && !this.combatants.selected.hasStatus(STATUSES.KAITEN.id)) {\n            this._missedKaitenCasts += 1; //Everytime Midare or Higan is used without kaiten, this will go up by 1.\n        }\n    }\n    _onComplete() {\n        if (this._badKaitenCasts > 0) {\n            this.suggestions.add(new TieredSuggestion({\n                icon: ACTIONS.HISSATSU_KAITEN.icon,\n                content: <Trans id=\"sam.kaiten.suggestion.badkaiten.content\">\n\t\t\t\tAvoid using <ActionLink {...ACTIONS.HISSATSU_KAITEN}/> on any GCDs besides <ActionLink {...ACTIONS.IAIJUTSU}/> moves. These actions are worth it because of the potency gain per kenki spent.\n\t\t\t\t</Trans>,\n                tiers: {\n                    1: SEVERITY.MINOR,\n                    3: SEVERITY.MEDIUM,\n                    5: SEVERITY.MAJOR,\n                },\n                why: <Trans id=\"sam.suggestion.badkaiten.why\">\n\t\t\t\t\tYou used Kaiten  <Plural value={this._badKaitenCasts} one=\"# time\" other=\"# times\"/> on non-optimal GCDs.\n\t\t\t\t</Trans>,\n                value: this._badKaitenCasts,\n            }));\n        }\n        if (this._missedKaitenCasts > 0) {\n            this.suggestions.add(new TieredSuggestion({\n                icon: ACTIONS.HISSATSU_KAITEN.icon,\n                content: <Trans id=\"sam.kaiten.suggestion.missedkaiten.content\">\n                                Always use <ActionLink {...ACTIONS.HISSATSU_KAITEN}/> on <ActionLink {...ACTIONS.MIDARE_SETSUGEKKA}/> and <ActionLink {...ACTIONS.HIGANBANA}/>. The gain on these actions from kaiten is too great to miss.\n\t\t\t\t</Trans>,\n                tiers: {\n                    1: SEVERITY.MINOR,\n                    3: SEVERITY.MEDIUM,\n                    5: SEVERITY.MAJOR,\n                },\n                why: <Trans id=\"sam.kaiten.suggestion.missedkaiten.why\">\n                                        You failed to Kaiten <Plural value={this._missedKaitenCasts} one=\"# time\" other=\"# times\"/> on either  on <ActionLink {...ACTIONS.MIDARE_SETSUGEKKA}/> and/or <ActionLink {...ACTIONS.HIGANBANA}/>\n\t\t\t\t</Trans>,\n                value: this._missedKaitenCasts,\n            }));\n        }\n    }\n}\nKaiten.handle = 'kaiten';\nKaiten.title = t('sam.kaiten.title') `Kaiten`;\nKaiten.dependencies = [\n    'combatants',\n    'suggestions',\n];\n","import { t } from '@lingui/macro';\nimport { Trans, Plural } from '@lingui/react';\nimport Color from 'color';\nimport _ from 'lodash';\nimport React from 'react';\nimport TimeLineChart from 'components/ui/TimeLineChart';\nimport ACTIONS from 'data/ACTIONS';\nimport JOBS from 'data/JOBS';\nimport STATUSES from 'data/STATUSES';\nimport Module from 'parser/core/Module';\nimport { ActionLink } from 'components/ui/DbLink';\nimport { TieredSuggestion, SEVERITY } from 'parser/core/modules/Suggestions';\nimport kenkiIcon from './kenki.png';\nimport styles from './Kenki.module.css';\nconst MAX_KENKI = 100;\nconst KENKI_ACTIONS = {\n    // single target\n    [ACTIONS.HAKAZE.id]: { cast: 5 },\n    [ACTIONS.JINPU.id]: { combo: 5 },\n    [ACTIONS.SHIFU.id]: { combo: 5 },\n    [ACTIONS.YUKIKAZE.id]: { combo: 10 },\n    [ACTIONS.GEKKO.id]: { combo: 5, positional: 5 },\n    [ACTIONS.KASHA.id]: { combo: 5, positional: 5 },\n    // aoe\n    [ACTIONS.FUGA.id]: { cast: 5 },\n    [ACTIONS.MANGETSU.id]: { combo: 10 },\n    [ACTIONS.OKA.id]: { combo: 10 },\n    // ranged\n    [ACTIONS.ENPI.id]: { cast: 10 },\n    // oGCD\n    [ACTIONS.IKISHOTEN.id]: { cast: 50 },\n    // spenders\n    [ACTIONS.HISSATSU_GYOTEN.id]: { cast: -10 },\n    [ACTIONS.HISSATSU_YATEN.id]: { cast: -10 },\n    [ACTIONS.HISSATSU_SEIGAN.id]: { cast: -15 },\n    [ACTIONS.HISSATSU_KAITEN.id]: { cast: -20 },\n    [ACTIONS.HISSATSU_SHINTEN.id]: { cast: -25 },\n    [ACTIONS.HISSATSU_KYUTEN.id]: { cast: -25 },\n    [ACTIONS.HISSATSU_GUREN.id]: { cast: -50 },\n    [ACTIONS.HISSATSU_SENEI.id]: { cast: -50 },\n};\nconst KENKI_PER_MEDITATE_TICK = 10;\nconst MEDITATE_TICK_FREQUENCY = 3000;\nconst MAX_MEDITATE_TICKS = 5;\nexport default class Kenki extends Module {\n    constructor(...args) {\n        super(...args);\n        // Kenki\n        this._kenki = {\n            min: 0,\n            max: 0,\n        };\n        this._history = {\n            min: [],\n            max: [],\n        };\n        this._wasted = {\n            min: 0,\n            max: 0,\n            transfer: 0,\n        };\n        //Aoe flags\n        this._badGuren = 0;\n        // Kenki actions\n        this.addHook(['cast', 'combo'], { by: 'player', abilityId: Object.keys(KENKI_ACTIONS).map(Number) }, this._onAction);\n        // Meditate\n        const filter = { by: 'player', abilityId: STATUSES.MEDITATE.id };\n        this.addHook('applybuff', filter, this._onApplyMeditate);\n        this.addHook('removebuff', filter, this._onRemoveMeditate);\n        // Death just flat out resets everything. Stop dying.\n        this.addHook('death', { to: 'player' }, () => this._set(0, 0));\n        // Misc\n        this.addHook('complete', this._onComplete);\n    }\n    /**\n     * Modify kenki value, optionally including a potential gain\n     * @param {number} known Known gained kenki\n     * @param {number} [potential=0] Potential gained kenki\n     */\n    modify(known, potential = 0) {\n        const min = this._kenki.min + known;\n        const max = this._kenki.max + known + potential;\n        this._set(min, max);\n        // _kenki's been clamped, anything above it is wastage\n        this._wasted.min += Math.max(0, min - this._kenki.min);\n        const newMaxWaste = Math.max(0, max - this._kenki.max);\n        this._wasted.max += newMaxWaste;\n        this._wasted.transfer += newMaxWaste;\n        // Potential increases muddy the ability to track waste when they hit 0 - remove it from the bank\n        this._wasted.transfer = Math.max(0, this._wasted.transfer - potential);\n        // If the minimum went sub-0, we've reduced the possible kenki range, adjust the waste within the transfer range\n        if (min < 0) {\n            this._wasted.min += Math.min(this._wasted.transfer, -min);\n            this._wasted.transfer = Math.max(0, this._wasted.transfer + min);\n        }\n    }\n    _set(min, max) {\n        this._kenki = {\n            min: _.clamp(min, 0, MAX_KENKI),\n            max: _.clamp(max, 0, MAX_KENKI),\n        };\n        const t = this.parser.currentTimestamp - this.parser.fight.start_time;\n        this._history.min.push({ t, y: this._kenki.min });\n        this._history.max.push({ t, y: this._kenki.max });\n    }\n    _onAction(event) {\n        const action = KENKI_ACTIONS[event.ability.guid];\n        if (!action | !action[event.type]) {\n            return;\n        }\n        // We can't track positionals, so passing the positional kenki values through as a potential gain\n        this.modify(action[event.type], action.positional);\n    }\n    _onApplyMeditate(event) {\n        this.meditateStart = event.timestamp;\n    }\n    _onRemoveMeditate(event) {\n        const diff = event.timestamp - this.meditateStart;\n        const ticks = Math.min(Math.floor(diff / MEDITATE_TICK_FREQUENCY), MAX_MEDITATE_TICKS);\n        // Ticks could occur at any point in the duration (server tick) - add an extra potential tick if they missed one so we don't under-guess\n        this.modify(ticks * KENKI_PER_MEDITATE_TICK, ticks === MAX_MEDITATE_TICKS ? 0 : KENKI_PER_MEDITATE_TICK);\n    }\n    _onComplete() {\n        const { min, max } = this._wasted;\n        this.suggestions.add(new TieredSuggestion({\n            icon: kenkiIcon,\n            content: <Trans id=\"sam.kenki.suggestion.content\">Kenki is your primary resource, and a significant source of damage. Avoid wasting potential kenki by using it before you hit the maximum of {MAX_KENKI}.</Trans>,\n            why: <Trans id=\"sam.kenki.suggestion.why\">You wasted between {min} and {max} kenki.</Trans>,\n            value: (min + max) / 2,\n            tiers: {\n                5: SEVERITY.MINOR,\n                20: SEVERITY.MEDIUM,\n                35: SEVERITY.MAJOR,\n            },\n        }));\n        this.suggestions.add(new TieredSuggestion({\n            icon: ACTIONS.HISSATSU_GUREN.icon,\n            content: <Trans id=\"sam.kenki.suggestion.badguren.content\"> Avoid using <ActionLink {...ACTIONS.HISSATSU_GUREN}/> when you only have one target, as <ActionLink {...ACTIONS.HISSATSU_SENEI}/> has higher potency and can be used for the same cost. </Trans>,\n            why: <Trans id=\"sam.kenki.suggestion.badguren.why\"><Plural value={this._badGurens} one=\"# use\" other=\"# uses\"/> of Guren hit a single target</Trans>,\n            value: this._badGurens,\n            tiers: {\n                1: SEVERITY.MEDIUM,\n                2: SEVERITY.MAJOR,\n            },\n        }));\n    }\n    output() {\n        const sam = Color(JOBS.SAMURAI.colour);\n        // Disabling magic numbers for the chart, 'cus it's a chart\n        /* eslint-disable no-magic-numbers */\n        const data = {\n            datasets: [{\n                    label: 'Minimum',\n                    data: this._history.min,\n                    steppedLine: true,\n                    fill: false,\n                    borderColor: 'transparent',\n                    pointRadius: 0,\n                    pointHitRadius: 10,\n                }, {\n                    label: 'Maximum',\n                    data: this._history.max,\n                    steppedLine: true,\n                    backgroundColor: sam.fade(0.5),\n                    borderColor: sam.fade(0.2),\n                    fill: '-1',\n                    pointRadius: 0,\n                    pointHitRadius: 10,\n                }],\n        };\n        /* eslint-enable no-magic-numbers */\n        return <>\n\t\t\t<span className={styles.helpText}>\n\t\t\t\tThe visible area represents possible kenki values if positionals were missed.\n\t\t\t</span>\n\t\t\t<div>\n\t\t\t\t<TimeLineChart data={data} options={{\n            legend: false,\n            tooltips: {\n                mode: 'index',\n                displayColors: false,\n            },\n        }}/>\n\t\t\t</div>\n\t\t</>;\n    }\n}\nKenki.handle = 'kenki';\nKenki.title = t('sam.kenki.title') `Kenki`;\nKenki.dependencies = [\n    'suggestions',\n];\n","import { __decorate, __metadata } from \"tslib\";\nimport { Trans } from '@lingui/react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport _ from 'lodash';\nimport Module, { dependency } from 'parser/core/Module';\nimport Suggestions, { SEVERITY, TieredSuggestion } from 'parser/core/modules/Suggestions';\nimport React from 'react';\nimport Kenki from './Kenki';\nvar SEN;\n(function (SEN) {\n    SEN[\"SETSU\"] = \"Setsu\";\n    SEN[\"GETSU\"] = \"Getsu\";\n    SEN[\"KA\"] = \"Ka\";\n})(SEN || (SEN = {}));\nconst SEN_ACTIONS = {\n    [ACTIONS.YUKIKAZE.id]: SEN.SETSU,\n    [ACTIONS.GEKKO.id]: SEN.GETSU,\n    [ACTIONS.MANGETSU.id]: SEN.GETSU,\n    [ACTIONS.KASHA.id]: SEN.KA,\n    [ACTIONS.OKA.id]: SEN.KA,\n};\nconst IAIJUTSU = [\n    ACTIONS.HIGANBANA.id,\n    ACTIONS.TENKA_GOKEN.id,\n    ACTIONS.MIDARE_SETSUGEKKA.id,\n];\nconst TSUBAME = [\n    ACTIONS.KAESHI_HIGANBANA.id,\n    ACTIONS.KAESHI_GOKEN.id,\n    ACTIONS.KAESHI_SETSUGEKKA.id,\n];\nconst KENKI_PER_SEN = 10;\nexport default class Sen extends Module {\n    constructor() {\n        super(...arguments);\n        this.sen = {};\n        this.allowoverwrite = false;\n        this.wasted = 0;\n    }\n    init() {\n        // Track sen gain\n        this.addHook('cast', { by: 'player', abilityId: Object.keys(SEN_ACTIONS).map(Number) }, this.onAction);\n        // Death, as well as all Iaijutsu, remove all available sen\n        this.addHook('cast', { by: 'player', abilityId: IAIJUTSU }, this.remove);\n        this.addHook('cast', { by: 'player', abilityId: ACTIONS.HAGAKURE.id }, this.onHagakure);\n        this.addHook('death', { to: 'player' }, this.remove);\n        // Suggestion time~\n        this.addHook('complete', this.onComplete);\n    }\n    onAction(event) {\n        const sen = SEN_ACTIONS[event.ability.guid];\n        if (this.sen[sen]) {\n            this.wasted++;\n        }\n        this.sen[sen] = true;\n    }\n    remove() {\n        this.sen = _.mapValues(this.sen, () => false);\n    }\n    onHagakure() {\n        // work out how many sen are currently active\n        const activeSen = Object.values(this.sen)\n            .filter(active => active)\n            .length;\n        // add new kenki, wipe the sen\n        this.kenki.modify(activeSen * KENKI_PER_SEN);\n        this.remove();\n    }\n    onComplete() {\n        this.suggestions.add(new TieredSuggestion({\n            icon: ACTIONS.MEIKYO_SHISUI.icon,\n            content: <Trans id=\"sam.sen.suggestion.content\">\n\t\t\t\tYou used <ActionLink {...ACTIONS.GEKKO}/>, <ActionLink {...ACTIONS.KASHA}/>, or <ActionLink {...ACTIONS.YUKIKAZE}/> at a time when you already had that sen, thus wasting a combo because it did not give you sen.\n\t\t\t</Trans>,\n            tiers: {\n                1: SEVERITY.MINOR,\n                2: SEVERITY.MEDIUM,\n                3: SEVERITY.MAJOR,\n            },\n            value: this.wasted,\n            why: <Trans id=\"sam.sen.suggestion.why\">You wasted {this.wasted} sen.</Trans>,\n        }));\n    }\n}\nSen.handle = 'sen';\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], Sen.prototype, \"suggestions\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Kenki)\n], Sen.prototype, \"kenki\", void 0);\n","import CoreSpeedmod from 'parser/core/modules/Speedmod';\nimport STATUSES from 'data/STATUSES';\nexport default class Speedmod extends CoreSpeedmod {\n    constructor(...args) {\n        super(...args);\n        this.SPEED_BUFF_STATUS_IDS.push(STATUSES.SHIFU.id);\n    }\n}\n","import { t, Trans } from '@lingui/macro';\nimport React from 'react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport { BuffWindowModule } from 'parser/core/modules/BuffWindow';\nimport { SEVERITY } from 'parser/core/modules/Suggestions';\n// Set for stuff to ignore TODO: revisit this and get it to show iaijutsu properly\n// const IGNORE_THIS = new Set([ACTIONS.MIDARE_SETSUGEKKA.id, ACTIONS.TENKA_GOKEN.id, ACTIONS.HIGANBANA.id, ACTIONS.KAESHI_SETSUGEKKA.id, ACTIONS.KAESHI_GOKEN.id, ACTIONS.KAESHI_HIGANBANA])\nconst ONLY_SHOW = new Set([ACTIONS.HAKAZE.id, ACTIONS.JINPU.id, ACTIONS.ENPI.id, ACTIONS.SHIFU.id, ACTIONS.FUGA.id, ACTIONS.GEKKO.id, ACTIONS.MANGETSU.id, ACTIONS.KASHA.id, ACTIONS.OKA.id, ACTIONS.YUKIKAZE.id]);\nexport default class MeikyoShisui extends BuffWindowModule {\n    constructor() {\n        super(...arguments);\n        this.buffAction = ACTIONS.MEIKYO_SHISUI;\n        this.buffStatus = STATUSES.MEIKYO_SHISUI;\n        this.expectedGCDs = {\n            expectedPerWindow: 3,\n            suggestionContent: <Trans id=\"sam.ms.suggestions.missedgcd.content\">\n\t\t\tTry to land 3 GCDs during every <ActionLink {...ACTIONS.MEIKYO_SHISUI}/> window. </Trans>,\n            severityTiers: {\n                1: SEVERITY.MEDIUM,\n                2: SEVERITY.MAJOR,\n            },\n        };\n        this.requiredGCDs = {\n            icon: ACTIONS.MEIKYO_SHISUI.icon,\n            actions: [\n                // Single Target\n                ACTIONS.GEKKO,\n                ACTIONS.KASHA,\n                ACTIONS.YUKIKAZE,\n                // AoE\n                ACTIONS.OKA,\n                ACTIONS.MANGETSU,\n            ],\n            suggestionContent: <Trans id=\"sam.ms.suggestions.badgcd.content\">\n\t\t\tGCDs used during <ActionLink {...ACTIONS.MEIKYO_SHISUI}/> should be limited to sen building skills. </Trans>,\n            severityTiers: {\n                1: SEVERITY.MAJOR,\n            },\n        };\n    }\n    // override for consider action.\n    considerAction(action) {\n        if (ONLY_SHOW.has(action.id)) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n}\nMeikyoShisui.handle = 'Meikyo';\nMeikyoShisui.title = t('sam.ms.title') `Meikyo Shisui Windows`;\n","import { t } from '@lingui/macro';\nimport { ActionLink } from 'components/ui/DbLink';\nimport React from 'react';\nimport { Trans, Plural } from '@lingui/react';\nimport ACTIONS from 'data/ACTIONS';\nimport STATUSES from 'data/STATUSES';\nimport Module from 'parser/core/Module';\nimport { Suggestion, SEVERITY } from 'parser/core/modules/Suggestions';\nexport default class ThirdEye extends Module {\n    constructor(...args) {\n        super(...args);\n        this._thirdEyes = 0; //this is the amount of times third eye is used\n        this._openEyes = 0; //this is the amount of times third eye was proc'ed\n        this._seiganEyes = 0; //this is the amount of times they used seigan\n        this._badEyes = 0; //this is the amount of merciful eyes\n        this.addHook('cast', { by: 'player', abilityId: [ACTIONS.MERCIFUL_EYES.id] }, this._onBadSpend);\n        this.addHook('cast', { by: 'player', abilityId: [ACTIONS.HISSATSU_SEIGAN.id] }, this._onSpend);\n        this.addHook('cast', { by: 'player', abilityId: [ACTIONS.THIRD_EYE.id] }, this._onEye);\n        this.addHook('applybuff', {\n            to: 'player',\n            abilityId: [STATUSES.EYES_OPEN.id]\n        }, this._onGain);\n        this.addHook('complete', this._onComplete);\n    }\n    _onEye() {\n        this._thirdEyes += 1;\n    }\n    _onSpend() {\n        this._seiganEyes += 1; // increase usage by 1\n    }\n    _onBadSpend() {\n        this._badEyes += 1;\n    }\n    _onGain() {\n        this._openEyes += 1; //enter the iris, increase by 1 per time a player gains the status\n    }\n    _onComplete() {\n        const unopenedEyes = this._thirdEyes - this._openEyes;\n        const unspentEyes = this._openEyes - (this._badEyes + this._seiganEyes);\n        if (this._thirdEyes === 0) {\n            this.suggestions.add(new Suggestion({\n                icon: ACTIONS.THIRD_EYE.icon,\n                content: <Trans id=\"sam.thirdeye.suggestion.useyourdamnthirdeye.content\"> <ActionLink {...ACTIONS.THIRD_EYE}/> gives you 10% less damage taken from an incoming attack and gives you access to <ActionLink {...ACTIONS.HISSATSU_SEIGAN}/> and <ActionLink {...ACTIONS.MERCIFUL_EYES}/>. You should try to use Third Eye as much as possible to reduce the damage you take. </Trans>,\n                severity: SEVERITY.MEDIUM,\n                why: <Trans id=\"sam.thirdeye.suggestion.useyourdamnthirdeye.why\"> You did not use third eye at all over the course of the fight. Use it on unavoidable raid wide damage at a minimum. </Trans>,\n            }));\n        }\n        if (unopenedEyes > 0) {\n            this.suggestions.add(new Suggestion({\n                icon: ACTIONS.THIRD_EYE.icon,\n                content: <Trans id=\"sam.thirdeye.suggestion.unopenedeyes.content\"> Avoid using <ActionLink {...ACTIONS.THIRD_EYE}/>  when its guarenteed not to proc, causing an unnecessary weave and risking the chance of it potentially being on cooldown for unavoidable damage </Trans>,\n                severity: SEVERITY.MINOR,\n                why: <Trans id=\"sam.thirdeye.suggestion.unopenedeyes.why\"> {unopenedEyes} of your Third Eye casts did not proc. </Trans>,\n            }));\n        }\n        if (unspentEyes > 0) {\n            this.suggestions.add(new Suggestion({\n                icon: ACTIONS.HISSATSU_SEIGAN.icon,\n                content: <Trans id=\"sam.thirdeye.suggestion.unspenteyes.content\"> Never let a proc go to waste, spend your procs from <ActionLink {...ACTIONS.THIRD_EYE}/> on <ActionLink {...ACTIONS.HISSATSU_SEIGAN}/> for a small dps gain.  </Trans>,\n                severity: SEVERITY.MINOR,\n                why: <Trans id=\"sam.thirdeye.suggestion.unspenteyes.why\"> {unspentEyes} of your procs were not spent. </Trans>,\n            }));\n        }\n        if (this._badEyes > 1) {\n            this.suggestions.add(new Suggestion({\n                icon: ACTIONS.MERCIFUL_EYES.icon,\n                content: <Trans id=\"sam.thirdeye.suggestion.badeyes.content\"> <ActionLink {...ACTIONS.MERCIFUL_EYES}/>'s heal is not worth the damage loss of not using <ActionLink {...ACTIONS.HISSATSU_SEIGAN}/>. </Trans>,\n                severity: SEVERITY.MINOR,\n                why: <Trans id=\"sam.thirdeye.suggestion.badeyes.why\"> You used <ActionLink {...ACTIONS.MERCIFUL_EYES}/> <Plural value={this._badEyes} one=\"# time\" other=\"# times\"/> during the fight. </Trans>,\n            }));\n        }\n    }\n}\nThirdEye.handle = 'thirdEye';\nThirdEye.title = t('sam.thirdeye.title') `Third Eye`;\nThirdEye.dependencies = [\n    'suggestions',\n];\n","import { t } from '@lingui/macro';\nimport { Trans } from '@lingui/react';\nimport React from 'react';\nimport { ActionLink } from 'components/ui/DbLink';\nimport ACTIONS from 'data/ACTIONS';\nimport Module from 'parser/core/Module';\nimport { TieredSuggestion, Suggestion, SEVERITY } from 'parser/core/modules/Suggestions';\nexport default class Tsubame extends Module {\n    constructor(...args) {\n        super(...args);\n        this._kaeshiFailures = 0; //amount of bad kaeshi moves\n        this._kaeshiMidare = 0; //amount of times kaeshi was a double midare\n        this.addHook('cast', { by: 'player', abilityId: [ACTIONS.KAESHI_HIGANBANA.id, ACTIONS.KAESHI_GOKEN.id] }, this._onBadTsubame);\n        this.addHook('cast', { by: 'player', abilityId: [ACTIONS.KAESHI_SETSUGEKKA.id] }, this._onDoubleMidare);\n        this.addHook('complete', this._onComplete);\n    }\n    _onBadTsubame() {\n        this._kaeshiFailures += 1;\n    }\n    _onDoubleMidare() {\n        this._kaeshiMidare += 1;\n    }\n    _onComplete() {\n        const totalUses = this._kaeshiFailures + this._kaeshiMidare;\n        const badUses = this._kaeshiFailures;\n        if (totalUses === 0) {\n            this.suggestions.add(new Suggestion({\n                icon: ACTIONS.TSUBAME_GAESHI.icon,\n                content: <Trans id=\"sam.tsubame.suggestion.notsubame.content\"> <ActionLink {...ACTIONS.TSUBAME_GAESHI}/> allows you to repeat your Iaijustu skills right after you use them. To not use this skill is to deny yourself 2 <ActionLink {...ACTIONS.MIDARE_SETSUGEKKA}/> for the price of one. </Trans>,\n                severity: SEVERITY.MAJOR,\n                why: <Trans id=\"sam.tsubame.suggestion.notsubame.why\"> You did not use <ActionLink {...ACTIONS.TSUBAME_GAESHI}/> at all. </Trans>,\n            }));\n        }\n        this.suggestions.add(new TieredSuggestion({\n            icon: ACTIONS.TSUBAME_GAESHI.icon,\n            content: <Trans id=\"sam.tsubame.suggestion.badtsubame.content\"> You used <ActionLink {...ACTIONS.TSUBAME_GAESHI}/> incorrectly. The skill should only be used to get more <ActionLink {...ACTIONS.MIDARE_SETSUGEKKA}/>. </Trans>,\n            tiers: {\n                1: SEVERITY.MEDIUM,\n                2: SEVERITY.MAJOR,\n            },\n            why: <Trans id=\"sam.tsubame.suggestion.badtsubame.why\"> You used <ActionLink {...ACTIONS.TSUBAME_GAESHI}/> on the wrong sen skills {badUses} times over the course of the fight </Trans>,\n            value: this._badUses,\n        }));\n    }\n}\nTsubame.handle = 'tsubame';\nTsubame.title = t('sam.tsubame.title') `Tsubame`;\nTsubame.dependencies = [\n    'suggestions',\n];\n","import ACTIONS from 'data/ACTIONS';\nimport { CooldownDowntime } from 'parser/core/modules/CooldownDowntime';\n// GCD timing: 2.5 seconds for first two GCDs (to get Shifu up), 2.18 seconds for all others.\n// meikyo is used after the 7th gcd\nconst FIRSTUSEOFFSET_MEIKYO = 15900;\n// tsubame is used after the first midare, on the 11th GCD\nconst FIRSTUSEOFFSET_TSUBAME = 24620;\n// Time that samurais have deemed ok for a OGCD to be down\nconst DEFAULT_ALLOWED_DOWNTIME = 2180;\nconst MEIKYO_ALLOWED_DOWNTIME = 4360;\nexport default class OGCDDowntime extends CooldownDowntime {\n    constructor() {\n        super(...arguments);\n        this.defaultAllowedAverageDowntime = DEFAULT_ALLOWED_DOWNTIME;\n        this.trackedCds = [\n            {\n                cooldowns: [ACTIONS.MEIKYO_SHISUI],\n                firstUseOffset: FIRSTUSEOFFSET_MEIKYO,\n                allowedAverageDowntime: MEIKYO_ALLOWED_DOWNTIME,\n            },\n            {\n                cooldowns: [\n                    ACTIONS.KAESHI_SETSUGEKKA,\n                    ACTIONS.KAESHI_GOKEN,\n                    ACTIONS.KAESHI_HIGANBANA,\n                ],\n                firstUseOffset: FIRSTUSEOFFSET_TSUBAME,\n            },\n        ];\n    }\n}\n","import { __decorate, __metadata } from \"tslib\";\nimport { t } from '@lingui/macro';\nimport { Trans } from '@lingui/react';\nimport Color from 'color';\nimport React, { Fragment } from 'react';\nimport { Accordion } from 'semantic-ui-react';\nimport STATUSES from 'data/STATUSES';\nimport { ActionLink } from 'components/ui/DbLink';\nimport TimeLineChart from 'components/ui/TimeLineChart';\nimport ACTIONS from 'data/ACTIONS';\nimport JOBS from 'data/JOBS';\nimport Module, { dependency, DISPLAY_MODE } from 'parser/core/Module';\nimport Checklist, { Requirement, Rule } from 'parser/core/modules/Checklist';\nimport Combatants from 'parser/core/modules/Combatants';\nimport Suggestions from 'parser/core/modules/Suggestions';\nconst GENERATORS = {\n    [ACTIONS.HIGANBANA.id]: 1,\n    [ACTIONS.KAESHI_HIGANBANA.id]: 1,\n    [ACTIONS.TENKA_GOKEN.id]: 1,\n    [ACTIONS.KAESHI_GOKEN.id]: 1,\n    [ACTIONS.MIDARE_SETSUGEKKA.id]: 1,\n    [ACTIONS.KAESHI_SETSUGEKKA.id]: 1,\n};\nconst SPENDERS = {\n    [ACTIONS.SHOHA.id]: 3,\n};\nconst MAX_STACKS = 3;\nexport default class Shoha extends Module {\n    constructor() {\n        super(...arguments);\n        this.stacks = 0;\n        this.shohaUses = 0;\n        this.stackHistory = [];\n        this.wasteBySource = {\n            [ACTIONS.HIGANBANA.id]: 0,\n            [ACTIONS.KAESHI_HIGANBANA.id]: 0,\n            [ACTIONS.TENKA_GOKEN.id]: 0,\n            [ACTIONS.KAESHI_GOKEN.id]: 0,\n            [ACTIONS.MIDARE_SETSUGEKKA.id]: 0,\n            [ACTIONS.KAESHI_SETSUGEKKA.id]: 0,\n            [ACTIONS.RAISE.id]: 0,\n        };\n        this.leftoverStacks = 0;\n        this.totalGeneratedStacks = 0; // Keep track of the total amount of generated stacks over the fight\n    }\n    init() {\n        this.addHook('init', this.pushToHistory);\n        this.addHook('cast', {\n            by: 'player',\n            abilityId: Object.keys(GENERATORS).map(Number),\n        }, this.onGenerate);\n        this.addHook('cast', {\n            by: 'player',\n            abilityId: Object.keys(SPENDERS).map(Number),\n        }, this.onSpend);\n        this.addEventHook([\n            'applybuff', 'applybuffstack'\n        ], {\n            to: 'player',\n            abilityId: STATUSES.MEDITATION.id,\n        }, this.onMeditateGain);\n        this.addHook('death', { to: 'player' }, this.onDeath);\n        this.addHook('complete', this.onComplete);\n    }\n    onGenerate(event) {\n        if (this.stacks === MAX_STACKS) {\n            const abilityId = event.ability.guid;\n            const generatedStacks = GENERATORS[abilityId];\n            this.addWaste(generatedStacks, abilityId);\n        }\n    }\n    // the previous comment was a lie: This is for ALL meditation gains\n    onMeditateGain() {\n        this.stacks++;\n        this.totalGeneratedStacks++;\n        // just a safety net\n        if (this.stacks > MAX_STACKS) {\n            this.stacks = MAX_STACKS;\n        }\n        this.pushToHistory();\n    }\n    addWaste(generatedStacks, abilityId) {\n        this.stacks += generatedStacks;\n        this.totalGeneratedStacks += generatedStacks;\n        if (this.stacks > MAX_STACKS) {\n            const waste = this.stacks - MAX_STACKS;\n            this.wasteBySource[abilityId] += waste;\n            this.stacks = MAX_STACKS;\n        }\n        this.pushToHistory();\n    }\n    onSpend(event) {\n        this.stacks = 0;\n        this.shohaUses++;\n        this.pushToHistory();\n    }\n    onDeath() {\n        this.wasteBySource[ACTIONS.RAISE.id] += this.stacks;\n        this.dumpRemainingResources();\n    }\n    dumpRemainingResources() {\n        this.stacks = 0;\n        this.pushToHistory();\n    }\n    pushToHistory() {\n        const timestamp = this.parser.currentTimestamp - this.parser.fight.start_time;\n        this.stackHistory.push({ t: timestamp, y: this.stacks });\n    }\n    onComplete() {\n        this.dumpRemainingResources();\n        this.checklist.add(new Rule({\n            name: 'Meditation',\n            description: <Trans id=\"sam.shoha.waste.content\">\n\t\t\t\tWasted meditation generation, ending the fight with stacks fully charged, or dying with stacks charged is a\n\t\t\t\tdirect potency loss. Use <ActionLink {...ACTIONS.SHOHA}/> to avoid wasting stacks.\n\t\t\t</Trans>,\n            requirements: [\n                new Requirement({\n                    name: <Trans id=\"sam.shoha.checklist.requirement.waste.name\">\n\t\t\t\t\t\tUse as many of your meditation stacks as possible.\n\t\t\t\t\t</Trans>,\n                    value: this.shohaUses,\n                    target: Math.floor(this.totalGeneratedStacks / MAX_STACKS),\n                }),\n            ],\n        }));\n    }\n    convertWasteMapToTable() {\n        const rows = [\n            this.convertWasteEntryToRow(ACTIONS.HIGANBANA),\n            this.convertWasteEntryToRow(ACTIONS.TENKA_GOKEN),\n            this.convertWasteEntryToRow(ACTIONS.MIDARE_SETSUGEKKA),\n            this.convertWasteEntryToRow(ACTIONS.KAESHI_HIGANBANA),\n            this.convertWasteEntryToRow(ACTIONS.KAESHI_GOKEN),\n            this.convertWasteEntryToRow(ACTIONS.KAESHI_SETSUGEKKA),\n            this.convertWasteEntryToRow(ACTIONS.RAISE),\n        ];\n        return <Fragment key=\"wasteBySource-fragment\">\n\t\t\t<table key=\"wasteBySource-table\">\n\t\t\t\t<tbody key=\"wasteBySource-tbody\">\n\t\t\t\t\t{rows}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</Fragment>;\n    }\n    convertWasteEntryToRow(action) {\n        const actionName = action.name;\n        return <tr key={action.id + '-row'} style={{ margin: 0, padding: 0 }}>\n\t\t\t<td key={action.id + '-name'}><ActionLink name={actionName} {...action}/></td>\n\t\t\t<td key={action.id + '-value'}>{this.wasteBySource[action.id]}</td>\n\t\t</tr>;\n    }\n    output() {\n        const meditationWastePanels = [];\n        meditationWastePanels.push({\n            key: 'key-wastebysource',\n            title: {\n                key: 'title-wastebysource',\n                content: <Trans id=\"sam.shoha.waste.by-source.key\">Meditation Stack Waste By Source</Trans>,\n            },\n            content: {\n                key: 'content-wastebysource',\n                content: this.convertWasteMapToTable(),\n            },\n        });\n        const stackColor = Color(JOBS.SAMURAI.colour);\n        /* tslint:disable:no-magic-numbers */\n        const chartData = {\n            datasets: [\n                {\n                    label: 'Meditation Stacks',\n                    steppedLine: true,\n                    data: this.stackHistory,\n                    backgroundColor: stackColor.fade(0.8),\n                    borderColor: stackColor.fade(0.5),\n                },\n            ],\n        };\n        const chartOptions = {\n            scales: {\n                yAxes: [{\n                        ticks: {\n                            beginAtZero: true,\n                            min: 0,\n                            max: 3,\n                            callback: ((value) => {\n                                if (value % 1 === 0) {\n                                    return value;\n                                }\n                            }),\n                        },\n                    }],\n            },\n        };\n        /* tslint:enable:no-magic-numbers */\n        return <Fragment>\n\t\t\t<TimeLineChart data={chartData} options={chartOptions}/>\n\t\t\t<Accordion exclusive={false} panels={meditationWastePanels} styled fluid/>\n\t\t</Fragment>;\n    }\n}\nShoha.handle = 'shoha';\nShoha.title = t('sam.shoha.title') `Meditation Timeline`;\nShoha.displayMode = DISPLAY_MODE.FULL;\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Checklist)\n], Shoha.prototype, \"checklist\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Suggestions)\n], Shoha.prototype, \"suggestions\", void 0);\n__decorate([\n    dependency,\n    __metadata(\"design:type\", Combatants)\n], Shoha.prototype, \"combatants\", void 0);\n","import CoreStatuses from 'parser/core/modules/Statuses';\nimport STATUSES from 'data/STATUSES';\nexport default class Statuses extends CoreStatuses {\n}\nStatuses.statusesStackMapping = {\n    [STATUSES.EYES_OPEN.id]: STATUSES.THIRD_EYE.id,\n};\n","import AoeChecker from './AoeChecker';\nimport Buffs from './Buffs';\nimport Combos from './Combos';\nimport Higanbana from './Higanbana';\nimport Kaiten from './Kaiten';\nimport Kenki from './Kenki';\nimport Sen from './Sen';\nimport Speedmod from './Speedmod';\nimport Meikyo from './Meikyo';\nimport ThirdEye from './ThirdEye';\nimport Tsubame from './Tsubame';\nimport OGCDDowntime from './OGCDDowntime';\nimport Shoha from './Shoha';\nimport Statuses from './Statuses';\nexport default [\n    AoeChecker,\n    Buffs,\n    Combos,\n    Higanbana,\n    Kaiten,\n    Kenki,\n    Sen,\n    Speedmod,\n    Meikyo,\n    ThirdEye,\n    Tsubame,\n    OGCDDowntime,\n    Shoha,\n    Statuses,\n];\n"],"sourceRoot":""}